<%= pb_rails("background", props: { classname: "background-image", image_url: "https://images.unsplash.com/photo-1528459801416-a9e53bbf4e17?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1000&q=80", padding: "lg" }) do %>
  <%= pb_rails("flex", props: { horizontal: "center", orientation: "column", margin_bottom: "xl" }) do %>
    <%= pb_rails("flex/flex_item") do %>
      <%= pb_rails("title", props: { dark: true, size: 1, text: "Background Kit Image" })%>
    <% end %>
    <%= pb_rails("flex/flex_item", props: { padding: "lg" }) do %>
      <%= pb_rails("card", props: { shadow: "deepest" }) do %>
        We cannot seek achievement for ourselves and forget about progress and prosperity for our community... Our ambitions must be broad enough to include the aspirations and needs of others, for their sakes and for our own.
        -Cesar Chavez
      <% end %>
    <% end %>
  <% end %>
<% end %>


<%= pb_rails("flex", props: { margin_top: "lg" }) do %>
  <%= pb_rails("flex/flex_item", props: {fixed_size: "250px"}) do %>
    <%= pb_rails("select", props: {
    id: "transition-dropdown",
    label: "",
    blank_selection: "Select a Transition...",
    options: [
        {
          value: 'fade',
        },
        {
          value: 'blur',
        },
        {
          value: 'scale',
        },
    ]
    }) %>
  <% end %>
<% end %> 

<script>
    window.addEventListener('DOMContentLoaded', () => {
        const transitionDropdown = document.querySelector("#transition-dropdown")
        var option = ''

        transitionDropdown.addEventListener('change', function() {
          if (this.value === '') {
            (transitionDropdown).className = (transitionDropdown).className + ' _disabled'
          } else {
            (transitionDropdown).removeAttribute("disabled");
            (transitionDropdown).className = (transitionDropdown)
            option = this.value
          }
        });

        const updateTransition = (transition) => {
          const imageTransition = document.querySelector('.background-image')
            imageTransition.classList.remove("fade", "blur", "scale", "lazyloaded")
            imageTransition.classList.add(transition, "lazyload")   
        } 
        (transitionDropdown).addEventListener('change', function() {
          updateTransition(option)
        })
    });
</script>