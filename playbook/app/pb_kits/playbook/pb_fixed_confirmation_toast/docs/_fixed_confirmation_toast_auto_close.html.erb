<%= pb_rails("button", props: { text: "Show Auto Close Toast", variant: "secondary", data: { toast: "#toast-auto-close" } }) %>
<%= pb_rails("button", props: { text: "Show Closeable Auto Close Toast", variant: "secondary", data: { toast: "#toast-auto-close-closeable" } }) %>

<%= pb_rails("fixed_confirmation_toast", props: {
  auto_close: 3000,
  classname: "toast-to-hide",
  id: "toast-auto-close",
  text: "I will disappear in 3 seconds.",
  status: "tip",
  vertical: "top",
  horizontal: "center"
}) %>

<%= pb_rails("fixed_confirmation_toast", props: {
  auto_close: 10000,
  classname: "toast-to-hide",
  closeable: true,
  id: "toast-auto-close-closeable",
  text: "I will disappear in 10 seconds.",
  status: "tip",
  vertical: "top",
  horizontal: "center"
}) %>

<script type="text/javascript">
  const autoCloseToasts = document.querySelectorAll(".toast-to-hide")
  const autoCloseButtons = document.querySelectorAll("button[data-toast]")

  const hideAutoCloseToasts = () => {
    autoCloseToasts.forEach((toast) => {
      toast.style.display = "none"
    })
  }

  hideAutoCloseToasts()

  autoCloseButtons.forEach((button) => {
    button.onclick = () => {
      hideAutoCloseToasts()
      let toast = document.querySelector(button.getAttribute("data-toast"))

      if (toast) {
        toast.style.display = "flex"
      }
    }
  })
</script>
