<%= pb_rails("button", props: { variant:"link", text: "Toggle All", id: "toggle-button-example"}) %>

<%= pb_rails("collapsible", props: { name: "default-example" }) do %>
    <%= pb_rails("collapsible/collapsible_main", props: { padding: "xs", name: "default-main"}) do %>
      <%= pb_rails("body", props: { text: "Main Section"}) %>
    <% end %>
    <%= pb_rails("collapsible/collapsible_content", props: { padding: "md", id:"collapse-toggle-1" }) do %>
      Cras ornare fermentum magna mollis efficitur. Sed vitae nulla vel purus ultrices mollis. Maecenas id nulla id libero faucibus feugiat quis sit amet turpis. In commodo pellentesque risus at fringilla. Integer non interdum leo, non commodo ante. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut mi augue, dignissim at orci vel, egestas aliquam mi. Proin finibus aliquet tempor. Integer cursus, ex quis gravida rhoncus, nisi elit viverra ipsum, non efficitur est ex ac tortor. Praesent vitae odio massa.
    <% end %>
<% end %>
<%= pb_rails("collapsible", props: { name: "default-example-2" }) do %>
    <%= pb_rails("collapsible/collapsible_main", props: { padding: "xs", name: "default-main"}) do %>
      <%= pb_rails("body", props: { text: "Main Section"}) %>
    <% end %>
    <%= pb_rails("collapsible/collapsible_content", props: { padding: "md", id:"collapse-toggle-2" }) do %>
      Cras ornare fermentum magna mollis efficitur. Sed vitae nulla vel purus ultrices mollis. Maecenas id nulla id libero faucibus feugiat quis sit amet turpis. In commodo pellentesque risus at fringilla. Integer non interdum leo, non commodo ante. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut mi augue, dignissim at orci vel, egestas aliquam mi. Proin finibus aliquet tempor. Integer cursus, ex quis gravida rhoncus, nisi elit viverra ipsum, non efficitur est ex ac tortor. Praesent vitae odio massa.
    <% end %>
<% end %>
<%= pb_rails("collapsible", props: { name: "default-example-3" }) do %>
    <%= pb_rails("collapsible/collapsible_main", props: { padding: "xs", name: "default-main"}) do %>
      <%= pb_rails("body", props: { text: "Main Section"}) %>
    <% end %>
    <%= pb_rails("collapsible/collapsible_content", props: { padding: "md", id:"collapse-toggle-3" }) do %>
      Cras ornare fermentum magna mollis efficitur. Sed vitae nulla vel purus ultrices mollis. Maecenas id nulla id libero faucibus feugiat quis sit amet turpis. In commodo pellentesque risus at fringilla. Integer non interdum leo, non commodo ante. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut mi augue, dignissim at orci vel, egestas aliquam mi. Proin finibus aliquet tempor. Integer cursus, ex quis gravida rhoncus, nisi elit viverra ipsum, non efficitur est ex ac tortor. Praesent vitae odio massa.
    <% end %>
<% end %>
  

  
<script>
  window.addEventListener('DOMContentLoaded', () => {
    const collapsibles = document.querySelectorAll('[id^="collapse-toggle"]');
    const button = document.querySelector("#toggle-button-example");
    button.addEventListener("click", () => {
      collapsibles.forEach(collapsible => {
        document.dispatchEvent(new CustomEvent(collapsible.id));
      })
    })
  })
</script>