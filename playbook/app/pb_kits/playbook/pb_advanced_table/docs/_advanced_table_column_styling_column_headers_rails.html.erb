<% column_definitions = [
  {
    accessor: "year",
    label: "Year",
    cellAccessors: ["quarter", "month", "day"],
  },
  {
    label: "Enrollment Data",
    columns: [
      {
        label: "Enrollment Stats",
        columns: [
          {
            accessor: "newEnrollments",
            label: "New Enrollments",
            column_styling:{header_alignment:"left", cell_alignment:"left"}
          },
          {
            accessor: "scheduledMeetings",
            label: "Scheduled Meetings",
          },
        ],
      },
    ],
  },
  {
    label: "Performance Data",
    columns: [
      {
        label: "Completion Metrics",
        columns: [
          {
            accessor: "completedClasses",
            label: "Completed Classes",
            column_styling:{header_alignment:"center", cell_alignment:"center", font_color:"#28A745"}
          },
          {
            accessor: "classCompletionRate",
            label: "Class Completion Rate",
            column_styling: { 
              cell_background_color: "warning_secondary",
              font_color: "red"
            }
          },
        ],
      },
      {
        label: "Attendance",
        columns: [
          {
            accessor: "attendanceRate",
            label: "Attendance Rate",
            column_styling: { font_color: "#0056CF" }
          },
          {
            accessor: "scheduledMeetings",
            label: "Scheduled Meetings",
          },
        ],
      },
    ],
  },
] %>

<%= pb_rails("advanced_table", props: { id: "column-styling-multi", table_data: @table_data, column_definitions: column_definitions }) do %>
  <%= pb_rails("advanced_table/table_header", props: { table_id: "column-styling-multi", column_definitions: column_definitions }) %>
  <%= pb_rails("advanced_table/table_body", props: { table_id: "column-styling-multi", table_data: @table_data, column_definitions: column_definitions }) %>
<% end %>
