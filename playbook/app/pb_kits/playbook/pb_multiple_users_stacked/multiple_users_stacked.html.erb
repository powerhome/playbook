<%= pb_content_tag do %>
  <%= pb_rails("avatar", props: object.users[0].merge({size: object.variant == "bubble" ? "sm" : "xs", classname: "pb_multiple_users_stacked_item first_item#{object.variant == "bubble" && object.users.count > 2 ? " three_or_more" : ""}", dark: object.dark}) ) %>

  <% unless object.only_one %>
    <% if object.more_than_two && object.variant != "bubble" %>
      <%= pb_rails("badge", props: {
        dark: object.dark,
        text: "+#{object.users.count - object.display_count}",
        variant: "primary",
        rounded: true,
        classname: "pb_multiple_users_stacked_item second_item" }) %>
    <% elsif object.variant == "bubble" %>
      <% object.users.slice(1,4).each_with_index do |item, idx| %>
        <%= pb_rails("avatar", props: item.merge({size: "xs", classname: "pb_multiple_users_stacked_item #{idx == 0 ? "second_item#{object.users.count === 2 ? " double" : ""}" : idx == 1 ? "third_item" : "fourth_item"}", dark: object.dark}) ) %>
      <% end %>
    <% else %>
      <%= pb_rails("avatar", props: object.users[1].merge({size: "xs", classname: "pb_multiple_users_stacked_item second_item", dark: object.dark}) ) %>
    <% end %>
  <% end %>

<% end %>
