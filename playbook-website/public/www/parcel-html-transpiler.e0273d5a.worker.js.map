{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/@babel/runtime/helpers/defineProperty.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/@babel/runtime/helpers/toPrimitive.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/@babel/runtime/helpers/typeof.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/htmlparser2/lib/Parser.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/htmlparser2/lib/Tokenizer.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/htmlparser2/node_modules/entities/lib/decode_codepoint.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/inherits/inherits_browser.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/is-url/index.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/node-libs-browser/node_modules/events/events.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/object-assign/index.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/posthtml-parser/index.js","webpack:////Users/jasper.furniss/codesandbox-client/node_modules/posthtml/lib/api.js","webpack:///./src/sandbox/eval/presets/parcel/transpilers/is-url.ts","webpack:///../sandpack-core/lib/transpiler/utils/worker-error-handler.js","webpack:///./src/sandbox/eval/presets/parcel/transpilers/html-worker.ts","webpack:///./src/sandbox/eval/transpilers/worker-transpiler/child-handler.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","toPropertyKey","obj","configurable","writable","_typeof","input","hint","prim","toPrimitive","res","TypeError","String","Number","iterator","constructor","Tokenizer","formTags","option","optgroup","select","button","datalist","textarea","openImpliesClose","tr","th","td","thead","body","head","link","script","li","h1","h2","h3","h4","h5","h6","output","voidElements","__proto__","area","base","basefont","br","col","command","embed","frame","hr","img","isindex","keygen","meta","param","source","track","wbr","foreignContextElements","math","svg","htmlIntegrationElements","mi","mo","mn","ms","mtext","foreignObject","desc","title","re_nameEnd","Parser","cbs","options","_options","_cbs","_tagname","_attribname","_attribvalue","_attribs","_stack","_foreignContext","startIndex","endIndex","_lowerCaseTagNames","lowerCaseTags","xmlMode","_lowerCaseAttributeNames","lowerCaseAttributeNames","_tokenizer","onparserinit","EventEmitter","_updatePosition","initialOffset","_sectionStart","getAbsoluteIndex","ontext","data","onopentagname","toLowerCase","el","length","onclosetag","push","onopentag","onopentagend","pop","_closeCurrentTag","pos","lastIndexOf","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","onattribute","_getInstructionName","idx","search","substr","ondeclaration","onprocessinginstruction","oncomment","oncommentend","oncdata","recognizeCDATA","oncdatastart","oncdataend","onerror","onend","reset","onreset","parseComplete","end","write","chunk","pause","resume","parseChunk","decodeCodePoint","entityMap","legacyMap","xmlMap","TEXT","BEFORE_TAG_NAME","IN_TAG_NAME","IN_SELF_CLOSING_TAG","BEFORE_CLOSING_TAG_NAME","IN_CLOSING_TAG_NAME","AFTER_CLOSING_TAG_NAME","BEFORE_ATTRIBUTE_NAME","IN_ATTRIBUTE_NAME","AFTER_ATTRIBUTE_NAME","BEFORE_ATTRIBUTE_VALUE","IN_ATTRIBUTE_VALUE_DQ","IN_ATTRIBUTE_VALUE_SQ","IN_ATTRIBUTE_VALUE_NQ","BEFORE_DECLARATION","IN_DECLARATION","IN_PROCESSING_INSTRUCTION","BEFORE_COMMENT","IN_COMMENT","AFTER_COMMENT_1","AFTER_COMMENT_2","BEFORE_CDATA_1","BEFORE_CDATA_2","BEFORE_CDATA_3","BEFORE_CDATA_4","BEFORE_CDATA_5","BEFORE_CDATA_6","IN_CDATA","AFTER_CDATA_1","AFTER_CDATA_2","BEFORE_SPECIAL","BEFORE_SPECIAL_END","BEFORE_SCRIPT_1","BEFORE_SCRIPT_2","BEFORE_SCRIPT_3","BEFORE_SCRIPT_4","BEFORE_SCRIPT_5","AFTER_SCRIPT_1","AFTER_SCRIPT_2","AFTER_SCRIPT_3","AFTER_SCRIPT_4","AFTER_SCRIPT_5","BEFORE_STYLE_1","BEFORE_STYLE_2","BEFORE_STYLE_3","BEFORE_STYLE_4","AFTER_STYLE_1","AFTER_STYLE_2","AFTER_STYLE_3","AFTER_STYLE_4","BEFORE_ENTITY","BEFORE_NUMERIC_ENTITY","IN_NAMED_ENTITY","IN_NUMERIC_ENTITY","IN_HEX_ENTITY","j","SPECIAL_NONE","SPECIAL_SCRIPT","SPECIAL_STYLE","whitespace","ifElseState","upper","SUCCESS","FAILURE","lower","_state","_index","consumeSpecialNameChar","NEXT_STATE","_buffer","_bufferOffset","_baseState","_special","_running","_ended","_xmlMode","_decodeEntities","decodeEntities","_stateText","_getSection","_stateBeforeTagName","_stateInTagName","_emitToken","_stateBeforeCloseingTagName","_stateInCloseingTagName","_stateAfterCloseingTagName","_stateBeforeAttributeName","_stateInSelfClosingTag","_stateInAttributeName","_stateAfterAttributeName","_stateBeforeAttributeValue","_stateInAttributeValueDoubleQuotes","_stateInAttributeValueSingleQuotes","_stateInAttributeValueNoQuotes","_stateBeforeDeclaration","_stateInDeclaration","_stateInProcessingInstruction","_stateBeforeComment","_stateInComment","_stateAfterComment1","_stateAfterComment2","substring","_stateBeforeCdata1","_stateBeforeCdata2","_stateBeforeCdata3","_stateBeforeCdata4","_stateBeforeCdata5","_stateBeforeCdata6","_stateInCdata","_stateAfterCdata1","_stateAfterCdata2","_stateBeforeSpecial","_stateBeforeSpecialEnd","_stateBeforeScript1","_stateBeforeScript2","_stateBeforeScript3","_stateBeforeScript4","_stateBeforeScript5","_stateAfterScript1","_stateAfterScript2","_stateAfterScript3","_stateAfterScript4","_stateAfterScript5","_stateBeforeStyle1","_stateBeforeStyle2","_stateBeforeStyle3","_stateBeforeStyle4","_stateAfterStyle1","_stateAfterStyle2","_stateAfterStyle3","_stateAfterStyle4","_stateBeforeEntity","_stateBeforeNumericEntity","_parseNamedEntityStrict","entity","map","_emitPartial","_parseLegacyEntity","start","limit","_stateInNamedEntity","_decodeNumericEntity","offset","sectionStart","parsed","parseInt","_stateInNumericEntity","_stateInHexEntity","_cleanup","Error","_parse","charAt","_finish","_handleTrailingData","decodeMap","codePoint","fromCharCode","ctor","superCtor","super_","TempCtor","string","match","protocolAndDomainRE","everythingAfterProtocol","localhostDomainRE","test","nonLocalhostDomainRE","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","isNaN","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","type","listener","prepend","events","existing","warning","newListener","emit","unshift","warned","w","emitter","count","console","warn","onceWrapper","fired","removeListener","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","propIsEnumerable","propertyIsEnumerable","toObject","val","assign","test1","test2","join","test3","split","forEach","letter","shouldUseNative","from","symbols","to","objectAssign","defaultOptions","defaultDirectives","postHTMLParser","html","bufArray","results","isDirective","directive","tag","RegExp","last","parser","directives","directiveText","content","comment","attrs","buf","result","replace","normalizeArributes","isArray","text","Boolean","walk","cb","traverse","expression","node","compare","tree","expected","actual","every","exp","some","act","ao","eo","isURL","require","ANCHOR_REGEXP","SCHEME_REGEXP","url","FileError","childHandler","_defineProperty","Map","addEventListener","evt","handleMessage","catch","postMessage","codesandbox","registerFunction","method","functions","registerFSInitializer","newInitializeFS","initializeFS","msg","_this","_asyncToGenerator","isReady","emitReady","handleCallRequest","handleCallResponse","queuedMessages","browserfsMessage","foundCall","pendingCalls","isError","reconstructedError","columnNumber","fileName","lineNumber","parseWorkerError","_this2","callFn","_ref","callId","ATTRS","src","href","poster","META","itemprop","_compile","code","resources","dependencies","addDependency","depPath","isUrl","assetPath","decodeURIComponent","path","isEntry","addSrcSetDependencies","srcset","newSources","pair","trim","addedDependency","parse","api","attr","values","includes","elements","endsWith","compiledCode","resource","resourcePath","JSON","stringify","transpiledCode","foundDependencies","_x"],"mappings":"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","file":"parcel-html-transpiler.e0273d5a.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"../../node_modules/thread-loader/dist/cjs.js?!../../node_modules/babel-loader/lib/index.js?!./src/sandbox/eval/presets/parcel/transpilers/html-worker.ts\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var Tokenizer = require(\"./Tokenizer.js\");\n\n/*\n\tOptions:\n\n\txmlMode: Disables the special behavior for script/style tags (false by default)\n\tlowerCaseAttributeNames: call .toLowerCase for each attribute name (true if xmlMode is `false`)\n\tlowerCaseTags: call .toLowerCase for each tag name (true if xmlMode is `false`)\n*/\n\n/*\n\tCallbacks:\n\n\toncdataend,\n\toncdatastart,\n\tonclosetag,\n\toncomment,\n\toncommentend,\n\tonerror,\n\tonopentag,\n\tonprocessinginstruction,\n\tonreset,\n\tontext\n*/\n\nvar formTags = {\n    input: true,\n    option: true,\n    optgroup: true,\n    select: true,\n    button: true,\n    datalist: true,\n    textarea: true\n};\n\nvar openImpliesClose = {\n    tr: { tr: true, th: true, td: true },\n    th: { th: true },\n    td: { thead: true, th: true, td: true },\n    body: { head: true, link: true, script: true },\n    li: { li: true },\n    p: { p: true },\n    h1: { p: true },\n    h2: { p: true },\n    h3: { p: true },\n    h4: { p: true },\n    h5: { p: true },\n    h6: { p: true },\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: { option: true },\n    optgroup: { optgroup: true }\n};\n\nvar voidElements = {\n    __proto__: null,\n    area: true,\n    base: true,\n    basefont: true,\n    br: true,\n    col: true,\n    command: true,\n    embed: true,\n    frame: true,\n    hr: true,\n    img: true,\n    input: true,\n    isindex: true,\n    keygen: true,\n    link: true,\n    meta: true,\n    param: true,\n    source: true,\n    track: true,\n    wbr: true\n};\n\nvar foreignContextElements = {\n    __proto__: null,\n    math: true,\n    svg: true\n};\nvar htmlIntegrationElements = {\n    __proto__: null,\n    mi: true,\n    mo: true,\n    mn: true,\n    ms: true,\n    mtext: true,\n    \"annotation-xml\": true,\n    foreignObject: true,\n    desc: true,\n    title: true\n};\n\nvar re_nameEnd = /\\s|\\//;\n\nfunction Parser(cbs, options) {\n    this._options = options || {};\n    this._cbs = cbs || {};\n\n    this._tagname = \"\";\n    this._attribname = \"\";\n    this._attribvalue = \"\";\n    this._attribs = null;\n    this._stack = [];\n    this._foreignContext = [];\n\n    this.startIndex = 0;\n    this.endIndex = null;\n\n    this._lowerCaseTagNames =\n        \"lowerCaseTags\" in this._options\n            ? !!this._options.lowerCaseTags\n            : !this._options.xmlMode;\n    this._lowerCaseAttributeNames =\n        \"lowerCaseAttributeNames\" in this._options\n            ? !!this._options.lowerCaseAttributeNames\n            : !this._options.xmlMode;\n\n    if (this._options.Tokenizer) {\n        Tokenizer = this._options.Tokenizer;\n    }\n    this._tokenizer = new Tokenizer(this._options, this);\n\n    if (this._cbs.onparserinit) this._cbs.onparserinit(this);\n}\n\nrequire(\"inherits\")(Parser, require(\"events\").EventEmitter);\n\nParser.prototype._updatePosition = function(initialOffset) {\n    if (this.endIndex === null) {\n        if (this._tokenizer._sectionStart <= initialOffset) {\n            this.startIndex = 0;\n        } else {\n            this.startIndex = this._tokenizer._sectionStart - initialOffset;\n        }\n    } else this.startIndex = this.endIndex + 1;\n    this.endIndex = this._tokenizer.getAbsoluteIndex();\n};\n\n//Tokenizer event handlers\nParser.prototype.ontext = function(data) {\n    this._updatePosition(1);\n    this.endIndex--;\n\n    if (this._cbs.ontext) this._cbs.ontext(data);\n};\n\nParser.prototype.onopentagname = function(name) {\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n\n    this._tagname = name;\n\n    if (!this._options.xmlMode && name in openImpliesClose) {\n        for (\n            var el;\n            (el = this._stack[this._stack.length - 1]) in\n            openImpliesClose[name];\n            this.onclosetag(el)\n        );\n    }\n\n    if (this._options.xmlMode || !(name in voidElements)) {\n        this._stack.push(name);\n        if (name in foreignContextElements) this._foreignContext.push(true);\n        else if (name in htmlIntegrationElements)\n            this._foreignContext.push(false);\n    }\n\n    if (this._cbs.onopentagname) this._cbs.onopentagname(name);\n    if (this._cbs.onopentag) this._attribs = {};\n};\n\nParser.prototype.onopentagend = function() {\n    this._updatePosition(1);\n\n    if (this._attribs) {\n        if (this._cbs.onopentag)\n            this._cbs.onopentag(this._tagname, this._attribs);\n        this._attribs = null;\n    }\n\n    if (\n        !this._options.xmlMode &&\n        this._cbs.onclosetag &&\n        this._tagname in voidElements\n    ) {\n        this._cbs.onclosetag(this._tagname);\n    }\n\n    this._tagname = \"\";\n};\n\nParser.prototype.onclosetag = function(name) {\n    this._updatePosition(1);\n\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n    \n    if (name in foreignContextElements || name in htmlIntegrationElements) {\n        this._foreignContext.pop();\n    }\n\n    if (\n        this._stack.length &&\n        (!(name in voidElements) || this._options.xmlMode)\n    ) {\n        var pos = this._stack.lastIndexOf(name);\n        if (pos !== -1) {\n            if (this._cbs.onclosetag) {\n                pos = this._stack.length - pos;\n                while (pos--) this._cbs.onclosetag(this._stack.pop());\n            } else this._stack.length = pos;\n        } else if (name === \"p\" && !this._options.xmlMode) {\n            this.onopentagname(name);\n            this._closeCurrentTag();\n        }\n    } else if (!this._options.xmlMode && (name === \"br\" || name === \"p\")) {\n        this.onopentagname(name);\n        this._closeCurrentTag();\n    }\n};\n\nParser.prototype.onselfclosingtag = function() {\n    if (\n        this._options.xmlMode ||\n        this._options.recognizeSelfClosing ||\n        this._foreignContext[this._foreignContext.length - 1]\n    ) {\n        this._closeCurrentTag();\n    } else {\n        this.onopentagend();\n    }\n};\n\nParser.prototype._closeCurrentTag = function() {\n    var name = this._tagname;\n\n    this.onopentagend();\n\n    //self-closing tags will be on the top of the stack\n    //(cheaper check than in onclosetag)\n    if (this._stack[this._stack.length - 1] === name) {\n        if (this._cbs.onclosetag) {\n            this._cbs.onclosetag(name);\n        }\n        this._stack.pop();\n        \n    }\n};\n\nParser.prototype.onattribname = function(name) {\n    if (this._lowerCaseAttributeNames) {\n        name = name.toLowerCase();\n    }\n    this._attribname = name;\n};\n\nParser.prototype.onattribdata = function(value) {\n    this._attribvalue += value;\n};\n\nParser.prototype.onattribend = function() {\n    if (this._cbs.onattribute)\n        this._cbs.onattribute(this._attribname, this._attribvalue);\n    if (\n        this._attribs &&\n        !Object.prototype.hasOwnProperty.call(this._attribs, this._attribname)\n    ) {\n        this._attribs[this._attribname] = this._attribvalue;\n    }\n    this._attribname = \"\";\n    this._attribvalue = \"\";\n};\n\nParser.prototype._getInstructionName = function(value) {\n    var idx = value.search(re_nameEnd),\n        name = idx < 0 ? value : value.substr(0, idx);\n\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n\n    return name;\n};\n\nParser.prototype.ondeclaration = function(value) {\n    if (this._cbs.onprocessinginstruction) {\n        var name = this._getInstructionName(value);\n        this._cbs.onprocessinginstruction(\"!\" + name, \"!\" + value);\n    }\n};\n\nParser.prototype.onprocessinginstruction = function(value) {\n    if (this._cbs.onprocessinginstruction) {\n        var name = this._getInstructionName(value);\n        this._cbs.onprocessinginstruction(\"?\" + name, \"?\" + value);\n    }\n};\n\nParser.prototype.oncomment = function(value) {\n    this._updatePosition(4);\n\n    if (this._cbs.oncomment) this._cbs.oncomment(value);\n    if (this._cbs.oncommentend) this._cbs.oncommentend();\n};\n\nParser.prototype.oncdata = function(value) {\n    this._updatePosition(1);\n\n    if (this._options.xmlMode || this._options.recognizeCDATA) {\n        if (this._cbs.oncdatastart) this._cbs.oncdatastart();\n        if (this._cbs.ontext) this._cbs.ontext(value);\n        if (this._cbs.oncdataend) this._cbs.oncdataend();\n    } else {\n        this.oncomment(\"[CDATA[\" + value + \"]]\");\n    }\n};\n\nParser.prototype.onerror = function(err) {\n    if (this._cbs.onerror) this._cbs.onerror(err);\n};\n\nParser.prototype.onend = function() {\n    if (this._cbs.onclosetag) {\n        for (\n            var i = this._stack.length;\n            i > 0;\n            this._cbs.onclosetag(this._stack[--i])\n        );\n    }\n    if (this._cbs.onend) this._cbs.onend();\n};\n\n//Resets the parser to a blank state, ready to parse a new HTML document\nParser.prototype.reset = function() {\n    if (this._cbs.onreset) this._cbs.onreset();\n    this._tokenizer.reset();\n\n    this._tagname = \"\";\n    this._attribname = \"\";\n    this._attribs = null;\n    this._stack = [];\n\n    if (this._cbs.onparserinit) this._cbs.onparserinit(this);\n};\n\n//Parses a complete HTML document and pushes it to the handler\nParser.prototype.parseComplete = function(data) {\n    this.reset();\n    this.end(data);\n};\n\nParser.prototype.write = function(chunk) {\n    this._tokenizer.write(chunk);\n};\n\nParser.prototype.end = function(chunk) {\n    this._tokenizer.end(chunk);\n};\n\nParser.prototype.pause = function() {\n    this._tokenizer.pause();\n};\n\nParser.prototype.resume = function() {\n    this._tokenizer.resume();\n};\n\n//alias for backwards compat\nParser.prototype.parseChunk = Parser.prototype.write;\nParser.prototype.done = Parser.prototype.end;\n\nmodule.exports = Parser;\n","module.exports = Tokenizer;\n\nvar decodeCodePoint = require(\"entities/lib/decode_codepoint.js\");\nvar entityMap = require(\"entities/maps/entities.json\");\nvar legacyMap = require(\"entities/maps/legacy.json\");\nvar xmlMap = require(\"entities/maps/xml.json\");\n\nvar i = 0;\n\nvar TEXT = i++;\nvar BEFORE_TAG_NAME = i++; //after <\nvar IN_TAG_NAME = i++;\nvar IN_SELF_CLOSING_TAG = i++;\nvar BEFORE_CLOSING_TAG_NAME = i++;\nvar IN_CLOSING_TAG_NAME = i++;\nvar AFTER_CLOSING_TAG_NAME = i++;\n\n//attributes\nvar BEFORE_ATTRIBUTE_NAME = i++;\nvar IN_ATTRIBUTE_NAME = i++;\nvar AFTER_ATTRIBUTE_NAME = i++;\nvar BEFORE_ATTRIBUTE_VALUE = i++;\nvar IN_ATTRIBUTE_VALUE_DQ = i++; // \"\nvar IN_ATTRIBUTE_VALUE_SQ = i++; // '\nvar IN_ATTRIBUTE_VALUE_NQ = i++;\n\n//declarations\nvar BEFORE_DECLARATION = i++; // !\nvar IN_DECLARATION = i++;\n\n//processing instructions\nvar IN_PROCESSING_INSTRUCTION = i++; // ?\n\n//comments\nvar BEFORE_COMMENT = i++;\nvar IN_COMMENT = i++;\nvar AFTER_COMMENT_1 = i++;\nvar AFTER_COMMENT_2 = i++;\n\n//cdata\nvar BEFORE_CDATA_1 = i++; // [\nvar BEFORE_CDATA_2 = i++; // C\nvar BEFORE_CDATA_3 = i++; // D\nvar BEFORE_CDATA_4 = i++; // A\nvar BEFORE_CDATA_5 = i++; // T\nvar BEFORE_CDATA_6 = i++; // A\nvar IN_CDATA = i++; // [\nvar AFTER_CDATA_1 = i++; // ]\nvar AFTER_CDATA_2 = i++; // ]\n\n//special tags\nvar BEFORE_SPECIAL = i++; //S\nvar BEFORE_SPECIAL_END = i++; //S\n\nvar BEFORE_SCRIPT_1 = i++; //C\nvar BEFORE_SCRIPT_2 = i++; //R\nvar BEFORE_SCRIPT_3 = i++; //I\nvar BEFORE_SCRIPT_4 = i++; //P\nvar BEFORE_SCRIPT_5 = i++; //T\nvar AFTER_SCRIPT_1 = i++; //C\nvar AFTER_SCRIPT_2 = i++; //R\nvar AFTER_SCRIPT_3 = i++; //I\nvar AFTER_SCRIPT_4 = i++; //P\nvar AFTER_SCRIPT_5 = i++; //T\n\nvar BEFORE_STYLE_1 = i++; //T\nvar BEFORE_STYLE_2 = i++; //Y\nvar BEFORE_STYLE_3 = i++; //L\nvar BEFORE_STYLE_4 = i++; //E\nvar AFTER_STYLE_1 = i++; //T\nvar AFTER_STYLE_2 = i++; //Y\nvar AFTER_STYLE_3 = i++; //L\nvar AFTER_STYLE_4 = i++; //E\n\nvar BEFORE_ENTITY = i++; //&\nvar BEFORE_NUMERIC_ENTITY = i++; //#\nvar IN_NAMED_ENTITY = i++;\nvar IN_NUMERIC_ENTITY = i++;\nvar IN_HEX_ENTITY = i++; //X\n\nvar j = 0;\n\nvar SPECIAL_NONE = j++;\nvar SPECIAL_SCRIPT = j++;\nvar SPECIAL_STYLE = j++;\n\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\n\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n\n    if (upper === lower) {\n        return function(c) {\n            if (c === lower) {\n                this._state = SUCCESS;\n            } else {\n                this._state = FAILURE;\n                this._index--;\n            }\n        };\n    } else {\n        return function(c) {\n            if (c === lower || c === upper) {\n                this._state = SUCCESS;\n            } else {\n                this._state = FAILURE;\n                this._index--;\n            }\n        };\n    }\n}\n\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n\n    return function(c) {\n        if (c === lower || c === upper) {\n            this._state = NEXT_STATE;\n        } else {\n            this._state = IN_TAG_NAME;\n            this._index--; //consume the token again\n        }\n    };\n}\n\nfunction Tokenizer(options, cbs) {\n    this._state = TEXT;\n    this._buffer = \"\";\n    this._sectionStart = 0;\n    this._index = 0;\n    this._bufferOffset = 0; //chars removed from _buffer\n    this._baseState = TEXT;\n    this._special = SPECIAL_NONE;\n    this._cbs = cbs;\n    this._running = true;\n    this._ended = false;\n    this._xmlMode = !!(options && options.xmlMode);\n    this._decodeEntities = !!(options && options.decodeEntities);\n}\n\nTokenizer.prototype._stateText = function(c) {\n    if (c === \"<\") {\n        if (this._index > this._sectionStart) {\n            this._cbs.ontext(this._getSection());\n        }\n        this._state = BEFORE_TAG_NAME;\n        this._sectionStart = this._index;\n    } else if (\n        this._decodeEntities &&\n        this._special === SPECIAL_NONE &&\n        c === \"&\"\n    ) {\n        if (this._index > this._sectionStart) {\n            this._cbs.ontext(this._getSection());\n        }\n        this._baseState = TEXT;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeTagName = function(c) {\n    if (c === \"/\") {\n        this._state = BEFORE_CLOSING_TAG_NAME;\n    } else if (c === \"<\") {\n        this._cbs.ontext(this._getSection());\n        this._sectionStart = this._index;\n    } else if (c === \">\" || this._special !== SPECIAL_NONE || whitespace(c)) {\n        this._state = TEXT;\n    } else if (c === \"!\") {\n        this._state = BEFORE_DECLARATION;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"?\") {\n        this._state = IN_PROCESSING_INSTRUCTION;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state =\n            !this._xmlMode && (c === \"s\" || c === \"S\")\n                ? BEFORE_SPECIAL\n                : IN_TAG_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInTagName = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._emitToken(\"onopentagname\");\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateBeforeCloseingTagName = function(c) {\n    if (whitespace(c));\n    else if (c === \">\") {\n        this._state = TEXT;\n    } else if (this._special !== SPECIAL_NONE) {\n        if (c === \"s\" || c === \"S\") {\n            this._state = BEFORE_SPECIAL_END;\n        } else {\n            this._state = TEXT;\n            this._index--;\n        }\n    } else {\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInCloseingTagName = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._emitToken(\"onclosetag\");\n        this._state = AFTER_CLOSING_TAG_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateAfterCloseingTagName = function(c) {\n    //skip everything until \">\"\n    if (c === \">\") {\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateBeforeAttributeName = function(c) {\n    if (c === \">\") {\n        this._cbs.onopentagend();\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"/\") {\n        this._state = IN_SELF_CLOSING_TAG;\n    } else if (!whitespace(c)) {\n        this._state = IN_ATTRIBUTE_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInSelfClosingTag = function(c) {\n    if (c === \">\") {\n        this._cbs.onselfclosingtag();\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (!whitespace(c)) {\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInAttributeName = function(c) {\n    if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n        this._cbs.onattribname(this._getSection());\n        this._sectionStart = -1;\n        this._state = AFTER_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateAfterAttributeName = function(c) {\n    if (c === \"=\") {\n        this._state = BEFORE_ATTRIBUTE_VALUE;\n    } else if (c === \"/\" || c === \">\") {\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    } else if (!whitespace(c)) {\n        this._cbs.onattribend();\n        this._state = IN_ATTRIBUTE_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeAttributeValue = function(c) {\n    if (c === '\"') {\n        this._state = IN_ATTRIBUTE_VALUE_DQ;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"'\") {\n        this._state = IN_ATTRIBUTE_VALUE_SQ;\n        this._sectionStart = this._index + 1;\n    } else if (!whitespace(c)) {\n        this._state = IN_ATTRIBUTE_VALUE_NQ;\n        this._sectionStart = this._index;\n        this._index--; //reconsume token\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueDoubleQuotes = function(c) {\n    if (c === '\"') {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueSingleQuotes = function(c) {\n    if (c === \"'\") {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueNoQuotes = function(c) {\n    if (whitespace(c) || c === \">\") {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeDeclaration = function(c) {\n    this._state =\n        c === \"[\"\n            ? BEFORE_CDATA_1\n            : c === \"-\"\n                ? BEFORE_COMMENT\n                : IN_DECLARATION;\n};\n\nTokenizer.prototype._stateInDeclaration = function(c) {\n    if (c === \">\") {\n        this._cbs.ondeclaration(this._getSection());\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateInProcessingInstruction = function(c) {\n    if (c === \">\") {\n        this._cbs.onprocessinginstruction(this._getSection());\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateBeforeComment = function(c) {\n    if (c === \"-\") {\n        this._state = IN_COMMENT;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state = IN_DECLARATION;\n    }\n};\n\nTokenizer.prototype._stateInComment = function(c) {\n    if (c === \"-\") this._state = AFTER_COMMENT_1;\n};\n\nTokenizer.prototype._stateAfterComment1 = function(c) {\n    if (c === \"-\") {\n        this._state = AFTER_COMMENT_2;\n    } else {\n        this._state = IN_COMMENT;\n    }\n};\n\nTokenizer.prototype._stateAfterComment2 = function(c) {\n    if (c === \">\") {\n        //remove 2 trailing chars\n        this._cbs.oncomment(\n            this._buffer.substring(this._sectionStart, this._index - 2)\n        );\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c !== \"-\") {\n        this._state = IN_COMMENT;\n    }\n    // else: stay in AFTER_COMMENT_2 (`--->`)\n};\n\nTokenizer.prototype._stateBeforeCdata1 = ifElseState(\n    \"C\",\n    BEFORE_CDATA_2,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata2 = ifElseState(\n    \"D\",\n    BEFORE_CDATA_3,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata3 = ifElseState(\n    \"A\",\n    BEFORE_CDATA_4,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata4 = ifElseState(\n    \"T\",\n    BEFORE_CDATA_5,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata5 = ifElseState(\n    \"A\",\n    BEFORE_CDATA_6,\n    IN_DECLARATION\n);\n\nTokenizer.prototype._stateBeforeCdata6 = function(c) {\n    if (c === \"[\") {\n        this._state = IN_CDATA;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state = IN_DECLARATION;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInCdata = function(c) {\n    if (c === \"]\") this._state = AFTER_CDATA_1;\n};\n\nTokenizer.prototype._stateAfterCdata1 = function(c) {\n    if (c === \"]\") this._state = AFTER_CDATA_2;\n    else this._state = IN_CDATA;\n};\n\nTokenizer.prototype._stateAfterCdata2 = function(c) {\n    if (c === \">\") {\n        //remove 2 trailing chars\n        this._cbs.oncdata(\n            this._buffer.substring(this._sectionStart, this._index - 2)\n        );\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c !== \"]\") {\n        this._state = IN_CDATA;\n    }\n    //else: stay in AFTER_CDATA_2 (`]]]>`)\n};\n\nTokenizer.prototype._stateBeforeSpecial = function(c) {\n    if (c === \"c\" || c === \"C\") {\n        this._state = BEFORE_SCRIPT_1;\n    } else if (c === \"t\" || c === \"T\") {\n        this._state = BEFORE_STYLE_1;\n    } else {\n        this._state = IN_TAG_NAME;\n        this._index--; //consume the token again\n    }\n};\n\nTokenizer.prototype._stateBeforeSpecialEnd = function(c) {\n    if (this._special === SPECIAL_SCRIPT && (c === \"c\" || c === \"C\")) {\n        this._state = AFTER_SCRIPT_1;\n    } else if (this._special === SPECIAL_STYLE && (c === \"t\" || c === \"T\")) {\n        this._state = AFTER_STYLE_1;\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeScript1 = consumeSpecialNameChar(\n    \"R\",\n    BEFORE_SCRIPT_2\n);\nTokenizer.prototype._stateBeforeScript2 = consumeSpecialNameChar(\n    \"I\",\n    BEFORE_SCRIPT_3\n);\nTokenizer.prototype._stateBeforeScript3 = consumeSpecialNameChar(\n    \"P\",\n    BEFORE_SCRIPT_4\n);\nTokenizer.prototype._stateBeforeScript4 = consumeSpecialNameChar(\n    \"T\",\n    BEFORE_SCRIPT_5\n);\n\nTokenizer.prototype._stateBeforeScript5 = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_SCRIPT;\n    }\n    this._state = IN_TAG_NAME;\n    this._index--; //consume the token again\n};\n\nTokenizer.prototype._stateAfterScript1 = ifElseState(\"R\", AFTER_SCRIPT_2, TEXT);\nTokenizer.prototype._stateAfterScript2 = ifElseState(\"I\", AFTER_SCRIPT_3, TEXT);\nTokenizer.prototype._stateAfterScript3 = ifElseState(\"P\", AFTER_SCRIPT_4, TEXT);\nTokenizer.prototype._stateAfterScript4 = ifElseState(\"T\", AFTER_SCRIPT_5, TEXT);\n\nTokenizer.prototype._stateAfterScript5 = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_NONE;\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index - 6;\n        this._index--; //reconsume the token\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeStyle1 = consumeSpecialNameChar(\n    \"Y\",\n    BEFORE_STYLE_2\n);\nTokenizer.prototype._stateBeforeStyle2 = consumeSpecialNameChar(\n    \"L\",\n    BEFORE_STYLE_3\n);\nTokenizer.prototype._stateBeforeStyle3 = consumeSpecialNameChar(\n    \"E\",\n    BEFORE_STYLE_4\n);\n\nTokenizer.prototype._stateBeforeStyle4 = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_STYLE;\n    }\n    this._state = IN_TAG_NAME;\n    this._index--; //consume the token again\n};\n\nTokenizer.prototype._stateAfterStyle1 = ifElseState(\"Y\", AFTER_STYLE_2, TEXT);\nTokenizer.prototype._stateAfterStyle2 = ifElseState(\"L\", AFTER_STYLE_3, TEXT);\nTokenizer.prototype._stateAfterStyle3 = ifElseState(\"E\", AFTER_STYLE_4, TEXT);\n\nTokenizer.prototype._stateAfterStyle4 = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_NONE;\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index - 5;\n        this._index--; //reconsume the token\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeEntity = ifElseState(\n    \"#\",\n    BEFORE_NUMERIC_ENTITY,\n    IN_NAMED_ENTITY\n);\nTokenizer.prototype._stateBeforeNumericEntity = ifElseState(\n    \"X\",\n    IN_HEX_ENTITY,\n    IN_NUMERIC_ENTITY\n);\n\n//for entities terminated with a semicolon\nTokenizer.prototype._parseNamedEntityStrict = function() {\n    //offset = 1\n    if (this._sectionStart + 1 < this._index) {\n        var entity = this._buffer.substring(\n                this._sectionStart + 1,\n                this._index\n            ),\n            map = this._xmlMode ? xmlMap : entityMap;\n\n        if (map.hasOwnProperty(entity)) {\n            this._emitPartial(map[entity]);\n            this._sectionStart = this._index + 1;\n        }\n    }\n};\n\n//parses legacy entities (without trailing semicolon)\nTokenizer.prototype._parseLegacyEntity = function() {\n    var start = this._sectionStart + 1,\n        limit = this._index - start;\n\n    if (limit > 6) limit = 6; //the max length of legacy entities is 6\n\n    while (limit >= 2) {\n        //the min length of legacy entities is 2\n        var entity = this._buffer.substr(start, limit);\n\n        if (legacyMap.hasOwnProperty(entity)) {\n            this._emitPartial(legacyMap[entity]);\n            this._sectionStart += limit + 1;\n            return;\n        } else {\n            limit--;\n        }\n    }\n};\n\nTokenizer.prototype._stateInNamedEntity = function(c) {\n    if (c === \";\") {\n        this._parseNamedEntityStrict();\n        if (this._sectionStart + 1 < this._index && !this._xmlMode) {\n            this._parseLegacyEntity();\n        }\n        this._state = this._baseState;\n    } else if (\n        (c < \"a\" || c > \"z\") &&\n        (c < \"A\" || c > \"Z\") &&\n        (c < \"0\" || c > \"9\")\n    ) {\n        if (this._xmlMode);\n        else if (this._sectionStart + 1 === this._index);\n        else if (this._baseState !== TEXT) {\n            if (c !== \"=\") {\n                this._parseNamedEntityStrict();\n            }\n        } else {\n            this._parseLegacyEntity();\n        }\n\n        this._state = this._baseState;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._decodeNumericEntity = function(offset, base) {\n    var sectionStart = this._sectionStart + offset;\n\n    if (sectionStart !== this._index) {\n        //parse entity\n        var entity = this._buffer.substring(sectionStart, this._index);\n        var parsed = parseInt(entity, base);\n\n        this._emitPartial(decodeCodePoint(parsed));\n        this._sectionStart = this._index;\n    } else {\n        this._sectionStart--;\n    }\n\n    this._state = this._baseState;\n};\n\nTokenizer.prototype._stateInNumericEntity = function(c) {\n    if (c === \";\") {\n        this._decodeNumericEntity(2, 10);\n        this._sectionStart++;\n    } else if (c < \"0\" || c > \"9\") {\n        if (!this._xmlMode) {\n            this._decodeNumericEntity(2, 10);\n        } else {\n            this._state = this._baseState;\n        }\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInHexEntity = function(c) {\n    if (c === \";\") {\n        this._decodeNumericEntity(3, 16);\n        this._sectionStart++;\n    } else if (\n        (c < \"a\" || c > \"f\") &&\n        (c < \"A\" || c > \"F\") &&\n        (c < \"0\" || c > \"9\")\n    ) {\n        if (!this._xmlMode) {\n            this._decodeNumericEntity(3, 16);\n        } else {\n            this._state = this._baseState;\n        }\n        this._index--;\n    }\n};\n\nTokenizer.prototype._cleanup = function() {\n    if (this._sectionStart < 0) {\n        this._buffer = \"\";\n        this._bufferOffset += this._index;\n        this._index = 0;\n    } else if (this._running) {\n        if (this._state === TEXT) {\n            if (this._sectionStart !== this._index) {\n                this._cbs.ontext(this._buffer.substr(this._sectionStart));\n            }\n            this._buffer = \"\";\n            this._bufferOffset += this._index;\n            this._index = 0;\n        } else if (this._sectionStart === this._index) {\n            //the section just started\n            this._buffer = \"\";\n            this._bufferOffset += this._index;\n            this._index = 0;\n        } else {\n            //remove everything unnecessary\n            this._buffer = this._buffer.substr(this._sectionStart);\n            this._index -= this._sectionStart;\n            this._bufferOffset += this._sectionStart;\n        }\n\n        this._sectionStart = 0;\n    }\n};\n\n//TODO make events conditional\nTokenizer.prototype.write = function(chunk) {\n    if (this._ended) this._cbs.onerror(Error(\".write() after done!\"));\n\n    this._buffer += chunk;\n    this._parse();\n};\n\nTokenizer.prototype._parse = function() {\n    while (this._index < this._buffer.length && this._running) {\n        var c = this._buffer.charAt(this._index);\n        if (this._state === TEXT) {\n            this._stateText(c);\n        } else if (this._state === BEFORE_TAG_NAME) {\n            this._stateBeforeTagName(c);\n        } else if (this._state === IN_TAG_NAME) {\n            this._stateInTagName(c);\n        } else if (this._state === BEFORE_CLOSING_TAG_NAME) {\n            this._stateBeforeCloseingTagName(c);\n        } else if (this._state === IN_CLOSING_TAG_NAME) {\n            this._stateInCloseingTagName(c);\n        } else if (this._state === AFTER_CLOSING_TAG_NAME) {\n            this._stateAfterCloseingTagName(c);\n        } else if (this._state === IN_SELF_CLOSING_TAG) {\n            this._stateInSelfClosingTag(c);\n        } else if (this._state === BEFORE_ATTRIBUTE_NAME) {\n\n        /*\n\t\t*\tattributes\n\t\t*/\n            this._stateBeforeAttributeName(c);\n        } else if (this._state === IN_ATTRIBUTE_NAME) {\n            this._stateInAttributeName(c);\n        } else if (this._state === AFTER_ATTRIBUTE_NAME) {\n            this._stateAfterAttributeName(c);\n        } else if (this._state === BEFORE_ATTRIBUTE_VALUE) {\n            this._stateBeforeAttributeValue(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_DQ) {\n            this._stateInAttributeValueDoubleQuotes(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_SQ) {\n            this._stateInAttributeValueSingleQuotes(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_NQ) {\n            this._stateInAttributeValueNoQuotes(c);\n        } else if (this._state === BEFORE_DECLARATION) {\n\n        /*\n\t\t*\tdeclarations\n\t\t*/\n            this._stateBeforeDeclaration(c);\n        } else if (this._state === IN_DECLARATION) {\n            this._stateInDeclaration(c);\n        } else if (this._state === IN_PROCESSING_INSTRUCTION) {\n\n        /*\n\t\t*\tprocessing instructions\n\t\t*/\n            this._stateInProcessingInstruction(c);\n        } else if (this._state === BEFORE_COMMENT) {\n\n        /*\n\t\t*\tcomments\n\t\t*/\n            this._stateBeforeComment(c);\n        } else if (this._state === IN_COMMENT) {\n            this._stateInComment(c);\n        } else if (this._state === AFTER_COMMENT_1) {\n            this._stateAfterComment1(c);\n        } else if (this._state === AFTER_COMMENT_2) {\n            this._stateAfterComment2(c);\n        } else if (this._state === BEFORE_CDATA_1) {\n\n        /*\n\t\t*\tcdata\n\t\t*/\n            this._stateBeforeCdata1(c);\n        } else if (this._state === BEFORE_CDATA_2) {\n            this._stateBeforeCdata2(c);\n        } else if (this._state === BEFORE_CDATA_3) {\n            this._stateBeforeCdata3(c);\n        } else if (this._state === BEFORE_CDATA_4) {\n            this._stateBeforeCdata4(c);\n        } else if (this._state === BEFORE_CDATA_5) {\n            this._stateBeforeCdata5(c);\n        } else if (this._state === BEFORE_CDATA_6) {\n            this._stateBeforeCdata6(c);\n        } else if (this._state === IN_CDATA) {\n            this._stateInCdata(c);\n        } else if (this._state === AFTER_CDATA_1) {\n            this._stateAfterCdata1(c);\n        } else if (this._state === AFTER_CDATA_2) {\n            this._stateAfterCdata2(c);\n        } else if (this._state === BEFORE_SPECIAL) {\n\n        /*\n\t\t* special tags\n\t\t*/\n            this._stateBeforeSpecial(c);\n        } else if (this._state === BEFORE_SPECIAL_END) {\n            this._stateBeforeSpecialEnd(c);\n        } else if (this._state === BEFORE_SCRIPT_1) {\n\n        /*\n\t\t* script\n\t\t*/\n            this._stateBeforeScript1(c);\n        } else if (this._state === BEFORE_SCRIPT_2) {\n            this._stateBeforeScript2(c);\n        } else if (this._state === BEFORE_SCRIPT_3) {\n            this._stateBeforeScript3(c);\n        } else if (this._state === BEFORE_SCRIPT_4) {\n            this._stateBeforeScript4(c);\n        } else if (this._state === BEFORE_SCRIPT_5) {\n            this._stateBeforeScript5(c);\n        } else if (this._state === AFTER_SCRIPT_1) {\n            this._stateAfterScript1(c);\n        } else if (this._state === AFTER_SCRIPT_2) {\n            this._stateAfterScript2(c);\n        } else if (this._state === AFTER_SCRIPT_3) {\n            this._stateAfterScript3(c);\n        } else if (this._state === AFTER_SCRIPT_4) {\n            this._stateAfterScript4(c);\n        } else if (this._state === AFTER_SCRIPT_5) {\n            this._stateAfterScript5(c);\n        } else if (this._state === BEFORE_STYLE_1) {\n\n        /*\n\t\t* style\n\t\t*/\n            this._stateBeforeStyle1(c);\n        } else if (this._state === BEFORE_STYLE_2) {\n            this._stateBeforeStyle2(c);\n        } else if (this._state === BEFORE_STYLE_3) {\n            this._stateBeforeStyle3(c);\n        } else if (this._state === BEFORE_STYLE_4) {\n            this._stateBeforeStyle4(c);\n        } else if (this._state === AFTER_STYLE_1) {\n            this._stateAfterStyle1(c);\n        } else if (this._state === AFTER_STYLE_2) {\n            this._stateAfterStyle2(c);\n        } else if (this._state === AFTER_STYLE_3) {\n            this._stateAfterStyle3(c);\n        } else if (this._state === AFTER_STYLE_4) {\n            this._stateAfterStyle4(c);\n        } else if (this._state === BEFORE_ENTITY) {\n\n        /*\n\t\t* entities\n\t\t*/\n            this._stateBeforeEntity(c);\n        } else if (this._state === BEFORE_NUMERIC_ENTITY) {\n            this._stateBeforeNumericEntity(c);\n        } else if (this._state === IN_NAMED_ENTITY) {\n            this._stateInNamedEntity(c);\n        } else if (this._state === IN_NUMERIC_ENTITY) {\n            this._stateInNumericEntity(c);\n        } else if (this._state === IN_HEX_ENTITY) {\n            this._stateInHexEntity(c);\n        } else {\n            this._cbs.onerror(Error(\"unknown _state\"), this._state);\n        }\n\n        this._index++;\n    }\n\n    this._cleanup();\n};\n\nTokenizer.prototype.pause = function() {\n    this._running = false;\n};\nTokenizer.prototype.resume = function() {\n    this._running = true;\n\n    if (this._index < this._buffer.length) {\n        this._parse();\n    }\n    if (this._ended) {\n        this._finish();\n    }\n};\n\nTokenizer.prototype.end = function(chunk) {\n    if (this._ended) this._cbs.onerror(Error(\".end() after done!\"));\n    if (chunk) this.write(chunk);\n\n    this._ended = true;\n\n    if (this._running) this._finish();\n};\n\nTokenizer.prototype._finish = function() {\n    //if there is remaining data, emit it in a reasonable way\n    if (this._sectionStart < this._index) {\n        this._handleTrailingData();\n    }\n\n    this._cbs.onend();\n};\n\nTokenizer.prototype._handleTrailingData = function() {\n    var data = this._buffer.substr(this._sectionStart);\n\n    if (\n        this._state === IN_CDATA ||\n        this._state === AFTER_CDATA_1 ||\n        this._state === AFTER_CDATA_2\n    ) {\n        this._cbs.oncdata(data);\n    } else if (\n        this._state === IN_COMMENT ||\n        this._state === AFTER_COMMENT_1 ||\n        this._state === AFTER_COMMENT_2\n    ) {\n        this._cbs.oncomment(data);\n    } else if (this._state === IN_NAMED_ENTITY && !this._xmlMode) {\n        this._parseLegacyEntity();\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (this._state === IN_NUMERIC_ENTITY && !this._xmlMode) {\n        this._decodeNumericEntity(2, 10);\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (this._state === IN_HEX_ENTITY && !this._xmlMode) {\n        this._decodeNumericEntity(3, 16);\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (\n        this._state !== IN_TAG_NAME &&\n        this._state !== BEFORE_ATTRIBUTE_NAME &&\n        this._state !== BEFORE_ATTRIBUTE_VALUE &&\n        this._state !== AFTER_ATTRIBUTE_NAME &&\n        this._state !== IN_ATTRIBUTE_NAME &&\n        this._state !== IN_ATTRIBUTE_VALUE_SQ &&\n        this._state !== IN_ATTRIBUTE_VALUE_DQ &&\n        this._state !== IN_ATTRIBUTE_VALUE_NQ &&\n        this._state !== IN_CLOSING_TAG_NAME\n    ) {\n        this._cbs.ontext(data);\n    }\n    //else, ignore remaining data\n    //TODO add a way to remove current tag\n};\n\nTokenizer.prototype.reset = function() {\n    Tokenizer.call(\n        this,\n        { xmlMode: this._xmlMode, decodeEntities: this._decodeEntities },\n        this._cbs\n    );\n};\n\nTokenizer.prototype.getAbsoluteIndex = function() {\n    return this._bufferOffset + this._index;\n};\n\nTokenizer.prototype._getSection = function() {\n    return this._buffer.substring(this._sectionStart, this._index);\n};\n\nTokenizer.prototype._emitToken = function(name) {\n    this._cbs[name](this._getSection());\n    this._sectionStart = -1;\n};\n\nTokenizer.prototype._emitPartial = function(value) {\n    if (this._baseState !== TEXT) {\n        this._cbs.onattribdata(value); //TODO implement the new event\n    } else {\n        this._cbs.ontext(value);\n    }\n};\n","var decodeMap = require(\"../maps/decode.json\");\n\nmodule.exports = decodeCodePoint;\n\n// modified version of https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n\n    if (codePoint in decodeMap) {\n        codePoint = decodeMap[codePoint];\n    }\n\n    var output = \"\";\n\n    if (codePoint > 0xffff) {\n        codePoint -= 0x10000;\n        output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n        codePoint = 0xdc00 | (codePoint & 0x3ff);\n    }\n\n    output += String.fromCharCode(codePoint);\n    return output;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","\n/**\n * Expose `isUrl`.\n */\n\nmodule.exports = isUrl;\n\n/**\n * RegExps.\n * A URL must match #1 and then at least one of #2/#3.\n * Use two levels of REs to avoid REDOS.\n */\n\nvar protocolAndDomainRE = /^(?:\\w+:)?\\/\\/(\\S+)$/;\n\nvar localhostDomainRE = /^localhost[\\:?\\d]*(?:[^\\:?\\d]\\S*)?$/\nvar nonLocalhostDomainRE = /^[^\\s\\.]+\\.\\S{2,}$/;\n\n/**\n * Loosely validate a URL `string`.\n *\n * @param {String} string\n * @return {Boolean}\n */\n\nfunction isUrl(string){\n  if (typeof string !== 'string') {\n    return false;\n  }\n\n  var match = string.match(protocolAndDomainRE);\n  if (!match) {\n    return false;\n  }\n\n  var everythingAfterProtocol = match[1];\n  if (!everythingAfterProtocol) {\n    return false;\n  }\n\n  if (localhostDomainRE.test(everythingAfterProtocol) ||\n      nonLocalhostDomainRE.test(everythingAfterProtocol)) {\n    return true;\n  }\n\n  return false;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","'use strict';\n\nvar Parser = require('htmlparser2/lib/Parser');\nvar objectAssign = require('object-assign');\n\n/**\n * @see https://github.com/fb55/htmlparser2/wiki/Parser-options\n */\nvar defaultOptions = {lowerCaseTags: false, lowerCaseAttributeNames: false};\n\nvar defaultDirectives = [{name: '!doctype', start: '<', end: '>'}];\n\n/**\n * Parse html to PostHTMLTree\n * @param  {String} html\n * @param  {Object} [options=defaultOptions]\n * @return {PostHTMLTree}\n */\nfunction postHTMLParser(html, options) {\n    var bufArray = [],\n        results = [];\n\n    bufArray.last = function() {\n        return this[this.length - 1];\n    };\n\n    function isDirective(directive, tag) {\n        if (directive.name instanceof RegExp) {\n            var regex = RegExp(directive.name.source, 'i');\n\n            return regex.test(tag);\n        }\n\n        if (tag !== directive.name) {\n            return false;\n        }\n\n        return true;\n    }\n\n    function parserDirective(name, data) {\n        var directives = [].concat(defaultDirectives, options.directives || []);\n        var last = bufArray.last();\n\n        for (var i = 0; i < directives.length; i++) {\n            var directive = directives[i];\n            var directiveText = directive.start + data + directive.end;\n\n            name = name.toLowerCase();\n            if (isDirective(directive, name)) {\n                if (!last) {\n                    results.push(directiveText);\n                    return;\n                }\n\n                last.content || (last.content = []);\n                last.content.push(directiveText);\n            }\n        }\n    }\n\n    function normalizeArributes(attrs) {\n        var result = {};\n        Object.keys(attrs).forEach(function(key) {\n            var obj = {};\n                obj[key] = attrs[key].replace(/&quot;/g, '\"');\n            objectAssign(result, obj);\n        });\n\n        return result;\n    }\n\n    var parser = new Parser({\n        onprocessinginstruction: parserDirective,\n        oncomment: function(data) {\n            var comment = '<!--' + data + '-->',\n                last = bufArray.last();\n\n            if (!last) {\n                results.push(comment);\n                return;\n            }\n\n            last.content || (last.content = []);\n            last.content.push(comment);\n        },\n        onopentag: function(tag, attrs) {\n            var buf = { tag: tag };\n\n            if (Object.keys(attrs).length) {\n                buf.attrs = normalizeArributes(attrs);\n            }\n\n            bufArray.push(buf);\n        },\n        onclosetag: function() {\n            var buf = bufArray.pop();\n\n            if (!bufArray.length) {\n                results.push(buf);\n                return;\n            }\n\n            var last = bufArray.last();\n            if (!Array.isArray(last.content)) {\n                last.content = [];\n            }\n\n            last.content.push(buf);\n        },\n        ontext: function(text) {\n            var last = bufArray.last();\n            if (!last) {\n                results.push(text);\n                return;\n            }\n\n            last.content || (last.content = []);\n            last.content.push(text);\n        }\n    }, options || defaultOptions);\n\n    parser.write(html);\n    parser.end();\n\n    return results;\n}\n\nfunction parserWrapper() {\n    var option;\n\n    function parser(html) {\n        var opt = objectAssign(defaultOptions, option);\n        return postHTMLParser(html, opt);\n    }\n\n    if (\n      arguments.length === 1 &&\n      Boolean(arguments[0]) &&\n      arguments[0].constructor.name === 'Object'\n    ) {\n        option = arguments[0];\n        return parser;\n    }\n\n    option = arguments[1];\n    return parser(arguments[0]);\n}\n\nmodule.exports = parserWrapper;\nmodule.exports.defaultOptions = defaultOptions;\nmodule.exports.defaultDirectives = defaultDirectives;\n","'use strict'\n\n/**\n * # API\n *\n * @author Ivan Voischev (@voischev),\n *         Anton Winogradov (@awinogradov),\n *         Alexej Yaroshevich (@zxqfox),\n *         Vasiliy (@Yeti-or)\n *\n * @namespace tree\n */\nfunction Api () {\n  this.walk = walk\n  this.match = match\n}\n\n/**\n * Walks the tree and passes all nodes via a callback\n *\n * @memberof tree\n *\n * @param  {Function} cb  Callback\n * @return {Function}     Callback(node)\n *\n *@example\n * ```js\n * export const walk = (tree) => {\n *   tree.walk((node) => {\n *     let classes = node.attrs && node.attrs.class.split(' ') || []\n *\n *     if (classes.includes(className)) return cb(node)\n *       return node\n *   })\n * }\n * ```\n */\nfunction walk (cb) {\n  return traverse(this, cb)\n}\n\n/**\n * Matches an expression to search for nodes in the tree\n *\n * @memberof tree\n *\n * @param  {String|RegExp|Object|Array} expression - Matcher(s) to search\n * @param  {Function} cb Callback\n *\n * @return {Function} Callback(node)\n *\n * @example\n * ```js\n * export const match = (tree) => {\n *   // Single matcher\n *   tree.match({ tag: 'custom-tag' }, (node) => {\n *     let tag = node.tag\n *\n *     Object.assign(node, { tag: 'div', attrs: {class: tag} })\n *\n *     return node\n *   })\n *   // Multiple matchers\n *   tree.match([{ tag: 'b' }, { tag: 'strong' }], (node) => {\n *     let style = 'font-weight: bold;'\n *\n *     node.tag = 'span'\n *\n *     node.attrs\n *       ? ( node.attrs.style\n *         ? ( node.attrs.style += style )\n *         : node.attrs.style = style\n *       )\n *       : node.attrs = { style: style }\n *\n *     return node\n *   })\n * }\n * ```\n */\nfunction match (expression, cb) {\n  return Array.isArray(expression)\n    ? traverse(this, function (node) {\n      for (var i = 0; i < expression.length; i++) {\n        if (compare(expression[i], node)) return cb(node)\n      }\n\n      return node\n    })\n    : traverse(this, function (node) {\n      if (compare(expression, node)) return cb(node)\n\n      return node\n    })\n}\n\nmodule.exports = Api\nmodule.exports.match = match\nmodule.exports.walk = walk\n\n/** @private */\nfunction traverse (tree, cb) {\n  if (Array.isArray(tree)) {\n    for (var i = 0; i < tree.length; i++) {\n      tree[i] = traverse(cb(tree[i]), cb)\n    }\n  } else if (\n    tree &&\n      typeof tree === 'object' &&\n      Object.prototype.hasOwnProperty.call(tree, 'content')\n  ) traverse(tree.content, cb)\n\n  return tree\n}\n\n/** @private */\nfunction compare (expected, actual) {\n  if (expected instanceof RegExp) {\n    if (typeof actual === 'object') return false\n    if (typeof actual === 'string') return expected.test(actual)\n  }\n\n  if (typeof expected !== typeof actual) return false\n  if (typeof expected !== 'object' || expected === null) {\n    return expected === actual\n  }\n\n  if (Array.isArray(expected)) {\n    return expected.every(function (exp) {\n      return [].some.call(actual, function (act) {\n        return compare(exp, act)\n      })\n    })\n  }\n\n  return Object.keys(expected).every(function (key) {\n    var ao = actual[key]\n    var eo = expected[key]\n\n    if (typeof eo === 'object' && eo !== null && ao !== null) {\n      return compare(eo, ao)\n    }\n    if (typeof eo === 'boolean') {\n      return eo !== (ao == null)\n    }\n\n    return ao === eo\n  })\n}\n","const isURL = require('is-url');\n\n// Matches anchor (ie: #raptors)\nconst ANCHOR_REGEXP = /^#/;\n\n// Matches scheme (ie: tel:, mailto:, data:, itms-apps:)\nconst SCHEME_REGEXP = /^[a-z][a-z0-9\\-+.]*:/i;\n\nexport default function(url: string) {\n  return isURL(url) || ANCHOR_REGEXP.test(url) || SCHEME_REGEXP.test(url);\n}\n","export class FileError extends Error {\n}\nexport function buildWorkerError(error) {\n    return {\n        name: error.name,\n        message: error.message,\n        fileName: error.fileName,\n        lineNumber: error.lineNumber,\n        columnNumber: error.columnNumber,\n    };\n}\nexport function parseWorkerError(error) {\n    const reconstructedError = new FileError(error.message);\n    reconstructedError.name = error.name;\n    reconstructedError.columnNumber = error.columnNumber;\n    reconstructedError.fileName = error.fileName;\n    reconstructedError.lineNumber = error.lineNumber;\n    return reconstructedError;\n}\n","// eslint-disable-next-line spaced-comment\n/// <reference lib=\"webworker\" />\n/* eslint-disable no-continue */\n/* eslint-disable no-inner-declarations */\nimport parse from 'posthtml-parser';\nimport api from 'posthtml/lib/api';\n\nimport isUrl from './is-url';\nimport { ChildHandler } from '../../../transpilers/worker-transpiler/child-handler';\n\nconst childHandler = new ChildHandler('html-worker');\n\n// A list of all attributes that may produce a dependency\n// Based on https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes\nconst ATTRS = {\n  src: [\n    'script',\n    'img',\n    'audio',\n    'video',\n    'source',\n    'track',\n    'iframe',\n    'embed',\n  ],\n  href: ['link', 'a'],\n  poster: ['video'],\n  'xlink:href': ['use'],\n  content: ['meta'],\n};\n\n// A list of metadata that should produce a dependency\n// Based on:\n// - http://schema.org/\n// - http://ogp.me\n// - https://developer.twitter.com/en/docs/tweets/optimize-with-cards/overview/markup\n// - https://msdn.microsoft.com/en-us/library/dn255024.aspx\nconst META = {\n  property: [\n    'og:image',\n    'og:image:url',\n    'og:image:secure_url',\n    'og:audio',\n    'og:audio:secure_url',\n    'og:video',\n    'og:video:secure_url',\n  ],\n  name: [\n    'twitter:image',\n    'msapplication-square150x150logo',\n    'msapplication-square310x310logo',\n    'msapplication-square70x70logo',\n    'msapplication-wide310x150logo',\n    'msapplication-TileImage',\n  ],\n  itemprop: [\n    'image',\n    'logo',\n    'screenshot',\n    'thumbnailUrl',\n    'contentUrl',\n    'downloadUrl',\n  ],\n};\n\nasync function compile(data) {\n  const { code } = data;\n\n  const resources = [];\n\n  const dependencies = [];\n\n  function addDependency(depPath: string) {\n    if (!isUrl(depPath)) {\n      let assetPath = decodeURIComponent(depPath);\n      if (/^\\w/.test(assetPath)) {\n        assetPath = `./${assetPath}`;\n      }\n\n      dependencies.push({\n        path: assetPath,\n        isEntry: true,\n      });\n\n      resources.push(assetPath);\n\n      return assetPath;\n    }\n    return false;\n  }\n\n  function addSrcSetDependencies(srcset: string) {\n    const newSources = [];\n\n    srcset.split(',').forEach(source => {\n      const pair = source.trim().split(' ');\n      if (pair.length === 0) return;\n      const addedDependency = addDependency(pair[0]);\n      if (addedDependency) {\n        pair[0] = addedDependency;\n      }\n      newSources.push(pair.join(' '));\n    });\n    return newSources.join(',');\n  }\n\n  const res = parse(code, { lowerCaseAttributeNames: true });\n  res.walk = api.walk;\n  res.match = api.match;\n\n  res.walk(node => {\n    if (node == null) {\n      return node;\n    }\n\n    if (node.attrs) {\n      if (node.tag === 'meta') {\n        if (\n          !Object.keys(node.attrs).some(attr => {\n            const values = META[attr];\n            return values && values.includes(node.attrs[attr]);\n          })\n        ) {\n          return node;\n        }\n      }\n\n      /* eslint-disable no-param-reassign no-continue */\n      // eslint-disable-next-line no-restricted-syntax\n      for (const attr in node.attrs) {\n        if (Object.prototype.hasOwnProperty.call(node.attrs, attr)) {\n          if (node.tag === 'img' && attr === 'srcset') {\n            node.attrs[attr] = addSrcSetDependencies(node.attrs[attr]);\n            continue;\n          }\n          const elements = ATTRS[attr];\n          // Check for virtual paths\n          if (\n            (node.tag === 'a' && node.attrs[attr].lastIndexOf('.') < 1) ||\n            node.attrs[attr].endsWith('.html')\n          ) {\n            continue;\n          }\n\n          if (\n            node.tag === 'html' &&\n            node.attrs[attr].endsWith('.html') &&\n            attr === 'href'\n          ) {\n            // Another HTML file, we'll compile it when the user goes to it\n            continue;\n          }\n\n          if (elements && elements.includes(node.tag)) {\n            const result = addDependency(node.attrs[attr]);\n\n            if (result) {\n              if (node.tag === 'link' || node.tag === 'script') {\n                node.tag = false;\n                node.content = [];\n              } else {\n                node.attrs[attr] = result;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return node;\n  });\n\n  let compiledCode = ``;\n\n  compiledCode += '\\n';\n  compiledCode += 'function loadResources() {';\n  resources.forEach(resource => {\n    const resourcePath = JSON.stringify(resource);\n    compiledCode += `\\n`;\n    compiledCode += `\\trequire(${resourcePath});\\n`;\n  });\n  compiledCode += '\\n}';\n\n  compiledCode += `\nif (document.readyState !== 'complete') {\n  window.addEventListener('load', function() { loadResources() });\n} else {\n  loadResources();\n}\n\n`;\n\n  return {\n    transpiledCode: compiledCode,\n    foundDependencies: dependencies,\n  };\n}\n\nchildHandler.registerFunction('compile', compile);\nchildHandler.emitReady();\n","import {\n  buildWorkerError,\n  parseWorkerError,\n} from '../../../../../../sandpack-core/lib/transpiler/utils/worker-error-handler';\n\ntype ChildFunc = (data: any) => Promise<any>;\ntype FSInitializerFunc = () => void | Promise<void>;\n\ninterface ChildCall {\n  method: string;\n  data: any;\n  resolve: (result: Promise<any> | any) => void;\n  reject: (error: any) => void;\n}\n\nexport class ChildHandler {\n  name: string;\n  functions: Map<string, ChildFunc> = new Map();\n  pendingCalls: Map<number, ChildCall> = new Map();\n  callId: number = 0;\n  isReady: boolean = false;\n  initializeFS: FSInitializerFunc;\n  queuedMessages: Array<any> = [];\n\n  constructor(name: string) {\n    this.name = name;\n    self.addEventListener('message', evt => {\n      this.handleMessage(evt.data).catch(console.error);\n    });\n    self.postMessage({\n      type: 'worker_started',\n      codesandbox: true,\n    });\n  }\n\n  registerFunction(method: string, fn: ChildFunc) {\n    this.functions.set(method, fn);\n  }\n\n  registerFSInitializer(newInitializeFS: FSInitializerFunc) {\n    this.initializeFS = newInitializeFS;\n  }\n\n  async handleMessage(msg: any) {\n    if (typeof msg !== 'object' || !msg.codesandbox) {\n      if (!msg.browserfsMessage) {\n        console.warn(`Invalid message from main thread to ${this.name}`, msg);\n      }\n      return;\n    }\n\n    if (!this.isReady) {\n      this.queuedMessages.push(msg);\n      return;\n    }\n\n    switch (msg.type) {\n      case 'ping':\n        if (this.isReady) {\n          await this.emitReady();\n        }\n        break;\n      case 'request':\n        await this.handleCallRequest(msg);\n        break;\n      case 'response':\n        await this.handleCallResponse(msg);\n        break;\n      case 'initialize-fs':\n        if (!this.initializeFS) {\n          throw new Error(`initializeFS is undefined for ${this.name}`);\n        }\n        await this.initializeFS();\n        break;\n    }\n  }\n\n  handleCallResponse(msg: any) {\n    const foundCall = this.pendingCalls.get(msg.idx);\n    if (foundCall) {\n      if (!msg.isError) {\n        foundCall.resolve(msg.data);\n      } else {\n        foundCall.reject(parseWorkerError(msg.data));\n      }\n    }\n  }\n\n  async handleCallRequest(msg: any) {\n    try {\n      const fn = this.functions.get(msg.method);\n      if (!fn) {\n        throw new Error(\n          `Could not find registered child function for call ${this.name}#${msg.method}`\n        );\n      }\n      const result = await fn(msg.data);\n      self.postMessage({\n        type: 'response',\n        codesandbox: true,\n        idx: msg.idx,\n        data: result,\n      });\n    } catch (err) {\n      console.error(err);\n      self.postMessage({\n        type: 'response',\n        codesandbox: true,\n        idx: msg.idx,\n        isError: true,\n        data: buildWorkerError(err),\n      });\n    }\n  }\n\n  callFn({ method, data }: { method: string; data: any }): Promise<any> {\n    const idx = this.callId++;\n    const message = {\n      type: 'request',\n      codesandbox: true,\n      idx,\n      method,\n      data,\n    };\n\n    return new Promise((resolve, reject) => {\n      this.pendingCalls.set(idx, {\n        method,\n        data,\n        resolve,\n        reject,\n      });\n\n      self.postMessage(message);\n    });\n  }\n\n  emitReady() {\n    this.isReady = true;\n    this.queuedMessages.forEach(msg => {\n      console.warn('Run queued message', msg);\n      this.handleMessage(msg).catch(console.error);\n    });\n\n    self.postMessage({\n      type: 'ready',\n      codesandbox: true,\n    });\n  }\n}\n"],"sourceRoot":""}