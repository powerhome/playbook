{"version":3,"file":"InMemory.js","sourceRoot":"","sources":["../../../src/backend/InMemory.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AACA,wEAA+J;AAE/J;;GAEG;AACH;IAAA;QACU,UAAK,GAA8B,EAAE,CAAC;IAwBhD,CAAC;IAtBQ,4BAAI,GAAX,cAAgB,OAAO,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;IAC1C,6BAAK,GAAZ,cAAiB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC;IAE5B,wCAAgB,GAAvB,UAAwB,IAAY;QAClC,OAAO,IAAI,8CAAuB,CAAC,IAAI,CAAC,CAAC;IAC3C,CAAC;IAEM,2BAAG,GAAV,UAAW,GAAW;QACpB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC;IAEM,2BAAG,GAAV,UAAW,GAAW,EAAE,IAAY,EAAE,SAAkB;QACtD,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;YAChD,OAAO,KAAK,CAAC;SACd;QACD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;QACvB,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,2BAAG,GAAV,UAAW,GAAW;QACpB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC;IACH,oBAAC;AAAD,CAAC,AAzBD,IAyBC;AAzBY,sCAAa;AA2B1B;;;GAGG;AACH;IAAgD,sCAAsB;IAWpE;eACE,kBAAM,EAAE,KAAK,EAAE,IAAI,aAAa,EAAE,EAAE,CAAC;IACvC,CAAC;IARD;;OAEG;IACW,yBAAM,GAApB,UAAqB,OAAY,EAAE,EAAmC;QACpE,EAAE,CAAC,IAAI,EAAE,IAAI,kBAAkB,EAAE,CAAC,CAAC;IACrC,CAAC;IATsB,uBAAI,GAAG,UAAU,CAAC;IAElB,0BAAO,GAAsB,EAAE,CAAC;IAWzD,yBAAC;CAAA,AAdD,CAAgD,6CAAsB,GAcrE;kBAdoB,kBAAkB","sourcesContent":["import {BFSCallback, FileSystemOptions} from '../core/file_system';\nimport {SyncKeyValueStore, SimpleSyncStore, SimpleSyncRWTransaction, SyncKeyValueRWTransaction, SyncKeyValueFileSystem} from '../generic/key_value_filesystem';\n\n/**\n * A simple in-memory key-value store backed by a JavaScript object.\n */\nexport class InMemoryStore implements SyncKeyValueStore, SimpleSyncStore {\n  private store: { [key: string]: Buffer } = {};\n\n  public name() { return InMemoryFileSystem.Name; }\n  public clear() { this.store = {}; }\n\n  public beginTransaction(type: string): SyncKeyValueRWTransaction {\n    return new SimpleSyncRWTransaction(this);\n  }\n\n  public get(key: string): Buffer {\n    return this.store[key];\n  }\n\n  public put(key: string, data: Buffer, overwrite: boolean): boolean {\n    if (!overwrite && this.store.hasOwnProperty(key)) {\n      return false;\n    }\n    this.store[key] = data;\n    return true;\n  }\n\n  public del(key: string): void {\n    delete this.store[key];\n  }\n}\n\n/**\n * A simple in-memory file system backed by an InMemoryStore.\n * Files are not persisted across page loads.\n */\nexport default class InMemoryFileSystem extends SyncKeyValueFileSystem {\n  public static readonly Name = \"InMemory\";\n\n  public static readonly Options: FileSystemOptions = {};\n\n  /**\n   * Creates an InMemoryFileSystem instance.\n   */\n  public static Create(options: any, cb: BFSCallback<InMemoryFileSystem>): void {\n    cb(null, new InMemoryFileSystem());\n  }\n  private constructor() {\n    super({ store: new InMemoryStore() });\n  }\n}\n"]}