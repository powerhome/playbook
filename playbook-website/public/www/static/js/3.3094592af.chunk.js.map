{"version":3,"sources":["webpack:///../sandbox-hooks/html2canvas-lib/core/bitwise.js","webpack:///../sandbox-hooks/html2canvas-lib/core/cache-storage.js","webpack:///../sandbox-hooks/html2canvas-lib/core/features.js","webpack:///../sandbox-hooks/html2canvas-lib/core/logger.js","webpack:///../sandbox-hooks/html2canvas-lib/core/util.js","webpack:///../sandbox-hooks/html2canvas-lib/css/IPropertyDescriptor.js","webpack:///../sandbox-hooks/html2canvas-lib/css/index.js","webpack:///../sandbox-hooks/html2canvas-lib/css/layout/bounds.js","webpack:///../sandbox-hooks/html2canvas-lib/css/layout/text.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/background-clip.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/background-color.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/background-image.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/background-origin.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/background-position.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/background-repeat.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/background-size.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/border-color.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/border-radius.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/border-style.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/border-width.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/box-shadow.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/color.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/content.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/counter-increment.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/counter-reset.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/display.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/float.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/font-family.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/font-size.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/font-style.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/font-variant.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/font-weight.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/letter-spacing.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/line-break.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/line-height.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/list-style-image.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/list-style-position.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/list-style-type.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/margin.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/opacity.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/overflow-wrap.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/overflow.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/padding.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/position.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/quotes.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/text-align.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/text-decoration-color.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/text-decoration-line.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/text-shadow.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/text-transform.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/transform-origin.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/transform.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/visibility.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/word-break.js","webpack:///../sandbox-hooks/html2canvas-lib/css/property-descriptors/z-index.js","webpack:///../sandbox-hooks/html2canvas-lib/css/syntax/parser.js","webpack:///../sandbox-hooks/html2canvas-lib/css/syntax/tokenizer.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/angle.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/color.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/functions/-prefix-linear-gradient.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/functions/-prefix-radial-gradient.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/functions/-webkit-gradient.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/functions/counter.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/functions/gradient.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/functions/linear-gradient.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/functions/radial-gradient.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/image.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/length-percentage.js","webpack:///../sandbox-hooks/html2canvas-lib/css/types/length.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/document-cloner.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/elements/li-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/elements/ol-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/elements/select-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/elements/textarea-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/node-parser.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/replaced-elements/canvas-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/replaced-elements/iframe-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/replaced-elements/image-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/replaced-elements/input-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/replaced-elements/svg-element-container.js","webpack:///../sandbox-hooks/html2canvas-lib/dom/text-container.js","webpack:///../sandbox-hooks/html2canvas-lib/index.js","webpack:///../sandbox-hooks/html2canvas-lib/render/background.js","webpack:///../sandbox-hooks/html2canvas-lib/render/bezier-curve.js","webpack:///../sandbox-hooks/html2canvas-lib/render/border.js","webpack:///../sandbox-hooks/html2canvas-lib/render/bound-curves.js","webpack:///../sandbox-hooks/html2canvas-lib/render/box-sizing.js","webpack:///../sandbox-hooks/html2canvas-lib/render/canvas/canvas-renderer.js","webpack:///../sandbox-hooks/html2canvas-lib/render/canvas/foreignobject-renderer.js","webpack:///../sandbox-hooks/html2canvas-lib/render/effects.js","webpack:///../sandbox-hooks/html2canvas-lib/render/font-metrics.js","webpack:///../sandbox-hooks/html2canvas-lib/render/path.js","webpack:///../sandbox-hooks/html2canvas-lib/render/stacking-context.js","webpack:///../sandbox-hooks/html2canvas-lib/render/vector.js"],"names":["_exports","contains","bit","value","CacheStorage","name","options","_caches","Cache","cache","Error","concat","url","link","_link","href","protocol","hostname","port","src","getOrigin","_origin","window","document","createElement","location","current","_current","constructor","id","this","_options","_cache","addImage","result","Promise","resolve","has","isBlobImage","isRenderable","loadImage","match","key","_this","_asyncToGenerator2","default","isSameOrigin","useCORS","isInlineImage","FEATURES","SUPPORT_CORS_IMAGES","useProxy","proxy","SUPPORT_CORS_XHR","allowTaint","Logger","getInstance","debug","substring","reject","img","Image","onload","onerror","isInlineBase64Image","crossOrigin","complete","setTimeout","imageTimeout","keys","Object","responseType","SUPPORT_RESPONSE_TYPE","xhr","XMLHttpRequest","status","response","reader","FileReader","addEventListener","e","readAsDataURL","open","encodeURIComponent","timeout","ontimeout","send","INLINE_SVG","INLINE_BASE64","INLINE_IMG","SUPPORT_SVG_DRAWING","isSVG","test","substr","toLowerCase","isGreenPixel","data","createForeignObjectSVG","width","height","x","y","node","xmlns","svg","createElementNS","foreignObject","setAttributeNS","toString","appendChild","loadSerializedSVG","XMLSerializer","serializeToString","testRangeBounds","createRange","range","getBoundingClientRect","testElement","style","display","body","selectNode","rangeBounds","rangeHeight","Math","round","removeChild","defineProperty","testSVG","canvas","ctx","getContext","drawImage","toDataURL","Array","from","fetch","testForeignObject","fillStyle","fillRect","greenImageSrc","then","getImageData","backgroundImage","catch","_ref","enabled","start","Date","now","_len","arguments","length","args","_key","console","getTime","info","instances","instance","_len2","_key2","error","_len3","_key3","SMALL_IMAGE","PropertyDescriptorParsingType","CSSParsedDeclaration","declaration","backgroundClip","parse","backgroundColor","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","boxShadow","color","float","cssFloat","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","letterSpacing","lineBreak","lineHeight","listStyleImage","listStylePosition","listStyleType","marginTop","marginRight","marginBottom","marginLeft","opacity","overflowTuple","overflow","overflowX","overflowY","overflowWrap","paddingTop","paddingRight","paddingBottom","paddingLeft","position","textAlign","textDecorationColor","textDecorationLine","textShadow","textTransform","transform","transformOrigin","visibility","wordBreak","zIndex","isVisible","VISIBILITY","VISIBLE","isTransparent","isTransformed","isPositioned","POSITION","STATIC","isPositionedWithZIndex","auto","isFloating","FLOAT","NONE","isInlineLevel","CSSParsedPseudoDeclaration","content","quotes","CSSParsedCounterDeclaration","counterIncrement","counterReset","descriptor","tokenizer","Tokenizer","initialValue","write","parser","Parser","read","type","IDENT_VALUE","token","parseComponentValue","isIdentToken","VALUE","LIST","parseComponentValues","TOKEN_VALUE","TYPE_VALUE","format","angle","colorType","image","isLength","ZERO_LENGTH","isLengthPercentage","Bounds","w","h","left","top","add","clientRect","parseBounds","fromClientRect","parseDocumentSize","documentElement","max","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","TextBounds","text","bounds","parseTextBounds","styles","textList","breakText","textBounds","offset","forEach","trim","SUPPORT_RANGE_BOUNDS","push","getRangeBounds","replacementNode","splitText","getWrapperBounds","ownerDocument","wrapper","cloneNode","parentNode","replaceChild","firstChild","setStart","setEnd","toCodePoints","map","i","fromCodePoint","breakWords","str","breaker","LineBreaker","OVERFLOW_WRAP","BREAK_WORD","words","bk","next","done","slice","BACKGROUND_CLIP","prefix","tokens","PADDING_BOX","CONTENT_BOX","BORDER_BOX","first","TokenType","IDENT_TOKEN","filter","nonFunctionArgSeparator","isSupportedImage","parseFunctionArgs","values","parseLengthPercentageTuple","BACKGROUND_REPEAT","join","parseBackgroundRepeat","NO_REPEAT","REPEAT_X","REPEAT_Y","REPEAT","BACKGROUND_SIZE","isBackgroundSizeInfoToken","borderColorForSide","side","borderRadiusForSide","BORDER_STYLE","borderStyleForSide","SOLID","borderWidthForSide","isDimensionToken","number","isIdentWithValue","shadow","offsetX","offsetY","blur","spread","inset","c","increments","filtered","nonWhiteSpace","counter","increment","isNumberToken","resets","reset","reduce","parseDisplayValue","LEFT","RIGHT","INLINE_START","INLINE_END","accumulator","results","STRING_TOKEN","NUMBER_TOKEN","COMMA_TOKEN","indexOf","FONT_STYLE","OBLIQUE","ITALIC","NORMAL","DIMENSION_TOKEN","LINE_BREAK","STRICT","computeLineHeight","getAbsoluteValue","LIST_STYLE_POSITION","INSIDE","OUTSIDE","LIST_STYLE_TYPE","DISC","CIRCLE","SQUARE","DECIMAL","CJK_DECIMAL","DECIMAL_LEADING_ZERO","LOWER_ROMAN","UPPER_ROMAN","LOWER_GREEK","LOWER_ALPHA","UPPER_ALPHA","ARABIC_INDIC","ARMENIAN","BENGALI","CAMBODIAN","CJK_EARTHLY_BRANCH","CJK_HEAVENLY_STEM","CJK_IDEOGRAPHIC","DEVANAGARI","ETHIOPIC_NUMERIC","GEORGIAN","GUJARATI","GURMUKHI","HEBREW","HIRAGANA","HIRAGANA_IROHA","JAPANESE_FORMAL","JAPANESE_INFORMAL","KANNADA","KATAKANA","KATAKANA_IROHA","KHMER","KOREAN_HANGUL_FORMAL","KOREAN_HANJA_FORMAL","KOREAN_HANJA_INFORMAL","LAO","LOWER_ARMENIAN","MALAYALAM","MONGOLIAN","MYANMAR","ORIYA","PERSIAN","SIMP_CHINESE_FORMAL","SIMP_CHINESE_INFORMAL","TAMIL","TELUGU","THAI","TIBETAN","TRAD_CHINESE_FORMAL","TRAD_CHINESE_INFORMAL","UPPER_ARMENIAN","DISCLOSURE_OPEN","DISCLOSURE_CLOSED","marginForSide","OVERFLOW","HIDDEN","SCROLL","AUTO","paddingForSide","RELATIVE","ABSOLUTE","FIXED","STICKY","isStringToken","close","getQuote","depth","quote","min","TEXT_ALIGN","CENTER","line","COLORS","TRANSPARENT","TEXT_TRANSFORM","UPPERCASE","LOWERCASE","CAPITALIZE","DEFAULT_VALUE","PERCENTAGE_TOKEN","flags","FLAG_INTEGER","DEFAULT","origins","FUNCTION","transformFunction","SUPPORTED_TRANSFORM_FUNCTIONS","matrix","arg","matrix3d","_values","_slicedToArray2","a1","b1","_objectDestructuringEmpty2","a2","b2","a4","b4","COLLAPSE","WORD_BREAK","BREAK_ALL","KEEP_ALL","order","_tokens","create","consumeToken","WHITESPACE_TOKEN","EOF_TOKEN","SyntaxError","reconsumeToken","consumeComponentValue","LEFT_CURLY_BRACKET_TOKEN","LEFT_SQUARE_BRACKET_TOKEN","LEFT_PARENTHESIS_TOKEN","consumeSimpleBlock","FUNCTION_TOKEN","consumeFunction","block","isEndingTokenFor","functionToken","cssFunction","RIGHT_PARENTHESIS_TOKEN","shift","unshift","RIGHT_CURLY_BRACKET_TOKEN","RIGHT_SQUARE_BRACKET_TOKEN","FLAG_UNRESTRICTED","FLAG_ID","FLAG_NUMBER","isDigit","codePoint","isHex","isWhiteSpace","isNameStartCodePoint","isLetter","isLowerCaseLetter","isUpperCaseLetter","isNonASCIICodePoint","isNameCodePoint","isNonPrintableCodePoint","isValidEscape","c1","c2","isIdentifierStart","c3","isNumberStart","stringToNumber","codePoints","sign","integers","int","parseInt","fraction","fracd","frac","expsign","exponent","exp","pow","SUFFIX_MATCH_TOKEN","PREFIX_MATCH_TOKEN","COLUMN_TOKEN","DASH_MATCH_TOKEN","INCLUDE_MATCH_TOKEN","SUBSTRING_MATCH_TOKEN","BAD_URL_TOKEN","BAD_STRING_TOKEN","CDO_TOKEN","CDC_TOKEN","COLON_TOKEN","SEMICOLON_TOKEN","_value","chunk","consumeCodePoint","consumeStringToken","peekCodePoint","consumeName","HASH_TOKEN","reconsumeCodePoint","consumeNumericToken","e1","e2","e3","consumeIdentLikeToken","a3","AT_KEYWORD_TOKEN","u1","u2","consumeUnicodeRangeToken","consumeWhiteSpace","DELIM_TOKEN","delta","digits","questionMarks","digit","end","UNICODE_RANGE_TOKEN","endDigits","consumeUrlToken","URL_TOKEN","stringToken","consumeBadUrlRemnants","consumeEscapedCodePoint","consumeStringSlice","count","amount","splice","endingCodePoint","undefined","consumeNumber","repr","_this$consumeNumber","_this$consumeNumber2","unit","hex","hexCodePoint","isSurrogateCodePoint","PI","isAngle","parseNamedSide","ident","deg","HUNDRED_PERCENT","colorFunction","SUPPORTED_COLOR_FUNCTIONS","r","g","b","pack","a","namedColor","toUpperCase","asString","alpha","blue","green","red","getTokenColorValue","rgb","_tokens$map","_tokens$map2","_tokens$map3","_tokens$map4","hue2rgb","t1","t2","hue","hsl","saturation","lightness","s","l","hsla","rgba","ALICEBLUE","ANTIQUEWHITE","AQUA","AQUAMARINE","AZURE","BEIGE","BISQUE","BLACK","BLANCHEDALMOND","BLUE","BLUEVIOLET","BROWN","BURLYWOOD","CADETBLUE","CHARTREUSE","CHOCOLATE","CORAL","CORNFLOWERBLUE","CORNSILK","CRIMSON","CYAN","DARKBLUE","DARKCYAN","DARKGOLDENROD","DARKGRAY","DARKGREEN","DARKGREY","DARKKHAKI","DARKMAGENTA","DARKOLIVEGREEN","DARKORANGE","DARKORCHID","DARKRED","DARKSALMON","DARKSEAGREEN","DARKSLATEBLUE","DARKSLATEGRAY","DARKSLATEGREY","DARKTURQUOISE","DARKVIOLET","DEEPPINK","DEEPSKYBLUE","DIMGRAY","DIMGREY","DODGERBLUE","FIREBRICK","FLORALWHITE","FORESTGREEN","FUCHSIA","GAINSBORO","GHOSTWHITE","GOLD","GOLDENROD","GRAY","GREEN","GREENYELLOW","GREY","HONEYDEW","HOTPINK","INDIANRED","INDIGO","IVORY","KHAKI","LAVENDER","LAVENDERBLUSH","LAWNGREEN","LEMONCHIFFON","LIGHTBLUE","LIGHTCORAL","LIGHTCYAN","LIGHTGOLDENRODYELLOW","LIGHTGRAY","LIGHTGREEN","LIGHTGREY","LIGHTPINK","LIGHTSALMON","LIGHTSEAGREEN","LIGHTSKYBLUE","LIGHTSLATEGRAY","LIGHTSLATEGREY","LIGHTSTEELBLUE","LIGHTYELLOW","LIME","LIMEGREEN","LINEN","MAGENTA","MAROON","MEDIUMAQUAMARINE","MEDIUMBLUE","MEDIUMORCHID","MEDIUMPURPLE","MEDIUMSEAGREEN","MEDIUMSLATEBLUE","MEDIUMSPRINGGREEN","MEDIUMTURQUOISE","MEDIUMVIOLETRED","MIDNIGHTBLUE","MINTCREAM","MISTYROSE","MOCCASIN","NAVAJOWHITE","NAVY","OLDLACE","OLIVE","OLIVEDRAB","ORANGE","ORANGERED","ORCHID","PALEGOLDENROD","PALEGREEN","PALETURQUOISE","PALEVIOLETRED","PAPAYAWHIP","PEACHPUFF","PERU","PINK","PLUM","POWDERBLUE","PURPLE","REBECCAPURPLE","RED","ROSYBROWN","ROYALBLUE","SADDLEBROWN","SALMON","SANDYBROWN","SEAGREEN","SEASHELL","SIENNA","SILVER","SKYBLUE","SLATEBLUE","SLATEGRAY","SLATEGREY","SNOW","SPRINGGREEN","STEELBLUE","TAN","TEAL","THISTLE","TOMATO","TURQUOISE","VIOLET","WHEAT","WHITE","WHITESMOKE","YELLOW","YELLOWGREEN","prefixLinearGradient","stops","firstToken","angleType","colorStop","parseColorStop","CSSImageType","LINEAR_GRADIENT","prefixRadialGradient","shape","CSSRadialShape","size","CSSRadialExtent","FARTHEST_CORNER","isColorStop","acc","FIFTY_PERCENT","ELLIPSE","CONTAIN","CLOSEST_SIDE","FARTHEST_SIDE","CLOSEST_CORNER","COVER","isArray","RADIAL_GRADIENT","webkitGradient","stop","CounterState","counters","getCounterValue","getCounterValues","pop","canReset","entry","counterNames","ROMAN_UPPER","createAdditiveCounter","symbols","fallback","suffix","createCounterText","string","integer","index","createCounterStyleWithSymbolResolver","codePointRangeLength","isNumeric","resolver","createCounterStyleFromRange","codePointRangeStart","codePointRangeEnd","abs","floor","createCounterStyleFromSymbols","createCJKCounter","numbers","multipliers","negativeSign","tmp","coefficient","appendSuffix","defaultSuffix","cjkSuffix","koreanSuffix","spaceSuffix","CJK_TEN_COEFFICIENTS","CJK_ZEROS","processColorStops","lineLength","last","processStops","previous","absoluteValue","gapBegin","gapLength","gapValue","calculateGradientDirection","radian","getAngleFromCorner","corner","centerX","centerY","atan2","sin","cos","halfWidth","halfHeight","halfLineLength","yDiff","xDiff","distance","sqrt","findCorner","closest","stat","_corner","cx","cy","d","optimumDistance","optimumCorner","Infinity","calculateRadius","gradient","rx","ry","_findCorner","_findCorner2","_findCorner3","_findCorner4","linearGradient","radialGradient","isAtPosition","SUPPORTED_IMAGE_FUNCTIONS","isLinearGradient","background","isRadialGradient","URL","imageFunction","getAbsoluteValueForTuple","tuple","_tuple","parent","PseudoElementType","DocumentCloner","element","scrolledElements","referenceElement","quoteDepth","toIFrame","windowSize","iframe","createIFrameContainer","contentWindow","scrollX","defaultView","pageXOffset","scrollY","pageYOffset","cloneWindow","documentClone","iframeLoad","iframeLoader","restoreNodeScroll","scrollTo","navigator","userAgent","onclone","clonedReferenceElement","nodeName","fonts","ready","serializeDoctype","doctype","restoreOwnerScroll","adoptNode","createElementClone","isCanvasElement","createCanvasClone","isStyleElement","createStyleClone","clone","isImageElement","loading","sheet","cssRules","css","call","rule","cssText","textContent","inlineImages","clonedCanvas","clonedCtx","putImageData","isTextNode","createTextNode","isElementNode","isHTMLElementNode","isSVGElementNode","getComputedStyle","styleBefore","styleAfter","isBodyElement","createPseudoHideStyles","before","resolvePseudoContent","BEFORE","child","nextSibling","isScriptElement","hasAttribute","ignoreElements","copyStyles","insertBefore","after","AFTER","isIFrameElement","copyCSSStyles","scrollTop","scrollLeft","isTextareaElement","isSelectElement","pseudoElt","anonymousReplacedElement","attr","getAttribute","_token$values$filter","_token$values$filter2","counterStyle","counterState","counterType","_token$values$filter3","_token$values$filter4","delim","counterStates","separator","className","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","newClassName","baseValue","container","cloneIframeContainer","border","scrolling","setAttribute","onreadystatechange","interval","setInterval","childNodes","readyState","clearInterval","target","property","item","setProperty","getPropertyValue","internalSubset","publicId","systemId","_ref2","_ref3","createStyles","ElementContainer","textNodes","elements","LIElementContainer","super","OLElementContainer","reversed","SelectElementContainer","option","selectedIndex","TextareaElementContainer","LIST_OWNERS","parseNodeTree","root","nextNode","childNode","TextContainer","createContainer","createsRealStackingContext","createsStackingContext","tagName","isSVGElement","ImageElementContainer","CanvasElementContainer","SVGElementContainer","isLIElement","isOLElement","isInputElement","InputElementContainer","IFrameElementContainer","parseTree","nodeType","Node","TEXT_NODE","ELEMENT_NODE","isHTMLElement","intrinsicWidth","intrinsicHeight","parseColor","tree","documentBackgroundColor","bodyBackgroundColor","currentSrc","naturalWidth","naturalHeight","CHECKBOX_BORDER_RADIUS","RADIO_BORDER_RADIUS","CHECKBOX","RADIO","PASSWORD","INPUT_COLOR","input","reformatInputBounds","checked","getInputValue","placeholder","baseVal","replace","capitalize","m","p1","p2","renderElement","setContext","opts","instanceName","random","resourceOptions","_objectSpread","logging","removeContainer","foreignObjectRendering","scale","devicePixelRatio","windowWidth","innerWidth","windowHeight","innerHeight","ceil","windowBounds","documentCloner","clonedElement","bgColor","defaultBackgroundColor","renderOptions","renderer","ForeignObjectRenderer","render","attachInstance","detachInstance","CanvasRenderer","destroy","_x","_x2","apply","calculateBackgroundPositioningArea","contentBox","paddingBox","calculateBackgroundPaintingArea","calculateBackgroundRendering","intrinsicSize","backgroundPositioningArea","getBackgroundValueForIndex","backgroundPaintingArea","backgroundImageSize","calculateBackgroundSize","_backgroundImageSize","sizeWidth","sizeHeight","calculateBackgroundRepeatPath","isAuto","hasIntrinsicValue","intrinsicProportion","_size","second","hasIntrinsicProportion","hasIntrinsicWidth","hasIntrinsicHeight","hasIntrinsicDimensions","repeat","_ref4","_ref5","_ref6","Vector","lerp","t","BezierCurve","startControl","endControl","PathType","BEZIER_CURVE","subdivide","firstHalf","ab","bc","cd","abbc","bccd","dest","deltaX","deltaY","reverse","isBezierCurve","path","parsePathForBorder","curves","borderSide","createPathFromCurves","topLeftBorderBox","topLeftPaddingBox","topRightBorderBox","topRightPaddingBox","bottomRightBorderBox","bottomRightPaddingBox","bottomLeftBorderBox","bottomLeftPaddingBox","outer1","inner1","outer2","inner2","CORNER","BoundCurves","_getAbsoluteValueForT","_getAbsoluteValueForT2","tlh","tlv","_getAbsoluteValueForT3","_getAbsoluteValueForT4","trh","trv","_getAbsoluteValueForT5","_getAbsoluteValueForT6","brh","brv","_getAbsoluteValueForT7","_getAbsoluteValueForT8","blh","blv","factors","maxFactor","topWidth","rightHeight","bottomWidth","leftHeight","getCurvePoints","TOP_LEFT","TOP_RIGHT","BOTTOM_RIGHT","BOTTOM_LEFT","topLeftContentBox","topRightContentBox","bottomRightContentBox","bottomLeftContentBox","r1","r2","kappa","ox","oy","xm","ym","calculateBorderBoxPath","calculateContentBoxPath","calculatePaddingBoxPath","_activeEffects","fontMetrics","FontMetrics","translate","textBaseline","applyEffects","effects","popEffect","effect","applyEffect","save","isTransformEffect","isClipEffect","clip","restore","renderStack","stack","globalAlpha","renderStackContent","renderNode","paint","_this2","renderNodeBackgroundAndBorders","renderNodeContent","renderTextWithLetterSpacing","fillText","letter","measureText","createFontStyle","variant","renderTextNode","_this3","_this3$createFontStyl","_this3$createFontStyl2","font","textShadows","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","baseline","getMetrics","middle","renderReplacedElement","box","_this4","iframeRenderer","fill","beginPath","arc","isTextInputElement","_this4$createFontStyl","_this4$createFontStyl2","canvasTextAlign","listValue","_this4$createFontStyl3","_this4$createFontStyl4","_this5","negativeZIndex","nonInlineLevel","nonPositionedFloats","nonPositionedInlineLevel","inlineLevel","zeroOrAutoZIndexOrTransformedOrOpacity","positiveZIndex","mask","paths","moveTo","lineTo","formatPath","closePath","point","bezierCurveTo","renderRepeat","pattern","resizeImage","renderBackgroundImage","_this6","_calculateBackgroundR","_calculateBackgroundR2","createPattern","_calculateBackgroundR3","_calculateBackgroundR4","_calculateGradientDir","_calculateGradientDir2","x0","x1","y0","y1","createLinearGradient","addColorStop","_calculateBackgroundR5","_calculateBackgroundR6","_calculateRadius","_calculateRadius2","createRadialGradient","midX","midY","f","invF","renderBorder","curvePoints","_this7","_this8","hasBackground","borders","calculateBackgroundCurvedPaintingArea","borderBoxArea","maskOffset","shadowPaintingArea","transformPath","_this9","parseStackingContexts","TransformEffect","ClipEffect","_data","_document","parseMetrics","span","margin","padding","verticalAlign","offsetTop","equalPath","some","v","deltaW","deltaH","StackingContext","ElementPaint","parentStack","borderBox","getParentEffects","parseStackTree","stackingContext","realStackingContext","listItems","treatAsRealStackingContext","paintContainer","listOwnerItems","processListItems","owner","numbering","VECTOR","isVector"],"mappings":"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AIilB,GAAW,EACU,OAArBllB,GACAA,EAAiBsD,QAAQ6hB,IACrB,MAAMld,EAAU7V,KAAK0yB,SAASK,EAAMld,SAChCA,GAA+B,IAApBkd,EAAMjd,YACjBgd,GAAW,EACXjd,EAAQ/P,KAAKoK,IAAI,EAAG2F,EAAQnO,OAAS,KAAOqrB,EAAMjd,aAI9D,MAAMkd,EAAe,GAWrB,OAVIF,GACAjlB,EAAaqD,QAAQ6hB,IACjB,IAAIld,EAAU7V,KAAK0yB,SAASK,EAAMld,SAClCmd,EAAa3hB,KAAK0hB,EAAMld,SACnBA,IACDA,EAAU7V,KAAK0yB,SAASK,EAAMld,SAAW,IAE7CA,EAAQxE,KAAK0hB,EAAM9c,SAGpB+c,IAGf,MAAMC,EAAc,CAChBhS,SAAU,CAAC,IAAM,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,GAC9DnN,OAAQ,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,MAEzEyE,EAAW,CACb0I,SAAU,CACN,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAEJnN,OAAQ,CACJ,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,WAGFoF,EAAS,CACX+H,SAAU,CACN,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAEJnN,OAAQ,CACJ,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,WAGFiF,EAAW,CACbkI,SAAU,CACN,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAEJnN,OAAQ,CACJ,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,WAGFof,EAAwBA,CAAC70B,EAAO0d,EAAK7L,EAAKijB,EAASC,EAAUC,IAC3Dh1B,EAAQ0d,GAAO1d,EAAQ6R,EAChBojB,EAAkBj1B,EAAO+0B,EAAUC,EAAO3rB,OAAS,GAEtDyrB,EAAQlS,SAAS/K,OAAO,CAACqd,EAAQC,EAASC,KAC9C,KAAOp1B,GAASm1B,GACZn1B,GAASm1B,EACTD,GAAUJ,EAAQrf,OAAO2f,GAE7B,OAAOF,GACR,IAAMF,EAEPK,EAAuCA,CAACr1B,EAAOs1B,EAAsBC,EAAWC,KAClF,IAAIN,EAAS,GACb,GACSK,GACDv1B,IAEJk1B,EAASM,EAASx1B,GAASk1B,EAC3Bl1B,GAASs1B,QACJt1B,EAAQs1B,GAAwBA,GACzC,OAAOJ,GAELO,EAA8BA,CAACz1B,EAAO01B,EAAqBC,EAAmBJ,EAAWP,KAC3F,MAAMM,EAAuBK,EAAoBD,EAAsB,EACvE,OAAS11B,EAAQ,EAAI,IAAM,KACtBq1B,EAAqC5tB,KAAKmuB,IAAI51B,GAAQs1B,EAAsBC,EAAW9T,IAAa,EAAAzN,iBAAcvM,KAAKouB,MAA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","file":"static/js/3.3094592af.chunk.js","sourcesContent":["export const contains = (bit, value) => (bit & value) !== 0;\n","import { FEATURES } from './features';\nimport { Logger } from './logger';\n\nexport class CacheStorage {\n  static create(name, options) {\n    return (CacheStorage._caches[name] = new Cache(name, options));\n  }\n\n  static destroy(name) {\n    delete CacheStorage._caches[name];\n  }\n\n  static open(name) {\n    const cache = CacheStorage._caches[name];\n    if (typeof cache !== 'undefined') {\n      return cache;\n    }\n    throw new Error(`Cache with key \"${name}\" not found`);\n  }\n\n  static getOrigin(url) {\n    const link = CacheStorage._link;\n    if (!link) {\n      return 'about:blank';\n    }\n    link.href = url;\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n    return link.protocol + link.hostname + link.port;\n  }\n\n  static isSameOrigin(src) {\n    return CacheStorage.getOrigin(src) === CacheStorage._origin;\n  }\n\n  static setContext(window) {\n    CacheStorage._link = window.document.createElement('a');\n    CacheStorage._origin = CacheStorage.getOrigin(window.location.href);\n  }\n\n  static getInstance() {\n    const current = CacheStorage._current;\n    if (current === null) {\n      throw new Error(`No cache instance attached`);\n    }\n    return current;\n  }\n\n  static attachInstance(cache) {\n    CacheStorage._current = cache;\n  }\n\n  static detachInstance() {\n    CacheStorage._current = null;\n  }\n}\nCacheStorage._caches = {};\nCacheStorage._origin = 'about:blank';\nCacheStorage._current = null;\nexport class Cache {\n  constructor(id, options) {\n    this.id = id;\n    this._options = options;\n    this._cache = {};\n  }\n\n  addImage(src) {\n    const result = Promise.resolve();\n    if (this.has(src)) {\n      return result;\n    }\n    if (isBlobImage(src) || isRenderable(src)) {\n      this._cache[src] = this.loadImage(src);\n      return result;\n    }\n    return result;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  match(src) {\n    return this._cache[src];\n  }\n\n  async loadImage(key) {\n    const isSameOrigin = CacheStorage.isSameOrigin(key);\n    const useCORS =\n      // MODIFY: Use Boolean to check for either \"true\" or a function\n      !isInlineImage(key) && this._options.useCORS(isSameOrigin) && FEATURES.SUPPORT_CORS_IMAGES;\n    const useProxy = !isInlineImage(key) &&\n      !isSameOrigin &&\n      typeof this._options.proxy === 'string' &&\n      FEATURES.SUPPORT_CORS_XHR &&\n      !useCORS;\n    if (!isSameOrigin && this._options.allowTaint === false && !isInlineImage(key) && !useProxy && !useCORS) {\n      return;\n    }\n    let src = key;\n\n    if (useProxy) {\n      src = await this.proxy(src);\n    }\n\n    Logger.getInstance(this.id).debug(`Added image ${key.substring(0, 256)}`);\n    return await new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => resolve(img);\n      img.onerror = reject;\n      // ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous\n      if (isInlineBase64Image(src) ||\n        // MODIFY: Check for function and evaluate\n        typeof this._options.useCORS === 'function' && this._options.useCORS(isSameOrigin) ||\n        useCORS) {\n        img.crossOrigin = 'anonymous';\n      }\n      img.src = src;\n      if (img.complete === true) {\n        // Inline XML images may fail to parse, throwing an Error later on\n        setTimeout(() => resolve(img), 500);\n      }\n      if (this._options.imageTimeout > 0) {\n        setTimeout(() => reject(`Timed out (${this._options.imageTimeout}ms) loading image`), this._options.imageTimeout);\n      }\n    });\n  }\n\n  has(key) {\n    return typeof this._cache[key] !== 'undefined';\n  }\n\n  keys() {\n    return Promise.resolve(Object.keys(this._cache));\n  }\n\n  proxy(src) {\n    const proxy = this._options.proxy;\n    if (!proxy) {\n      throw new Error('No proxy defined');\n    }\n    const key = src.substring(0, 256);\n    return new Promise((resolve, reject) => {\n      const responseType = FEATURES.SUPPORT_RESPONSE_TYPE ? 'blob' : 'text';\n      const xhr = new XMLHttpRequest();\n      xhr.onload = () => {\n        if (xhr.status === 200) {\n          if (responseType === 'text') {\n            resolve(xhr.response);\n          }\n          else {\n            const reader = new FileReader();\n            reader.addEventListener('load', () => resolve(reader.result), false);\n            reader.addEventListener('error', e => reject(e), false);\n            reader.readAsDataURL(xhr.response);\n          }\n        }\n        else {\n          reject(`Failed to proxy resource ${key} with status code ${xhr.status}`);\n        }\n      };\n      xhr.onerror = reject;\n      xhr.open('GET', `${proxy}?url=${encodeURIComponent(src)}&responseType=${responseType}`);\n      if (responseType !== 'text' && xhr instanceof XMLHttpRequest) {\n        xhr.responseType = responseType;\n      }\n      if (this._options.imageTimeout) {\n        const timeout = this._options.imageTimeout;\n        xhr.timeout = timeout;\n        xhr.ontimeout = () => reject(`Timed out (${timeout}ms) proxying ${key}`);\n      }\n      xhr.send();\n    });\n  }\n}\nconst INLINE_SVG = /^data:image\\/svg\\+xml/i;\nconst INLINE_BASE64 = /^data:image\\/.*;base64,/i;\nconst INLINE_IMG = /^data:image\\/.*/i;\nconst isRenderable = (src) => FEATURES.SUPPORT_SVG_DRAWING || !isSVG(src);\nconst isInlineImage = (src) => INLINE_IMG.test(src);\nconst isInlineBase64Image = (src) => INLINE_BASE64.test(src);\nconst isBlobImage = (src) => src.substr(0, 4) === 'blob';\nconst isSVG = (src) => src.substr(-3).toLowerCase() === 'svg' || INLINE_SVG.test(src);\n","const testRangeBounds = (document) => {\n    const TEST_HEIGHT = 123;\n    if (document.createRange) {\n        const range = document.createRange();\n        if (range.getBoundingClientRect) {\n            const testElement = document.createElement('boundtest');\n            testElement.style.height = `${TEST_HEIGHT}px`;\n            testElement.style.display = 'block';\n            document.body.appendChild(testElement);\n            range.selectNode(testElement);\n            const rangeBounds = range.getBoundingClientRect();\n            const rangeHeight = Math.round(rangeBounds.height);\n            document.body.removeChild(testElement);\n            if (rangeHeight === TEST_HEIGHT) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\nconst testCORS = () => typeof new Image().crossOrigin !== 'undefined';\nconst testResponseType = () => typeof new XMLHttpRequest().responseType === 'string';\nconst testSVG = (document) => {\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n        return false;\n    }\n    img.src = `data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>`;\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n};\nconst isGreenPixel = (data) => data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;\nconst testForeignObject = (document) => {\n    const canvas = document.createElement('canvas');\n    const size = 100;\n    canvas.width = size;\n    canvas.height = size;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n        return Promise.reject(false);\n    }\n    ctx.fillStyle = 'rgb(0, 255, 0)';\n    ctx.fillRect(0, 0, size, size);\n    const img = new Image();\n    const greenImageSrc = canvas.toDataURL();\n    img.src = greenImageSrc;\n    const svg = createForeignObjectSVG(size, size, 0, 0, img);\n    ctx.fillStyle = 'red';\n    ctx.fillRect(0, 0, size, size);\n    return loadSerializedSVG(svg)\n        .then((img) => {\n        ctx.drawImage(img, 0, 0);\n        const data = ctx.getImageData(0, 0, size, size).data;\n        ctx.fillStyle = 'red';\n        ctx.fillRect(0, 0, size, size);\n        const node = document.createElement('div');\n        node.style.backgroundImage = `url(${greenImageSrc})`;\n        node.style.height = `${size}px`;\n        // Firefox 55 does not render inline <img /> tags\n        return isGreenPixel(data)\n            ? loadSerializedSVG(createForeignObjectSVG(size, size, 0, 0, node))\n            : Promise.reject(false);\n    })\n        .then((img) => {\n        ctx.drawImage(img, 0, 0);\n        // Edge does not render background-images\n        return isGreenPixel(ctx.getImageData(0, 0, size, size).data);\n    })\n        .catch(() => false);\n};\nexport const createForeignObjectSVG = (width, height, x, y, node) => {\n    const xmlns = 'http://www.w3.org/2000/svg';\n    const svg = document.createElementNS(xmlns, 'svg');\n    const foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttributeNS(null, 'width', width.toString());\n    svg.setAttributeNS(null, 'height', height.toString());\n    foreignObject.setAttributeNS(null, 'width', '100%');\n    foreignObject.setAttributeNS(null, 'height', '100%');\n    foreignObject.setAttributeNS(null, 'x', x.toString());\n    foreignObject.setAttributeNS(null, 'y', y.toString());\n    foreignObject.setAttributeNS(null, 'externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(node);\n    return svg;\n};\nexport const loadSerializedSVG = (svg) => {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n        img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(new XMLSerializer().serializeToString(svg))}`;\n    });\n};\nexport const FEATURES = {\n    get SUPPORT_RANGE_BOUNDS() {\n        'use strict';\n        const value = testRangeBounds(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_RANGE_BOUNDS', { value });\n        return value;\n    },\n    get SUPPORT_SVG_DRAWING() {\n        'use strict';\n        const value = testSVG(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_SVG_DRAWING', { value });\n        return value;\n    },\n    get SUPPORT_FOREIGNOBJECT_DRAWING() {\n        'use strict';\n        const value = typeof Array.from === 'function' && typeof window.fetch === 'function'\n            ? testForeignObject(document)\n            : Promise.resolve(false);\n        Object.defineProperty(FEATURES, 'SUPPORT_FOREIGNOBJECT_DRAWING', { value });\n        return value;\n    },\n    get SUPPORT_CORS_IMAGES() {\n        'use strict';\n        const value = testCORS();\n        Object.defineProperty(FEATURES, 'SUPPORT_CORS_IMAGES', { value });\n        return value;\n    },\n    get SUPPORT_RESPONSE_TYPE() {\n        'use strict';\n        const value = testResponseType();\n        Object.defineProperty(FEATURES, 'SUPPORT_RESPONSE_TYPE', { value });\n        return value;\n    },\n    get SUPPORT_CORS_XHR() {\n        'use strict';\n        const value = 'withCredentials' in new XMLHttpRequest();\n        Object.defineProperty(FEATURES, 'SUPPORT_CORS_XHR', { value });\n        return value;\n    }\n};\n","export class Logger {\n    constructor({ id, enabled }) {\n        this.id = id;\n        this.enabled = enabled;\n        this.start = Date.now();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    debug(...args) {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.debug === 'function') {\n                // eslint-disable-next-line no-console\n                console.debug(this.id, `${this.getTime()}ms`, ...args);\n            }\n            else {\n                this.info(...args);\n            }\n        }\n    }\n    getTime() {\n        return Date.now() - this.start;\n    }\n    static create(options) {\n        Logger.instances[options.id] = new Logger(options);\n    }\n    static destroy(id) {\n        delete Logger.instances[id];\n    }\n    static getInstance(id) {\n        const instance = Logger.instances[id];\n        if (typeof instance === 'undefined') {\n            throw new Error(`No logger instance found with id ${id}`);\n        }\n        return instance;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    info(...args) {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.info === 'function') {\n                // eslint-disable-next-line no-console\n                console.info(this.id, `${this.getTime()}ms`, ...args);\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error(...args) {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.error === 'function') {\n                // eslint-disable-next-line no-console\n                console.error(this.id, `${this.getTime()}ms`, ...args);\n            }\n            else {\n                this.info(...args);\n            }\n        }\n    }\n}\nLogger.instances = {};\n","export const SMALL_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n","export var PropertyDescriptorParsingType;\n(function (PropertyDescriptorParsingType) {\n    PropertyDescriptorParsingType[PropertyDescriptorParsingType[\"VALUE\"] = 0] = \"VALUE\";\n    PropertyDescriptorParsingType[PropertyDescriptorParsingType[\"LIST\"] = 1] = \"LIST\";\n    PropertyDescriptorParsingType[PropertyDescriptorParsingType[\"IDENT_VALUE\"] = 2] = \"IDENT_VALUE\";\n    PropertyDescriptorParsingType[PropertyDescriptorParsingType[\"TYPE_VALUE\"] = 3] = \"TYPE_VALUE\";\n    PropertyDescriptorParsingType[PropertyDescriptorParsingType[\"TOKEN_VALUE\"] = 4] = \"TOKEN_VALUE\";\n})(PropertyDescriptorParsingType || (PropertyDescriptorParsingType = {}));\n","import { PropertyDescriptorParsingType } from './IPropertyDescriptor';\nimport { backgroundClip } from './property-descriptors/background-clip';\nimport { backgroundColor } from './property-descriptors/background-color';\nimport { backgroundImage } from './property-descriptors/background-image';\nimport { backgroundOrigin } from './property-descriptors/background-origin';\nimport { backgroundPosition } from './property-descriptors/background-position';\nimport { backgroundRepeat } from './property-descriptors/background-repeat';\nimport { backgroundSize } from './property-descriptors/background-size';\nimport { borderBottomColor, borderLeftColor, borderRightColor, borderTopColor } from './property-descriptors/border-color';\nimport { borderBottomLeftRadius, borderBottomRightRadius, borderTopLeftRadius, borderTopRightRadius } from './property-descriptors/border-radius';\nimport { borderBottomStyle, borderLeftStyle, borderRightStyle, borderTopStyle } from './property-descriptors/border-style';\nimport { borderBottomWidth, borderLeftWidth, borderRightWidth, borderTopWidth } from './property-descriptors/border-width';\nimport { color } from './property-descriptors/color';\nimport { display } from './property-descriptors/display';\nimport { float, FLOAT } from './property-descriptors/float';\nimport { letterSpacing } from './property-descriptors/letter-spacing';\nimport { lineBreak } from './property-descriptors/line-break';\nimport { lineHeight } from './property-descriptors/line-height';\nimport { listStyleImage } from './property-descriptors/list-style-image';\nimport { listStylePosition } from './property-descriptors/list-style-position';\nimport { listStyleType } from './property-descriptors/list-style-type';\nimport { marginBottom, marginLeft, marginRight, marginTop } from './property-descriptors/margin';\nimport { overflow } from './property-descriptors/overflow';\nimport { overflowWrap } from './property-descriptors/overflow-wrap';\nimport { paddingBottom, paddingLeft, paddingRight, paddingTop } from './property-descriptors/padding';\nimport { textAlign } from './property-descriptors/text-align';\nimport { position, POSITION } from './property-descriptors/position';\nimport { textShadow } from './property-descriptors/text-shadow';\nimport { textTransform } from './property-descriptors/text-transform';\nimport { transform } from './property-descriptors/transform';\nimport { transformOrigin } from './property-descriptors/transform-origin';\nimport { visibility, VISIBILITY } from './property-descriptors/visibility';\nimport { wordBreak } from './property-descriptors/word-break';\nimport { zIndex } from './property-descriptors/z-index';\nimport { isIdentToken, Parser } from './syntax/parser';\nimport { Tokenizer } from './syntax/tokenizer';\nimport { color as colorType, isTransparent } from './types/color';\nimport { angle } from './types/angle';\nimport { image } from './types/image';\nimport { opacity } from './property-descriptors/opacity';\nimport { textDecorationColor } from './property-descriptors/text-decoration-color';\nimport { textDecorationLine } from './property-descriptors/text-decoration-line';\nimport { isLengthPercentage, ZERO_LENGTH } from './types/length-percentage';\nimport { fontFamily } from './property-descriptors/font-family';\nimport { fontSize } from './property-descriptors/font-size';\nimport { isLength } from './types/length';\nimport { fontWeight } from './property-descriptors/font-weight';\nimport { fontVariant } from './property-descriptors/font-variant';\nimport { fontStyle } from './property-descriptors/font-style';\nimport { contains } from '../core/bitwise';\nimport { content } from './property-descriptors/content';\nimport { counterIncrement } from './property-descriptors/counter-increment';\nimport { counterReset } from './property-descriptors/counter-reset';\nimport { quotes } from './property-descriptors/quotes';\nimport { boxShadow } from './property-descriptors/box-shadow';\nexport class CSSParsedDeclaration {\n    constructor(declaration) {\n        this.backgroundClip = parse(backgroundClip, declaration.backgroundClip);\n        this.backgroundColor = parse(backgroundColor, declaration.backgroundColor);\n        this.backgroundImage = parse(backgroundImage, declaration.backgroundImage);\n        this.backgroundOrigin = parse(backgroundOrigin, declaration.backgroundOrigin);\n        this.backgroundPosition = parse(backgroundPosition, declaration.backgroundPosition);\n        this.backgroundRepeat = parse(backgroundRepeat, declaration.backgroundRepeat);\n        this.backgroundSize = parse(backgroundSize, declaration.backgroundSize);\n        this.borderTopColor = parse(borderTopColor, declaration.borderTopColor);\n        this.borderRightColor = parse(borderRightColor, declaration.borderRightColor);\n        this.borderBottomColor = parse(borderBottomColor, declaration.borderBottomColor);\n        this.borderLeftColor = parse(borderLeftColor, declaration.borderLeftColor);\n        this.borderTopLeftRadius = parse(borderTopLeftRadius, declaration.borderTopLeftRadius);\n        this.borderTopRightRadius = parse(borderTopRightRadius, declaration.borderTopRightRadius);\n        this.borderBottomRightRadius = parse(borderBottomRightRadius, declaration.borderBottomRightRadius);\n        this.borderBottomLeftRadius = parse(borderBottomLeftRadius, declaration.borderBottomLeftRadius);\n        this.borderTopStyle = parse(borderTopStyle, declaration.borderTopStyle);\n        this.borderRightStyle = parse(borderRightStyle, declaration.borderRightStyle);\n        this.borderBottomStyle = parse(borderBottomStyle, declaration.borderBottomStyle);\n        this.borderLeftStyle = parse(borderLeftStyle, declaration.borderLeftStyle);\n        this.borderTopWidth = parse(borderTopWidth, declaration.borderTopWidth);\n        this.borderRightWidth = parse(borderRightWidth, declaration.borderRightWidth);\n        this.borderBottomWidth = parse(borderBottomWidth, declaration.borderBottomWidth);\n        this.borderLeftWidth = parse(borderLeftWidth, declaration.borderLeftWidth);\n        this.boxShadow = parse(boxShadow, declaration.boxShadow);\n        this.color = parse(color, declaration.color);\n        this.display = parse(display, declaration.display);\n        this.float = parse(float, declaration.cssFloat);\n        this.fontFamily = parse(fontFamily, declaration.fontFamily);\n        this.fontSize = parse(fontSize, declaration.fontSize);\n        this.fontStyle = parse(fontStyle, declaration.fontStyle);\n        this.fontVariant = parse(fontVariant, declaration.fontVariant);\n        this.fontWeight = parse(fontWeight, declaration.fontWeight);\n        this.letterSpacing = parse(letterSpacing, declaration.letterSpacing);\n        this.lineBreak = parse(lineBreak, declaration.lineBreak);\n        this.lineHeight = parse(lineHeight, declaration.lineHeight);\n        this.listStyleImage = parse(listStyleImage, declaration.listStyleImage);\n        this.listStylePosition = parse(listStylePosition, declaration.listStylePosition);\n        this.listStyleType = parse(listStyleType, declaration.listStyleType);\n        this.marginTop = parse(marginTop, declaration.marginTop);\n        this.marginRight = parse(marginRight, declaration.marginRight);\n        this.marginBottom = parse(marginBottom, declaration.marginBottom);\n        this.marginLeft = parse(marginLeft, declaration.marginLeft);\n        this.opacity = parse(opacity, declaration.opacity);\n        const overflowTuple = parse(overflow, declaration.overflow);\n        this.overflowX = overflowTuple[0];\n        this.overflowY = overflowTuple[overflowTuple.length > 1 ? 1 : 0];\n        this.overflowWrap = parse(overflowWrap, declaration.overflowWrap);\n        this.paddingTop = parse(paddingTop, declaration.paddingTop);\n        this.paddingRight = parse(paddingRight, declaration.paddingRight);\n        this.paddingBottom = parse(paddingBottom, declaration.paddingBottom);\n        this.paddingLeft = parse(paddingLeft, declaration.paddingLeft);\n        this.position = parse(position, declaration.position);\n        this.textAlign = parse(textAlign, declaration.textAlign);\n        this.textDecorationColor = parse(textDecorationColor, declaration.textDecorationColor || declaration.color);\n        this.textDecorationLine = parse(textDecorationLine, declaration.textDecorationLine);\n        this.textShadow = parse(textShadow, declaration.textShadow);\n        this.textTransform = parse(textTransform, declaration.textTransform);\n        this.transform = parse(transform, declaration.transform);\n        this.transformOrigin = parse(transformOrigin, declaration.transformOrigin);\n        this.visibility = parse(visibility, declaration.visibility);\n        this.wordBreak = parse(wordBreak, declaration.wordBreak);\n        this.zIndex = parse(zIndex, declaration.zIndex);\n    }\n    isVisible() {\n        return this.display > 0 && this.opacity > 0 && this.visibility === VISIBILITY.VISIBLE;\n    }\n    isTransparent() {\n        return isTransparent(this.backgroundColor);\n    }\n    isTransformed() {\n        return this.transform !== null;\n    }\n    isPositioned() {\n        return this.position !== POSITION.STATIC;\n    }\n    isPositionedWithZIndex() {\n        return this.isPositioned() && !this.zIndex.auto;\n    }\n    isFloating() {\n        return this.float !== FLOAT.NONE;\n    }\n    isInlineLevel() {\n        return (contains(this.display, 4 /* INLINE */) ||\n            contains(this.display, 33554432 /* INLINE_BLOCK */) ||\n            contains(this.display, 268435456 /* INLINE_FLEX */) ||\n            contains(this.display, 536870912 /* INLINE_GRID */) ||\n            contains(this.display, 67108864 /* INLINE_LIST_ITEM */) ||\n            contains(this.display, 134217728 /* INLINE_TABLE */));\n    }\n}\nexport class CSSParsedPseudoDeclaration {\n    constructor(declaration) {\n        this.content = parse(content, declaration.content);\n        this.quotes = parse(quotes, declaration.quotes);\n    }\n}\nexport class CSSParsedCounterDeclaration {\n    constructor(declaration) {\n        this.counterIncrement = parse(counterIncrement, declaration.counterIncrement);\n        this.counterReset = parse(counterReset, declaration.counterReset);\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst parse = (descriptor, style) => {\n    const tokenizer = new Tokenizer();\n    const value = style !== null && typeof style !== 'undefined' ? style.toString() : descriptor.initialValue;\n    tokenizer.write(value);\n    const parser = new Parser(tokenizer.read());\n    switch (descriptor.type) {\n        case PropertyDescriptorParsingType.IDENT_VALUE:\n            const token = parser.parseComponentValue();\n            return descriptor.parse(isIdentToken(token) ? token.value : descriptor.initialValue);\n        case PropertyDescriptorParsingType.VALUE:\n            return descriptor.parse(parser.parseComponentValue());\n        case PropertyDescriptorParsingType.LIST:\n            return descriptor.parse(parser.parseComponentValues());\n        case PropertyDescriptorParsingType.TOKEN_VALUE:\n            return parser.parseComponentValue();\n        case PropertyDescriptorParsingType.TYPE_VALUE:\n            switch (descriptor.format) {\n                case 'angle':\n                    return angle.parse(parser.parseComponentValue());\n                case 'color':\n                    return colorType.parse(parser.parseComponentValue());\n                case 'image':\n                    return image.parse(parser.parseComponentValue());\n                case 'length':\n                    const length = parser.parseComponentValue();\n                    return isLength(length) ? length : ZERO_LENGTH;\n                case 'length-percentage':\n                    const value = parser.parseComponentValue();\n                    return isLengthPercentage(value) ? value : ZERO_LENGTH;\n            }\n    }\n    throw new Error(`Attempting to parse unsupported css format type ${descriptor.format}`);\n};\n","export class Bounds {\n    constructor(x, y, w, h) {\n        this.left = x;\n        this.top = y;\n        this.width = w;\n        this.height = h;\n    }\n    add(x, y, w, h) {\n        return new Bounds(this.left + x, this.top + y, this.width + w, this.height + h);\n    }\n    static fromClientRect(clientRect) {\n        return new Bounds(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    }\n}\nexport const parseBounds = (node) => {\n    return Bounds.fromClientRect(node.getBoundingClientRect());\n};\nexport const parseDocumentSize = (document) => {\n    const body = document.body;\n    const documentElement = document.documentElement;\n    if (!body || !documentElement) {\n        throw new Error(`Unable to get document size`);\n    }\n    const width = Math.max(Math.max(body.scrollWidth, documentElement.scrollWidth), Math.max(body.offsetWidth, documentElement.offsetWidth), Math.max(body.clientWidth, documentElement.clientWidth));\n    const height = Math.max(Math.max(body.scrollHeight, documentElement.scrollHeight), Math.max(body.offsetHeight, documentElement.offsetHeight), Math.max(body.clientHeight, documentElement.clientHeight));\n    return new Bounds(0, 0, width, height);\n};\n","import { OVERFLOW_WRAP } from '../property-descriptors/overflow-wrap';\nimport { fromCodePoint, LineBreaker, toCodePoints } from 'css-line-break';\nimport { Bounds, parseBounds } from './bounds';\nimport { FEATURES } from '../../core/features';\nexport class TextBounds {\n    constructor(text, bounds) {\n        this.text = text;\n        this.bounds = bounds;\n    }\n}\nexport const parseTextBounds = (value, styles, node) => {\n    const textList = breakText(value, styles);\n    const textBounds = [];\n    let offset = 0;\n    textList.forEach(text => {\n        if (styles.textDecorationLine.length || text.trim().length > 0) {\n            if (FEATURES.SUPPORT_RANGE_BOUNDS) {\n                textBounds.push(new TextBounds(text, getRangeBounds(node, offset, text.length)));\n            }\n            else {\n                const replacementNode = node.splitText(text.length);\n                textBounds.push(new TextBounds(text, getWrapperBounds(node)));\n                node = replacementNode;\n            }\n        }\n        else if (!FEATURES.SUPPORT_RANGE_BOUNDS) {\n            node = node.splitText(text.length);\n        }\n        offset += text.length;\n    });\n    return textBounds;\n};\nconst getWrapperBounds = (node) => {\n    const ownerDocument = node.ownerDocument;\n    if (ownerDocument) {\n        const wrapper = ownerDocument.createElement('html2canvaswrapper');\n        wrapper.appendChild(node.cloneNode(true));\n        const parentNode = node.parentNode;\n        if (parentNode) {\n            parentNode.replaceChild(wrapper, node);\n            const bounds = parseBounds(wrapper);\n            if (wrapper.firstChild) {\n                parentNode.replaceChild(wrapper.firstChild, wrapper);\n            }\n            return bounds;\n        }\n    }\n    return new Bounds(0, 0, 0, 0);\n};\nconst getRangeBounds = (node, offset, length) => {\n    const ownerDocument = node.ownerDocument;\n    if (!ownerDocument) {\n        throw new Error('Node has no owner document');\n    }\n    const range = ownerDocument.createRange();\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return Bounds.fromClientRect(range.getBoundingClientRect());\n};\nconst breakText = (value, styles) => {\n    return styles.letterSpacing !== 0 ? toCodePoints(value).map(i => fromCodePoint(i)) : breakWords(value, styles);\n};\nconst breakWords = (str, styles) => {\n    const breaker = LineBreaker(str, {\n        lineBreak: styles.lineBreak,\n        wordBreak: styles.overflowWrap === OVERFLOW_WRAP.BREAK_WORD ? 'break-word' : styles.wordBreak\n    });\n    const words = [];\n    let bk;\n    while (!(bk = breaker.next()).done) {\n        if (bk.value) {\n            words.push(bk.value.slice());\n        }\n    }\n    return words;\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken } from '../syntax/parser';\nexport var BACKGROUND_CLIP;\n(function (BACKGROUND_CLIP) {\n    BACKGROUND_CLIP[BACKGROUND_CLIP[\"BORDER_BOX\"] = 0] = \"BORDER_BOX\";\n    BACKGROUND_CLIP[BACKGROUND_CLIP[\"PADDING_BOX\"] = 1] = \"PADDING_BOX\";\n    BACKGROUND_CLIP[BACKGROUND_CLIP[\"CONTENT_BOX\"] = 2] = \"CONTENT_BOX\";\n})(BACKGROUND_CLIP || (BACKGROUND_CLIP = {}));\nexport const backgroundClip = {\n    name: 'background-clip',\n    initialValue: 'border-box',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        return tokens.map(token => {\n            if (isIdentToken(token)) {\n                switch (token.value) {\n                    case 'padding-box':\n                        return BACKGROUND_CLIP.PADDING_BOX;\n                    case 'content-box':\n                        return BACKGROUND_CLIP.CONTENT_BOX;\n                }\n            }\n            return BACKGROUND_CLIP.BORDER_BOX;\n        });\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport const backgroundColor = {\n    name: `background-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n","import { TokenType } from '../syntax/tokenizer';\nimport { image, isSupportedImage } from '../types/image';\nimport { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { nonFunctionArgSeparator } from '../syntax/parser';\nexport const backgroundImage = {\n    name: 'background-image',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (tokens) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n        const first = tokens[0];\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return [];\n        }\n        return tokens.filter(value => nonFunctionArgSeparator(value) && isSupportedImage(value)).map(image.parse);\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken } from '../syntax/parser';\nexport const backgroundOrigin = {\n    name: 'background-origin',\n    initialValue: 'border-box',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        return tokens.map(token => {\n            if (isIdentToken(token)) {\n                switch (token.value) {\n                    case 'padding-box':\n                        return 1 /* PADDING_BOX */;\n                    case 'content-box':\n                        return 2 /* CONTENT_BOX */;\n                }\n            }\n            return 0 /* BORDER_BOX */;\n        });\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { parseFunctionArgs } from '../syntax/parser';\nimport { isLengthPercentage, parseLengthPercentageTuple } from '../types/length-percentage';\nexport const backgroundPosition = {\n    name: 'background-position',\n    initialValue: '0% 0%',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (tokens) => {\n        return parseFunctionArgs(tokens)\n            .map((values) => values.filter(isLengthPercentage))\n            .map(parseLengthPercentageTuple);\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken, parseFunctionArgs } from '../syntax/parser';\nexport var BACKGROUND_REPEAT;\n(function (BACKGROUND_REPEAT) {\n    BACKGROUND_REPEAT[BACKGROUND_REPEAT[\"REPEAT\"] = 0] = \"REPEAT\";\n    BACKGROUND_REPEAT[BACKGROUND_REPEAT[\"NO_REPEAT\"] = 1] = \"NO_REPEAT\";\n    BACKGROUND_REPEAT[BACKGROUND_REPEAT[\"REPEAT_X\"] = 2] = \"REPEAT_X\";\n    BACKGROUND_REPEAT[BACKGROUND_REPEAT[\"REPEAT_Y\"] = 3] = \"REPEAT_Y\";\n})(BACKGROUND_REPEAT || (BACKGROUND_REPEAT = {}));\nexport const backgroundRepeat = {\n    name: 'background-repeat',\n    initialValue: 'repeat',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        return parseFunctionArgs(tokens)\n            .map(values => values\n            .filter(isIdentToken)\n            .map(token => token.value)\n            .join(' '))\n            .map(parseBackgroundRepeat);\n    }\n};\nconst parseBackgroundRepeat = (value) => {\n    switch (value) {\n        case 'no-repeat':\n            return BACKGROUND_REPEAT.NO_REPEAT;\n        case 'repeat-x':\n        case 'repeat no-repeat':\n            return BACKGROUND_REPEAT.REPEAT_X;\n        case 'repeat-y':\n        case 'no-repeat repeat':\n            return BACKGROUND_REPEAT.REPEAT_Y;\n        case 'repeat':\n        default:\n            return BACKGROUND_REPEAT.REPEAT;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken, parseFunctionArgs } from '../syntax/parser';\nimport { isLengthPercentage } from '../types/length-percentage';\nexport var BACKGROUND_SIZE;\n(function (BACKGROUND_SIZE) {\n    BACKGROUND_SIZE[\"AUTO\"] = \"auto\";\n    BACKGROUND_SIZE[\"CONTAIN\"] = \"contain\";\n    BACKGROUND_SIZE[\"COVER\"] = \"cover\";\n})(BACKGROUND_SIZE || (BACKGROUND_SIZE = {}));\nexport const backgroundSize = {\n    name: 'background-size',\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        return parseFunctionArgs(tokens).map(values => values.filter(isBackgroundSizeInfoToken));\n    }\n};\nconst isBackgroundSizeInfoToken = (value) => isIdentToken(value) || isLengthPercentage(value);\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nconst borderColorForSide = (side) => ({\n    name: `border-${side}-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n});\nexport const borderTopColor = borderColorForSide('top');\nexport const borderRightColor = borderColorForSide('right');\nexport const borderBottomColor = borderColorForSide('bottom');\nexport const borderLeftColor = borderColorForSide('left');\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isLengthPercentage, parseLengthPercentageTuple } from '../types/length-percentage';\nconst borderRadiusForSide = (side) => ({\n    name: `border-radius-${side}`,\n    initialValue: '0 0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => parseLengthPercentageTuple(tokens.filter(isLengthPercentage))\n});\nexport const borderTopLeftRadius = borderRadiusForSide('top-left');\nexport const borderTopRightRadius = borderRadiusForSide('top-right');\nexport const borderBottomRightRadius = borderRadiusForSide('bottom-right');\nexport const borderBottomLeftRadius = borderRadiusForSide('bottom-left');\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var BORDER_STYLE;\n(function (BORDER_STYLE) {\n    BORDER_STYLE[BORDER_STYLE[\"NONE\"] = 0] = \"NONE\";\n    BORDER_STYLE[BORDER_STYLE[\"SOLID\"] = 1] = \"SOLID\";\n})(BORDER_STYLE || (BORDER_STYLE = {}));\nconst borderStyleForSide = (side) => ({\n    name: `border-${side}-style`,\n    initialValue: 'solid',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (style) => {\n        switch (style) {\n            case 'none':\n                return BORDER_STYLE.NONE;\n        }\n        return BORDER_STYLE.SOLID;\n    }\n});\nexport const borderTopStyle = borderStyleForSide('top');\nexport const borderRightStyle = borderStyleForSide('right');\nexport const borderBottomStyle = borderStyleForSide('bottom');\nexport const borderLeftStyle = borderStyleForSide('left');\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isDimensionToken } from '../syntax/parser';\nconst borderWidthForSide = (side) => ({\n    name: `border-${side}-width`,\n    initialValue: '0',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (token) => {\n        if (isDimensionToken(token)) {\n            return token.number;\n        }\n        return 0;\n    }\n});\nexport const borderTopWidth = borderWidthForSide('top');\nexport const borderRightWidth = borderWidthForSide('right');\nexport const borderBottomWidth = borderWidthForSide('bottom');\nexport const borderLeftWidth = borderWidthForSide('left');\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentWithValue, parseFunctionArgs } from '../syntax/parser';\nimport { ZERO_LENGTH } from '../types/length-percentage';\nimport { color } from '../types/color';\nimport { isLength } from '../types/length';\nexport const boxShadow = {\n    name: 'box-shadow',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (tokens) => {\n        if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {\n            return [];\n        }\n        return parseFunctionArgs(tokens).map((values) => {\n            const shadow = {\n                color: 0x000000ff,\n                offsetX: ZERO_LENGTH,\n                offsetY: ZERO_LENGTH,\n                blur: ZERO_LENGTH,\n                spread: ZERO_LENGTH,\n                inset: false\n            };\n            let c = 0;\n            for (let i = 0; i < values.length; i++) {\n                const token = values[i];\n                if (isIdentWithValue(token, 'inset')) {\n                    shadow.inset = true;\n                }\n                else if (isLength(token)) {\n                    if (c === 0) {\n                        shadow.offsetX = token;\n                    }\n                    else if (c === 1) {\n                        shadow.offsetY = token;\n                    }\n                    else if (c === 2) {\n                        shadow.blur = token;\n                    }\n                    else {\n                        shadow.spread = token;\n                    }\n                    c++;\n                }\n                else {\n                    shadow.color = color.parse(token);\n                }\n            }\n            return shadow;\n        });\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport const color = {\n    name: `color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n","import { TokenType } from '../syntax/tokenizer';\nimport { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport const content = {\n    name: 'content',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (tokens) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n        const first = tokens[0];\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return [];\n        }\n        return tokens;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isNumberToken, nonWhiteSpace } from '../syntax/parser';\nimport { TokenType } from '../syntax/tokenizer';\nexport const counterIncrement = {\n    name: 'counter-increment',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        if (tokens.length === 0) {\n            return null;\n        }\n        const first = tokens[0];\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return null;\n        }\n        const increments = [];\n        const filtered = tokens.filter(nonWhiteSpace);\n        for (let i = 0; i < filtered.length; i++) {\n            const counter = filtered[i];\n            const next = filtered[i + 1];\n            if (counter.type === TokenType.IDENT_TOKEN) {\n                const increment = next && isNumberToken(next) ? next.number : 1;\n                increments.push({ counter: counter.value, increment });\n            }\n        }\n        return increments;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken, isNumberToken, nonWhiteSpace } from '../syntax/parser';\nexport const counterReset = {\n    name: 'counter-reset',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n        const resets = [];\n        const filtered = tokens.filter(nonWhiteSpace);\n        for (let i = 0; i < filtered.length; i++) {\n            const counter = filtered[i];\n            const next = filtered[i + 1];\n            if (isIdentToken(counter) && counter.value !== 'none') {\n                const reset = next && isNumberToken(next) ? next.number : 0;\n                resets.push({ counter: counter.value, reset });\n            }\n        }\n        return resets;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken } from '../syntax/parser';\nexport const display = {\n    name: 'display',\n    initialValue: 'inline-block',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        return tokens.filter(isIdentToken).reduce((bit, token) => {\n            return bit | parseDisplayValue(token.value);\n        }, 0 /* NONE */);\n    }\n};\nconst parseDisplayValue = (display) => {\n    switch (display) {\n        case 'block':\n            return 2 /* BLOCK */;\n        case 'inline':\n            return 4 /* INLINE */;\n        case 'run-in':\n            return 8 /* RUN_IN */;\n        case 'flow':\n            return 16 /* FLOW */;\n        case 'flow-root':\n            return 32 /* FLOW_ROOT */;\n        case 'table':\n            return 64 /* TABLE */;\n        case 'flex':\n        case '-webkit-flex':\n            return 128 /* FLEX */;\n        case 'grid':\n        case '-ms-grid':\n            return 256 /* GRID */;\n        case 'ruby':\n            return 512 /* RUBY */;\n        case 'subgrid':\n            return 1024 /* SUBGRID */;\n        case 'list-item':\n            return 2048 /* LIST_ITEM */;\n        case 'table-row-group':\n            return 4096 /* TABLE_ROW_GROUP */;\n        case 'table-header-group':\n            return 8192 /* TABLE_HEADER_GROUP */;\n        case 'table-footer-group':\n            return 16384 /* TABLE_FOOTER_GROUP */;\n        case 'table-row':\n            return 32768 /* TABLE_ROW */;\n        case 'table-cell':\n            return 65536 /* TABLE_CELL */;\n        case 'table-column-group':\n            return 131072 /* TABLE_COLUMN_GROUP */;\n        case 'table-column':\n            return 262144 /* TABLE_COLUMN */;\n        case 'table-caption':\n            return 524288 /* TABLE_CAPTION */;\n        case 'ruby-base':\n            return 1048576 /* RUBY_BASE */;\n        case 'ruby-text':\n            return 2097152 /* RUBY_TEXT */;\n        case 'ruby-base-container':\n            return 4194304 /* RUBY_BASE_CONTAINER */;\n        case 'ruby-text-container':\n            return 8388608 /* RUBY_TEXT_CONTAINER */;\n        case 'contents':\n            return 16777216 /* CONTENTS */;\n        case 'inline-block':\n            return 33554432 /* INLINE_BLOCK */;\n        case 'inline-list-item':\n            return 67108864 /* INLINE_LIST_ITEM */;\n        case 'inline-table':\n            return 134217728 /* INLINE_TABLE */;\n        case 'inline-flex':\n            return 268435456 /* INLINE_FLEX */;\n        case 'inline-grid':\n            return 536870912 /* INLINE_GRID */;\n    }\n    return 0 /* NONE */;\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var FLOAT;\n(function (FLOAT) {\n    FLOAT[FLOAT[\"NONE\"] = 0] = \"NONE\";\n    FLOAT[FLOAT[\"LEFT\"] = 1] = \"LEFT\";\n    FLOAT[FLOAT[\"RIGHT\"] = 2] = \"RIGHT\";\n    FLOAT[FLOAT[\"INLINE_START\"] = 3] = \"INLINE_START\";\n    FLOAT[FLOAT[\"INLINE_END\"] = 4] = \"INLINE_END\";\n})(FLOAT || (FLOAT = {}));\nexport const float = {\n    name: 'float',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (float) => {\n        switch (float) {\n            case 'left':\n                return FLOAT.LEFT;\n            case 'right':\n                return FLOAT.RIGHT;\n            case 'inline-start':\n                return FLOAT.INLINE_START;\n            case 'inline-end':\n                return FLOAT.INLINE_END;\n        }\n        return FLOAT.NONE;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { TokenType } from '../syntax/tokenizer';\nexport const fontFamily = {\n    name: `font-family`,\n    initialValue: '',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        const accumulator = [];\n        const results = [];\n        tokens.forEach(token => {\n            switch (token.type) {\n                case TokenType.IDENT_TOKEN:\n                case TokenType.STRING_TOKEN:\n                    accumulator.push(token.value);\n                    break;\n                case TokenType.NUMBER_TOKEN:\n                    accumulator.push(token.number.toString());\n                    break;\n                case TokenType.COMMA_TOKEN:\n                    results.push(accumulator.join(' '));\n                    accumulator.length = 0;\n                    break;\n            }\n        });\n        if (accumulator.length) {\n            results.push(accumulator.join(' '));\n        }\n        return results.map(result => (result.indexOf(' ') === -1 ? result : `'${result}'`));\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport const fontSize = {\n    name: `font-size`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'length'\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var FONT_STYLE;\n(function (FONT_STYLE) {\n    FONT_STYLE[\"NORMAL\"] = \"normal\";\n    FONT_STYLE[\"ITALIC\"] = \"italic\";\n    FONT_STYLE[\"OBLIQUE\"] = \"oblique\";\n})(FONT_STYLE || (FONT_STYLE = {}));\nexport const fontStyle = {\n    name: 'font-style',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (overflow) => {\n        switch (overflow) {\n            case 'oblique':\n                return FONT_STYLE.OBLIQUE;\n            case 'italic':\n                return FONT_STYLE.ITALIC;\n            case 'normal':\n            default:\n                return FONT_STYLE.NORMAL;\n        }\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken } from '../syntax/parser';\nexport const fontVariant = {\n    name: 'font-variant',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (tokens) => {\n        return tokens.filter(isIdentToken).map(token => token.value);\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken, isNumberToken } from '../syntax/parser';\nexport const fontWeight = {\n    name: 'font-weight',\n    initialValue: 'normal',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (token) => {\n        if (isNumberToken(token)) {\n            return token.number;\n        }\n        if (isIdentToken(token)) {\n            switch (token.value) {\n                case 'bold':\n                    return 700;\n                case 'normal':\n                default:\n                    return 400;\n            }\n        }\n        return 400;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { TokenType } from '../syntax/tokenizer';\nexport const letterSpacing = {\n    name: 'letter-spacing',\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (token) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'normal') {\n            return 0;\n        }\n        if (token.type === TokenType.NUMBER_TOKEN) {\n            return token.number;\n        }\n        if (token.type === TokenType.DIMENSION_TOKEN) {\n            return token.number;\n        }\n        return 0;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var LINE_BREAK;\n(function (LINE_BREAK) {\n    LINE_BREAK[\"NORMAL\"] = \"normal\";\n    LINE_BREAK[\"STRICT\"] = \"strict\";\n})(LINE_BREAK || (LINE_BREAK = {}));\nexport const lineBreak = {\n    name: 'line-break',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (lineBreak) => {\n        switch (lineBreak) {\n            case 'strict':\n                return LINE_BREAK.STRICT;\n            case 'normal':\n            default:\n                return LINE_BREAK.NORMAL;\n        }\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken } from '../syntax/parser';\nimport { TokenType } from '../syntax/tokenizer';\nimport { getAbsoluteValue, isLengthPercentage } from '../types/length-percentage';\nexport const lineHeight = {\n    name: 'line-height',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TOKEN_VALUE\n};\nexport const computeLineHeight = (token, fontSize) => {\n    if (isIdentToken(token) && token.value === 'normal') {\n        return 1.2 * fontSize;\n    }\n    else if (token.type === TokenType.NUMBER_TOKEN) {\n        return fontSize * token.number;\n    }\n    else if (isLengthPercentage(token)) {\n        return getAbsoluteValue(token, fontSize);\n    }\n    return fontSize;\n};\n","import { TokenType } from '../syntax/tokenizer';\nimport { image } from '../types/image';\nimport { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport const listStyleImage = {\n    name: 'list-style-image',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (token) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {\n            return null;\n        }\n        return image.parse(token);\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var LIST_STYLE_POSITION;\n(function (LIST_STYLE_POSITION) {\n    LIST_STYLE_POSITION[LIST_STYLE_POSITION[\"INSIDE\"] = 0] = \"INSIDE\";\n    LIST_STYLE_POSITION[LIST_STYLE_POSITION[\"OUTSIDE\"] = 1] = \"OUTSIDE\";\n})(LIST_STYLE_POSITION || (LIST_STYLE_POSITION = {}));\nexport const listStylePosition = {\n    name: 'list-style-position',\n    initialValue: 'outside',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (position) => {\n        switch (position) {\n            case 'inside':\n                return LIST_STYLE_POSITION.INSIDE;\n            case 'outside':\n            default:\n                return LIST_STYLE_POSITION.OUTSIDE;\n        }\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var LIST_STYLE_TYPE;\n(function (LIST_STYLE_TYPE) {\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"NONE\"] = -1] = \"NONE\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"DISC\"] = 0] = \"DISC\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"CIRCLE\"] = 1] = \"CIRCLE\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"SQUARE\"] = 2] = \"SQUARE\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"DECIMAL\"] = 3] = \"DECIMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"CJK_DECIMAL\"] = 4] = \"CJK_DECIMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"DECIMAL_LEADING_ZERO\"] = 5] = \"DECIMAL_LEADING_ZERO\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"LOWER_ROMAN\"] = 6] = \"LOWER_ROMAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"UPPER_ROMAN\"] = 7] = \"UPPER_ROMAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"LOWER_GREEK\"] = 8] = \"LOWER_GREEK\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"LOWER_ALPHA\"] = 9] = \"LOWER_ALPHA\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"UPPER_ALPHA\"] = 10] = \"UPPER_ALPHA\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"ARABIC_INDIC\"] = 11] = \"ARABIC_INDIC\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"ARMENIAN\"] = 12] = \"ARMENIAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"BENGALI\"] = 13] = \"BENGALI\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"CAMBODIAN\"] = 14] = \"CAMBODIAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"CJK_EARTHLY_BRANCH\"] = 15] = \"CJK_EARTHLY_BRANCH\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"CJK_HEAVENLY_STEM\"] = 16] = \"CJK_HEAVENLY_STEM\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"CJK_IDEOGRAPHIC\"] = 17] = \"CJK_IDEOGRAPHIC\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"DEVANAGARI\"] = 18] = \"DEVANAGARI\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"ETHIOPIC_NUMERIC\"] = 19] = \"ETHIOPIC_NUMERIC\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"GEORGIAN\"] = 20] = \"GEORGIAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"GUJARATI\"] = 21] = \"GUJARATI\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"GURMUKHI\"] = 22] = \"GURMUKHI\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"HEBREW\"] = 22] = \"HEBREW\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"HIRAGANA\"] = 23] = \"HIRAGANA\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"HIRAGANA_IROHA\"] = 24] = \"HIRAGANA_IROHA\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"JAPANESE_FORMAL\"] = 25] = \"JAPANESE_FORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"JAPANESE_INFORMAL\"] = 26] = \"JAPANESE_INFORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"KANNADA\"] = 27] = \"KANNADA\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"KATAKANA\"] = 28] = \"KATAKANA\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"KATAKANA_IROHA\"] = 29] = \"KATAKANA_IROHA\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"KHMER\"] = 30] = \"KHMER\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"KOREAN_HANGUL_FORMAL\"] = 31] = \"KOREAN_HANGUL_FORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"KOREAN_HANJA_FORMAL\"] = 32] = \"KOREAN_HANJA_FORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"KOREAN_HANJA_INFORMAL\"] = 33] = \"KOREAN_HANJA_INFORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"LAO\"] = 34] = \"LAO\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"LOWER_ARMENIAN\"] = 35] = \"LOWER_ARMENIAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"MALAYALAM\"] = 36] = \"MALAYALAM\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"MONGOLIAN\"] = 37] = \"MONGOLIAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"MYANMAR\"] = 38] = \"MYANMAR\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"ORIYA\"] = 39] = \"ORIYA\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"PERSIAN\"] = 40] = \"PERSIAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"SIMP_CHINESE_FORMAL\"] = 41] = \"SIMP_CHINESE_FORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"SIMP_CHINESE_INFORMAL\"] = 42] = \"SIMP_CHINESE_INFORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"TAMIL\"] = 43] = \"TAMIL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"TELUGU\"] = 44] = \"TELUGU\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"THAI\"] = 45] = \"THAI\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"TIBETAN\"] = 46] = \"TIBETAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"TRAD_CHINESE_FORMAL\"] = 47] = \"TRAD_CHINESE_FORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"TRAD_CHINESE_INFORMAL\"] = 48] = \"TRAD_CHINESE_INFORMAL\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"UPPER_ARMENIAN\"] = 49] = \"UPPER_ARMENIAN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"DISCLOSURE_OPEN\"] = 50] = \"DISCLOSURE_OPEN\";\n    LIST_STYLE_TYPE[LIST_STYLE_TYPE[\"DISCLOSURE_CLOSED\"] = 51] = \"DISCLOSURE_CLOSED\";\n})(LIST_STYLE_TYPE || (LIST_STYLE_TYPE = {}));\nexport const listStyleType = {\n    name: 'list-style-type',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (type) => {\n        switch (type) {\n            case 'disc':\n                return LIST_STYLE_TYPE.DISC;\n            case 'circle':\n                return LIST_STYLE_TYPE.CIRCLE;\n            case 'square':\n                return LIST_STYLE_TYPE.SQUARE;\n            case 'decimal':\n                return LIST_STYLE_TYPE.DECIMAL;\n            case 'cjk-decimal':\n                return LIST_STYLE_TYPE.CJK_DECIMAL;\n            case 'decimal-leading-zero':\n                return LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO;\n            case 'lower-roman':\n                return LIST_STYLE_TYPE.LOWER_ROMAN;\n            case 'upper-roman':\n                return LIST_STYLE_TYPE.UPPER_ROMAN;\n            case 'lower-greek':\n                return LIST_STYLE_TYPE.LOWER_GREEK;\n            case 'lower-alpha':\n                return LIST_STYLE_TYPE.LOWER_ALPHA;\n            case 'upper-alpha':\n                return LIST_STYLE_TYPE.UPPER_ALPHA;\n            case 'arabic-indic':\n                return LIST_STYLE_TYPE.ARABIC_INDIC;\n            case 'armenian':\n                return LIST_STYLE_TYPE.ARMENIAN;\n            case 'bengali':\n                return LIST_STYLE_TYPE.BENGALI;\n            case 'cambodian':\n                return LIST_STYLE_TYPE.CAMBODIAN;\n            case 'cjk-earthly-branch':\n                return LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH;\n            case 'cjk-heavenly-stem':\n                return LIST_STYLE_TYPE.CJK_HEAVENLY_STEM;\n            case 'cjk-ideographic':\n                return LIST_STYLE_TYPE.CJK_IDEOGRAPHIC;\n            case 'devanagari':\n                return LIST_STYLE_TYPE.DEVANAGARI;\n            case 'ethiopic-numeric':\n                return LIST_STYLE_TYPE.ETHIOPIC_NUMERIC;\n            case 'georgian':\n                return LIST_STYLE_TYPE.GEORGIAN;\n            case 'gujarati':\n                return LIST_STYLE_TYPE.GUJARATI;\n            case 'gurmukhi':\n                return LIST_STYLE_TYPE.GURMUKHI;\n            case 'hebrew':\n                return LIST_STYLE_TYPE.HEBREW;\n            case 'hiragana':\n                return LIST_STYLE_TYPE.HIRAGANA;\n            case 'hiragana-iroha':\n                return LIST_STYLE_TYPE.HIRAGANA_IROHA;\n            case 'japanese-formal':\n                return LIST_STYLE_TYPE.JAPANESE_FORMAL;\n            case 'japanese-informal':\n                return LIST_STYLE_TYPE.JAPANESE_INFORMAL;\n            case 'kannada':\n                return LIST_STYLE_TYPE.KANNADA;\n            case 'katakana':\n                return LIST_STYLE_TYPE.KATAKANA;\n            case 'katakana-iroha':\n                return LIST_STYLE_TYPE.KATAKANA_IROHA;\n            case 'khmer':\n                return LIST_STYLE_TYPE.KHMER;\n            case 'korean-hangul-formal':\n                return LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL;\n            case 'korean-hanja-formal':\n                return LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL;\n            case 'korean-hanja-informal':\n                return LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL;\n            case 'lao':\n                return LIST_STYLE_TYPE.LAO;\n            case 'lower-armenian':\n                return LIST_STYLE_TYPE.LOWER_ARMENIAN;\n            case 'malayalam':\n                return LIST_STYLE_TYPE.MALAYALAM;\n            case 'mongolian':\n                return LIST_STYLE_TYPE.MONGOLIAN;\n            case 'myanmar':\n                return LIST_STYLE_TYPE.MYANMAR;\n            case 'oriya':\n                return LIST_STYLE_TYPE.ORIYA;\n            case 'persian':\n                return LIST_STYLE_TYPE.PERSIAN;\n            case 'simp-chinese-formal':\n                return LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL;\n            case 'simp-chinese-informal':\n                return LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL;\n            case 'tamil':\n                return LIST_STYLE_TYPE.TAMIL;\n            case 'telugu':\n                return LIST_STYLE_TYPE.TELUGU;\n            case 'thai':\n                return LIST_STYLE_TYPE.THAI;\n            case 'tibetan':\n                return LIST_STYLE_TYPE.TIBETAN;\n            case 'trad-chinese-formal':\n                return LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL;\n            case 'trad-chinese-informal':\n                return LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL;\n            case 'upper-armenian':\n                return LIST_STYLE_TYPE.UPPER_ARMENIAN;\n            case 'disclosure-open':\n                return LIST_STYLE_TYPE.DISCLOSURE_OPEN;\n            case 'disclosure-closed':\n                return LIST_STYLE_TYPE.DISCLOSURE_CLOSED;\n            case 'none':\n            default:\n                return LIST_STYLE_TYPE.NONE;\n        }\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nconst marginForSide = (side) => ({\n    name: `margin-${side}`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TOKEN_VALUE\n});\nexport const marginTop = marginForSide('top');\nexport const marginRight = marginForSide('right');\nexport const marginBottom = marginForSide('bottom');\nexport const marginLeft = marginForSide('left');\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isNumberToken } from '../syntax/parser';\nexport const opacity = {\n    name: 'opacity',\n    initialValue: '1',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (token) => {\n        if (isNumberToken(token)) {\n            return token.number;\n        }\n        return 1;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var OVERFLOW_WRAP;\n(function (OVERFLOW_WRAP) {\n    OVERFLOW_WRAP[\"NORMAL\"] = \"normal\";\n    OVERFLOW_WRAP[\"BREAK_WORD\"] = \"break-word\";\n})(OVERFLOW_WRAP || (OVERFLOW_WRAP = {}));\nexport const overflowWrap = {\n    name: 'overflow-wrap',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (overflow) => {\n        switch (overflow) {\n            case 'break-word':\n                return OVERFLOW_WRAP.BREAK_WORD;\n            case 'normal':\n            default:\n                return OVERFLOW_WRAP.NORMAL;\n        }\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken } from '../syntax/parser';\nexport var OVERFLOW;\n(function (OVERFLOW) {\n    OVERFLOW[OVERFLOW[\"VISIBLE\"] = 0] = \"VISIBLE\";\n    OVERFLOW[OVERFLOW[\"HIDDEN\"] = 1] = \"HIDDEN\";\n    OVERFLOW[OVERFLOW[\"SCROLL\"] = 2] = \"SCROLL\";\n    OVERFLOW[OVERFLOW[\"AUTO\"] = 3] = \"AUTO\";\n})(OVERFLOW || (OVERFLOW = {}));\nexport const overflow = {\n    name: 'overflow',\n    initialValue: 'visible',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        return tokens.filter(isIdentToken).map(overflow => {\n            switch (overflow.value) {\n                case 'hidden':\n                    return OVERFLOW.HIDDEN;\n                case 'scroll':\n                    return OVERFLOW.SCROLL;\n                case 'auto':\n                    return OVERFLOW.AUTO;\n                case 'visible':\n                default:\n                    return OVERFLOW.VISIBLE;\n            }\n        });\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nconst paddingForSide = (side) => ({\n    name: `padding-${side}`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'length-percentage'\n});\nexport const paddingTop = paddingForSide('top');\nexport const paddingRight = paddingForSide('right');\nexport const paddingBottom = paddingForSide('bottom');\nexport const paddingLeft = paddingForSide('left');\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var POSITION;\n(function (POSITION) {\n    POSITION[POSITION[\"STATIC\"] = 0] = \"STATIC\";\n    POSITION[POSITION[\"RELATIVE\"] = 1] = \"RELATIVE\";\n    POSITION[POSITION[\"ABSOLUTE\"] = 2] = \"ABSOLUTE\";\n    POSITION[POSITION[\"FIXED\"] = 3] = \"FIXED\";\n    POSITION[POSITION[\"STICKY\"] = 4] = \"STICKY\";\n})(POSITION || (POSITION = {}));\nexport const position = {\n    name: 'position',\n    initialValue: 'static',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (position) => {\n        switch (position) {\n            case 'relative':\n                return POSITION.RELATIVE;\n            case 'absolute':\n                return POSITION.ABSOLUTE;\n            case 'fixed':\n                return POSITION.FIXED;\n            case 'sticky':\n                return POSITION.STICKY;\n        }\n        return POSITION.STATIC;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isStringToken } from '../syntax/parser';\nimport { TokenType } from '../syntax/tokenizer';\nexport const quotes = {\n    name: 'quotes',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        if (tokens.length === 0) {\n            return null;\n        }\n        const first = tokens[0];\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return null;\n        }\n        const quotes = [];\n        const filtered = tokens.filter(isStringToken);\n        if (filtered.length % 2 !== 0) {\n            return null;\n        }\n        for (let i = 0; i < filtered.length; i += 2) {\n            const open = filtered[i].value;\n            const close = filtered[i + 1].value;\n            quotes.push({ open, close });\n        }\n        return quotes;\n    }\n};\nexport const getQuote = (quotes, depth, open) => {\n    if (!quotes) {\n        return '';\n    }\n    const quote = quotes[Math.min(depth, quotes.length - 1)];\n    if (!quote) {\n        return '';\n    }\n    return open ? quote.open : quote.close;\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var TEXT_ALIGN;\n(function (TEXT_ALIGN) {\n    TEXT_ALIGN[TEXT_ALIGN[\"LEFT\"] = 0] = \"LEFT\";\n    TEXT_ALIGN[TEXT_ALIGN[\"CENTER\"] = 1] = \"CENTER\";\n    TEXT_ALIGN[TEXT_ALIGN[\"RIGHT\"] = 2] = \"RIGHT\";\n})(TEXT_ALIGN || (TEXT_ALIGN = {}));\nexport const textAlign = {\n    name: 'text-align',\n    initialValue: 'left',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (textAlign) => {\n        switch (textAlign) {\n            case 'right':\n                return TEXT_ALIGN.RIGHT;\n            case 'center':\n            case 'justify':\n                return TEXT_ALIGN.CENTER;\n            case 'left':\n            default:\n                return TEXT_ALIGN.LEFT;\n        }\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport const textDecorationColor = {\n    name: `text-decoration-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentToken } from '../syntax/parser';\nexport const textDecorationLine = {\n    name: 'text-decoration-line',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        return tokens\n            .filter(isIdentToken)\n            .map(token => {\n            switch (token.value) {\n                case 'underline':\n                    return 1 /* UNDERLINE */;\n                case 'overline':\n                    return 2 /* OVERLINE */;\n                case 'line-through':\n                    return 3 /* LINE_THROUGH */;\n                case 'none':\n                    return 4 /* BLINK */;\n            }\n            return 0 /* NONE */;\n        })\n            .filter(line => line !== 0 /* NONE */);\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isIdentWithValue, parseFunctionArgs } from '../syntax/parser';\nimport { ZERO_LENGTH } from '../types/length-percentage';\nimport { color, COLORS } from '../types/color';\nimport { isLength } from '../types/length';\nexport const textShadow = {\n    name: 'text-shadow',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (tokens) => {\n        if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {\n            return [];\n        }\n        return parseFunctionArgs(tokens).map((values) => {\n            const shadow = {\n                color: COLORS.TRANSPARENT,\n                offsetX: ZERO_LENGTH,\n                offsetY: ZERO_LENGTH,\n                blur: ZERO_LENGTH\n            };\n            let c = 0;\n            for (let i = 0; i < values.length; i++) {\n                const token = values[i];\n                if (isLength(token)) {\n                    if (c === 0) {\n                        shadow.offsetX = token;\n                    }\n                    else if (c === 1) {\n                        shadow.offsetY = token;\n                    }\n                    else {\n                        shadow.blur = token;\n                    }\n                    c++;\n                }\n                else {\n                    shadow.color = color.parse(token);\n                }\n            }\n            return shadow;\n        });\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var TEXT_TRANSFORM;\n(function (TEXT_TRANSFORM) {\n    TEXT_TRANSFORM[TEXT_TRANSFORM[\"NONE\"] = 0] = \"NONE\";\n    TEXT_TRANSFORM[TEXT_TRANSFORM[\"LOWERCASE\"] = 1] = \"LOWERCASE\";\n    TEXT_TRANSFORM[TEXT_TRANSFORM[\"UPPERCASE\"] = 2] = \"UPPERCASE\";\n    TEXT_TRANSFORM[TEXT_TRANSFORM[\"CAPITALIZE\"] = 3] = \"CAPITALIZE\";\n})(TEXT_TRANSFORM || (TEXT_TRANSFORM = {}));\nexport const textTransform = {\n    name: 'text-transform',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (textTransform) => {\n        switch (textTransform) {\n            case 'uppercase':\n                return TEXT_TRANSFORM.UPPERCASE;\n            case 'lowercase':\n                return TEXT_TRANSFORM.LOWERCASE;\n            case 'capitalize':\n                return TEXT_TRANSFORM.CAPITALIZE;\n        }\n        return TEXT_TRANSFORM.NONE;\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isLengthPercentage } from '../types/length-percentage';\nimport { FLAG_INTEGER, TokenType } from '../syntax/tokenizer';\nconst DEFAULT_VALUE = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 50,\n    flags: FLAG_INTEGER\n};\nconst DEFAULT = [DEFAULT_VALUE, DEFAULT_VALUE];\nexport const transformOrigin = {\n    name: 'transform-origin',\n    initialValue: '50% 50%',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (tokens) => {\n        const origins = tokens.filter(isLengthPercentage);\n        if (origins.length !== 2) {\n            return DEFAULT;\n        }\n        return [origins[0], origins[1]];\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { TokenType } from '../syntax/tokenizer';\nexport const transform = {\n    name: 'transform',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (token) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {\n            return null;\n        }\n        if (token.type === TokenType.FUNCTION) {\n            const transformFunction = SUPPORTED_TRANSFORM_FUNCTIONS[token.name];\n            if (typeof transformFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported transform function \"${token.name}\"`);\n            }\n            return transformFunction(token.values);\n        }\n        return null;\n    }\n};\nconst matrix = (args) => {\n    const values = args.filter(arg => arg.type === TokenType.NUMBER_TOKEN).map((arg) => arg.number);\n    return values.length === 6 ? values : null;\n};\n// doesn't support 3D transforms at the moment\nconst matrix3d = (args) => {\n    const values = args.filter(arg => arg.type === TokenType.NUMBER_TOKEN).map((arg) => arg.number);\n    const [a1, b1, {}, {}, a2, b2, {}, {}, {}, {}, {}, {}, a4, b4, {}, {}] = values;\n    return values.length === 16 ? [a1, b1, a2, b2, a4, b4] : null;\n};\nconst SUPPORTED_TRANSFORM_FUNCTIONS = {\n    matrix: matrix,\n    matrix3d: matrix3d\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var VISIBILITY;\n(function (VISIBILITY) {\n    VISIBILITY[VISIBILITY[\"VISIBLE\"] = 0] = \"VISIBLE\";\n    VISIBILITY[VISIBILITY[\"HIDDEN\"] = 1] = \"HIDDEN\";\n    VISIBILITY[VISIBILITY[\"COLLAPSE\"] = 2] = \"COLLAPSE\";\n})(VISIBILITY || (VISIBILITY = {}));\nexport const visibility = {\n    name: 'visible',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (visibility) => {\n        switch (visibility) {\n            case 'hidden':\n                return VISIBILITY.HIDDEN;\n            case 'collapse':\n                return VISIBILITY.COLLAPSE;\n            case 'visible':\n            default:\n                return VISIBILITY.VISIBLE;\n        }\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nexport var WORD_BREAK;\n(function (WORD_BREAK) {\n    WORD_BREAK[\"NORMAL\"] = \"normal\";\n    WORD_BREAK[\"BREAK_ALL\"] = \"break-all\";\n    WORD_BREAK[\"KEEP_ALL\"] = \"keep-all\";\n})(WORD_BREAK || (WORD_BREAK = {}));\nexport const wordBreak = {\n    name: 'word-break',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (wordBreak) => {\n        switch (wordBreak) {\n            case 'break-all':\n                return WORD_BREAK.BREAK_ALL;\n            case 'keep-all':\n                return WORD_BREAK.KEEP_ALL;\n            case 'normal':\n            default:\n                return WORD_BREAK.NORMAL;\n        }\n    }\n};\n","import { PropertyDescriptorParsingType } from '../IPropertyDescriptor';\nimport { isNumberToken } from '../syntax/parser';\nimport { TokenType } from '../syntax/tokenizer';\nexport const zIndex = {\n    name: 'z-index',\n    initialValue: 'auto',\n    prefix: false,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (token) => {\n        if (token.type === TokenType.IDENT_TOKEN) {\n            return { auto: true, order: 0 };\n        }\n        if (isNumberToken(token)) {\n            return { auto: false, order: token.number };\n        }\n        throw new Error(`Invalid z-index number parsed`);\n    }\n};\n","import { EOF_TOKEN, Tokenizer, TokenType } from './tokenizer';\nexport class Parser {\n    constructor(tokens) {\n        this._tokens = tokens;\n    }\n    static create(value) {\n        const tokenizer = new Tokenizer();\n        tokenizer.write(value);\n        return new Parser(tokenizer.read());\n    }\n    static parseValue(value) {\n        return Parser.create(value).parseComponentValue();\n    }\n    static parseValues(value) {\n        return Parser.create(value).parseComponentValues();\n    }\n    parseComponentValue() {\n        let token = this.consumeToken();\n        while (token.type === TokenType.WHITESPACE_TOKEN) {\n            token = this.consumeToken();\n        }\n        if (token.type === TokenType.EOF_TOKEN) {\n            throw new SyntaxError(`Error parsing CSS component value, unexpected EOF`);\n        }\n        this.reconsumeToken(token);\n        const value = this.consumeComponentValue();\n        do {\n            token = this.consumeToken();\n        } while (token.type === TokenType.WHITESPACE_TOKEN);\n        if (token.type === TokenType.EOF_TOKEN) {\n            return value;\n        }\n        throw new SyntaxError(`Error parsing CSS component value, multiple values found when expecting only one`);\n    }\n    parseComponentValues() {\n        const values = [];\n        while (true) {\n            let value = this.consumeComponentValue();\n            if (value.type === TokenType.EOF_TOKEN) {\n                return values;\n            }\n            values.push(value);\n            values.push();\n        }\n    }\n    consumeComponentValue() {\n        const token = this.consumeToken();\n        switch (token.type) {\n            case TokenType.LEFT_CURLY_BRACKET_TOKEN:\n            case TokenType.LEFT_SQUARE_BRACKET_TOKEN:\n            case TokenType.LEFT_PARENTHESIS_TOKEN:\n                return this.consumeSimpleBlock(token.type);\n            case TokenType.FUNCTION_TOKEN:\n                return this.consumeFunction(token);\n        }\n        return token;\n    }\n    consumeSimpleBlock(type) {\n        const block = { type, values: [] };\n        let token = this.consumeToken();\n        while (true) {\n            if (token.type === TokenType.EOF_TOKEN || isEndingTokenFor(token, type)) {\n                return block;\n            }\n            this.reconsumeToken(token);\n            block.values.push(this.consumeComponentValue());\n            token = this.consumeToken();\n        }\n    }\n    consumeFunction(functionToken) {\n        const cssFunction = {\n            name: functionToken.value,\n            values: [],\n            type: TokenType.FUNCTION\n        };\n        while (true) {\n            const token = this.consumeToken();\n            if (token.type === TokenType.EOF_TOKEN || token.type === TokenType.RIGHT_PARENTHESIS_TOKEN) {\n                return cssFunction;\n            }\n            this.reconsumeToken(token);\n            cssFunction.values.push(this.consumeComponentValue());\n        }\n    }\n    consumeToken() {\n        const token = this._tokens.shift();\n        return typeof token === 'undefined' ? EOF_TOKEN : token;\n    }\n    reconsumeToken(token) {\n        this._tokens.unshift(token);\n    }\n}\nexport const isDimensionToken = (token) => token.type === TokenType.DIMENSION_TOKEN;\nexport const isNumberToken = (token) => token.type === TokenType.NUMBER_TOKEN;\nexport const isIdentToken = (token) => token.type === TokenType.IDENT_TOKEN;\nexport const isStringToken = (token) => token.type === TokenType.STRING_TOKEN;\nexport const isIdentWithValue = (token, value) => isIdentToken(token) && token.value === value;\nexport const nonWhiteSpace = (token) => token.type !== TokenType.WHITESPACE_TOKEN;\nexport const nonFunctionArgSeparator = (token) => token.type !== TokenType.WHITESPACE_TOKEN && token.type !== TokenType.COMMA_TOKEN;\nexport const parseFunctionArgs = (tokens) => {\n    const args = [];\n    let arg = [];\n    tokens.forEach(token => {\n        if (token.type === TokenType.COMMA_TOKEN) {\n            if (arg.length === 0) {\n                throw new Error(`Error parsing function args, zero tokens for arg`);\n            }\n            args.push(arg);\n            arg = [];\n            return;\n        }\n        if (token.type !== TokenType.WHITESPACE_TOKEN) {\n            arg.push(token);\n        }\n    });\n    if (arg.length) {\n        args.push(arg);\n    }\n    return args;\n};\nconst isEndingTokenFor = (token, type) => {\n    if (type === TokenType.LEFT_CURLY_BRACKET_TOKEN && token.type === TokenType.RIGHT_CURLY_BRACKET_TOKEN) {\n        return true;\n    }\n    if (type === TokenType.LEFT_SQUARE_BRACKET_TOKEN && token.type === TokenType.RIGHT_SQUARE_BRACKET_TOKEN) {\n        return true;\n    }\n    return type === TokenType.LEFT_PARENTHESIS_TOKEN && token.type === TokenType.RIGHT_PARENTHESIS_TOKEN;\n};\n","// https://www.w3.org/TR/css-syntax-3\nimport { fromCodePoint, toCodePoints } from 'css-line-break';\nexport var TokenType;\n(function (TokenType) {\n    TokenType[TokenType[\"STRING_TOKEN\"] = 0] = \"STRING_TOKEN\";\n    TokenType[TokenType[\"BAD_STRING_TOKEN\"] = 1] = \"BAD_STRING_TOKEN\";\n    TokenType[TokenType[\"LEFT_PARENTHESIS_TOKEN\"] = 2] = \"LEFT_PARENTHESIS_TOKEN\";\n    TokenType[TokenType[\"RIGHT_PARENTHESIS_TOKEN\"] = 3] = \"RIGHT_PARENTHESIS_TOKEN\";\n    TokenType[TokenType[\"COMMA_TOKEN\"] = 4] = \"COMMA_TOKEN\";\n    TokenType[TokenType[\"HASH_TOKEN\"] = 5] = \"HASH_TOKEN\";\n    TokenType[TokenType[\"DELIM_TOKEN\"] = 6] = \"DELIM_TOKEN\";\n    TokenType[TokenType[\"AT_KEYWORD_TOKEN\"] = 7] = \"AT_KEYWORD_TOKEN\";\n    TokenType[TokenType[\"PREFIX_MATCH_TOKEN\"] = 8] = \"PREFIX_MATCH_TOKEN\";\n    TokenType[TokenType[\"DASH_MATCH_TOKEN\"] = 9] = \"DASH_MATCH_TOKEN\";\n    TokenType[TokenType[\"INCLUDE_MATCH_TOKEN\"] = 10] = \"INCLUDE_MATCH_TOKEN\";\n    TokenType[TokenType[\"LEFT_CURLY_BRACKET_TOKEN\"] = 11] = \"LEFT_CURLY_BRACKET_TOKEN\";\n    TokenType[TokenType[\"RIGHT_CURLY_BRACKET_TOKEN\"] = 12] = \"RIGHT_CURLY_BRACKET_TOKEN\";\n    TokenType[TokenType[\"SUFFIX_MATCH_TOKEN\"] = 13] = \"SUFFIX_MATCH_TOKEN\";\n    TokenType[TokenType[\"SUBSTRING_MATCH_TOKEN\"] = 14] = \"SUBSTRING_MATCH_TOKEN\";\n    TokenType[TokenType[\"DIMENSION_TOKEN\"] = 15] = \"DIMENSION_TOKEN\";\n    TokenType[TokenType[\"PERCENTAGE_TOKEN\"] = 16] = \"PERCENTAGE_TOKEN\";\n    TokenType[TokenType[\"NUMBER_TOKEN\"] = 17] = \"NUMBER_TOKEN\";\n    TokenType[TokenType[\"FUNCTION\"] = 18] = \"FUNCTION\";\n    TokenType[TokenType[\"FUNCTION_TOKEN\"] = 19] = \"FUNCTION_TOKEN\";\n    TokenType[TokenType[\"IDENT_TOKEN\"] = 20] = \"IDENT_TOKEN\";\n    TokenType[TokenType[\"COLUMN_TOKEN\"] = 21] = \"COLUMN_TOKEN\";\n    TokenType[TokenType[\"URL_TOKEN\"] = 22] = \"URL_TOKEN\";\n    TokenType[TokenType[\"BAD_URL_TOKEN\"] = 23] = \"BAD_URL_TOKEN\";\n    TokenType[TokenType[\"CDC_TOKEN\"] = 24] = \"CDC_TOKEN\";\n    TokenType[TokenType[\"CDO_TOKEN\"] = 25] = \"CDO_TOKEN\";\n    TokenType[TokenType[\"COLON_TOKEN\"] = 26] = \"COLON_TOKEN\";\n    TokenType[TokenType[\"SEMICOLON_TOKEN\"] = 27] = \"SEMICOLON_TOKEN\";\n    TokenType[TokenType[\"LEFT_SQUARE_BRACKET_TOKEN\"] = 28] = \"LEFT_SQUARE_BRACKET_TOKEN\";\n    TokenType[TokenType[\"RIGHT_SQUARE_BRACKET_TOKEN\"] = 29] = \"RIGHT_SQUARE_BRACKET_TOKEN\";\n    TokenType[TokenType[\"UNICODE_RANGE_TOKEN\"] = 30] = \"UNICODE_RANGE_TOKEN\";\n    TokenType[TokenType[\"WHITESPACE_TOKEN\"] = 31] = \"WHITESPACE_TOKEN\";\n    TokenType[TokenType[\"EOF_TOKEN\"] = 32] = \"EOF_TOKEN\";\n})(TokenType || (TokenType = {}));\nexport const FLAG_UNRESTRICTED = 1 << 0;\nexport const FLAG_ID = 1 << 1;\nexport const FLAG_INTEGER = 1 << 2;\nexport const FLAG_NUMBER = 1 << 3;\nconst LINE_FEED = 0x000a;\nconst SOLIDUS = 0x002f;\nconst REVERSE_SOLIDUS = 0x005c;\nconst CHARACTER_TABULATION = 0x0009;\nconst SPACE = 0x0020;\nconst QUOTATION_MARK = 0x0022;\nconst EQUALS_SIGN = 0x003d;\nconst NUMBER_SIGN = 0x0023;\nconst DOLLAR_SIGN = 0x0024;\nconst PERCENTAGE_SIGN = 0x0025;\nconst APOSTROPHE = 0x0027;\nconst LEFT_PARENTHESIS = 0x0028;\nconst RIGHT_PARENTHESIS = 0x0029;\nconst LOW_LINE = 0x005f;\nconst HYPHEN_MINUS = 0x002d;\nconst EXCLAMATION_MARK = 0x0021;\nconst LESS_THAN_SIGN = 0x003c;\nconst GREATER_THAN_SIGN = 0x003e;\nconst COMMERCIAL_AT = 0x0040;\nconst LEFT_SQUARE_BRACKET = 0x005b;\nconst RIGHT_SQUARE_BRACKET = 0x005d;\nconst CIRCUMFLEX_ACCENT = 0x003d;\nconst LEFT_CURLY_BRACKET = 0x007b;\nconst QUESTION_MARK = 0x003f;\nconst RIGHT_CURLY_BRACKET = 0x007d;\nconst VERTICAL_LINE = 0x007c;\nconst TILDE = 0x007e;\nconst CONTROL = 0x0080;\nconst REPLACEMENT_CHARACTER = 0xfffd;\nconst ASTERISK = 0x002a;\nconst PLUS_SIGN = 0x002b;\nconst COMMA = 0x002c;\nconst COLON = 0x003a;\nconst SEMICOLON = 0x003b;\nconst FULL_STOP = 0x002e;\nconst NULL = 0x0000;\nconst BACKSPACE = 0x0008;\nconst LINE_TABULATION = 0x000b;\nconst SHIFT_OUT = 0x000e;\nconst INFORMATION_SEPARATOR_ONE = 0x001f;\nconst DELETE = 0x007f;\nconst EOF = -1;\nconst ZERO = 0x0030;\nconst a = 0x0061;\nconst e = 0x0065;\nconst f = 0x0066;\nconst u = 0x0075;\nconst z = 0x007a;\nconst A = 0x0041;\nconst E = 0x0045;\nconst F = 0x0046;\nconst U = 0x0055;\nconst Z = 0x005a;\nconst isDigit = (codePoint) => codePoint >= ZERO && codePoint <= 0x0039;\nconst isSurrogateCodePoint = (codePoint) => codePoint >= 0xd800 && codePoint <= 0xdfff;\nconst isHex = (codePoint) => isDigit(codePoint) || (codePoint >= A && codePoint <= F) || (codePoint >= a && codePoint <= f);\nconst isLowerCaseLetter = (codePoint) => codePoint >= a && codePoint <= z;\nconst isUpperCaseLetter = (codePoint) => codePoint >= A && codePoint <= Z;\nconst isLetter = (codePoint) => isLowerCaseLetter(codePoint) || isUpperCaseLetter(codePoint);\nconst isNonASCIICodePoint = (codePoint) => codePoint >= CONTROL;\nconst isWhiteSpace = (codePoint) => codePoint === LINE_FEED || codePoint === CHARACTER_TABULATION || codePoint === SPACE;\nconst isNameStartCodePoint = (codePoint) => isLetter(codePoint) || isNonASCIICodePoint(codePoint) || codePoint === LOW_LINE;\nconst isNameCodePoint = (codePoint) => isNameStartCodePoint(codePoint) || isDigit(codePoint) || codePoint === HYPHEN_MINUS;\nconst isNonPrintableCodePoint = (codePoint) => {\n    return ((codePoint >= NULL && codePoint <= BACKSPACE) ||\n        codePoint === LINE_TABULATION ||\n        (codePoint >= SHIFT_OUT && codePoint <= INFORMATION_SEPARATOR_ONE) ||\n        codePoint === DELETE);\n};\nconst isValidEscape = (c1, c2) => {\n    if (c1 !== REVERSE_SOLIDUS) {\n        return false;\n    }\n    return c2 !== LINE_FEED;\n};\nconst isIdentifierStart = (c1, c2, c3) => {\n    if (c1 === HYPHEN_MINUS) {\n        return isNameStartCodePoint(c2) || isValidEscape(c2, c3);\n    }\n    else if (isNameStartCodePoint(c1)) {\n        return true;\n    }\n    else if (c1 === REVERSE_SOLIDUS && isValidEscape(c1, c2)) {\n        return true;\n    }\n    return false;\n};\nconst isNumberStart = (c1, c2, c3) => {\n    if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n        if (isDigit(c2)) {\n            return true;\n        }\n        return c2 === FULL_STOP && isDigit(c3);\n    }\n    if (c1 === FULL_STOP) {\n        return isDigit(c2);\n    }\n    return isDigit(c1);\n};\nconst stringToNumber = (codePoints) => {\n    let c = 0;\n    let sign = 1;\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n        if (codePoints[c] === HYPHEN_MINUS) {\n            sign = -1;\n        }\n        c++;\n    }\n    const integers = [];\n    while (isDigit(codePoints[c])) {\n        integers.push(codePoints[c++]);\n    }\n    const int = integers.length ? parseInt(fromCodePoint(...integers), 10) : 0;\n    if (codePoints[c] === FULL_STOP) {\n        c++;\n    }\n    const fraction = [];\n    while (isDigit(codePoints[c])) {\n        fraction.push(codePoints[c++]);\n    }\n    const fracd = fraction.length;\n    const frac = fracd ? parseInt(fromCodePoint(...fraction), 10) : 0;\n    if (codePoints[c] === E || codePoints[c] === e) {\n        c++;\n    }\n    let expsign = 1;\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n        if (codePoints[c] === HYPHEN_MINUS) {\n            expsign = -1;\n        }\n        c++;\n    }\n    const exponent = [];\n    while (isDigit(codePoints[c])) {\n        exponent.push(codePoints[c++]);\n    }\n    const exp = exponent.length ? parseInt(fromCodePoint(...exponent), 10) : 0;\n    return sign * (int + frac * Math.pow(10, -fracd)) * Math.pow(10, expsign * exp);\n};\nconst LEFT_PARENTHESIS_TOKEN = {\n    type: TokenType.LEFT_PARENTHESIS_TOKEN\n};\nconst RIGHT_PARENTHESIS_TOKEN = {\n    type: TokenType.RIGHT_PARENTHESIS_TOKEN\n};\nconst COMMA_TOKEN = { type: TokenType.COMMA_TOKEN };\nconst SUFFIX_MATCH_TOKEN = { type: TokenType.SUFFIX_MATCH_TOKEN };\nconst PREFIX_MATCH_TOKEN = { type: TokenType.PREFIX_MATCH_TOKEN };\nconst COLUMN_TOKEN = { type: TokenType.COLUMN_TOKEN };\nconst DASH_MATCH_TOKEN = { type: TokenType.DASH_MATCH_TOKEN };\nconst INCLUDE_MATCH_TOKEN = { type: TokenType.INCLUDE_MATCH_TOKEN };\nconst LEFT_CURLY_BRACKET_TOKEN = {\n    type: TokenType.LEFT_CURLY_BRACKET_TOKEN\n};\nconst RIGHT_CURLY_BRACKET_TOKEN = {\n    type: TokenType.RIGHT_CURLY_BRACKET_TOKEN\n};\nconst SUBSTRING_MATCH_TOKEN = { type: TokenType.SUBSTRING_MATCH_TOKEN };\nconst BAD_URL_TOKEN = { type: TokenType.BAD_URL_TOKEN };\nconst BAD_STRING_TOKEN = { type: TokenType.BAD_STRING_TOKEN };\nconst CDO_TOKEN = { type: TokenType.CDO_TOKEN };\nconst CDC_TOKEN = { type: TokenType.CDC_TOKEN };\nconst COLON_TOKEN = { type: TokenType.COLON_TOKEN };\nconst SEMICOLON_TOKEN = { type: TokenType.SEMICOLON_TOKEN };\nconst LEFT_SQUARE_BRACKET_TOKEN = {\n    type: TokenType.LEFT_SQUARE_BRACKET_TOKEN\n};\nconst RIGHT_SQUARE_BRACKET_TOKEN = {\n    type: TokenType.RIGHT_SQUARE_BRACKET_TOKEN\n};\nconst WHITESPACE_TOKEN = { type: TokenType.WHITESPACE_TOKEN };\nexport const EOF_TOKEN = { type: TokenType.EOF_TOKEN };\nexport class Tokenizer {\n    constructor() {\n        this._value = [];\n    }\n    write(chunk) {\n        this._value = this._value.concat(toCodePoints(chunk));\n    }\n    read() {\n        const tokens = [];\n        let token = this.consumeToken();\n        while (token !== EOF_TOKEN) {\n            tokens.push(token);\n            token = this.consumeToken();\n        }\n        return tokens;\n    }\n    consumeToken() {\n        const codePoint = this.consumeCodePoint();\n        switch (codePoint) {\n            case QUOTATION_MARK:\n                return this.consumeStringToken(QUOTATION_MARK);\n            case NUMBER_SIGN:\n                const c1 = this.peekCodePoint(0);\n                const c2 = this.peekCodePoint(1);\n                const c3 = this.peekCodePoint(2);\n                if (isNameCodePoint(c1) || isValidEscape(c2, c3)) {\n                    const flags = isIdentifierStart(c1, c2, c3) ? FLAG_ID : FLAG_UNRESTRICTED;\n                    const value = this.consumeName();\n                    return { type: TokenType.HASH_TOKEN, value, flags };\n                }\n                break;\n            case DOLLAR_SIGN:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return SUFFIX_MATCH_TOKEN;\n                }\n                break;\n            case APOSTROPHE:\n                return this.consumeStringToken(APOSTROPHE);\n            case LEFT_PARENTHESIS:\n                return LEFT_PARENTHESIS_TOKEN;\n            case RIGHT_PARENTHESIS:\n                return RIGHT_PARENTHESIS_TOKEN;\n            case ASTERISK:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return SUBSTRING_MATCH_TOKEN;\n                }\n                break;\n            case PLUS_SIGN:\n                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                break;\n            case COMMA:\n                return COMMA_TOKEN;\n            case HYPHEN_MINUS:\n                const e1 = codePoint;\n                const e2 = this.peekCodePoint(0);\n                const e3 = this.peekCodePoint(1);\n                if (isNumberStart(e1, e2, e3)) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                if (isIdentifierStart(e1, e2, e3)) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeIdentLikeToken();\n                }\n                if (e2 === HYPHEN_MINUS && e3 === GREATER_THAN_SIGN) {\n                    this.consumeCodePoint();\n                    this.consumeCodePoint();\n                    return CDC_TOKEN;\n                }\n                break;\n            case FULL_STOP:\n                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                break;\n            case SOLIDUS:\n                if (this.peekCodePoint(0) === ASTERISK) {\n                    this.consumeCodePoint();\n                    while (true) {\n                        let c = this.consumeCodePoint();\n                        if (c === ASTERISK) {\n                            c = this.consumeCodePoint();\n                            if (c === SOLIDUS) {\n                                return this.consumeToken();\n                            }\n                        }\n                        if (c === EOF) {\n                            return this.consumeToken();\n                        }\n                    }\n                }\n                break;\n            case COLON:\n                return COLON_TOKEN;\n            case SEMICOLON:\n                return SEMICOLON_TOKEN;\n            case LESS_THAN_SIGN:\n                if (this.peekCodePoint(0) === EXCLAMATION_MARK &&\n                    this.peekCodePoint(1) === HYPHEN_MINUS &&\n                    this.peekCodePoint(2) === HYPHEN_MINUS) {\n                    this.consumeCodePoint();\n                    this.consumeCodePoint();\n                    return CDO_TOKEN;\n                }\n                break;\n            case COMMERCIAL_AT:\n                const a1 = this.peekCodePoint(0);\n                const a2 = this.peekCodePoint(1);\n                const a3 = this.peekCodePoint(2);\n                if (isIdentifierStart(a1, a2, a3)) {\n                    const value = this.consumeName();\n                    return { type: TokenType.AT_KEYWORD_TOKEN, value };\n                }\n                break;\n            case LEFT_SQUARE_BRACKET:\n                return LEFT_SQUARE_BRACKET_TOKEN;\n            case REVERSE_SOLIDUS:\n                if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeIdentLikeToken();\n                }\n                break;\n            case RIGHT_SQUARE_BRACKET:\n                return RIGHT_SQUARE_BRACKET_TOKEN;\n            case CIRCUMFLEX_ACCENT:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return PREFIX_MATCH_TOKEN;\n                }\n                break;\n            case LEFT_CURLY_BRACKET:\n                return LEFT_CURLY_BRACKET_TOKEN;\n            case RIGHT_CURLY_BRACKET:\n                return RIGHT_CURLY_BRACKET_TOKEN;\n            case u:\n            case U:\n                const u1 = this.peekCodePoint(0);\n                const u2 = this.peekCodePoint(1);\n                if (u1 === PLUS_SIGN && (isHex(u2) || u2 === QUESTION_MARK)) {\n                    this.consumeCodePoint();\n                    this.consumeUnicodeRangeToken();\n                }\n                this.reconsumeCodePoint(codePoint);\n                return this.consumeIdentLikeToken();\n            case VERTICAL_LINE:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return DASH_MATCH_TOKEN;\n                }\n                if (this.peekCodePoint(0) === VERTICAL_LINE) {\n                    this.consumeCodePoint();\n                    return COLUMN_TOKEN;\n                }\n                break;\n            case TILDE:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return INCLUDE_MATCH_TOKEN;\n                }\n                break;\n            case EOF:\n                return EOF_TOKEN;\n        }\n        if (isWhiteSpace(codePoint)) {\n            this.consumeWhiteSpace();\n            return WHITESPACE_TOKEN;\n        }\n        if (isDigit(codePoint)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeNumericToken();\n        }\n        if (isNameStartCodePoint(codePoint)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeIdentLikeToken();\n        }\n        return { type: TokenType.DELIM_TOKEN, value: fromCodePoint(codePoint) };\n    }\n    consumeCodePoint() {\n        const value = this._value.shift();\n        return typeof value === 'undefined' ? -1 : value;\n    }\n    reconsumeCodePoint(codePoint) {\n        this._value.unshift(codePoint);\n    }\n    peekCodePoint(delta) {\n        if (delta >= this._value.length) {\n            return -1;\n        }\n        return this._value[delta];\n    }\n    consumeUnicodeRangeToken() {\n        const digits = [];\n        let codePoint = this.consumeCodePoint();\n        while (isHex(codePoint) && digits.length < 6) {\n            digits.push(codePoint);\n            codePoint = this.consumeCodePoint();\n        }\n        let questionMarks = false;\n        while (codePoint === QUESTION_MARK && digits.length < 6) {\n            digits.push(codePoint);\n            codePoint = this.consumeCodePoint();\n            questionMarks = true;\n        }\n        if (questionMarks) {\n            const start = parseInt(fromCodePoint(...digits.map(digit => (digit === QUESTION_MARK ? ZERO : digit))), 16);\n            const end = parseInt(fromCodePoint(...digits.map(digit => (digit === QUESTION_MARK ? F : digit))), 16);\n            return { type: TokenType.UNICODE_RANGE_TOKEN, start, end };\n        }\n        const start = parseInt(fromCodePoint(...digits), 16);\n        if (this.peekCodePoint(0) === HYPHEN_MINUS && isHex(this.peekCodePoint(1))) {\n            this.consumeCodePoint();\n            codePoint = this.consumeCodePoint();\n            const endDigits = [];\n            while (isHex(codePoint) && endDigits.length < 6) {\n                endDigits.push(codePoint);\n                codePoint = this.consumeCodePoint();\n            }\n            const end = parseInt(fromCodePoint(...endDigits), 16);\n            return { type: TokenType.UNICODE_RANGE_TOKEN, start, end };\n        }\n        else {\n            return { type: TokenType.UNICODE_RANGE_TOKEN, start, end: start };\n        }\n    }\n    consumeIdentLikeToken() {\n        const value = this.consumeName();\n        if (value.toLowerCase() === 'url' && this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n            this.consumeCodePoint();\n            return this.consumeUrlToken();\n        }\n        else if (this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n            this.consumeCodePoint();\n            return { type: TokenType.FUNCTION_TOKEN, value };\n        }\n        return { type: TokenType.IDENT_TOKEN, value };\n    }\n    consumeUrlToken() {\n        const value = [];\n        this.consumeWhiteSpace();\n        if (this.peekCodePoint(0) === EOF) {\n            return { type: TokenType.URL_TOKEN, value: '' };\n        }\n        const next = this.peekCodePoint(0);\n        if (next === APOSTROPHE || next === QUOTATION_MARK) {\n            const stringToken = this.consumeStringToken(this.consumeCodePoint());\n            if (stringToken.type === TokenType.STRING_TOKEN) {\n                this.consumeWhiteSpace();\n                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {\n                    this.consumeCodePoint();\n                    return { type: TokenType.URL_TOKEN, value: stringToken.value };\n                }\n            }\n            this.consumeBadUrlRemnants();\n            return BAD_URL_TOKEN;\n        }\n        while (true) {\n            const codePoint = this.consumeCodePoint();\n            if (codePoint === EOF || codePoint === RIGHT_PARENTHESIS) {\n                return { type: TokenType.URL_TOKEN, value: fromCodePoint(...value) };\n            }\n            else if (isWhiteSpace(codePoint)) {\n                this.consumeWhiteSpace();\n                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {\n                    this.consumeCodePoint();\n                    return { type: TokenType.URL_TOKEN, value: fromCodePoint(...value) };\n                }\n                this.consumeBadUrlRemnants();\n                return BAD_URL_TOKEN;\n            }\n            else if (codePoint === QUOTATION_MARK ||\n                codePoint === APOSTROPHE ||\n                codePoint === LEFT_PARENTHESIS ||\n                isNonPrintableCodePoint(codePoint)) {\n                this.consumeBadUrlRemnants();\n                return BAD_URL_TOKEN;\n            }\n            else if (codePoint === REVERSE_SOLIDUS) {\n                if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                    value.push(this.consumeEscapedCodePoint());\n                }\n                else {\n                    this.consumeBadUrlRemnants();\n                    return BAD_URL_TOKEN;\n                }\n            }\n            else {\n                value.push(codePoint);\n            }\n        }\n    }\n    consumeWhiteSpace() {\n        while (isWhiteSpace(this.peekCodePoint(0))) {\n            this.consumeCodePoint();\n        }\n    }\n    consumeBadUrlRemnants() {\n        while (true) {\n            let codePoint = this.consumeCodePoint();\n            if (codePoint === RIGHT_PARENTHESIS || codePoint === EOF) {\n                return;\n            }\n            if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                this.consumeEscapedCodePoint();\n            }\n        }\n    }\n    consumeStringSlice(count) {\n        const SLICE_STACK_SIZE = 60000;\n        let value = '';\n        while (count > 0) {\n            const amount = Math.min(SLICE_STACK_SIZE, count);\n            value += fromCodePoint(...this._value.splice(0, amount));\n            count -= amount;\n        }\n        this._value.shift();\n        return value;\n    }\n    consumeStringToken(endingCodePoint) {\n        let value = '';\n        let i = 0;\n        do {\n            const codePoint = this._value[i];\n            if (codePoint === EOF || codePoint === undefined || codePoint === endingCodePoint) {\n                value += this.consumeStringSlice(i);\n                return { type: TokenType.STRING_TOKEN, value };\n            }\n            if (codePoint === LINE_FEED) {\n                this._value.splice(0, i);\n                return BAD_STRING_TOKEN;\n            }\n            if (codePoint === REVERSE_SOLIDUS) {\n                const next = this._value[i + 1];\n                if (next !== EOF && next !== undefined) {\n                    if (next === LINE_FEED) {\n                        value += this.consumeStringSlice(i);\n                        i = -1;\n                        this._value.shift();\n                    }\n                    else if (isValidEscape(codePoint, next)) {\n                        value += this.consumeStringSlice(i);\n                        value += fromCodePoint(this.consumeEscapedCodePoint());\n                        i = -1;\n                    }\n                }\n            }\n            i++;\n        } while (true);\n    }\n    consumeNumber() {\n        let repr = [];\n        let type = FLAG_INTEGER;\n        let c1 = this.peekCodePoint(0);\n        if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n            repr.push(this.consumeCodePoint());\n        }\n        while (isDigit(this.peekCodePoint(0))) {\n            repr.push(this.consumeCodePoint());\n        }\n        c1 = this.peekCodePoint(0);\n        let c2 = this.peekCodePoint(1);\n        if (c1 === FULL_STOP && isDigit(c2)) {\n            repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n            type = FLAG_NUMBER;\n            while (isDigit(this.peekCodePoint(0))) {\n                repr.push(this.consumeCodePoint());\n            }\n        }\n        c1 = this.peekCodePoint(0);\n        c2 = this.peekCodePoint(1);\n        let c3 = this.peekCodePoint(2);\n        if ((c1 === E || c1 === e) && (((c2 === PLUS_SIGN || c2 === HYPHEN_MINUS) && isDigit(c3)) || isDigit(c2))) {\n            repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n            type = FLAG_NUMBER;\n            while (isDigit(this.peekCodePoint(0))) {\n                repr.push(this.consumeCodePoint());\n            }\n        }\n        return [stringToNumber(repr), type];\n    }\n    consumeNumericToken() {\n        const [number, flags] = this.consumeNumber();\n        const c1 = this.peekCodePoint(0);\n        const c2 = this.peekCodePoint(1);\n        const c3 = this.peekCodePoint(2);\n        if (isIdentifierStart(c1, c2, c3)) {\n            let unit = this.consumeName();\n            return { type: TokenType.DIMENSION_TOKEN, number, flags, unit };\n        }\n        if (c1 === PERCENTAGE_SIGN) {\n            this.consumeCodePoint();\n            return { type: TokenType.PERCENTAGE_TOKEN, number, flags };\n        }\n        return { type: TokenType.NUMBER_TOKEN, number, flags };\n    }\n    consumeEscapedCodePoint() {\n        const codePoint = this.consumeCodePoint();\n        if (isHex(codePoint)) {\n            let hex = fromCodePoint(codePoint);\n            while (isHex(this.peekCodePoint(0)) && hex.length < 6) {\n                hex += fromCodePoint(this.consumeCodePoint());\n            }\n            if (isWhiteSpace(this.peekCodePoint(0))) {\n                this.consumeCodePoint();\n            }\n            const hexCodePoint = parseInt(hex, 16);\n            if (hexCodePoint === 0 || isSurrogateCodePoint(hexCodePoint) || hexCodePoint > 0x10ffff) {\n                return REPLACEMENT_CHARACTER;\n            }\n            return hexCodePoint;\n        }\n        if (codePoint === EOF) {\n            return REPLACEMENT_CHARACTER;\n        }\n        return codePoint;\n    }\n    consumeName() {\n        let result = '';\n        while (true) {\n            const codePoint = this.consumeCodePoint();\n            if (isNameCodePoint(codePoint)) {\n                result += fromCodePoint(codePoint);\n            }\n            else if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                result += fromCodePoint(this.consumeEscapedCodePoint());\n            }\n            else {\n                this.reconsumeCodePoint(codePoint);\n                return result;\n            }\n        }\n    }\n}\n","import { isIdentToken } from '../syntax/parser';\nimport { TokenType } from '../syntax/tokenizer';\nimport { HUNDRED_PERCENT, ZERO_LENGTH } from './length-percentage';\nconst DEG = 'deg';\nconst GRAD = 'grad';\nconst RAD = 'rad';\nconst TURN = 'turn';\nexport const angle = {\n    name: 'angle',\n    parse: (value) => {\n        if (value.type === TokenType.DIMENSION_TOKEN) {\n            switch (value.unit) {\n                case DEG:\n                    return (Math.PI * value.number) / 180;\n                case GRAD:\n                    return (Math.PI / 200) * value.number;\n                case RAD:\n                    return value.number;\n                case TURN:\n                    return Math.PI * 2 * value.number;\n            }\n        }\n        throw new Error(`Unsupported angle type`);\n    }\n};\nexport const isAngle = (value) => {\n    if (value.type === TokenType.DIMENSION_TOKEN) {\n        if (value.unit === DEG || value.unit === GRAD || value.unit === RAD || value.unit === TURN) {\n            return true;\n        }\n    }\n    return false;\n};\nexport const parseNamedSide = (tokens) => {\n    const sideOrCorner = tokens\n        .filter(isIdentToken)\n        .map(ident => ident.value)\n        .join(' ');\n    switch (sideOrCorner) {\n        case 'to bottom right':\n        case 'to right bottom':\n        case 'left top':\n        case 'top left':\n            return [ZERO_LENGTH, ZERO_LENGTH];\n        case 'to top':\n        case 'bottom':\n            return deg(0);\n        case 'to bottom left':\n        case 'to left bottom':\n        case 'right top':\n        case 'top right':\n            return [ZERO_LENGTH, HUNDRED_PERCENT];\n        case 'to right':\n        case 'left':\n            return deg(90);\n        case 'to top left':\n        case 'to left top':\n        case 'right bottom':\n        case 'bottom right':\n            return [HUNDRED_PERCENT, HUNDRED_PERCENT];\n        case 'to bottom':\n        case 'top':\n            return deg(180);\n        case 'to top right':\n        case 'to right top':\n        case 'left bottom':\n        case 'bottom left':\n            return [HUNDRED_PERCENT, ZERO_LENGTH];\n        case 'to left':\n        case 'right':\n            return deg(270);\n    }\n    return 0;\n};\nexport const deg = (deg) => (Math.PI * deg) / 180;\n","import { nonFunctionArgSeparator } from '../syntax/parser';\nimport { TokenType } from '../syntax/tokenizer';\nimport { angle, deg } from './angle';\nimport { getAbsoluteValue, isLengthPercentage } from './length-percentage';\nexport const color = {\n    name: 'color',\n    parse: (value) => {\n        if (value.type === TokenType.FUNCTION) {\n            const colorFunction = SUPPORTED_COLOR_FUNCTIONS[value.name];\n            if (typeof colorFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported color function \"${value.name}\"`);\n            }\n            return colorFunction(value.values);\n        }\n        if (value.type === TokenType.HASH_TOKEN) {\n            if (value.value.length === 3) {\n                const r = value.value.substring(0, 1);\n                const g = value.value.substring(1, 2);\n                const b = value.value.substring(2, 3);\n                return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), 1);\n            }\n            if (value.value.length === 4) {\n                const r = value.value.substring(0, 1);\n                const g = value.value.substring(1, 2);\n                const b = value.value.substring(2, 3);\n                const a = value.value.substring(3, 4);\n                return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), parseInt(a + a, 16) / 255);\n            }\n            if (value.value.length === 6) {\n                const r = value.value.substring(0, 2);\n                const g = value.value.substring(2, 4);\n                const b = value.value.substring(4, 6);\n                return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), 1);\n            }\n            if (value.value.length === 8) {\n                const r = value.value.substring(0, 2);\n                const g = value.value.substring(2, 4);\n                const b = value.value.substring(4, 6);\n                const a = value.value.substring(6, 8);\n                return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), parseInt(a, 16) / 255);\n            }\n        }\n        if (value.type === TokenType.IDENT_TOKEN) {\n            const namedColor = COLORS[value.value.toUpperCase()];\n            if (typeof namedColor !== 'undefined') {\n                return namedColor;\n            }\n        }\n        return COLORS.TRANSPARENT;\n    }\n};\nexport const isTransparent = (color) => (0xff & color) === 0;\nexport const asString = (color) => {\n    const alpha = 0xff & color;\n    const blue = 0xff & (color >> 8);\n    const green = 0xff & (color >> 16);\n    const red = 0xff & (color >> 24);\n    return alpha < 255 ? `rgba(${red},${green},${blue},${alpha / 255})` : `rgb(${red},${green},${blue})`;\n};\nexport const pack = (r, g, b, a) => ((r << 24) | (g << 16) | (b << 8) | (Math.round(a * 255) << 0)) >>> 0;\nconst getTokenColorValue = (token, i) => {\n    if (token.type === TokenType.NUMBER_TOKEN) {\n        return token.number;\n    }\n    if (token.type === TokenType.PERCENTAGE_TOKEN) {\n        const max = i === 3 ? 1 : 255;\n        return i === 3 ? (token.number / 100) * max : Math.round((token.number / 100) * max);\n    }\n    return 0;\n};\nconst rgb = (args) => {\n    const tokens = args.filter(nonFunctionArgSeparator);\n    if (tokens.length === 3) {\n        const [r, g, b] = tokens.map(getTokenColorValue);\n        return pack(r, g, b, 1);\n    }\n    if (tokens.length === 4) {\n        const [r, g, b, a] = tokens.map(getTokenColorValue);\n        return pack(r, g, b, a);\n    }\n    return 0;\n};\nfunction hue2rgb(t1, t2, hue) {\n    if (hue < 0) {\n        hue += 1;\n    }\n    if (hue >= 1) {\n        hue -= 1;\n    }\n    if (hue < 1 / 6) {\n        return (t2 - t1) * hue * 6 + t1;\n    }\n    else if (hue < 1 / 2) {\n        return t2;\n    }\n    else if (hue < 2 / 3) {\n        return (t2 - t1) * 6 * (2 / 3 - hue) + t1;\n    }\n    else {\n        return t1;\n    }\n}\nconst hsl = (args) => {\n    const tokens = args.filter(nonFunctionArgSeparator);\n    const [hue, saturation, lightness, alpha] = tokens;\n    const h = (hue.type === TokenType.NUMBER_TOKEN ? deg(hue.number) : angle.parse(hue)) / (Math.PI * 2);\n    const s = isLengthPercentage(saturation) ? saturation.number / 100 : 0;\n    const l = isLengthPercentage(lightness) ? lightness.number / 100 : 0;\n    const a = typeof alpha !== 'undefined' && isLengthPercentage(alpha) ? getAbsoluteValue(alpha, 1) : 1;\n    if (s === 0) {\n        return pack(l * 255, l * 255, l * 255, 1);\n    }\n    const t2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    const t1 = l * 2 - t2;\n    const r = hue2rgb(t1, t2, h + 1 / 3);\n    const g = hue2rgb(t1, t2, h);\n    const b = hue2rgb(t1, t2, h - 1 / 3);\n    return pack(r * 255, g * 255, b * 255, a);\n};\nconst SUPPORTED_COLOR_FUNCTIONS = {\n    hsl: hsl,\n    hsla: hsl,\n    rgb: rgb,\n    rgba: rgb\n};\nexport const COLORS = {\n    ALICEBLUE: 0xf0f8ffff,\n    ANTIQUEWHITE: 0xfaebd7ff,\n    AQUA: 0x00ffffff,\n    AQUAMARINE: 0x7fffd4ff,\n    AZURE: 0xf0ffffff,\n    BEIGE: 0xf5f5dcff,\n    BISQUE: 0xffe4c4ff,\n    BLACK: 0x000000ff,\n    BLANCHEDALMOND: 0xffebcdff,\n    BLUE: 0x0000ffff,\n    BLUEVIOLET: 0x8a2be2ff,\n    BROWN: 0xa52a2aff,\n    BURLYWOOD: 0xdeb887ff,\n    CADETBLUE: 0x5f9ea0ff,\n    CHARTREUSE: 0x7fff00ff,\n    CHOCOLATE: 0xd2691eff,\n    CORAL: 0xff7f50ff,\n    CORNFLOWERBLUE: 0x6495edff,\n    CORNSILK: 0xfff8dcff,\n    CRIMSON: 0xdc143cff,\n    CYAN: 0x00ffffff,\n    DARKBLUE: 0x00008bff,\n    DARKCYAN: 0x008b8bff,\n    DARKGOLDENROD: 0xb886bbff,\n    DARKGRAY: 0xa9a9a9ff,\n    DARKGREEN: 0x006400ff,\n    DARKGREY: 0xa9a9a9ff,\n    DARKKHAKI: 0xbdb76bff,\n    DARKMAGENTA: 0x8b008bff,\n    DARKOLIVEGREEN: 0x556b2fff,\n    DARKORANGE: 0xff8c00ff,\n    DARKORCHID: 0x9932ccff,\n    DARKRED: 0x8b0000ff,\n    DARKSALMON: 0xe9967aff,\n    DARKSEAGREEN: 0x8fbc8fff,\n    DARKSLATEBLUE: 0x483d8bff,\n    DARKSLATEGRAY: 0x2f4f4fff,\n    DARKSLATEGREY: 0x2f4f4fff,\n    DARKTURQUOISE: 0x00ced1ff,\n    DARKVIOLET: 0x9400d3ff,\n    DEEPPINK: 0xff1493ff,\n    DEEPSKYBLUE: 0x00bfffff,\n    DIMGRAY: 0x696969ff,\n    DIMGREY: 0x696969ff,\n    DODGERBLUE: 0x1e90ffff,\n    FIREBRICK: 0xb22222ff,\n    FLORALWHITE: 0xfffaf0ff,\n    FORESTGREEN: 0x228b22ff,\n    FUCHSIA: 0xff00ffff,\n    GAINSBORO: 0xdcdcdcff,\n    GHOSTWHITE: 0xf8f8ffff,\n    GOLD: 0xffd700ff,\n    GOLDENROD: 0xdaa520ff,\n    GRAY: 0x808080ff,\n    GREEN: 0x008000ff,\n    GREENYELLOW: 0xadff2fff,\n    GREY: 0x808080ff,\n    HONEYDEW: 0xf0fff0ff,\n    HOTPINK: 0xff69b4ff,\n    INDIANRED: 0xcd5c5cff,\n    INDIGO: 0x4b0082ff,\n    IVORY: 0xfffff0ff,\n    KHAKI: 0xf0e68cff,\n    LAVENDER: 0xe6e6faff,\n    LAVENDERBLUSH: 0xfff0f5ff,\n    LAWNGREEN: 0x7cfc00ff,\n    LEMONCHIFFON: 0xfffacdff,\n    LIGHTBLUE: 0xadd8e6ff,\n    LIGHTCORAL: 0xf08080ff,\n    LIGHTCYAN: 0xe0ffffff,\n    LIGHTGOLDENRODYELLOW: 0xfafad2ff,\n    LIGHTGRAY: 0xd3d3d3ff,\n    LIGHTGREEN: 0x90ee90ff,\n    LIGHTGREY: 0xd3d3d3ff,\n    LIGHTPINK: 0xffb6c1ff,\n    LIGHTSALMON: 0xffa07aff,\n    LIGHTSEAGREEN: 0x20b2aaff,\n    LIGHTSKYBLUE: 0x87cefaff,\n    LIGHTSLATEGRAY: 0x778899ff,\n    LIGHTSLATEGREY: 0x778899ff,\n    LIGHTSTEELBLUE: 0xb0c4deff,\n    LIGHTYELLOW: 0xffffe0ff,\n    LIME: 0x00ff00ff,\n    LIMEGREEN: 0x32cd32ff,\n    LINEN: 0xfaf0e6ff,\n    MAGENTA: 0xff00ffff,\n    MAROON: 0x800000ff,\n    MEDIUMAQUAMARINE: 0x66cdaaff,\n    MEDIUMBLUE: 0x0000cdff,\n    MEDIUMORCHID: 0xba55d3ff,\n    MEDIUMPURPLE: 0x9370dbff,\n    MEDIUMSEAGREEN: 0x3cb371ff,\n    MEDIUMSLATEBLUE: 0x7b68eeff,\n    MEDIUMSPRINGGREEN: 0x00fa9aff,\n    MEDIUMTURQUOISE: 0x48d1ccff,\n    MEDIUMVIOLETRED: 0xc71585ff,\n    MIDNIGHTBLUE: 0x191970ff,\n    MINTCREAM: 0xf5fffaff,\n    MISTYROSE: 0xffe4e1ff,\n    MOCCASIN: 0xffe4b5ff,\n    NAVAJOWHITE: 0xffdeadff,\n    NAVY: 0x000080ff,\n    OLDLACE: 0xfdf5e6ff,\n    OLIVE: 0x808000ff,\n    OLIVEDRAB: 0x6b8e23ff,\n    ORANGE: 0xffa500ff,\n    ORANGERED: 0xff4500ff,\n    ORCHID: 0xda70d6ff,\n    PALEGOLDENROD: 0xeee8aaff,\n    PALEGREEN: 0x98fb98ff,\n    PALETURQUOISE: 0xafeeeeff,\n    PALEVIOLETRED: 0xdb7093ff,\n    PAPAYAWHIP: 0xffefd5ff,\n    PEACHPUFF: 0xffdab9ff,\n    PERU: 0xcd853fff,\n    PINK: 0xffc0cbff,\n    PLUM: 0xdda0ddff,\n    POWDERBLUE: 0xb0e0e6ff,\n    PURPLE: 0x800080ff,\n    REBECCAPURPLE: 0x663399ff,\n    RED: 0xff0000ff,\n    ROSYBROWN: 0xbc8f8fff,\n    ROYALBLUE: 0x4169e1ff,\n    SADDLEBROWN: 0x8b4513ff,\n    SALMON: 0xfa8072ff,\n    SANDYBROWN: 0xf4a460ff,\n    SEAGREEN: 0x2e8b57ff,\n    SEASHELL: 0xfff5eeff,\n    SIENNA: 0xa0522dff,\n    SILVER: 0xc0c0c0ff,\n    SKYBLUE: 0x87ceebff,\n    SLATEBLUE: 0x6a5acdff,\n    SLATEGRAY: 0x708090ff,\n    SLATEGREY: 0x708090ff,\n    SNOW: 0xfffafaff,\n    SPRINGGREEN: 0x00ff7fff,\n    STEELBLUE: 0x4682b4ff,\n    TAN: 0xd2b48cff,\n    TEAL: 0x008080ff,\n    THISTLE: 0xd8bfd8ff,\n    TOMATO: 0xff6347ff,\n    TRANSPARENT: 0x00000000,\n    TURQUOISE: 0x40e0d0ff,\n    VIOLET: 0xee82eeff,\n    WHEAT: 0xf5deb3ff,\n    WHITE: 0xffffffff,\n    WHITESMOKE: 0xf5f5f5ff,\n    YELLOW: 0xffff00ff,\n    YELLOWGREEN: 0x9acd32ff\n};\n","import { parseFunctionArgs } from '../../syntax/parser';\nimport { CSSImageType } from '../image';\nimport { TokenType } from '../../syntax/tokenizer';\nimport { isAngle, angle as angleType, parseNamedSide, deg } from '../angle';\nimport { parseColorStop } from './gradient';\nexport const prefixLinearGradient = (tokens) => {\n    let angle = deg(180);\n    const stops = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        if (i === 0) {\n            const firstToken = arg[0];\n            if (firstToken.type === TokenType.IDENT_TOKEN &&\n                ['top', 'left', 'right', 'bottom'].indexOf(firstToken.value) !== -1) {\n                angle = parseNamedSide(arg);\n                return;\n            }\n            else if (isAngle(firstToken)) {\n                angle = (angleType.parse(firstToken) + deg(270)) % deg(360);\n                return;\n            }\n        }\n        const colorStop = parseColorStop(arg);\n        stops.push(colorStop);\n    });\n    return {\n        angle,\n        stops,\n        type: CSSImageType.LINEAR_GRADIENT\n    };\n};\n","import { isIdentToken, parseFunctionArgs } from '../../syntax/parser';\nimport { CSSImageType, CSSRadialExtent, CSSRadialShape } from '../image';\nimport { parseColorStop } from './gradient';\nimport { FIFTY_PERCENT, HUNDRED_PERCENT, isLengthPercentage, ZERO_LENGTH } from '../length-percentage';\nimport { isLength } from '../length';\nimport { CIRCLE, CLOSEST_CORNER, CLOSEST_SIDE, CONTAIN, COVER, ELLIPSE, FARTHEST_CORNER, FARTHEST_SIDE } from './radial-gradient';\nexport const prefixRadialGradient = (tokens) => {\n    let shape = CSSRadialShape.CIRCLE;\n    let size = CSSRadialExtent.FARTHEST_CORNER;\n    const stops = [];\n    const position = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        let isColorStop = true;\n        if (i === 0) {\n            isColorStop = arg.reduce((acc, token) => {\n                if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case 'center':\n                            position.push(FIFTY_PERCENT);\n                            return false;\n                        case 'top':\n                        case 'left':\n                            position.push(ZERO_LENGTH);\n                            return false;\n                        case 'right':\n                        case 'bottom':\n                            position.push(HUNDRED_PERCENT);\n                            return false;\n                    }\n                }\n                else if (isLengthPercentage(token) || isLength(token)) {\n                    position.push(token);\n                    return false;\n                }\n                return acc;\n            }, isColorStop);\n        }\n        else if (i === 1) {\n            isColorStop = arg.reduce((acc, token) => {\n                if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case CIRCLE:\n                            shape = CSSRadialShape.CIRCLE;\n                            return false;\n                        case ELLIPSE:\n                            shape = CSSRadialShape.ELLIPSE;\n                            return false;\n                        case CONTAIN:\n                        case CLOSEST_SIDE:\n                            size = CSSRadialExtent.CLOSEST_SIDE;\n                            return false;\n                        case FARTHEST_SIDE:\n                            size = CSSRadialExtent.FARTHEST_SIDE;\n                            return false;\n                        case CLOSEST_CORNER:\n                            size = CSSRadialExtent.CLOSEST_CORNER;\n                            return false;\n                        case COVER:\n                        case FARTHEST_CORNER:\n                            size = CSSRadialExtent.FARTHEST_CORNER;\n                            return false;\n                    }\n                }\n                else if (isLength(token) || isLengthPercentage(token)) {\n                    if (!Array.isArray(size)) {\n                        size = [];\n                    }\n                    size.push(token);\n                    return false;\n                }\n                return acc;\n            }, isColorStop);\n        }\n        if (isColorStop) {\n            const colorStop = parseColorStop(arg);\n            stops.push(colorStop);\n        }\n    });\n    return { size, shape, stops, position, type: CSSImageType.RADIAL_GRADIENT };\n};\n","import { isIdentToken, isNumberToken, nonFunctionArgSeparator, parseFunctionArgs } from '../../syntax/parser';\nimport { CSSImageType, CSSRadialExtent, CSSRadialShape } from '../image';\nimport { deg } from '../angle';\nimport { TokenType } from '../../syntax/tokenizer';\nimport { color as colorType } from '../color';\nimport { HUNDRED_PERCENT, ZERO_LENGTH } from '../length-percentage';\nexport const webkitGradient = (tokens) => {\n    let angle = deg(180);\n    const stops = [];\n    let type = CSSImageType.LINEAR_GRADIENT;\n    let shape = CSSRadialShape.CIRCLE;\n    let size = CSSRadialExtent.FARTHEST_CORNER;\n    const position = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        const firstToken = arg[0];\n        if (i === 0) {\n            if (isIdentToken(firstToken) && firstToken.value === 'linear') {\n                type = CSSImageType.LINEAR_GRADIENT;\n                return;\n            }\n            else if (isIdentToken(firstToken) && firstToken.value === 'radial') {\n                type = CSSImageType.RADIAL_GRADIENT;\n                return;\n            }\n        }\n        if (firstToken.type === TokenType.FUNCTION) {\n            if (firstToken.name === 'from') {\n                const color = colorType.parse(firstToken.values[0]);\n                stops.push({ stop: ZERO_LENGTH, color });\n            }\n            else if (firstToken.name === 'to') {\n                const color = colorType.parse(firstToken.values[0]);\n                stops.push({ stop: HUNDRED_PERCENT, color });\n            }\n            else if (firstToken.name === 'color-stop') {\n                const values = firstToken.values.filter(nonFunctionArgSeparator);\n                if (values.length === 2) {\n                    const color = colorType.parse(values[1]);\n                    const stop = values[0];\n                    if (isNumberToken(stop)) {\n                        stops.push({\n                            stop: { type: TokenType.PERCENTAGE_TOKEN, number: stop.number * 100, flags: stop.flags },\n                            color\n                        });\n                    }\n                }\n            }\n        }\n    });\n    return type === CSSImageType.LINEAR_GRADIENT\n        ? {\n            angle: (angle + deg(180)) % deg(360),\n            stops,\n            type\n        }\n        : { size, shape, stops, position, type };\n};\n","import { LIST_STYLE_TYPE } from '../../property-descriptors/list-style-type';\nimport { fromCodePoint } from 'css-line-break';\nimport { contains } from '../../../core/bitwise';\nexport class CounterState {\n    constructor() {\n        this.counters = {};\n    }\n    getCounterValue(name) {\n        const counter = this.counters[name];\n        if (counter && counter.length) {\n            return counter[counter.length - 1];\n        }\n        return 1;\n    }\n    getCounterValues(name) {\n        const counter = this.counters[name];\n        return counter ? counter : [];\n    }\n    pop(counters) {\n        counters.forEach(counter => this.counters[counter].pop());\n    }\n    parse(style) {\n        const counterIncrement = style.counterIncrement;\n        const counterReset = style.counterReset;\n        let canReset = true;\n        if (counterIncrement !== null) {\n            counterIncrement.forEach(entry => {\n                const counter = this.counters[entry.counter];\n                if (counter && entry.increment !== 0) {\n                    canReset = false;\n                    counter[Math.max(0, counter.length - 1)] += entry.increment;\n                }\n            });\n        }\n        const counterNames = [];\n        if (canReset) {\n            counterReset.forEach(entry => {\n                let counter = this.counters[entry.counter];\n                counterNames.push(entry.counter);\n                if (!counter) {\n                    counter = this.counters[entry.counter] = [];\n                }\n                counter.push(entry.reset);\n            });\n        }\n        return counterNames;\n    }\n}\nconst ROMAN_UPPER = {\n    integers: [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],\n    values: ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I']\n};\nconst ARMENIAN = {\n    integers: [\n        9000,\n        8000,\n        7000,\n        6000,\n        5000,\n        4000,\n        3000,\n        2000,\n        1000,\n        900,\n        800,\n        700,\n        600,\n        500,\n        400,\n        300,\n        200,\n        100,\n        90,\n        80,\n        70,\n        60,\n        50,\n        40,\n        30,\n        20,\n        10,\n        9,\n        8,\n        7,\n        6,\n        5,\n        4,\n        3,\n        2,\n        1\n    ],\n    values: [\n        'Ք',\n        'Փ',\n        'Ւ',\n        'Ց',\n        'Ր',\n        'Տ',\n        'Վ',\n        'Ս',\n        'Ռ',\n        'Ջ',\n        'Պ',\n        'Չ',\n        'Ո',\n        'Շ',\n        'Ն',\n        'Յ',\n        'Մ',\n        'Ճ',\n        'Ղ',\n        'Ձ',\n        'Հ',\n        'Կ',\n        'Ծ',\n        'Խ',\n        'Լ',\n        'Ի',\n        'Ժ',\n        'Թ',\n        'Ը',\n        'Է',\n        'Զ',\n        'Ե',\n        'Դ',\n        'Գ',\n        'Բ',\n        'Ա'\n    ]\n};\nconst HEBREW = {\n    integers: [\n        10000,\n        9000,\n        8000,\n        7000,\n        6000,\n        5000,\n        4000,\n        3000,\n        2000,\n        1000,\n        400,\n        300,\n        200,\n        100,\n        90,\n        80,\n        70,\n        60,\n        50,\n        40,\n        30,\n        20,\n        19,\n        18,\n        17,\n        16,\n        15,\n        10,\n        9,\n        8,\n        7,\n        6,\n        5,\n        4,\n        3,\n        2,\n        1\n    ],\n    values: [\n        'י׳',\n        'ט׳',\n        'ח׳',\n        'ז׳',\n        'ו׳',\n        'ה׳',\n        'ד׳',\n        'ג׳',\n        'ב׳',\n        'א׳',\n        'ת',\n        'ש',\n        'ר',\n        'ק',\n        'צ',\n        'פ',\n        'ע',\n        'ס',\n        'נ',\n        'מ',\n        'ל',\n        'כ',\n        'יט',\n        'יח',\n        'יז',\n        'טז',\n        'טו',\n        'י',\n        'ט',\n        'ח',\n        'ז',\n        'ו',\n        'ה',\n        'ד',\n        'ג',\n        'ב',\n        'א'\n    ]\n};\nconst GEORGIAN = {\n    integers: [\n        10000,\n        9000,\n        8000,\n        7000,\n        6000,\n        5000,\n        4000,\n        3000,\n        2000,\n        1000,\n        900,\n        800,\n        700,\n        600,\n        500,\n        400,\n        300,\n        200,\n        100,\n        90,\n        80,\n        70,\n        60,\n        50,\n        40,\n        30,\n        20,\n        10,\n        9,\n        8,\n        7,\n        6,\n        5,\n        4,\n        3,\n        2,\n        1\n    ],\n    values: [\n        'ჵ',\n        'ჰ',\n        'ჯ',\n        'ჴ',\n        'ხ',\n        'ჭ',\n        'წ',\n        'ძ',\n        'ც',\n        'ჩ',\n        'შ',\n        'ყ',\n        'ღ',\n        'ქ',\n        'ფ',\n        'ჳ',\n        'ტ',\n        'ს',\n        'რ',\n        'ჟ',\n        'პ',\n        'ო',\n        'ჲ',\n        'ნ',\n        'მ',\n        'ლ',\n        'კ',\n        'ი',\n        'თ',\n        'ჱ',\n        'ზ',\n        'ვ',\n        'ე',\n        'დ',\n        'გ',\n        'ბ',\n        'ა'\n    ]\n};\nconst createAdditiveCounter = (value, min, max, symbols, fallback, suffix) => {\n    if (value < min || value > max) {\n        return createCounterText(value, fallback, suffix.length > 0);\n    }\n    return (symbols.integers.reduce((string, integer, index) => {\n        while (value >= integer) {\n            value -= integer;\n            string += symbols.values[index];\n        }\n        return string;\n    }, '') + suffix);\n};\nconst createCounterStyleWithSymbolResolver = (value, codePointRangeLength, isNumeric, resolver) => {\n    let string = '';\n    do {\n        if (!isNumeric) {\n            value--;\n        }\n        string = resolver(value) + string;\n        value /= codePointRangeLength;\n    } while (value * codePointRangeLength >= codePointRangeLength);\n    return string;\n};\nconst createCounterStyleFromRange = (value, codePointRangeStart, codePointRangeEnd, isNumeric, suffix) => {\n    const codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;\n    return ((value < 0 ? '-' : '') +\n        (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, isNumeric, codePoint => fromCodePoint(Math.floor(codePoint % codePointRangeLength) + codePointRangeStart)) +\n            suffix));\n};\nconst createCounterStyleFromSymbols = (value, symbols, suffix = '. ') => {\n    const codePointRangeLength = symbols.length;\n    return (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, false, codePoint => symbols[Math.floor(codePoint % codePointRangeLength)]) + suffix);\n};\nconst CJK_ZEROS = 1 << 0;\nconst CJK_TEN_COEFFICIENTS = 1 << 1;\nconst CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;\nconst CJK_HUNDRED_COEFFICIENTS = 1 << 3;\nconst createCJKCounter = (value, numbers, multipliers, negativeSign, suffix, flags) => {\n    if (value < -9999 || value > 9999) {\n        return createCounterText(value, LIST_STYLE_TYPE.CJK_DECIMAL, suffix.length > 0);\n    }\n    let tmp = Math.abs(value);\n    let string = suffix;\n    if (tmp === 0) {\n        return numbers[0] + string;\n    }\n    for (let digit = 0; tmp > 0 && digit <= 4; digit++) {\n        let coefficient = tmp % 10;\n        if (coefficient === 0 && contains(flags, CJK_ZEROS) && string !== '') {\n            string = numbers[coefficient] + string;\n        }\n        else if (coefficient > 1 ||\n            (coefficient === 1 && digit === 0) ||\n            (coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_COEFFICIENTS)) ||\n            (coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_HIGH_COEFFICIENTS) && value > 100) ||\n            (coefficient === 1 && digit > 1 && contains(flags, CJK_HUNDRED_COEFFICIENTS))) {\n            string = numbers[coefficient] + (digit > 0 ? multipliers[digit - 1] : '') + string;\n        }\n        else if (coefficient === 1 && digit > 0) {\n            string = multipliers[digit - 1] + string;\n        }\n        tmp = Math.floor(tmp / 10);\n    }\n    return (value < 0 ? negativeSign : '') + string;\n};\nconst CHINESE_INFORMAL_MULTIPLIERS = '十百千萬';\nconst CHINESE_FORMAL_MULTIPLIERS = '拾佰仟萬';\nconst JAPANESE_NEGATIVE = 'マイナス';\nconst KOREAN_NEGATIVE = '마이너스';\nexport const createCounterText = (value, type, appendSuffix) => {\n    const defaultSuffix = appendSuffix ? '. ' : '';\n    const cjkSuffix = appendSuffix ? '、' : '';\n    const koreanSuffix = appendSuffix ? ', ' : '';\n    const spaceSuffix = appendSuffix ? ' ' : '';\n    switch (type) {\n        case LIST_STYLE_TYPE.DISC:\n            return '•' + spaceSuffix;\n        case LIST_STYLE_TYPE.CIRCLE:\n            return '◦' + spaceSuffix;\n        case LIST_STYLE_TYPE.SQUARE:\n            return '◾' + spaceSuffix;\n        case LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:\n            const string = createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n            return string.length < 4 ? `0${string}` : string;\n        case LIST_STYLE_TYPE.CJK_DECIMAL:\n            return createCounterStyleFromSymbols(value, '〇一二三四五六七八九', cjkSuffix);\n        case LIST_STYLE_TYPE.LOWER_ROMAN:\n            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, LIST_STYLE_TYPE.DECIMAL, defaultSuffix).toLowerCase();\n        case LIST_STYLE_TYPE.UPPER_ROMAN:\n            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_GREEK:\n            return createCounterStyleFromRange(value, 945, 969, false, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_ALPHA:\n            return createCounterStyleFromRange(value, 97, 122, false, defaultSuffix);\n        case LIST_STYLE_TYPE.UPPER_ALPHA:\n            return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);\n        case LIST_STYLE_TYPE.ARABIC_INDIC:\n            return createCounterStyleFromRange(value, 1632, 1641, true, defaultSuffix);\n        case LIST_STYLE_TYPE.ARMENIAN:\n        case LIST_STYLE_TYPE.UPPER_ARMENIAN:\n            return createAdditiveCounter(value, 1, 9999, ARMENIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_ARMENIAN:\n            return createAdditiveCounter(value, 1, 9999, ARMENIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix).toLowerCase();\n        case LIST_STYLE_TYPE.BENGALI:\n            return createCounterStyleFromRange(value, 2534, 2543, true, defaultSuffix);\n        case LIST_STYLE_TYPE.CAMBODIAN:\n        case LIST_STYLE_TYPE.KHMER:\n            return createCounterStyleFromRange(value, 6112, 6121, true, defaultSuffix);\n        case LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:\n            return createCounterStyleFromSymbols(value, '子丑寅卯辰巳午未申酉戌亥', cjkSuffix);\n        case LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:\n            return createCounterStyleFromSymbols(value, '甲乙丙丁戊己庚辛壬癸', cjkSuffix);\n        case LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:\n        case LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:\n            return createCJKCounter(value, '零一二三四五六七八九', CHINESE_INFORMAL_MULTIPLIERS, '負', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);\n        case LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:\n            return createCJKCounter(value, '零壹貳參肆伍陸柒捌玖', CHINESE_FORMAL_MULTIPLIERS, '負', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);\n        case LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:\n            return createCJKCounter(value, '零一二三四五六七八九', CHINESE_INFORMAL_MULTIPLIERS, '负', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);\n        case LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:\n            return createCJKCounter(value, '零壹贰叁肆伍陆柒捌玖', CHINESE_FORMAL_MULTIPLIERS, '负', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);\n        case LIST_STYLE_TYPE.JAPANESE_INFORMAL:\n            return createCJKCounter(value, '〇一二三四五六七八九', '十百千万', JAPANESE_NEGATIVE, cjkSuffix, 0);\n        case LIST_STYLE_TYPE.JAPANESE_FORMAL:\n            return createCJKCounter(value, '零壱弐参四伍六七八九', '拾百千万', JAPANESE_NEGATIVE, cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);\n        case LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:\n            return createCJKCounter(value, '영일이삼사오육칠팔구', '십백천만', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);\n        case LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:\n            return createCJKCounter(value, '零一二三四五六七八九', '十百千萬', KOREAN_NEGATIVE, koreanSuffix, 0);\n        case LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:\n            return createCJKCounter(value, '零壹貳參四五六七八九', '拾百千', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);\n        case LIST_STYLE_TYPE.DEVANAGARI:\n            return createCounterStyleFromRange(value, 0x966, 0x96f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.GEORGIAN:\n            return createAdditiveCounter(value, 1, 19999, GEORGIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.GUJARATI:\n            return createCounterStyleFromRange(value, 0xae6, 0xaef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.GURMUKHI:\n            return createCounterStyleFromRange(value, 0xa66, 0xa6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.HEBREW:\n            return createAdditiveCounter(value, 1, 10999, HEBREW, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.HIRAGANA:\n            return createCounterStyleFromSymbols(value, 'あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん');\n        case LIST_STYLE_TYPE.HIRAGANA_IROHA:\n            return createCounterStyleFromSymbols(value, 'いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす');\n        case LIST_STYLE_TYPE.KANNADA:\n            return createCounterStyleFromRange(value, 0xce6, 0xcef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.KATAKANA:\n            return createCounterStyleFromSymbols(value, 'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン', cjkSuffix);\n        case LIST_STYLE_TYPE.KATAKANA_IROHA:\n            return createCounterStyleFromSymbols(value, 'イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス', cjkSuffix);\n        case LIST_STYLE_TYPE.LAO:\n            return createCounterStyleFromRange(value, 0xed0, 0xed9, true, defaultSuffix);\n        case LIST_STYLE_TYPE.MONGOLIAN:\n            return createCounterStyleFromRange(value, 0x1810, 0x1819, true, defaultSuffix);\n        case LIST_STYLE_TYPE.MYANMAR:\n            return createCounterStyleFromRange(value, 0x1040, 0x1049, true, defaultSuffix);\n        case LIST_STYLE_TYPE.ORIYA:\n            return createCounterStyleFromRange(value, 0xb66, 0xb6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.PERSIAN:\n            return createCounterStyleFromRange(value, 0x6f0, 0x6f9, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TAMIL:\n            return createCounterStyleFromRange(value, 0xbe6, 0xbef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TELUGU:\n            return createCounterStyleFromRange(value, 0xc66, 0xc6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.THAI:\n            return createCounterStyleFromRange(value, 0xe50, 0xe59, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TIBETAN:\n            return createCounterStyleFromRange(value, 0xf20, 0xf29, true, defaultSuffix);\n        case LIST_STYLE_TYPE.DECIMAL:\n        default:\n            return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n    }\n};\n","import { CSSRadialExtent, CSSRadialShape } from '../image';\nimport { color as colorType } from '../color';\nimport { getAbsoluteValue, HUNDRED_PERCENT, isLengthPercentage, ZERO_LENGTH } from '../length-percentage';\nexport const parseColorStop = (args) => {\n    const color = colorType.parse(args[0]);\n    const stop = args[1];\n    return stop && isLengthPercentage(stop) ? { color, stop } : { color, stop: null };\n};\nexport const processColorStops = (stops, lineLength) => {\n    const first = stops[0];\n    const last = stops[stops.length - 1];\n    if (first.stop === null) {\n        first.stop = ZERO_LENGTH;\n    }\n    if (last.stop === null) {\n        last.stop = HUNDRED_PERCENT;\n    }\n    const processStops = [];\n    let previous = 0;\n    for (let i = 0; i < stops.length; i++) {\n        const stop = stops[i].stop;\n        if (stop !== null) {\n            const absoluteValue = getAbsoluteValue(stop, lineLength);\n            if (absoluteValue > previous) {\n                processStops.push(absoluteValue);\n            }\n            else {\n                processStops.push(previous);\n            }\n            previous = absoluteValue;\n        }\n        else {\n            processStops.push(null);\n        }\n    }\n    let gapBegin = null;\n    for (let i = 0; i < processStops.length; i++) {\n        const stop = processStops[i];\n        if (stop === null) {\n            if (gapBegin === null) {\n                gapBegin = i;\n            }\n        }\n        else if (gapBegin !== null) {\n            const gapLength = i - gapBegin;\n            const beforeGap = processStops[gapBegin - 1];\n            const gapValue = (stop - beforeGap) / (gapLength + 1);\n            for (let g = 1; g <= gapLength; g++) {\n                processStops[gapBegin + g - 1] = gapValue * g;\n            }\n            gapBegin = null;\n        }\n    }\n    return stops.map(({ color }, i) => {\n        return { color, stop: Math.max(Math.min(1, processStops[i] / lineLength), 0) };\n    });\n};\nconst getAngleFromCorner = (corner, width, height) => {\n    const centerX = width / 2;\n    const centerY = height / 2;\n    const x = getAbsoluteValue(corner[0], width) - centerX;\n    const y = centerY - getAbsoluteValue(corner[1], height);\n    return (Math.atan2(y, x) + Math.PI * 2) % (Math.PI * 2);\n};\nexport const calculateGradientDirection = (angle, width, height) => {\n    const radian = typeof angle === 'number' ? angle : getAngleFromCorner(angle, width, height);\n    const lineLength = Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));\n    const halfWidth = width / 2;\n    const halfHeight = height / 2;\n    const halfLineLength = lineLength / 2;\n    const yDiff = Math.sin(radian - Math.PI / 2) * halfLineLength;\n    const xDiff = Math.cos(radian - Math.PI / 2) * halfLineLength;\n    return [lineLength, halfWidth - xDiff, halfWidth + xDiff, halfHeight - yDiff, halfHeight + yDiff];\n};\nconst distance = (a, b) => Math.sqrt(a * a + b * b);\nconst findCorner = (width, height, x, y, closest) => {\n    const corners = [[0, 0], [0, height], [width, 0], [width, height]];\n    return corners.reduce((stat, corner) => {\n        const [cx, cy] = corner;\n        const d = distance(x - cx, y - cy);\n        if (closest ? d < stat.optimumDistance : d > stat.optimumDistance) {\n            return {\n                optimumCorner: corner,\n                optimumDistance: d\n            };\n        }\n        return stat;\n    }, {\n        optimumDistance: closest ? Infinity : -Infinity,\n        optimumCorner: null\n    }).optimumCorner;\n};\nexport const calculateRadius = (gradient, x, y, width, height) => {\n    let rx = 0;\n    let ry = 0;\n    switch (gradient.size) {\n        case CSSRadialExtent.CLOSEST_SIDE:\n            // The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradient’s center.\n            // If the shape is an ellipse, it exactly meets the closest side in each dimension.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.min(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));\n            }\n            else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                rx = Math.min(Math.abs(x), Math.abs(x - width));\n                ry = Math.min(Math.abs(y), Math.abs(y - height));\n            }\n            break;\n        case CSSRadialExtent.CLOSEST_CORNER:\n            // The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradient’s center.\n            // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.min(distance(x, y), distance(x, y - height), distance(x - width, y), distance(x - width, y - height));\n            }\n            else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                // Compute the ratio ry/rx (which is to be the same as for \"closest-side\")\n                const c = Math.min(Math.abs(y), Math.abs(y - height)) / Math.min(Math.abs(x), Math.abs(x - width));\n                const [cx, cy] = findCorner(width, height, x, y, true);\n                rx = distance(cx - x, (cy - y) / c);\n                ry = c * rx;\n            }\n            break;\n        case CSSRadialExtent.FARTHEST_SIDE:\n            // Same as closest-side, except the ending shape is sized based on the farthest side(s)\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.max(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));\n            }\n            else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                rx = Math.max(Math.abs(x), Math.abs(x - width));\n                ry = Math.max(Math.abs(y), Math.abs(y - height));\n            }\n            break;\n        case CSSRadialExtent.FARTHEST_CORNER:\n            // Same as closest-corner, except the ending shape is sized based on the farthest corner.\n            // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.max(distance(x, y), distance(x, y - height), distance(x - width, y), distance(x - width, y - height));\n            }\n            else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                // Compute the ratio ry/rx (which is to be the same as for \"farthest-side\")\n                const c = Math.max(Math.abs(y), Math.abs(y - height)) / Math.max(Math.abs(x), Math.abs(x - width));\n                const [cx, cy] = findCorner(width, height, x, y, false);\n                rx = distance(cx - x, (cy - y) / c);\n                ry = c * rx;\n            }\n            break;\n    }\n    if (Array.isArray(gradient.size)) {\n        rx = getAbsoluteValue(gradient.size[0], width);\n        ry = gradient.size.length === 2 ? getAbsoluteValue(gradient.size[1], height) : rx;\n    }\n    return [rx, ry];\n};\n","import { parseFunctionArgs } from '../../syntax/parser';\nimport { TokenType } from '../../syntax/tokenizer';\nimport { isAngle, angle as angleType, parseNamedSide, deg } from '../angle';\nimport { CSSImageType } from '../image';\nimport { parseColorStop } from './gradient';\nexport const linearGradient = (tokens) => {\n    let angle = deg(180);\n    const stops = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        if (i === 0) {\n            const firstToken = arg[0];\n            if (firstToken.type === TokenType.IDENT_TOKEN && firstToken.value === 'to') {\n                angle = parseNamedSide(arg);\n                return;\n            }\n            else if (isAngle(firstToken)) {\n                angle = angleType.parse(firstToken);\n                return;\n            }\n        }\n        const colorStop = parseColorStop(arg);\n        stops.push(colorStop);\n    });\n    return { angle, stops, type: CSSImageType.LINEAR_GRADIENT };\n};\n","import { isIdentToken, parseFunctionArgs } from '../../syntax/parser';\nimport { CSSImageType, CSSRadialExtent, CSSRadialShape } from '../image';\nimport { parseColorStop } from './gradient';\nimport { FIFTY_PERCENT, HUNDRED_PERCENT, isLengthPercentage, ZERO_LENGTH } from '../length-percentage';\nimport { isLength } from '../length';\nexport const CLOSEST_SIDE = 'closest-side';\nexport const FARTHEST_SIDE = 'farthest-side';\nexport const CLOSEST_CORNER = 'closest-corner';\nexport const FARTHEST_CORNER = 'farthest-corner';\nexport const CIRCLE = 'circle';\nexport const ELLIPSE = 'ellipse';\nexport const COVER = 'cover';\nexport const CONTAIN = 'contain';\nexport const radialGradient = (tokens) => {\n    let shape = CSSRadialShape.CIRCLE;\n    let size = CSSRadialExtent.FARTHEST_CORNER;\n    const stops = [];\n    const position = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        let isColorStop = true;\n        if (i === 0) {\n            let isAtPosition = false;\n            isColorStop = arg.reduce((acc, token) => {\n                if (isAtPosition) {\n                    if (isIdentToken(token)) {\n                        switch (token.value) {\n                            case 'center':\n                                position.push(FIFTY_PERCENT);\n                                return acc;\n                            case 'top':\n                            case 'left':\n                                position.push(ZERO_LENGTH);\n                                return acc;\n                            case 'right':\n                            case 'bottom':\n                                position.push(HUNDRED_PERCENT);\n                                return acc;\n                        }\n                    }\n                    else if (isLengthPercentage(token) || isLength(token)) {\n                        position.push(token);\n                    }\n                }\n                else if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case CIRCLE:\n                            shape = CSSRadialShape.CIRCLE;\n                            return false;\n                        case ELLIPSE:\n                            shape = CSSRadialShape.ELLIPSE;\n                            return false;\n                        case 'at':\n                            isAtPosition = true;\n                            return false;\n                        case CLOSEST_SIDE:\n                            size = CSSRadialExtent.CLOSEST_SIDE;\n                            return false;\n                        case COVER:\n                        case FARTHEST_SIDE:\n                            size = CSSRadialExtent.FARTHEST_SIDE;\n                            return false;\n                        case CONTAIN:\n                        case CLOSEST_CORNER:\n                            size = CSSRadialExtent.CLOSEST_CORNER;\n                            return false;\n                        case FARTHEST_CORNER:\n                            size = CSSRadialExtent.FARTHEST_CORNER;\n                            return false;\n                    }\n                }\n                else if (isLength(token) || isLengthPercentage(token)) {\n                    if (!Array.isArray(size)) {\n                        size = [];\n                    }\n                    size.push(token);\n                    return false;\n                }\n                return acc;\n            }, isColorStop);\n        }\n        if (isColorStop) {\n            const colorStop = parseColorStop(arg);\n            stops.push(colorStop);\n        }\n    });\n    return { size, shape, stops, position, type: CSSImageType.RADIAL_GRADIENT };\n};\n","import { TokenType } from '../syntax/tokenizer';\nimport { linearGradient } from './functions/linear-gradient';\nimport { prefixLinearGradient } from './functions/-prefix-linear-gradient';\nimport { CacheStorage } from '../../core/cache-storage';\nimport { webkitGradient } from './functions/-webkit-gradient';\nimport { radialGradient } from './functions/radial-gradient';\nimport { prefixRadialGradient } from './functions/-prefix-radial-gradient';\nexport var CSSImageType;\n(function (CSSImageType) {\n    CSSImageType[CSSImageType[\"URL\"] = 0] = \"URL\";\n    CSSImageType[CSSImageType[\"LINEAR_GRADIENT\"] = 1] = \"LINEAR_GRADIENT\";\n    CSSImageType[CSSImageType[\"RADIAL_GRADIENT\"] = 2] = \"RADIAL_GRADIENT\";\n})(CSSImageType || (CSSImageType = {}));\nexport const isLinearGradient = (background) => {\n    return background.type === CSSImageType.LINEAR_GRADIENT;\n};\nexport const isRadialGradient = (background) => {\n    return background.type === CSSImageType.RADIAL_GRADIENT;\n};\nexport var CSSRadialShape;\n(function (CSSRadialShape) {\n    CSSRadialShape[CSSRadialShape[\"CIRCLE\"] = 0] = \"CIRCLE\";\n    CSSRadialShape[CSSRadialShape[\"ELLIPSE\"] = 1] = \"ELLIPSE\";\n})(CSSRadialShape || (CSSRadialShape = {}));\nexport var CSSRadialExtent;\n(function (CSSRadialExtent) {\n    CSSRadialExtent[CSSRadialExtent[\"CLOSEST_SIDE\"] = 0] = \"CLOSEST_SIDE\";\n    CSSRadialExtent[CSSRadialExtent[\"FARTHEST_SIDE\"] = 1] = \"FARTHEST_SIDE\";\n    CSSRadialExtent[CSSRadialExtent[\"CLOSEST_CORNER\"] = 2] = \"CLOSEST_CORNER\";\n    CSSRadialExtent[CSSRadialExtent[\"FARTHEST_CORNER\"] = 3] = \"FARTHEST_CORNER\";\n})(CSSRadialExtent || (CSSRadialExtent = {}));\nexport const image = {\n    name: 'image',\n    parse: (value) => {\n        if (value.type === TokenType.URL_TOKEN) {\n            const image = { url: value.value, type: CSSImageType.URL };\n            CacheStorage.getInstance().addImage(value.value);\n            return image;\n        }\n        if (value.type === TokenType.FUNCTION) {\n            const imageFunction = SUPPORTED_IMAGE_FUNCTIONS[value.name];\n            if (typeof imageFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported image function \"${value.name}\"`);\n            }\n            return imageFunction(value.values);\n        }\n        throw new Error(`Unsupported image type`);\n    }\n};\nexport function isSupportedImage(value) {\n    return value.type !== TokenType.FUNCTION || SUPPORTED_IMAGE_FUNCTIONS[value.name];\n}\nconst SUPPORTED_IMAGE_FUNCTIONS = {\n    'linear-gradient': linearGradient,\n    '-moz-linear-gradient': prefixLinearGradient,\n    '-ms-linear-gradient': prefixLinearGradient,\n    '-o-linear-gradient': prefixLinearGradient,\n    '-webkit-linear-gradient': prefixLinearGradient,\n    'radial-gradient': radialGradient,\n    '-moz-radial-gradient': prefixRadialGradient,\n    '-ms-radial-gradient': prefixRadialGradient,\n    '-o-radial-gradient': prefixRadialGradient,\n    '-webkit-radial-gradient': prefixRadialGradient,\n    '-webkit-gradient': webkitGradient\n};\n","import { FLAG_INTEGER, TokenType } from '../syntax/tokenizer';\nimport { isDimensionToken } from '../syntax/parser';\nimport { isLength } from './length';\nexport const isLengthPercentage = (token) => token.type === TokenType.PERCENTAGE_TOKEN || isLength(token);\nexport const parseLengthPercentageTuple = (tokens) => tokens.length > 1 ? [tokens[0], tokens[1]] : [tokens[0]];\nexport const ZERO_LENGTH = {\n    type: TokenType.NUMBER_TOKEN,\n    number: 0,\n    flags: FLAG_INTEGER\n};\nexport const FIFTY_PERCENT = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 50,\n    flags: FLAG_INTEGER\n};\nexport const HUNDRED_PERCENT = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 100,\n    flags: FLAG_INTEGER\n};\nexport const getAbsoluteValueForTuple = (tuple, width, height) => {\n    let [x, y] = tuple;\n    return [getAbsoluteValue(x, width), getAbsoluteValue(typeof y !== 'undefined' ? y : x, height)];\n};\nexport const getAbsoluteValue = (token, parent) => {\n    if (token.type === TokenType.PERCENTAGE_TOKEN) {\n        return (token.number / 100) * parent;\n    }\n    if (isDimensionToken(token)) {\n        switch (token.unit) {\n            case 'rem':\n            case 'em':\n                return 16 * token.number; // TODO use correct font-size\n            case 'px':\n            default:\n                return token.number;\n        }\n    }\n    return token.number;\n};\n","import { TokenType } from '../syntax/tokenizer';\nexport const isLength = (token) => token.type === TokenType.NUMBER_TOKEN || token.type === TokenType.DIMENSION_TOKEN;\n","import { isBodyElement, isCanvasElement, isElementNode, isHTMLElementNode, isIFrameElement, isImageElement, isScriptElement, isSelectElement, isStyleElement, isSVGElementNode, isTextareaElement, isTextNode } from './node-parser';\nimport { Logger } from '../core/logger';\nimport { isIdentToken, nonFunctionArgSeparator } from '../css/syntax/parser';\nimport { TokenType } from '../css/syntax/tokenizer';\nimport { CounterState, createCounterText } from '../css/types/functions/counter';\nimport { LIST_STYLE_TYPE, listStyleType } from '../css/property-descriptors/list-style-type';\nimport { CSSParsedCounterDeclaration, CSSParsedPseudoDeclaration } from '../css/index';\nimport { getQuote } from '../css/property-descriptors/quotes';\nconst IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\nexport class DocumentCloner {\n    constructor(element, options) {\n        this.options = options;\n        this.scrolledElements = [];\n        this.referenceElement = element;\n        this.counters = new CounterState();\n        this.quoteDepth = 0;\n        if (!element.ownerDocument) {\n            throw new Error('Cloned element does not have an owner document');\n        }\n        this.documentElement = this.cloneNode(element.ownerDocument.documentElement);\n    }\n    toIFrame(ownerDocument, windowSize) {\n        const iframe = createIFrameContainer(ownerDocument, windowSize);\n        if (!iframe.contentWindow) {\n            return Promise.reject(`Unable to find iframe window`);\n        }\n        const scrollX = ownerDocument.defaultView.pageXOffset;\n        const scrollY = ownerDocument.defaultView.pageYOffset;\n        const cloneWindow = iframe.contentWindow;\n        const documentClone = cloneWindow.document;\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n        const iframeLoad = iframeLoader(iframe).then(async () => {\n            this.scrolledElements.forEach(restoreNodeScroll);\n            if (cloneWindow) {\n                cloneWindow.scrollTo(windowSize.left, windowSize.top);\n                if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) &&\n                    (cloneWindow.scrollY !== windowSize.top || cloneWindow.scrollX !== windowSize.left)) {\n                    documentClone.documentElement.style.top = -windowSize.top + 'px';\n                    documentClone.documentElement.style.left = -windowSize.left + 'px';\n                    documentClone.documentElement.style.position = 'absolute';\n                }\n            }\n            const onclone = this.options.onclone;\n            if (typeof this.clonedReferenceElement === 'undefined') {\n                return Promise.reject(`Error finding the ${this.referenceElement.nodeName} in the cloned document`);\n            }\n            if (documentClone.fonts && documentClone.fonts.ready) {\n                await documentClone.fonts.ready;\n            }\n            if (typeof onclone === 'function') {\n                return Promise.resolve()\n                    .then(() => onclone(documentClone))\n                    .then(() => iframe);\n            }\n            return iframe;\n        });\n        documentClone.open();\n        documentClone.write(`${serializeDoctype(document.doctype)}<html></html>`);\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(this.referenceElement.ownerDocument, scrollX, scrollY);\n        documentClone.replaceChild(documentClone.adoptNode(this.documentElement), documentClone.documentElement);\n        documentClone.close();\n        return iframeLoad;\n    }\n    createElementClone(node) {\n        if (isCanvasElement(node)) {\n            return this.createCanvasClone(node);\n        }\n        /*\n        if (isIFrameElement(node)) {\n            return this.createIFrameClone(node);\n        }\n*/\n        if (isStyleElement(node)) {\n            return this.createStyleClone(node);\n        }\n        const clone = node.cloneNode(false);\n        // @ts-ignore\n        if (isImageElement(clone) && clone.loading === 'lazy') {\n            // @ts-ignore\n            clone.loading = 'eager';\n        }\n        return clone;\n    }\n    createStyleClone(node) {\n        try {\n            const sheet = node.sheet;\n            if (sheet && sheet.cssRules) {\n                const css = [].slice.call(sheet.cssRules, 0).reduce((css, rule) => {\n                    if (rule && typeof rule.cssText === 'string') {\n                        return css + rule.cssText;\n                    }\n                    return css;\n                }, '');\n                const style = node.cloneNode(false);\n                style.textContent = css;\n                return style;\n            }\n        }\n        catch (e) {\n            // accessing node.sheet.cssRules throws a DOMException\n            Logger.getInstance(this.options.id).error('Unable to access cssRules property', e);\n            if (e.name !== 'SecurityError') {\n                throw e;\n            }\n        }\n        return node.cloneNode(false);\n    }\n    createCanvasClone(canvas) {\n        if (this.options.inlineImages && canvas.ownerDocument) {\n            const img = canvas.ownerDocument.createElement('img');\n            try {\n                img.src = canvas.toDataURL();\n                return img;\n            }\n            catch (e) {\n                Logger.getInstance(this.options.id).info(`Unable to clone canvas contents, canvas is tainted`);\n            }\n        }\n        const clonedCanvas = canvas.cloneNode(false);\n        try {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            const ctx = canvas.getContext('2d');\n            const clonedCtx = clonedCanvas.getContext('2d');\n            if (clonedCtx) {\n                if (ctx) {\n                    clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n                }\n                else {\n                    clonedCtx.drawImage(canvas, 0, 0);\n                }\n            }\n            return clonedCanvas;\n        }\n        catch (e) { }\n        return clonedCanvas;\n    }\n    /*\n    createIFrameClone(iframe: HTMLIFrameElement) {\n        const tempIframe = <HTMLIFrameElement>iframe.cloneNode(false);\n        const iframeKey = generateIframeKey();\n        tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);\n\n        const {width, height} = parseBounds(iframe);\n\n        this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(iframe, this.options)\n            .then(documentElement => {\n                return this.renderer(\n                    documentElement,\n                    {\n                        allowTaint: this.options.allowTaint,\n                        backgroundColor: '#ffffff',\n                        canvas: null,\n                        imageTimeout: this.options.imageTimeout,\n                        logging: this.options.logging,\n                        proxy: this.options.proxy,\n                        removeContainer: this.options.removeContainer,\n                        scale: this.options.scale,\n                        foreignObjectRendering: this.options.foreignObjectRendering,\n                        useCORS: this.options.useCORS,\n                        target: new CanvasRenderer(),\n                        width,\n                        height,\n                        x: 0,\n                        y: 0,\n                        windowWidth: documentElement.ownerDocument.defaultView.innerWidth,\n                        windowHeight: documentElement.ownerDocument.defaultView.innerHeight,\n                        scrollX: documentElement.ownerDocument.defaultView.pageXOffset,\n                        scrollY: documentElement.ownerDocument.defaultView.pageYOffset\n                    },\n                );\n            })\n            .then(\n                (canvas: HTMLCanvasElement) =>\n                    new Promise((resolve, reject) => {\n                        const iframeCanvas = document.createElement('img');\n                        iframeCanvas.onload = () => resolve(canvas);\n                        iframeCanvas.onerror = (event) => {\n                            // Empty iframes may result in empty \"data:,\" URLs, which are invalid from the <img>'s point of view\n                            // and instead of `onload` cause `onerror` and unhandled rejection warnings\n                            // https://github.com/niklasvh/html2canvas/issues/1502\n                            iframeCanvas.src == 'data:,' ? resolve(canvas) : reject(event);\n                        };\n                        iframeCanvas.src = canvas.toDataURL();\n                        if (tempIframe.parentNode && iframe.ownerDocument && iframe.ownerDocument.defaultView) {\n                            tempIframe.parentNode.replaceChild(\n                                copyCSSStyles(\n                                    iframe.ownerDocument.defaultView.getComputedStyle(iframe),\n                                    iframeCanvas\n                                ),\n                                tempIframe\n                            );\n                        }\n                    })\n            );\n        return tempIframe;\n    }\n*/\n    cloneNode(node) {\n        if (isTextNode(node)) {\n            return document.createTextNode(node.data);\n        }\n        if (!node.ownerDocument) {\n            return node.cloneNode(false);\n        }\n        const window = node.ownerDocument.defaultView;\n        if (window && isElementNode(node) && (isHTMLElementNode(node) || isSVGElementNode(node))) {\n            const clone = this.createElementClone(node);\n            const style = window.getComputedStyle(node);\n            const styleBefore = window.getComputedStyle(node, ':before');\n            const styleAfter = window.getComputedStyle(node, ':after');\n            if (this.referenceElement === node && isHTMLElementNode(clone)) {\n                this.clonedReferenceElement = clone;\n            }\n            if (isBodyElement(clone)) {\n                createPseudoHideStyles(clone);\n            }\n            const counters = this.counters.parse(new CSSParsedCounterDeclaration(style));\n            const before = this.resolvePseudoContent(node, clone, styleBefore, PseudoElementType.BEFORE);\n            for (let child = node.firstChild; child; child = child.nextSibling) {\n                if (!isElementNode(child) ||\n                    (!isScriptElement(child) &&\n                        !child.hasAttribute(IGNORE_ATTRIBUTE) &&\n                        (typeof this.options.ignoreElements !== 'function' || !this.options.ignoreElements(child)))) {\n                    if (!this.options.copyStyles || !isElementNode(child) || !isStyleElement(child)) {\n                        clone.appendChild(this.cloneNode(child));\n                    }\n                }\n            }\n            if (before) {\n                clone.insertBefore(before, clone.firstChild);\n            }\n            const after = this.resolvePseudoContent(node, clone, styleAfter, PseudoElementType.AFTER);\n            if (after) {\n                clone.appendChild(after);\n            }\n            this.counters.pop(counters);\n            if (style && (this.options.copyStyles || isSVGElementNode(node)) && !isIFrameElement(node)) {\n                copyCSSStyles(style, clone);\n            }\n            //this.inlineAllImages(clone);\n            if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n                this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n            }\n            if ((isTextareaElement(node) || isSelectElement(node)) &&\n                (isTextareaElement(clone) || isSelectElement(clone))) {\n                clone.value = node.value;\n            }\n            return clone;\n        }\n        return node.cloneNode(false);\n    }\n    resolvePseudoContent(node, clone, style, pseudoElt) {\n        if (!style) {\n            return;\n        }\n        const value = style.content;\n        const document = clone.ownerDocument;\n        if (!document || !value || value === 'none' || value === '-moz-alt-content' || style.display === 'none') {\n            return;\n        }\n        this.counters.parse(new CSSParsedCounterDeclaration(style));\n        const declaration = new CSSParsedPseudoDeclaration(style);\n        const anonymousReplacedElement = document.createElement('html2canvaspseudoelement');\n        copyCSSStyles(style, anonymousReplacedElement);\n        declaration.content.forEach(token => {\n            if (token.type === TokenType.STRING_TOKEN) {\n                anonymousReplacedElement.appendChild(document.createTextNode(token.value));\n            }\n            else if (token.type === TokenType.URL_TOKEN) {\n                const img = document.createElement('img');\n                img.src = token.value;\n                img.style.opacity = '1';\n                anonymousReplacedElement.appendChild(img);\n            }\n            else if (token.type === TokenType.FUNCTION) {\n                if (token.name === 'attr') {\n                    const attr = token.values.filter(isIdentToken);\n                    if (attr.length) {\n                        anonymousReplacedElement.appendChild(document.createTextNode(node.getAttribute(attr[0].value) || ''));\n                    }\n                }\n                else if (token.name === 'counter') {\n                    const [counter, counterStyle] = token.values.filter(nonFunctionArgSeparator);\n                    if (counter && isIdentToken(counter)) {\n                        const counterState = this.counters.getCounterValue(counter.value);\n                        const counterType = counterStyle && isIdentToken(counterStyle)\n                            ? listStyleType.parse(counterStyle.value)\n                            : LIST_STYLE_TYPE.DECIMAL;\n                        anonymousReplacedElement.appendChild(document.createTextNode(createCounterText(counterState, counterType, false)));\n                    }\n                }\n                else if (token.name === 'counters') {\n                    const [counter, delim, counterStyle] = token.values.filter(nonFunctionArgSeparator);\n                    if (counter && isIdentToken(counter)) {\n                        const counterStates = this.counters.getCounterValues(counter.value);\n                        const counterType = counterStyle && isIdentToken(counterStyle)\n                            ? listStyleType.parse(counterStyle.value)\n                            : LIST_STYLE_TYPE.DECIMAL;\n                        const separator = delim && delim.type === TokenType.STRING_TOKEN ? delim.value : '';\n                        const text = counterStates\n                            .map(value => createCounterText(value, counterType, false))\n                            .join(separator);\n                        anonymousReplacedElement.appendChild(document.createTextNode(text));\n                    }\n                }\n                else {\n                    //   console.log('FUNCTION_TOKEN', token);\n                }\n            }\n            else if (token.type === TokenType.IDENT_TOKEN) {\n                switch (token.value) {\n                    case 'open-quote':\n                        anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes, this.quoteDepth++, true)));\n                        break;\n                    case 'close-quote':\n                        anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes, --this.quoteDepth, false)));\n                        break;\n                    default:\n                        // safari doesn't parse string tokens correctly because of lack of quotes\n                        anonymousReplacedElement.appendChild(document.createTextNode(token.value));\n                }\n            }\n        });\n        anonymousReplacedElement.className = `${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE} ${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}`;\n        const newClassName = pseudoElt === PseudoElementType.BEFORE\n            ? ` ${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE}`\n            : ` ${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}`;\n        if (isSVGElementNode(clone)) {\n            clone.className.baseValue += newClassName;\n        }\n        else {\n            clone.className += newClassName;\n        }\n        return anonymousReplacedElement;\n    }\n    static destroy(container) {\n        if (container.parentNode) {\n            container.parentNode.removeChild(container);\n            return true;\n        }\n        return false;\n    }\n}\nvar PseudoElementType;\n(function (PseudoElementType) {\n    PseudoElementType[PseudoElementType[\"BEFORE\"] = 0] = \"BEFORE\";\n    PseudoElementType[PseudoElementType[\"AFTER\"] = 1] = \"AFTER\";\n})(PseudoElementType || (PseudoElementType = {}));\nconst createIFrameContainer = (ownerDocument, bounds) => {\n    const cloneIframeContainer = ownerDocument.createElement('iframe');\n    cloneIframeContainer.className = 'html2canvas-container';\n    cloneIframeContainer.style.visibility = 'hidden';\n    cloneIframeContainer.style.position = 'fixed';\n    cloneIframeContainer.style.left = '-10000px';\n    cloneIframeContainer.style.top = '0px';\n    cloneIframeContainer.style.border = '0';\n    cloneIframeContainer.width = bounds.width.toString();\n    cloneIframeContainer.height = bounds.height.toString();\n    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\n    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\n    ownerDocument.body.appendChild(cloneIframeContainer);\n    return cloneIframeContainer;\n};\nconst iframeLoader = (iframe) => {\n    return new Promise((resolve, reject) => {\n        const cloneWindow = iframe.contentWindow;\n        if (!cloneWindow) {\n            return reject(`No window assigned for iframe`);\n        }\n        const documentClone = cloneWindow.document;\n        cloneWindow.onload = iframe.onload = documentClone.onreadystatechange = () => {\n            cloneWindow.onload = iframe.onload = documentClone.onreadystatechange = null;\n            const interval = setInterval(() => {\n                if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\n                    clearInterval(interval);\n                    resolve(iframe);\n                }\n            }, 50);\n        };\n    });\n};\nexport const copyCSSStyles = (style, target) => {\n    // Edge does not provide value for cssText\n    for (let i = style.length - 1; i >= 0; i--) {\n        const property = style.item(i);\n        // Safari shows pseudoelements if content is set\n        if (property !== 'content') {\n            target.style.setProperty(property, style.getPropertyValue(property));\n        }\n    }\n    return target;\n};\nconst serializeDoctype = (doctype) => {\n    let str = '';\n    if (doctype) {\n        str += '<!DOCTYPE ';\n        if (doctype.name) {\n            str += doctype.name;\n        }\n        if (doctype.internalSubset) {\n            str += doctype.internalSubset;\n        }\n        if (doctype.publicId) {\n            str += `\"${doctype.publicId}\"`;\n        }\n        if (doctype.systemId) {\n            str += `\"${doctype.systemId}\"`;\n        }\n        str += '>';\n    }\n    return str;\n};\nconst restoreOwnerScroll = (ownerDocument, x, y) => {\n    if (ownerDocument &&\n        ownerDocument.defaultView &&\n        (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n};\nconst restoreNodeScroll = ([element, x, y]) => {\n    element.scrollLeft = x;\n    element.scrollTop = y;\n};\nconst PSEUDO_BEFORE = ':before';\nconst PSEUDO_AFTER = ':after';\nconst PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\nconst PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\nconst PSEUDO_HIDE_ELEMENT_STYLE = `{\n    content: \"\" !important;\n    display: none !important;\n}`;\nconst createPseudoHideStyles = (body) => {\n    createStyles(body, `.${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE}${PSEUDO_BEFORE}${PSEUDO_HIDE_ELEMENT_STYLE}\n         .${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}${PSEUDO_AFTER}${PSEUDO_HIDE_ELEMENT_STYLE}`);\n};\nconst createStyles = (body, styles) => {\n    const document = body.ownerDocument;\n    if (document) {\n        const style = document.createElement('style');\n        style.textContent = styles;\n        body.appendChild(style);\n    }\n};\n","import { CSSParsedDeclaration } from '../css/index';\nimport { parseBounds } from '../css/layout/bounds';\nimport { isHTMLElementNode } from './node-parser';\nexport class ElementContainer {\n    constructor(element) {\n        this.styles = new CSSParsedDeclaration(window.getComputedStyle(element, null));\n        this.textNodes = [];\n        this.elements = [];\n        if (this.styles.transform !== null && isHTMLElementNode(element)) {\n            // getBoundingClientRect takes transforms into account\n            element.style.transform = 'none';\n        }\n        this.bounds = parseBounds(element);\n        this.flags = 0;\n    }\n}\n","import { ElementContainer } from '../element-container';\nexport class LIElementContainer extends ElementContainer {\n    constructor(element) {\n        super(element);\n        this.value = element.value;\n    }\n}\n","import { ElementContainer } from '../element-container';\nexport class OLElementContainer extends ElementContainer {\n    constructor(element) {\n        super(element);\n        this.start = element.start;\n        this.reversed = typeof element.reversed === 'boolean' && element.reversed === true;\n    }\n}\n","import { ElementContainer } from '../element-container';\nexport class SelectElementContainer extends ElementContainer {\n    constructor(element) {\n        super(element);\n        const option = element.options[element.selectedIndex || 0];\n        this.value = option ? option.text || '' : '';\n    }\n}\n","import { ElementContainer } from '../element-container';\nexport class TextareaElementContainer extends ElementContainer {\n    constructor(element) {\n        super(element);\n        this.value = element.value;\n    }\n}\n","import { ElementContainer } from './element-container';\nimport { TextContainer } from './text-container';\nimport { ImageElementContainer } from './replaced-elements/image-element-container';\nimport { CanvasElementContainer } from './replaced-elements/canvas-element-container';\nimport { SVGElementContainer } from './replaced-elements/svg-element-container';\nimport { LIElementContainer } from './elements/li-element-container';\nimport { OLElementContainer } from './elements/ol-element-container';\nimport { InputElementContainer } from './replaced-elements/input-element-container';\nimport { SelectElementContainer } from './elements/select-element-container';\nimport { TextareaElementContainer } from './elements/textarea-element-container';\nimport { IFrameElementContainer } from './replaced-elements/iframe-element-container';\nconst LIST_OWNERS = ['OL', 'UL', 'MENU'];\nconst parseNodeTree = (node, parent, root) => {\n    for (let childNode = node.firstChild, nextNode; childNode; childNode = nextNode) {\n        nextNode = childNode.nextSibling;\n        if (isTextNode(childNode) && childNode.data.trim().length > 0) {\n            parent.textNodes.push(new TextContainer(childNode, parent.styles));\n        }\n        else if (isElementNode(childNode)) {\n            const container = createContainer(childNode);\n            if (container.styles.isVisible()) {\n                if (createsRealStackingContext(childNode, container, root)) {\n                    container.flags |= 4 /* CREATES_REAL_STACKING_CONTEXT */;\n                }\n                else if (createsStackingContext(container.styles)) {\n                    container.flags |= 2 /* CREATES_STACKING_CONTEXT */;\n                }\n                if (LIST_OWNERS.indexOf(childNode.tagName) !== -1) {\n                    container.flags |= 8 /* IS_LIST_OWNER */;\n                }\n                parent.elements.push(container);\n                if (!isTextareaElement(childNode) && !isSVGElement(childNode) && !isSelectElement(childNode)) {\n                    parseNodeTree(childNode, container, root);\n                }\n            }\n        }\n    }\n};\nconst createContainer = (element) => {\n    if (isImageElement(element)) {\n        return new ImageElementContainer(element);\n    }\n    if (isCanvasElement(element)) {\n        return new CanvasElementContainer(element);\n    }\n    if (isSVGElement(element)) {\n        return new SVGElementContainer(element);\n    }\n    if (isLIElement(element)) {\n        return new LIElementContainer(element);\n    }\n    if (isOLElement(element)) {\n        return new OLElementContainer(element);\n    }\n    if (isInputElement(element)) {\n        return new InputElementContainer(element);\n    }\n    if (isSelectElement(element)) {\n        return new SelectElementContainer(element);\n    }\n    if (isTextareaElement(element)) {\n        return new TextareaElementContainer(element);\n    }\n    if (isIFrameElement(element)) {\n        return new IFrameElementContainer(element);\n    }\n    return new ElementContainer(element);\n};\nexport const parseTree = (element) => {\n    const container = createContainer(element);\n    container.flags |= 4 /* CREATES_REAL_STACKING_CONTEXT */;\n    parseNodeTree(element, container, container);\n    return container;\n};\nconst createsRealStackingContext = (node, container, root) => {\n    return (container.styles.isPositionedWithZIndex() ||\n        container.styles.opacity < 1 ||\n        container.styles.isTransformed() ||\n        (isBodyElement(node) && root.styles.isTransparent()));\n};\nconst createsStackingContext = (styles) => styles.isPositioned() || styles.isFloating();\nexport const isTextNode = (node) => node.nodeType === Node.TEXT_NODE;\nexport const isElementNode = (node) => node.nodeType === Node.ELEMENT_NODE;\nexport const isHTMLElementNode = (node) => isElementNode(node) && typeof node.style !== 'undefined' && !isSVGElementNode(node);\nexport const isSVGElementNode = (element) => typeof element.className === 'object';\nexport const isLIElement = (node) => node.tagName === 'LI';\nexport const isOLElement = (node) => node.tagName === 'OL';\nexport const isInputElement = (node) => node.tagName === 'INPUT';\nexport const isHTMLElement = (node) => node.tagName === 'HTML';\nexport const isSVGElement = (node) => node.tagName === 'svg';\nexport const isBodyElement = (node) => node.tagName === 'BODY';\nexport const isCanvasElement = (node) => node.tagName === 'CANVAS';\nexport const isImageElement = (node) => node.tagName === 'IMG';\nexport const isIFrameElement = (node) => node.tagName === 'IFRAME';\nexport const isStyleElement = (node) => node.tagName === 'STYLE';\nexport const isScriptElement = (node) => node.tagName === 'SCRIPT';\nexport const isTextareaElement = (node) => node.tagName === 'TEXTAREA';\nexport const isSelectElement = (node) => node.tagName === 'SELECT';\n","import { ElementContainer } from '../element-container';\nexport class CanvasElementContainer extends ElementContainer {\n    constructor(canvas) {\n        super(canvas);\n        this.canvas = canvas;\n        this.intrinsicWidth = canvas.width;\n        this.intrinsicHeight = canvas.height;\n    }\n}\n","import { ElementContainer } from '../element-container';\nimport { parseTree } from '../node-parser';\nimport { color, COLORS, isTransparent } from '../../css/types/color';\nimport { Parser } from '../../css/syntax/parser';\nconst parseColor = (value) => color.parse(Parser.create(value).parseComponentValue());\nexport class IFrameElementContainer extends ElementContainer {\n    constructor(iframe) {\n        super(iframe);\n        this.src = iframe.src;\n        this.width = parseInt(iframe.width, 10) || 0;\n        this.height = parseInt(iframe.height, 10) || 0;\n        this.backgroundColor = this.styles.backgroundColor;\n        try {\n            if (iframe.contentWindow &&\n                iframe.contentWindow.document &&\n                iframe.contentWindow.document.documentElement) {\n                this.tree = parseTree(iframe.contentWindow.document.documentElement);\n                // http://www.w3.org/TR/css3-background/#special-backgrounds\n                const documentBackgroundColor = iframe.contentWindow.document.documentElement\n                    ? parseColor(getComputedStyle(iframe.contentWindow.document.documentElement)\n                        .backgroundColor)\n                    : COLORS.TRANSPARENT;\n                const bodyBackgroundColor = iframe.contentWindow.document.body\n                    ? parseColor(getComputedStyle(iframe.contentWindow.document.body).backgroundColor)\n                    : COLORS.TRANSPARENT;\n                this.backgroundColor = isTransparent(documentBackgroundColor)\n                    ? isTransparent(bodyBackgroundColor)\n                        ? this.styles.backgroundColor\n                        : bodyBackgroundColor\n                    : documentBackgroundColor;\n            }\n        }\n        catch (e) { }\n    }\n}\n","import { ElementContainer } from '../element-container';\nimport { CacheStorage } from '../../core/cache-storage';\nexport class ImageElementContainer extends ElementContainer {\n    constructor(img) {\n        super(img);\n        this.src = img.currentSrc || img.src;\n        this.intrinsicWidth = img.naturalWidth;\n        this.intrinsicHeight = img.naturalHeight;\n        CacheStorage.getInstance().addImage(this.src);\n    }\n}\n","import { ElementContainer } from '../element-container';\nimport { BORDER_STYLE } from '../../css/property-descriptors/border-style';\nimport { BACKGROUND_CLIP } from '../../css/property-descriptors/background-clip';\nimport { TokenType } from '../../css/syntax/tokenizer';\nimport { Bounds } from '../../css/layout/bounds';\nconst CHECKBOX_BORDER_RADIUS = [\n    {\n        type: TokenType.DIMENSION_TOKEN,\n        flags: 0,\n        unit: 'px',\n        number: 3\n    }\n];\nconst RADIO_BORDER_RADIUS = [\n    {\n        type: TokenType.PERCENTAGE_TOKEN,\n        flags: 0,\n        number: 50\n    }\n];\nconst reformatInputBounds = (bounds) => {\n    if (bounds.width > bounds.height) {\n        return new Bounds(bounds.left + (bounds.width - bounds.height) / 2, bounds.top, bounds.height, bounds.height);\n    }\n    else if (bounds.width < bounds.height) {\n        return new Bounds(bounds.left, bounds.top + (bounds.height - bounds.width) / 2, bounds.width, bounds.width);\n    }\n    return bounds;\n};\nconst getInputValue = (node) => {\n    const value = node.type === PASSWORD ? new Array(node.value.length + 1).join('\\u2022') : node.value;\n    return value.length === 0 ? node.placeholder || '' : value;\n};\nexport const CHECKBOX = 'checkbox';\nexport const RADIO = 'radio';\nexport const PASSWORD = 'password';\nexport const INPUT_COLOR = 0x2a2a2aff;\nexport class InputElementContainer extends ElementContainer {\n    constructor(input) {\n        super(input);\n        this.type = input.type.toLowerCase();\n        this.checked = input.checked;\n        this.value = getInputValue(input);\n        if (this.type === CHECKBOX || this.type === RADIO) {\n            this.styles.backgroundColor = 0xdededeff;\n            this.styles.borderTopColor = this.styles.borderRightColor = this.styles.borderBottomColor = this.styles.borderLeftColor = 0xa5a5a5ff;\n            this.styles.borderTopWidth = this.styles.borderRightWidth = this.styles.borderBottomWidth = this.styles.borderLeftWidth = 1;\n            this.styles.borderTopStyle = this.styles.borderRightStyle = this.styles.borderBottomStyle = this.styles.borderLeftStyle =\n                BORDER_STYLE.SOLID;\n            this.styles.backgroundClip = [BACKGROUND_CLIP.BORDER_BOX];\n            this.styles.backgroundOrigin = [0 /* BORDER_BOX */];\n            this.bounds = reformatInputBounds(this.bounds);\n        }\n        switch (this.type) {\n            case CHECKBOX:\n                this.styles.borderTopRightRadius = this.styles.borderTopLeftRadius = this.styles.borderBottomRightRadius = this.styles.borderBottomLeftRadius = CHECKBOX_BORDER_RADIUS;\n                break;\n            case RADIO:\n                this.styles.borderTopRightRadius = this.styles.borderTopLeftRadius = this.styles.borderBottomRightRadius = this.styles.borderBottomLeftRadius = RADIO_BORDER_RADIUS;\n                break;\n        }\n    }\n}\n","import { ElementContainer } from '../element-container';\nimport { CacheStorage } from '../../core/cache-storage';\nexport class SVGElementContainer extends ElementContainer {\n    constructor(img) {\n        super(img);\n        const s = new XMLSerializer();\n        this.svg = `data:image/svg+xml,${encodeURIComponent(s.serializeToString(img))}`;\n        this.intrinsicWidth = img.width.baseVal.value;\n        this.intrinsicHeight = img.height.baseVal.value;\n        CacheStorage.getInstance().addImage(this.svg);\n    }\n}\n","import { TEXT_TRANSFORM } from '../css/property-descriptors/text-transform';\nimport { parseTextBounds } from '../css/layout/text';\nexport class TextContainer {\n    constructor(node, styles) {\n        this.text = transform(node.data, styles.textTransform);\n        this.textBounds = parseTextBounds(this.text, styles, node);\n    }\n}\nconst transform = (text, transform) => {\n    switch (transform) {\n        case TEXT_TRANSFORM.LOWERCASE:\n            return text.toLowerCase();\n        case TEXT_TRANSFORM.CAPITALIZE:\n            return text.replace(CAPITALIZE, capitalize);\n        case TEXT_TRANSFORM.UPPERCASE:\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\nconst CAPITALIZE = /(^|\\s|:|-|\\(|\\))([a-z])/g;\nconst capitalize = (m, p1, p2) => {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n    return m;\n};\n","import { Bounds, parseBounds, parseDocumentSize } from './css/layout/bounds';\nimport { color, COLORS, isTransparent } from './css/types/color';\nimport { Parser } from './css/syntax/parser';\nimport { DocumentCloner } from './dom/document-cloner';\nimport { isBodyElement, isHTMLElement, parseTree } from './dom/node-parser';\nimport { Logger } from './core/logger';\nimport { CacheStorage } from './core/cache-storage';\nimport { CanvasRenderer } from './render/canvas/canvas-renderer';\nimport { ForeignObjectRenderer } from './render/canvas/foreignobject-renderer';\nconst parseColor = (value) => color.parse(Parser.create(value).parseComponentValue());\nconst html2canvas = (element, options = {}) => {\n    return renderElement(element, options);\n};\nexport default html2canvas;\nif (typeof window !== 'undefined') {\n    CacheStorage.setContext(window);\n}\nconst renderElement = async (element, opts) => {\n    const ownerDocument = element.ownerDocument;\n    if (!ownerDocument) {\n        throw new Error(`Element is not attached to a Document`);\n    }\n    const defaultView = ownerDocument.defaultView;\n    if (!defaultView) {\n        throw new Error(`Document is not attached to a Window`);\n    }\n    const instanceName = (Math.round(Math.random() * 1000) + Date.now()).toString(16);\n    const { width, height, left, top } = isBodyElement(element) || isHTMLElement(element) ? parseDocumentSize(ownerDocument) : parseBounds(element);\n    const defaultResourceOptions = {\n        allowTaint: false,\n        imageTimeout: 15000,\n        proxy: undefined,\n        useCORS: false\n    };\n    const resourceOptions = { ...defaultResourceOptions, ...opts };\n    const defaultOptions = {\n        backgroundColor: '#ffffff',\n        cache: opts.cache ? opts.cache : CacheStorage.create(instanceName, resourceOptions),\n        logging: true,\n        removeContainer: true,\n        foreignObjectRendering: false,\n        scale: defaultView.devicePixelRatio || 1,\n        windowWidth: defaultView.innerWidth,\n        windowHeight: defaultView.innerHeight,\n        scrollX: defaultView.pageXOffset,\n        scrollY: defaultView.pageYOffset,\n        x: left,\n        y: top,\n        width: Math.ceil(width),\n        height: Math.ceil(height),\n        id: instanceName\n    };\n    const options = { ...defaultOptions, ...resourceOptions, ...opts };\n    const windowBounds = new Bounds(options.scrollX, options.scrollY, options.windowWidth, options.windowHeight);\n    Logger.create({ id: instanceName, enabled: options.logging });\n    Logger.getInstance(instanceName).debug(`Starting document clone`);\n    const documentCloner = new DocumentCloner(element, {\n        id: instanceName,\n        onclone: options.onclone,\n        ignoreElements: options.ignoreElements,\n        inlineImages: options.foreignObjectRendering,\n        copyStyles: options.foreignObjectRendering\n    });\n    const clonedElement = documentCloner.clonedReferenceElement;\n    if (!clonedElement) {\n        return Promise.reject(`Unable to find element in cloned iframe`);\n    }\n    const container = await documentCloner.toIFrame(ownerDocument, windowBounds);\n    // http://www.w3.org/TR/css3-background/#special-backgrounds\n    const documentBackgroundColor = ownerDocument.documentElement\n        ? parseColor(getComputedStyle(ownerDocument.documentElement).backgroundColor)\n        : COLORS.TRANSPARENT;\n    const bodyBackgroundColor = ownerDocument.body\n        ? parseColor(getComputedStyle(ownerDocument.body).backgroundColor)\n        : COLORS.TRANSPARENT;\n    const bgColor = opts.backgroundColor;\n    const defaultBackgroundColor = typeof bgColor === 'string' ? parseColor(bgColor) : bgColor === null ? COLORS.TRANSPARENT : 0xffffffff;\n    const backgroundColor = element === ownerDocument.documentElement\n        ? isTransparent(documentBackgroundColor)\n            ? isTransparent(bodyBackgroundColor)\n                ? defaultBackgroundColor\n                : bodyBackgroundColor\n            : documentBackgroundColor\n        : defaultBackgroundColor;\n    const renderOptions = {\n        id: instanceName,\n        cache: options.cache,\n        canvas: options.canvas,\n        backgroundColor,\n        scale: options.scale,\n        x: options.x,\n        y: options.y,\n        scrollX: options.scrollX,\n        scrollY: options.scrollY,\n        width: options.width,\n        height: options.height,\n        windowWidth: options.windowWidth,\n        windowHeight: options.windowHeight\n    };\n    let canvas;\n    if (options.foreignObjectRendering) {\n        Logger.getInstance(instanceName).debug(`Document cloned, using foreign object rendering`);\n        const renderer = new ForeignObjectRenderer(renderOptions);\n        canvas = await renderer.render(clonedElement);\n    }\n    else {\n        Logger.getInstance(instanceName).debug(`Document cloned, using computed rendering`);\n        CacheStorage.attachInstance(options.cache);\n        Logger.getInstance(instanceName).debug(`Starting DOM parsing`);\n        const root = parseTree(clonedElement);\n        CacheStorage.detachInstance();\n        if (backgroundColor === root.styles.backgroundColor) {\n            root.styles.backgroundColor = COLORS.TRANSPARENT;\n        }\n        Logger.getInstance(instanceName).debug(`Starting renderer`);\n        const renderer = new CanvasRenderer(renderOptions);\n        canvas = await renderer.render(root);\n    }\n    if (options.removeContainer === true) {\n        if (!DocumentCloner.destroy(container)) {\n            Logger.getInstance(instanceName).error(`Cannot detach cloned iframe as it is not in the DOM anymore`);\n        }\n    }\n    Logger.getInstance(instanceName).debug(`Finished rendering`);\n    Logger.destroy(instanceName);\n    CacheStorage.destroy(instanceName);\n    return canvas;\n};\n","import { BACKGROUND_SIZE } from '../css/property-descriptors/background-size';\nimport { Vector } from './vector';\nimport { BACKGROUND_REPEAT } from '../css/property-descriptors/background-repeat';\nimport { getAbsoluteValue, getAbsoluteValueForTuple, isLengthPercentage } from '../css/types/length-percentage';\nimport { isIdentToken } from '../css/syntax/parser';\nimport { contentBox, paddingBox } from './box-sizing';\nimport { BACKGROUND_CLIP } from '../css/property-descriptors/background-clip';\nexport const calculateBackgroundPositioningArea = (backgroundOrigin, element) => {\n    if (backgroundOrigin === 0 /* BORDER_BOX */) {\n        return element.bounds;\n    }\n    if (backgroundOrigin === 2 /* CONTENT_BOX */) {\n        return contentBox(element);\n    }\n    return paddingBox(element);\n};\nexport const calculateBackgroundPaintingArea = (backgroundClip, element) => {\n    if (backgroundClip === BACKGROUND_CLIP.BORDER_BOX) {\n        return element.bounds;\n    }\n    if (backgroundClip === BACKGROUND_CLIP.CONTENT_BOX) {\n        return contentBox(element);\n    }\n    return paddingBox(element);\n};\nexport const calculateBackgroundRendering = (container, index, intrinsicSize) => {\n    const backgroundPositioningArea = calculateBackgroundPositioningArea(getBackgroundValueForIndex(container.styles.backgroundOrigin, index), container);\n    const backgroundPaintingArea = calculateBackgroundPaintingArea(getBackgroundValueForIndex(container.styles.backgroundClip, index), container);\n    const backgroundImageSize = calculateBackgroundSize(getBackgroundValueForIndex(container.styles.backgroundSize, index), intrinsicSize, backgroundPositioningArea);\n    const [sizeWidth, sizeHeight] = backgroundImageSize;\n    const position = getAbsoluteValueForTuple(getBackgroundValueForIndex(container.styles.backgroundPosition, index), backgroundPositioningArea.width - sizeWidth, backgroundPositioningArea.height - sizeHeight);\n    const path = calculateBackgroundRepeatPath(getBackgroundValueForIndex(container.styles.backgroundRepeat, index), position, backgroundImageSize, backgroundPositioningArea, backgroundPaintingArea);\n    const offsetX = Math.round(backgroundPositioningArea.left + position[0]);\n    const offsetY = Math.round(backgroundPositioningArea.top + position[1]);\n    return [path, offsetX, offsetY, sizeWidth, sizeHeight];\n};\nexport const isAuto = (token) => isIdentToken(token) && token.value === BACKGROUND_SIZE.AUTO;\nconst hasIntrinsicValue = (value) => typeof value === 'number';\nexport const calculateBackgroundSize = (size, [intrinsicWidth, intrinsicHeight, intrinsicProportion], bounds) => {\n    const [first, second] = size;\n    if (isLengthPercentage(first) && second && isLengthPercentage(second)) {\n        return [getAbsoluteValue(first, bounds.width), getAbsoluteValue(second, bounds.height)];\n    }\n    const hasIntrinsicProportion = hasIntrinsicValue(intrinsicProportion);\n    if (isIdentToken(first) && (first.value === BACKGROUND_SIZE.CONTAIN || first.value === BACKGROUND_SIZE.COVER)) {\n        if (hasIntrinsicValue(intrinsicProportion)) {\n            const targetRatio = bounds.width / bounds.height;\n            return targetRatio < intrinsicProportion !== (first.value === BACKGROUND_SIZE.COVER)\n                ? [bounds.width, bounds.width / intrinsicProportion]\n                : [bounds.height * intrinsicProportion, bounds.height];\n        }\n        return [bounds.width, bounds.height];\n    }\n    const hasIntrinsicWidth = hasIntrinsicValue(intrinsicWidth);\n    const hasIntrinsicHeight = hasIntrinsicValue(intrinsicHeight);\n    const hasIntrinsicDimensions = hasIntrinsicWidth || hasIntrinsicHeight;\n    // If the background-size is auto or auto auto:\n    if (isAuto(first) && (!second || isAuto(second))) {\n        // If the image has both horizontal and vertical intrinsic dimensions, it's rendered at that size.\n        if (hasIntrinsicWidth && hasIntrinsicHeight) {\n            return [intrinsicWidth, intrinsicHeight];\n        }\n        // If the image has no intrinsic dimensions and has no intrinsic proportions,\n        // it's rendered at the size of the background positioning area.\n        if (!hasIntrinsicProportion && !hasIntrinsicDimensions) {\n            return [bounds.width, bounds.height];\n        }\n        // TODO If the image has no intrinsic dimensions but has intrinsic proportions, it's rendered as if contain had been specified instead.\n        // If the image has only one intrinsic dimension and has intrinsic proportions, it's rendered at the size corresponding to that one dimension.\n        // The other dimension is computed using the specified dimension and the intrinsic proportions.\n        if (hasIntrinsicDimensions && hasIntrinsicProportion) {\n            const width = hasIntrinsicWidth\n                ? intrinsicWidth\n                : intrinsicHeight * intrinsicProportion;\n            const height = hasIntrinsicHeight\n                ? intrinsicHeight\n                : intrinsicWidth / intrinsicProportion;\n            return [width, height];\n        }\n        // If the image has only one intrinsic dimension but has no intrinsic proportions,\n        // it's rendered using the specified dimension and the other dimension of the background positioning area.\n        const width = hasIntrinsicWidth ? intrinsicWidth : bounds.width;\n        const height = hasIntrinsicHeight ? intrinsicHeight : bounds.height;\n        return [width, height];\n    }\n    // If the image has intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the specified dimension and the intrinsic proportions.\n    if (hasIntrinsicProportion) {\n        let width = 0;\n        let height = 0;\n        if (isLengthPercentage(first)) {\n            width = getAbsoluteValue(first, bounds.width);\n        }\n        else if (isLengthPercentage(second)) {\n            height = getAbsoluteValue(second, bounds.height);\n        }\n        if (isAuto(first)) {\n            width = height * intrinsicProportion;\n        }\n        else if (!second || isAuto(second)) {\n            height = width / intrinsicProportion;\n        }\n        return [width, height];\n    }\n    // If the image has no intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the image's corresponding intrinsic dimension,\n    // if there is one. If there is no such intrinsic dimension,\n    // it becomes the corresponding dimension of the background positioning area.\n    let width = null;\n    let height = null;\n    if (isLengthPercentage(first)) {\n        width = getAbsoluteValue(first, bounds.width);\n    }\n    else if (second && isLengthPercentage(second)) {\n        height = getAbsoluteValue(second, bounds.height);\n    }\n    if (width !== null && (!second || isAuto(second))) {\n        height =\n            hasIntrinsicWidth && hasIntrinsicHeight\n                ? (width / intrinsicWidth) * intrinsicHeight\n                : bounds.height;\n    }\n    if (height !== null && isAuto(first)) {\n        width =\n            hasIntrinsicWidth && hasIntrinsicHeight\n                ? (height / intrinsicHeight) * intrinsicWidth\n                : bounds.width;\n    }\n    if (width !== null && height !== null) {\n        return [width, height];\n    }\n    throw new Error(`Unable to calculate background-size for element`);\n};\nexport const getBackgroundValueForIndex = (values, index) => {\n    const value = values[index];\n    if (typeof value === 'undefined') {\n        return values[0];\n    }\n    return value;\n};\nexport const calculateBackgroundRepeatPath = (repeat, [x, y], [width, height], backgroundPositioningArea, backgroundPaintingArea) => {\n    switch (repeat) {\n        case BACKGROUND_REPEAT.REPEAT_X:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width), Math.round(height + backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left), Math.round(height + backgroundPositioningArea.top + y))\n            ];\n        case BACKGROUND_REPEAT.REPEAT_Y:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top)),\n                new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top)),\n                new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top)),\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top))\n            ];\n        case BACKGROUND_REPEAT.NO_REPEAT:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top + y + height)),\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top + y + height))\n            ];\n        default:\n            return [\n                new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.top)),\n                new Vector(Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width), Math.round(backgroundPaintingArea.top)),\n                new Vector(Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width), Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top)),\n                new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top))\n            ];\n    }\n};\n","import { Vector } from './vector';\nimport { PathType } from './path';\nconst lerp = (a, b, t) => {\n    return new Vector(a.x + (b.x - a.x) * t, a.y + (b.y - a.y) * t);\n};\nexport class BezierCurve {\n    constructor(start, startControl, endControl, end) {\n        this.type = PathType.BEZIER_CURVE;\n        this.start = start;\n        this.startControl = startControl;\n        this.endControl = endControl;\n        this.end = end;\n    }\n    subdivide(t, firstHalf) {\n        const ab = lerp(this.start, this.startControl, t);\n        const bc = lerp(this.startControl, this.endControl, t);\n        const cd = lerp(this.endControl, this.end, t);\n        const abbc = lerp(ab, bc, t);\n        const bccd = lerp(bc, cd, t);\n        const dest = lerp(abbc, bccd, t);\n        return firstHalf ? new BezierCurve(this.start, ab, abbc, dest) : new BezierCurve(dest, bccd, cd, this.end);\n    }\n    add(deltaX, deltaY) {\n        return new BezierCurve(this.start.add(deltaX, deltaY), this.startControl.add(deltaX, deltaY), this.endControl.add(deltaX, deltaY), this.end.add(deltaX, deltaY));\n    }\n    reverse() {\n        return new BezierCurve(this.end, this.endControl, this.startControl, this.start);\n    }\n}\nexport const isBezierCurve = (path) => path.type === PathType.BEZIER_CURVE;\n","import { isBezierCurve } from './bezier-curve';\nexport const parsePathForBorder = (curves, borderSide) => {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(curves.topLeftBorderBox, curves.topLeftPaddingBox, curves.topRightBorderBox, curves.topRightPaddingBox);\n        case 1:\n            return createPathFromCurves(curves.topRightBorderBox, curves.topRightPaddingBox, curves.bottomRightBorderBox, curves.bottomRightPaddingBox);\n        case 2:\n            return createPathFromCurves(curves.bottomRightBorderBox, curves.bottomRightPaddingBox, curves.bottomLeftBorderBox, curves.bottomLeftPaddingBox);\n        case 3:\n        default:\n            return createPathFromCurves(curves.bottomLeftBorderBox, curves.bottomLeftPaddingBox, curves.topLeftBorderBox, curves.topLeftPaddingBox);\n    }\n};\nconst createPathFromCurves = (outer1, inner1, outer2, inner2) => {\n    const path = [];\n    if (isBezierCurve(outer1)) {\n        path.push(outer1.subdivide(0.5, false));\n    }\n    else {\n        path.push(outer1);\n    }\n    if (isBezierCurve(outer2)) {\n        path.push(outer2.subdivide(0.5, true));\n    }\n    else {\n        path.push(outer2);\n    }\n    if (isBezierCurve(inner2)) {\n        path.push(inner2.subdivide(0.5, true).reverse());\n    }\n    else {\n        path.push(inner2);\n    }\n    if (isBezierCurve(inner1)) {\n        path.push(inner1.subdivide(0.5, false).reverse());\n    }\n    else {\n        path.push(inner1);\n    }\n    return path;\n};\n","import { getAbsoluteValue, getAbsoluteValueForTuple } from '../css/types/length-percentage';\nimport { Vector } from './vector';\nimport { BezierCurve } from './bezier-curve';\nexport class BoundCurves {\n    constructor(element) {\n        const styles = element.styles;\n        const bounds = element.bounds;\n        let [tlh, tlv] = getAbsoluteValueForTuple(styles.borderTopLeftRadius, bounds.width, bounds.height);\n        let [trh, trv] = getAbsoluteValueForTuple(styles.borderTopRightRadius, bounds.width, bounds.height);\n        let [brh, brv] = getAbsoluteValueForTuple(styles.borderBottomRightRadius, bounds.width, bounds.height);\n        let [blh, blv] = getAbsoluteValueForTuple(styles.borderBottomLeftRadius, bounds.width, bounds.height);\n        const factors = [];\n        factors.push((tlh + trh) / bounds.width);\n        factors.push((blh + brh) / bounds.width);\n        factors.push((tlv + blv) / bounds.height);\n        factors.push((trv + brv) / bounds.height);\n        const maxFactor = Math.max(...factors);\n        if (maxFactor > 1) {\n            tlh /= maxFactor;\n            tlv /= maxFactor;\n            trh /= maxFactor;\n            trv /= maxFactor;\n            brh /= maxFactor;\n            brv /= maxFactor;\n            blh /= maxFactor;\n            blv /= maxFactor;\n        }\n        const topWidth = bounds.width - trh;\n        const rightHeight = bounds.height - brv;\n        const bottomWidth = bounds.width - brh;\n        const leftHeight = bounds.height - blv;\n        const borderTopWidth = styles.borderTopWidth;\n        const borderRightWidth = styles.borderRightWidth;\n        const borderBottomWidth = styles.borderBottomWidth;\n        const borderLeftWidth = styles.borderLeftWidth;\n        const paddingTop = getAbsoluteValue(styles.paddingTop, element.bounds.width);\n        const paddingRight = getAbsoluteValue(styles.paddingRight, element.bounds.width);\n        const paddingBottom = getAbsoluteValue(styles.paddingBottom, element.bounds.width);\n        const paddingLeft = getAbsoluteValue(styles.paddingLeft, element.bounds.width);\n        this.topLeftBorderBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT)\n                : new Vector(bounds.left, bounds.top);\n        this.topRightBorderBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(bounds.left + topWidth, bounds.top, trh, trv, CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width, bounds.top);\n        this.bottomRightBorderBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh, brv, CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width, bounds.top + bounds.height);\n        this.bottomLeftBorderBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left, bounds.top + leftHeight, blh, blv, CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left, bounds.top + bounds.height);\n        this.topLeftPaddingBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth, bounds.top + borderTopWidth, Math.max(0, tlh - borderLeftWidth), Math.max(0, tlv - borderTopWidth), CORNER.TOP_LEFT)\n                : new Vector(bounds.left + borderLeftWidth, bounds.top + borderTopWidth);\n        this.topRightPaddingBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width + borderLeftWidth), bounds.top + borderTopWidth, topWidth > bounds.width + borderLeftWidth ? 0 : trh - borderLeftWidth, trv - borderTopWidth, CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width - borderRightWidth, bounds.top + borderTopWidth);\n        this.bottomRightPaddingBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - borderLeftWidth), bounds.top + Math.min(rightHeight, bounds.height + borderTopWidth), Math.max(0, brh - borderRightWidth), brv - borderBottomWidth, CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width - borderRightWidth, bounds.top + bounds.height - borderBottomWidth);\n        this.bottomLeftPaddingBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth, bounds.top + leftHeight, Math.max(0, blh - borderLeftWidth), blv - borderBottomWidth, CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left + borderLeftWidth, bounds.top + bounds.height - borderBottomWidth);\n        this.topLeftContentBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth + paddingLeft, bounds.top + borderTopWidth + paddingTop, Math.max(0, tlh - (borderLeftWidth + paddingLeft)), Math.max(0, tlv - (borderTopWidth + paddingTop)), CORNER.TOP_LEFT)\n                : new Vector(bounds.left + borderLeftWidth + paddingLeft, bounds.top + borderTopWidth + paddingTop);\n        this.topRightContentBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width + borderLeftWidth + paddingLeft), bounds.top + borderTopWidth + paddingTop, topWidth > bounds.width + borderLeftWidth + paddingLeft ? 0 : trh - borderLeftWidth + paddingLeft, trv - (borderTopWidth + paddingTop), CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width - (borderRightWidth + paddingRight), bounds.top + borderTopWidth + paddingTop);\n        this.bottomRightContentBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - (borderLeftWidth + paddingLeft)), bounds.top + Math.min(rightHeight, bounds.height + borderTopWidth + paddingTop), Math.max(0, brh - (borderRightWidth + paddingRight)), brv - (borderBottomWidth + paddingBottom), CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width - (borderRightWidth + paddingRight), bounds.top + bounds.height - (borderBottomWidth + paddingBottom));\n        this.bottomLeftContentBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth + paddingLeft, bounds.top + leftHeight, Math.max(0, blh - (borderLeftWidth + paddingLeft)), blv - (borderBottomWidth + paddingBottom), CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left + borderLeftWidth + paddingLeft, bounds.top + bounds.height - (borderBottomWidth + paddingBottom));\n    }\n}\nvar CORNER;\n(function (CORNER) {\n    CORNER[CORNER[\"TOP_LEFT\"] = 0] = \"TOP_LEFT\";\n    CORNER[CORNER[\"TOP_RIGHT\"] = 1] = \"TOP_RIGHT\";\n    CORNER[CORNER[\"BOTTOM_RIGHT\"] = 2] = \"BOTTOM_RIGHT\";\n    CORNER[CORNER[\"BOTTOM_LEFT\"] = 3] = \"BOTTOM_LEFT\";\n})(CORNER || (CORNER = {}));\nconst getCurvePoints = (x, y, r1, r2, position) => {\n    const kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    const ox = r1 * kappa; // control point offset horizontal\n    const oy = r2 * kappa; // control point offset vertical\n    const xm = x + r1; // x-middle\n    const ym = y + r2; // y-middle\n    switch (position) {\n        case CORNER.TOP_LEFT:\n            return new BezierCurve(new Vector(x, ym), new Vector(x, ym - oy), new Vector(xm - ox, y), new Vector(xm, y));\n        case CORNER.TOP_RIGHT:\n            return new BezierCurve(new Vector(x, y), new Vector(x + ox, y), new Vector(xm, ym - oy), new Vector(xm, ym));\n        case CORNER.BOTTOM_RIGHT:\n            return new BezierCurve(new Vector(xm, y), new Vector(xm, y + oy), new Vector(x + ox, ym), new Vector(x, ym));\n        case CORNER.BOTTOM_LEFT:\n        default:\n            return new BezierCurve(new Vector(xm, ym), new Vector(xm - ox, ym), new Vector(x, y + oy), new Vector(x, y));\n    }\n};\nexport const calculateBorderBoxPath = (curves) => {\n    return [curves.topLeftBorderBox, curves.topRightBorderBox, curves.bottomRightBorderBox, curves.bottomLeftBorderBox];\n};\nexport const calculateContentBoxPath = (curves) => {\n    return [\n        curves.topLeftContentBox,\n        curves.topRightContentBox,\n        curves.bottomRightContentBox,\n        curves.bottomLeftContentBox\n    ];\n};\nexport const calculatePaddingBoxPath = (curves) => {\n    return [\n        curves.topLeftPaddingBox,\n        curves.topRightPaddingBox,\n        curves.bottomRightPaddingBox,\n        curves.bottomLeftPaddingBox\n    ];\n};\n","import { getAbsoluteValue } from '../css/types/length-percentage';\nexport const paddingBox = (element) => {\n    const bounds = element.bounds;\n    const styles = element.styles;\n    return bounds.add(styles.borderLeftWidth, styles.borderTopWidth, -(styles.borderRightWidth + styles.borderLeftWidth), -(styles.borderTopWidth + styles.borderBottomWidth));\n};\nexport const contentBox = (element) => {\n    const styles = element.styles;\n    const bounds = element.bounds;\n    const paddingLeft = getAbsoluteValue(styles.paddingLeft, bounds.width);\n    const paddingRight = getAbsoluteValue(styles.paddingRight, bounds.width);\n    const paddingTop = getAbsoluteValue(styles.paddingTop, bounds.width);\n    const paddingBottom = getAbsoluteValue(styles.paddingBottom, bounds.width);\n    return bounds.add(paddingLeft + styles.borderLeftWidth, paddingTop + styles.borderTopWidth, -(styles.borderRightWidth + styles.borderLeftWidth + paddingLeft + paddingRight), -(styles.borderTopWidth + styles.borderBottomWidth + paddingTop + paddingBottom));\n};\n","import { parseStackingContexts } from '../stacking-context';\nimport { asString, isTransparent } from '../../css/types/color';\nimport { Logger } from '../../core/logger';\nimport { BORDER_STYLE } from '../../css/property-descriptors/border-style';\nimport { transformPath } from '../path';\nimport { BACKGROUND_CLIP } from '../../css/property-descriptors/background-clip';\nimport { calculateBorderBoxPath, calculateContentBoxPath, calculatePaddingBoxPath } from '../bound-curves';\nimport { isBezierCurve } from '../bezier-curve';\nimport { Vector } from '../vector';\nimport { CSSImageType, isLinearGradient, isRadialGradient } from '../../css/types/image';\nimport { parsePathForBorder } from '../border';\nimport { calculateBackgroundRendering, getBackgroundValueForIndex } from '../background';\nimport { isDimensionToken } from '../../css/syntax/parser';\nimport { TextBounds } from '../../css/layout/text';\nimport { fromCodePoint, toCodePoints } from 'css-line-break';\nimport { ImageElementContainer } from '../../dom/replaced-elements/image-element-container';\nimport { contentBox } from '../box-sizing';\nimport { CanvasElementContainer } from '../../dom/replaced-elements/canvas-element-container';\nimport { SVGElementContainer } from '../../dom/replaced-elements/svg-element-container';\nimport { isClipEffect, isTransformEffect } from '../effects';\nimport { contains } from '../../core/bitwise';\nimport { calculateGradientDirection, calculateRadius, processColorStops } from '../../css/types/functions/gradient';\nimport { FIFTY_PERCENT, getAbsoluteValue } from '../../css/types/length-percentage';\nimport { FontMetrics } from '../font-metrics';\nimport { Bounds } from '../../css/layout/bounds';\nimport { LIST_STYLE_TYPE } from '../../css/property-descriptors/list-style-type';\nimport { computeLineHeight } from '../../css/property-descriptors/line-height';\nimport { CHECKBOX, INPUT_COLOR, InputElementContainer, RADIO } from '../../dom/replaced-elements/input-element-container';\nimport { TEXT_ALIGN } from '../../css/property-descriptors/text-align';\nimport { TextareaElementContainer } from '../../dom/elements/textarea-element-container';\nimport { SelectElementContainer } from '../../dom/elements/select-element-container';\nimport { IFrameElementContainer } from '../../dom/replaced-elements/iframe-element-container';\nconst MASK_OFFSET = 10000;\nexport class CanvasRenderer {\n    constructor(options) {\n        this._activeEffects = [];\n        this.canvas = options.canvas ? options.canvas : document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        this.options = options;\n        if (!options.canvas) {\n            this.canvas.width = Math.floor(options.width * options.scale);\n            this.canvas.height = Math.floor(options.height * options.scale);\n            this.canvas.style.width = `${options.width}px`;\n            this.canvas.style.height = `${options.height}px`;\n        }\n        this.fontMetrics = new FontMetrics(document);\n        this.ctx.scale(this.options.scale, this.options.scale);\n        this.ctx.translate(-options.x + options.scrollX, -options.y + options.scrollY);\n        this.ctx.textBaseline = 'bottom';\n        this._activeEffects = [];\n        Logger.getInstance(options.id).debug(`Canvas renderer initialized (${options.width}x${options.height} at ${options.x},${options.y}) with scale ${options.scale}`);\n    }\n    applyEffects(effects, target) {\n        while (this._activeEffects.length) {\n            this.popEffect();\n        }\n        effects.filter(effect => contains(effect.target, target)).forEach(effect => this.applyEffect(effect));\n    }\n    applyEffect(effect) {\n        this.ctx.save();\n        if (isTransformEffect(effect)) {\n            this.ctx.translate(effect.offsetX, effect.offsetY);\n            this.ctx.transform(effect.matrix[0], effect.matrix[1], effect.matrix[2], effect.matrix[3], effect.matrix[4], effect.matrix[5]);\n            this.ctx.translate(-effect.offsetX, -effect.offsetY);\n        }\n        if (isClipEffect(effect)) {\n            this.path(effect.path);\n            this.ctx.clip();\n        }\n        this._activeEffects.push(effect);\n    }\n    popEffect() {\n        this._activeEffects.pop();\n        this.ctx.restore();\n    }\n    async renderStack(stack) {\n        const styles = stack.element.container.styles;\n        if (styles.isVisible()) {\n            this.ctx.globalAlpha = styles.opacity;\n            await this.renderStackContent(stack);\n        }\n    }\n    async renderNode(paint) {\n        if (paint.container.styles.isVisible()) {\n            await this.renderNodeBackgroundAndBorders(paint);\n            await this.renderNodeContent(paint);\n        }\n    }\n    renderTextWithLetterSpacing(text, letterSpacing) {\n        if (letterSpacing === 0) {\n            this.ctx.fillText(text.text, text.bounds.left, text.bounds.top + text.bounds.height);\n        }\n        else {\n            const letters = toCodePoints(text.text).map(i => fromCodePoint(i));\n            letters.reduce((left, letter) => {\n                this.ctx.fillText(letter, left, text.bounds.top + text.bounds.height);\n                return left + this.ctx.measureText(letter).width;\n            }, text.bounds.left);\n        }\n    }\n    createFontStyle(styles) {\n        const fontVariant = styles.fontVariant\n            .filter(variant => variant === 'normal' || variant === 'small-caps')\n            .join('');\n        const fontFamily = styles.fontFamily.join(', ');\n        const fontSize = isDimensionToken(styles.fontSize)\n            ? `${styles.fontSize.number}${styles.fontSize.unit}`\n            : `${styles.fontSize.number}px`;\n        return [\n            [styles.fontStyle, fontVariant, styles.fontWeight, fontSize, fontFamily].join(' '),\n            fontFamily,\n            fontSize\n        ];\n    }\n    async renderTextNode(text, styles) {\n        const [font, fontFamily, fontSize] = this.createFontStyle(styles);\n        this.ctx.font = font;\n        text.textBounds.forEach(text => {\n            this.ctx.fillStyle = asString(styles.color);\n            this.renderTextWithLetterSpacing(text, styles.letterSpacing);\n            const textShadows = styles.textShadow;\n            if (textShadows.length && text.text.trim().length) {\n                textShadows\n                    .slice(0)\n                    .reverse()\n                    .forEach(textShadow => {\n                    this.ctx.shadowColor = asString(textShadow.color);\n                    this.ctx.shadowOffsetX = textShadow.offsetX.number * this.options.scale;\n                    this.ctx.shadowOffsetY = textShadow.offsetY.number * this.options.scale;\n                    this.ctx.shadowBlur = textShadow.blur.number;\n                    this.ctx.fillText(text.text, text.bounds.left, text.bounds.top + text.bounds.height);\n                });\n                this.ctx.shadowColor = '';\n                this.ctx.shadowOffsetX = 0;\n                this.ctx.shadowOffsetY = 0;\n                this.ctx.shadowBlur = 0;\n            }\n            if (styles.textDecorationLine.length) {\n                this.ctx.fillStyle = asString(styles.textDecorationColor || styles.color);\n                styles.textDecorationLine.forEach(textDecorationLine => {\n                    switch (textDecorationLine) {\n                        case 1 /* UNDERLINE */:\n                            // Draws a line at the baseline of the font\n                            // TODO As some browsers display the line as more than 1px if the font-size is big,\n                            // need to take that into account both in position and size\n                            const { baseline } = this.fontMetrics.getMetrics(fontFamily, fontSize);\n                            this.ctx.fillRect(text.bounds.left, Math.round(text.bounds.top + baseline), text.bounds.width, 1);\n                            break;\n                        case 2 /* OVERLINE */:\n                            this.ctx.fillRect(text.bounds.left, Math.round(text.bounds.top), text.bounds.width, 1);\n                            break;\n                        case 3 /* LINE_THROUGH */:\n                            // TODO try and find exact position for line-through\n                            const { middle } = this.fontMetrics.getMetrics(fontFamily, fontSize);\n                            this.ctx.fillRect(text.bounds.left, Math.ceil(text.bounds.top + middle), text.bounds.width, 1);\n                            break;\n                    }\n                });\n            }\n        });\n    }\n    renderReplacedElement(container, curves, image) {\n        if (image && container.intrinsicWidth > 0 && container.intrinsicHeight > 0) {\n            const box = contentBox(container);\n            const path = calculatePaddingBoxPath(curves);\n            this.path(path);\n            this.ctx.save();\n            this.ctx.clip();\n            this.ctx.drawImage(image, 0, 0, container.intrinsicWidth, container.intrinsicHeight, box.left, box.top, box.width, box.height);\n            this.ctx.restore();\n        }\n    }\n    async renderNodeContent(paint) {\n        this.applyEffects(paint.effects, 4 /* CONTENT */);\n        const container = paint.container;\n        const curves = paint.curves;\n        const styles = container.styles;\n        for (const child of container.textNodes) {\n            await this.renderTextNode(child, styles);\n        }\n        if (container instanceof ImageElementContainer) {\n            try {\n                const image = await this.options.cache.match(container.src);\n                this.renderReplacedElement(container, curves, image);\n            }\n            catch (e) {\n                Logger.getInstance(this.options.id).error(`Error loading image ${container.src}`);\n            }\n        }\n        if (container instanceof CanvasElementContainer) {\n            this.renderReplacedElement(container, curves, container.canvas);\n        }\n        if (container instanceof SVGElementContainer) {\n            try {\n                const image = await this.options.cache.match(container.svg);\n                this.renderReplacedElement(container, curves, image);\n            }\n            catch (e) {\n                Logger.getInstance(this.options.id).error(`Error loading svg ${container.svg.substring(0, 255)}`);\n            }\n        }\n        if (container instanceof IFrameElementContainer && container.tree) {\n            const iframeRenderer = new CanvasRenderer({\n                id: this.options.id,\n                scale: this.options.scale,\n                backgroundColor: container.backgroundColor,\n                x: 0,\n                y: 0,\n                scrollX: 0,\n                scrollY: 0,\n                width: container.width,\n                height: container.height,\n                cache: this.options.cache,\n                windowWidth: container.width,\n                windowHeight: container.height\n            });\n            const canvas = await iframeRenderer.render(container.tree);\n            if (container.width && container.height) {\n                this.ctx.drawImage(canvas, 0, 0, container.width, container.height, container.bounds.left, container.bounds.top, container.bounds.width, container.bounds.height);\n            }\n        }\n        if (container instanceof InputElementContainer) {\n            const size = Math.min(container.bounds.width, container.bounds.height);\n            if (container.type === CHECKBOX) {\n                if (container.checked) {\n                    this.ctx.save();\n                    this.path([\n                        new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79),\n                        new Vector(container.bounds.left + size * 0.16, container.bounds.top + size * 0.5549),\n                        new Vector(container.bounds.left + size * 0.27347, container.bounds.top + size * 0.44071),\n                        new Vector(container.bounds.left + size * 0.39694, container.bounds.top + size * 0.5649),\n                        new Vector(container.bounds.left + size * 0.72983, container.bounds.top + size * 0.23),\n                        new Vector(container.bounds.left + size * 0.84, container.bounds.top + size * 0.34085),\n                        new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79)\n                    ]);\n                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                    this.ctx.fill();\n                    this.ctx.restore();\n                }\n            }\n            else if (container.type === RADIO) {\n                if (container.checked) {\n                    this.ctx.save();\n                    this.ctx.beginPath();\n                    this.ctx.arc(container.bounds.left + size / 2, container.bounds.top + size / 2, size / 4, 0, Math.PI * 2, true);\n                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                    this.ctx.fill();\n                    this.ctx.restore();\n                }\n            }\n        }\n        if (isTextInputElement(container) && container.value.length) {\n            [this.ctx.font] = this.createFontStyle(styles);\n            this.ctx.fillStyle = asString(styles.color);\n            this.ctx.textBaseline = 'middle';\n            this.ctx.textAlign = canvasTextAlign(container.styles.textAlign);\n            const bounds = contentBox(container);\n            let x = 0;\n            switch (container.styles.textAlign) {\n                case TEXT_ALIGN.CENTER:\n                    x += bounds.width / 2;\n                    break;\n                case TEXT_ALIGN.RIGHT:\n                    x += bounds.width;\n                    break;\n            }\n            const textBounds = bounds.add(x, 0, 0, -bounds.height / 2 + 1);\n            this.ctx.save();\n            this.path([\n                new Vector(bounds.left, bounds.top),\n                new Vector(bounds.left + bounds.width, bounds.top),\n                new Vector(bounds.left + bounds.width, bounds.top + bounds.height),\n                new Vector(bounds.left, bounds.top + bounds.height)\n            ]);\n            this.ctx.clip();\n            this.renderTextWithLetterSpacing(new TextBounds(container.value, textBounds), styles.letterSpacing);\n            this.ctx.restore();\n            this.ctx.textBaseline = 'bottom';\n            this.ctx.textAlign = 'left';\n        }\n        if (contains(container.styles.display, 2048 /* LIST_ITEM */)) {\n            if (container.styles.listStyleImage !== null) {\n                const img = container.styles.listStyleImage;\n                if (img.type === CSSImageType.URL) {\n                    let image;\n                    const url = img.url;\n                    try {\n                        image = await this.options.cache.match(url);\n                        this.ctx.drawImage(image, container.bounds.left - (image.width + 10), container.bounds.top);\n                    }\n                    catch (e) {\n                        Logger.getInstance(this.options.id).error(`Error loading list-style-image ${url}`);\n                    }\n                }\n            }\n            else if (paint.listValue && container.styles.listStyleType !== LIST_STYLE_TYPE.NONE) {\n                [this.ctx.font] = this.createFontStyle(styles);\n                this.ctx.fillStyle = asString(styles.color);\n                this.ctx.textBaseline = 'middle';\n                this.ctx.textAlign = 'right';\n                const bounds = new Bounds(container.bounds.left, container.bounds.top + getAbsoluteValue(container.styles.paddingTop, container.bounds.width), container.bounds.width, computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 1);\n                this.renderTextWithLetterSpacing(new TextBounds(paint.listValue, bounds), styles.letterSpacing);\n                this.ctx.textBaseline = 'bottom';\n                this.ctx.textAlign = 'left';\n            }\n        }\n    }\n    async renderStackContent(stack) {\n        // https://www.w3.org/TR/css-position-3/#painting-order\n        // 1. the background and borders of the element forming the stacking context.\n        await this.renderNodeBackgroundAndBorders(stack.element);\n        // 2. the child stacking contexts with negative stack levels (most negative first).\n        for (const child of stack.negativeZIndex) {\n            await this.renderStack(child);\n        }\n        // 3. For all its in-flow, non-positioned, block-level descendants in tree order:\n        await this.renderNodeContent(stack.element);\n        for (const child of stack.nonInlineLevel) {\n            await this.renderNode(child);\n        }\n        // 4. All non-positioned floating descendants, in tree order. For each one of these,\n        // treat the element as if it created a new stacking context, but any positioned descendants and descendants\n        // which actually create a new stacking context should be considered part of the parent stacking context,\n        // not this new one.\n        for (const child of stack.nonPositionedFloats) {\n            await this.renderStack(child);\n        }\n        // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n        for (const child of stack.nonPositionedInlineLevel) {\n            await this.renderStack(child);\n        }\n        for (const child of stack.inlineLevel) {\n            await this.renderNode(child);\n        }\n        // 6. All positioned, opacity or transform descendants, in tree order that fall into the following categories:\n        //  All positioned descendants with 'z-index: auto' or 'z-index: 0', in tree order.\n        //  For those with 'z-index: auto', treat the element as if it created a new stacking context,\n        //  but any positioned descendants and descendants which actually create a new stacking context should be\n        //  considered part of the parent stacking context, not this new one. For those with 'z-index: 0',\n        //  treat the stacking context generated atomically.\n        //\n        //  All opacity descendants with opacity less than 1\n        //\n        //  All transform descendants with transform other than none\n        for (const child of stack.zeroOrAutoZIndexOrTransformedOrOpacity) {\n            await this.renderStack(child);\n        }\n        // 7. Stacking contexts formed by positioned descendants with z-indices greater than or equal to 1 in z-index\n        // order (smallest first) then tree order.\n        for (const child of stack.positiveZIndex) {\n            await this.renderStack(child);\n        }\n    }\n    mask(paths) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(0, 0);\n        this.ctx.lineTo(this.canvas.width, 0);\n        this.ctx.lineTo(this.canvas.width, this.canvas.height);\n        this.ctx.lineTo(0, this.canvas.height);\n        this.ctx.lineTo(0, 0);\n        this.formatPath(paths.slice(0).reverse());\n        this.ctx.closePath();\n    }\n    path(paths) {\n        this.ctx.beginPath();\n        this.formatPath(paths);\n        this.ctx.closePath();\n    }\n    formatPath(paths) {\n        paths.forEach((point, index) => {\n            const start = isBezierCurve(point) ? point.start : point;\n            if (index === 0) {\n                this.ctx.moveTo(start.x, start.y);\n            }\n            else {\n                this.ctx.lineTo(start.x, start.y);\n            }\n            if (isBezierCurve(point)) {\n                this.ctx.bezierCurveTo(point.startControl.x, point.startControl.y, point.endControl.x, point.endControl.y, point.end.x, point.end.y);\n            }\n        });\n    }\n    renderRepeat(path, pattern, offsetX, offsetY) {\n        this.path(path);\n        this.ctx.fillStyle = pattern;\n        this.ctx.translate(offsetX, offsetY);\n        this.ctx.fill();\n        this.ctx.translate(-offsetX, -offsetY);\n    }\n    resizeImage(image, width, height) {\n        if (image.width === width && image.height === height) {\n            return image;\n        }\n        const canvas = this.canvas.ownerDocument.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height);\n        return canvas;\n    }\n    async renderBackgroundImage(container) {\n        let index = container.styles.backgroundImage.length - 1;\n        for (const backgroundImage of container.styles.backgroundImage.slice(0).reverse()) {\n            if (backgroundImage.type === CSSImageType.URL) {\n                let image;\n                const url = backgroundImage.url;\n                try {\n                    image = await this.options.cache.match(url);\n                }\n                catch (e) {\n                    Logger.getInstance(this.options.id).error(`Error loading background-image ${url}`);\n                }\n                if (image) {\n                    const [path, x, y, width, height] = calculateBackgroundRendering(container, index, [\n                        image.width,\n                        image.height,\n                        image.width / image.height\n                    ]);\n                    const pattern = this.ctx.createPattern(this.resizeImage(image, width, height), 'repeat');\n                    this.renderRepeat(path, pattern, x, y);\n                }\n            }\n            else if (isLinearGradient(backgroundImage)) {\n                const [path, x, y, width, height] = calculateBackgroundRendering(container, index, [null, null, null]);\n                const [lineLength, x0, x1, y0, y1] = calculateGradientDirection(backgroundImage.angle, width, height);\n                const canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext('2d');\n                const gradient = ctx.createLinearGradient(x0, y0, x1, y1);\n                processColorStops(backgroundImage.stops, lineLength).forEach(colorStop => gradient.addColorStop(colorStop.stop, asString(colorStop.color)));\n                ctx.fillStyle = gradient;\n                ctx.fillRect(0, 0, width, height);\n                if (width > 0 && height > 0) {\n                    const pattern = this.ctx.createPattern(canvas, 'repeat');\n                    this.renderRepeat(path, pattern, x, y);\n                }\n            }\n            else if (isRadialGradient(backgroundImage)) {\n                const [path, left, top, width, height] = calculateBackgroundRendering(container, index, [\n                    null,\n                    null,\n                    null\n                ]);\n                const position = backgroundImage.position.length === 0 ? [FIFTY_PERCENT] : backgroundImage.position;\n                const x = getAbsoluteValue(position[0], width);\n                const y = getAbsoluteValue(position[position.length - 1], height);\n                const [rx, ry] = calculateRadius(backgroundImage, x, y, width, height);\n                if (rx > 0 && rx > 0) {\n                    const radialGradient = this.ctx.createRadialGradient(left + x, top + y, 0, left + x, top + y, rx);\n                    processColorStops(backgroundImage.stops, rx * 2).forEach(colorStop => radialGradient.addColorStop(colorStop.stop, asString(colorStop.color)));\n                    this.path(path);\n                    this.ctx.fillStyle = radialGradient;\n                    if (rx !== ry) {\n                        // transforms for elliptical radial gradient\n                        const midX = container.bounds.left + 0.5 * container.bounds.width;\n                        const midY = container.bounds.top + 0.5 * container.bounds.height;\n                        const f = ry / rx;\n                        const invF = 1 / f;\n                        this.ctx.save();\n                        this.ctx.translate(midX, midY);\n                        this.ctx.transform(1, 0, 0, f, 0, 0);\n                        this.ctx.translate(-midX, -midY);\n                        this.ctx.fillRect(left, invF * (top - midY) + midY, width, height * invF);\n                        this.ctx.restore();\n                    }\n                    else {\n                        this.ctx.fill();\n                    }\n                }\n            }\n            index--;\n        }\n    }\n    async renderBorder(color, side, curvePoints) {\n        this.path(parsePathForBorder(curvePoints, side));\n        this.ctx.fillStyle = asString(color);\n        this.ctx.fill();\n    }\n    async renderNodeBackgroundAndBorders(paint) {\n        this.applyEffects(paint.effects, 2 /* BACKGROUND_BORDERS */);\n        const styles = paint.container.styles;\n        const hasBackground = !isTransparent(styles.backgroundColor) || styles.backgroundImage.length;\n        const borders = [\n            { style: styles.borderTopStyle, color: styles.borderTopColor },\n            { style: styles.borderRightStyle, color: styles.borderRightColor },\n            { style: styles.borderBottomStyle, color: styles.borderBottomColor },\n            { style: styles.borderLeftStyle, color: styles.borderLeftColor }\n        ];\n        const backgroundPaintingArea = calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(styles.backgroundClip, 0), paint.curves);\n        if (hasBackground || styles.boxShadow.length) {\n            this.ctx.save();\n            this.path(backgroundPaintingArea);\n            this.ctx.clip();\n            if (!isTransparent(styles.backgroundColor)) {\n                this.ctx.fillStyle = asString(styles.backgroundColor);\n                this.ctx.fill();\n            }\n            await this.renderBackgroundImage(paint.container);\n            this.ctx.restore();\n            styles.boxShadow\n                .slice(0)\n                .reverse()\n                .forEach(shadow => {\n                this.ctx.save();\n                const borderBoxArea = calculateBorderBoxPath(paint.curves);\n                const maskOffset = shadow.inset ? 0 : MASK_OFFSET;\n                const shadowPaintingArea = transformPath(borderBoxArea, -maskOffset + (shadow.inset ? 1 : -1) * shadow.spread.number, (shadow.inset ? 1 : -1) * shadow.spread.number, shadow.spread.number * (shadow.inset ? -2 : 2), shadow.spread.number * (shadow.inset ? -2 : 2));\n                if (shadow.inset) {\n                    this.path(borderBoxArea);\n                    this.ctx.clip();\n                    this.mask(shadowPaintingArea);\n                }\n                else {\n                    this.mask(borderBoxArea);\n                    this.ctx.clip();\n                    this.path(shadowPaintingArea);\n                }\n                this.ctx.shadowOffsetX = shadow.offsetX.number + maskOffset;\n                this.ctx.shadowOffsetY = shadow.offsetY.number;\n                this.ctx.shadowColor = asString(shadow.color);\n                this.ctx.shadowBlur = shadow.blur.number;\n                this.ctx.fillStyle = shadow.inset ? asString(shadow.color) : 'rgba(0,0,0,1)';\n                this.ctx.fill();\n                this.ctx.restore();\n            });\n        }\n        let side = 0;\n        for (const border of borders) {\n            if (border.style !== BORDER_STYLE.NONE && !isTransparent(border.color)) {\n                await this.renderBorder(border.color, side, paint.curves);\n            }\n            side++;\n        }\n    }\n    async render(element) {\n        if (this.options.backgroundColor) {\n            this.ctx.fillStyle = asString(this.options.backgroundColor);\n            this.ctx.fillRect(this.options.x - this.options.scrollX, this.options.y - this.options.scrollY, this.options.width, this.options.height);\n        }\n        const stack = parseStackingContexts(element);\n        await this.renderStack(stack);\n        this.applyEffects([], 2 /* BACKGROUND_BORDERS */);\n        return this.canvas;\n    }\n}\nconst isTextInputElement = (container) => {\n    if (container instanceof TextareaElementContainer) {\n        return true;\n    }\n    else if (container instanceof SelectElementContainer) {\n        return true;\n    }\n    else if (container instanceof InputElementContainer && container.type !== RADIO && container.type !== CHECKBOX) {\n        return true;\n    }\n    return false;\n};\nconst calculateBackgroundCurvedPaintingArea = (clip, curves) => {\n    switch (clip) {\n        case BACKGROUND_CLIP.BORDER_BOX:\n            return calculateBorderBoxPath(curves);\n        case BACKGROUND_CLIP.CONTENT_BOX:\n            return calculateContentBoxPath(curves);\n        case BACKGROUND_CLIP.PADDING_BOX:\n        default:\n            return calculatePaddingBoxPath(curves);\n    }\n};\nconst canvasTextAlign = (textAlign) => {\n    switch (textAlign) {\n        case TEXT_ALIGN.CENTER:\n            return 'center';\n        case TEXT_ALIGN.RIGHT:\n            return 'right';\n        case TEXT_ALIGN.LEFT:\n        default:\n            return 'left';\n    }\n};\n","import { Logger } from '../../core/logger';\nimport { createForeignObjectSVG } from '../../core/features';\nimport { asString } from '../../css/types/color';\nexport class ForeignObjectRenderer {\n    constructor(options) {\n        this.canvas = options.canvas ? options.canvas : document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        this.options = options;\n        this.canvas.width = Math.floor(options.width * options.scale);\n        this.canvas.height = Math.floor(options.height * options.scale);\n        this.canvas.style.width = `${options.width}px`;\n        this.canvas.style.height = `${options.height}px`;\n        this.ctx.scale(this.options.scale, this.options.scale);\n        this.ctx.translate(-options.x + options.scrollX, -options.y + options.scrollY);\n        Logger.getInstance(options.id).debug(`EXPERIMENTAL ForeignObject renderer initialized (${options.width}x${options.height} at ${options.x},${options.y}) with scale ${options.scale}`);\n    }\n    async render(element) {\n        const svg = createForeignObjectSVG(Math.max(this.options.windowWidth, this.options.width) * this.options.scale, Math.max(this.options.windowHeight, this.options.height) * this.options.scale, this.options.scrollX * this.options.scale, this.options.scrollY * this.options.scale, element);\n        const img = await loadSerializedSVG(svg);\n        if (this.options.backgroundColor) {\n            this.ctx.fillStyle = asString(this.options.backgroundColor);\n            this.ctx.fillRect(0, 0, this.options.width * this.options.scale, this.options.height * this.options.scale);\n        }\n        this.ctx.drawImage(img, -this.options.x * this.options.scale, -this.options.y * this.options.scale);\n        return this.canvas;\n    }\n}\nexport const loadSerializedSVG = (svg) => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n        resolve(img);\n    };\n    img.onerror = reject;\n    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(new XMLSerializer().serializeToString(svg))}`;\n});\n","export class TransformEffect {\n    constructor(offsetX, offsetY, matrix) {\n        this.type = 0 /* TRANSFORM */;\n        this.offsetX = offsetX;\n        this.offsetY = offsetY;\n        this.matrix = matrix;\n        this.target = 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */;\n    }\n}\nexport class ClipEffect {\n    constructor(path, target) {\n        this.type = 1 /* CLIP */;\n        this.target = target;\n        this.path = path;\n    }\n}\nexport const isTransformEffect = (effect) => effect.type === 0 /* TRANSFORM */;\nexport const isClipEffect = (effect) => effect.type === 1 /* CLIP */;\n","import { SMALL_IMAGE } from '../core/util';\nconst SAMPLE_TEXT = 'Hidden Text';\nexport class FontMetrics {\n    constructor(document) {\n        this._data = {};\n        this._document = document;\n    }\n    parseMetrics(fontFamily, fontSize) {\n        const container = this._document.createElement('div');\n        const img = this._document.createElement('img');\n        const span = this._document.createElement('span');\n        const body = this._document.body;\n        container.style.visibility = 'hidden';\n        container.style.fontFamily = fontFamily;\n        container.style.fontSize = fontSize;\n        container.style.margin = '0';\n        container.style.padding = '0';\n        body.appendChild(container);\n        img.src = SMALL_IMAGE;\n        img.width = 1;\n        img.height = 1;\n        img.style.margin = '0';\n        img.style.padding = '0';\n        img.style.verticalAlign = 'baseline';\n        span.style.fontFamily = fontFamily;\n        span.style.fontSize = fontSize;\n        span.style.margin = '0';\n        span.style.padding = '0';\n        span.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n        container.appendChild(span);\n        container.appendChild(img);\n        const baseline = img.offsetTop - span.offsetTop + 2;\n        container.removeChild(span);\n        container.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n        container.style.lineHeight = 'normal';\n        img.style.verticalAlign = 'super';\n        const middle = img.offsetTop - container.offsetTop + 2;\n        body.removeChild(container);\n        return { baseline, middle };\n    }\n    getMetrics(fontFamily, fontSize) {\n        const key = `${fontFamily} ${fontSize}`;\n        if (typeof this._data[key] === 'undefined') {\n            this._data[key] = this.parseMetrics(fontFamily, fontSize);\n        }\n        return this._data[key];\n    }\n}\n","export var PathType;\n(function (PathType) {\n    PathType[PathType[\"VECTOR\"] = 0] = \"VECTOR\";\n    PathType[PathType[\"BEZIER_CURVE\"] = 1] = \"BEZIER_CURVE\";\n})(PathType || (PathType = {}));\nexport const equalPath = (a, b) => {\n    if (a.length === b.length) {\n        return a.some((v, i) => v === b[i]);\n    }\n    return false;\n};\nexport const transformPath = (path, deltaX, deltaY, deltaW, deltaH) => {\n    return path.map((point, index) => {\n        switch (index) {\n            case 0:\n                return point.add(deltaX, deltaY);\n            case 1:\n                return point.add(deltaX + deltaW, deltaY);\n            case 2:\n                return point.add(deltaX + deltaW, deltaY + deltaH);\n            case 3:\n                return point.add(deltaX, deltaY + deltaH);\n        }\n        return point;\n    });\n};\n","import { contains } from '../core/bitwise';\nimport { BoundCurves, calculateBorderBoxPath, calculatePaddingBoxPath } from './bound-curves';\nimport { ClipEffect, TransformEffect } from './effects';\nimport { OVERFLOW } from '../css/property-descriptors/overflow';\nimport { equalPath } from './path';\nimport { OLElementContainer } from '../dom/elements/ol-element-container';\nimport { LIElementContainer } from '../dom/elements/li-element-container';\nimport { createCounterText } from '../css/types/functions/counter';\nexport class StackingContext {\n    constructor(container) {\n        this.element = container;\n        this.inlineLevel = [];\n        this.nonInlineLevel = [];\n        this.negativeZIndex = [];\n        this.zeroOrAutoZIndexOrTransformedOrOpacity = [];\n        this.positiveZIndex = [];\n        this.nonPositionedFloats = [];\n        this.nonPositionedInlineLevel = [];\n    }\n}\nexport class ElementPaint {\n    constructor(element, parentStack) {\n        this.container = element;\n        this.effects = parentStack.slice(0);\n        this.curves = new BoundCurves(element);\n        if (element.styles.transform !== null) {\n            const offsetX = element.bounds.left + element.styles.transformOrigin[0].number;\n            const offsetY = element.bounds.top + element.styles.transformOrigin[1].number;\n            const matrix = element.styles.transform;\n            this.effects.push(new TransformEffect(offsetX, offsetY, matrix));\n        }\n        if (element.styles.overflowX !== OVERFLOW.VISIBLE) {\n            const borderBox = calculateBorderBoxPath(this.curves);\n            const paddingBox = calculatePaddingBoxPath(this.curves);\n            if (equalPath(borderBox, paddingBox)) {\n                this.effects.push(new ClipEffect(borderBox, 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */));\n            }\n            else {\n                this.effects.push(new ClipEffect(borderBox, 2 /* BACKGROUND_BORDERS */));\n                this.effects.push(new ClipEffect(paddingBox, 4 /* CONTENT */));\n            }\n        }\n    }\n    getParentEffects() {\n        const effects = this.effects.slice(0);\n        if (this.container.styles.overflowX !== OVERFLOW.VISIBLE) {\n            const borderBox = calculateBorderBoxPath(this.curves);\n            const paddingBox = calculatePaddingBoxPath(this.curves);\n            if (!equalPath(borderBox, paddingBox)) {\n                effects.push(new ClipEffect(paddingBox, 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */));\n            }\n        }\n        return effects;\n    }\n}\nconst parseStackTree = (parent, stackingContext, realStackingContext, listItems) => {\n    parent.container.elements.forEach(child => {\n        const treatAsRealStackingContext = contains(child.flags, 4 /* CREATES_REAL_STACKING_CONTEXT */);\n        const createsStackingContext = contains(child.flags, 2 /* CREATES_STACKING_CONTEXT */);\n        const paintContainer = new ElementPaint(child, parent.getParentEffects());\n        if (contains(child.styles.display, 2048 /* LIST_ITEM */)) {\n            listItems.push(paintContainer);\n        }\n        const listOwnerItems = contains(child.flags, 8 /* IS_LIST_OWNER */) ? [] : listItems;\n        if (treatAsRealStackingContext || createsStackingContext) {\n            const parentStack = treatAsRealStackingContext || child.styles.isPositioned() ? realStackingContext : stackingContext;\n            const stack = new StackingContext(paintContainer);\n            if (child.styles.isPositioned() || child.styles.opacity < 1 || child.styles.isTransformed()) {\n                const order = child.styles.zIndex.order;\n                if (order < 0) {\n                    let index = 0;\n                    parentStack.negativeZIndex.some((current, i) => {\n                        if (order > current.element.container.styles.zIndex.order) {\n                            index = i;\n                            return false;\n                        }\n                        else if (index > 0) {\n                            return true;\n                        }\n                        return false;\n                    });\n                    parentStack.negativeZIndex.splice(index, 0, stack);\n                }\n                else if (order > 0) {\n                    let index = 0;\n                    parentStack.positiveZIndex.some((current, i) => {\n                        if (order >= current.element.container.styles.zIndex.order) {\n                            index = i + 1;\n                            return false;\n                        }\n                        else if (index > 0) {\n                            return true;\n                        }\n                        return false;\n                    });\n                    parentStack.positiveZIndex.splice(index, 0, stack);\n                }\n                else {\n                    parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);\n                }\n            }\n            else {\n                if (child.styles.isFloating()) {\n                    parentStack.nonPositionedFloats.push(stack);\n                }\n                else {\n                    parentStack.nonPositionedInlineLevel.push(stack);\n                }\n            }\n            parseStackTree(paintContainer, stack, treatAsRealStackingContext ? stack : realStackingContext, listOwnerItems);\n        }\n        else {\n            if (child.styles.isInlineLevel()) {\n                stackingContext.inlineLevel.push(paintContainer);\n            }\n            else {\n                stackingContext.nonInlineLevel.push(paintContainer);\n            }\n            parseStackTree(paintContainer, stackingContext, realStackingContext, listOwnerItems);\n        }\n        if (contains(child.flags, 8 /* IS_LIST_OWNER */)) {\n            processListItems(child, listOwnerItems);\n        }\n    });\n};\nconst processListItems = (owner, elements) => {\n    let numbering = owner instanceof OLElementContainer ? owner.start : 1;\n    const reversed = owner instanceof OLElementContainer ? owner.reversed : false;\n    for (let i = 0; i < elements.length; i++) {\n        const item = elements[i];\n        if (item.container instanceof LIElementContainer &&\n            typeof item.container.value === 'number' &&\n            item.container.value !== 0) {\n            numbering = item.container.value;\n        }\n        item.listValue = createCounterText(numbering, item.container.styles.listStyleType, true);\n        numbering += reversed ? -1 : 1;\n    }\n};\nexport const parseStackingContexts = (container) => {\n    const paintContainer = new ElementPaint(container, []);\n    const root = new StackingContext(paintContainer);\n    const listItems = [];\n    parseStackTree(paintContainer, root, root, listItems);\n    processListItems(paintContainer.container, listItems);\n    return root;\n};\n","import { PathType } from './path';\nexport class Vector {\n    constructor(x, y) {\n        this.type = PathType.VECTOR;\n        this.x = x;\n        this.y = y;\n    }\n    add(deltaX, deltaY) {\n        return new Vector(this.x + deltaX, this.y + deltaY);\n    }\n}\nexport const isVector = (path) => path.type === PathType.VECTOR;\n"],"sourceRoot":""}