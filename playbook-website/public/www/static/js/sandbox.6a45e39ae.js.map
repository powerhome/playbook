{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/sandbox/eval/transpilers/vue/v2/style-loader/addStylesClient.js","webpack:///./src/sandbox/eval/transpilers/vue/v2/style-loader/listToStyles.js","webpack:///./src/sandbox/status-screen/indicator-screen.html","webpack:///./src/sandbox/status-screen/loading-screen.html","webpack:///./src/sandbox/status-screen/run-on-click-screen.html","webpack:///./src/sandbox/eval/transpilers/coffee/coffee-worker.ts","webpack:///./src/sandbox/eval/transpilers/less/less-worker.ts","webpack:///./src/sandbox/eval/presets/parcel/transpilers/html-worker.ts","webpack:///./src/sandbox/eval/transpilers/pug/pug-worker.ts","webpack:///./src/sandbox/eval/transpilers/sass/worker/index.ts","webpack:///./src/sandbox/eval/transpilers/stylus/stylus-worker.ts","webpack:///./src/sandbox/eval/transpilers/svelte/svelte-worker.ts","webpack:///./src/sandbox/eval/transpilers/typescript/typescript-worker.ts","webpack:////Users/jasper.furniss/codesandbox-client/standalone-packages/codesandbox-browserfs/dist/shims/fs.js","webpack:///../common/lib/forked-vendors/jsonlint.browser.js","webpack:///../common/lib/load-dynamic-polyfills.js","webpack:///../common/lib/prettify-default-config.js","webpack:///../common/lib/registerServiceWorker.js","webpack:///../common/lib/sandbox/modules.js","webpack:///../common/lib/templates/adonis.js","webpack:///../common/lib/templates/angular.js","webpack:///../common/lib/templates/apollo-server.js","webpack:///../common/lib/templates/babel.js","webpack:///../common/lib/templates/configuration/angular-cli/index.js","webpack:///../common/lib/templates/configuration/angular-json/index.js","webpack:///../common/lib/templates/configuration/babel-transpiler/index.js","webpack:///../common/lib/templates/configuration/babelrc/index.js","webpack:///../common/lib/templates/configuration/custom-codesandbox/index.js","webpack:///../common/lib/templates/configuration/index.js","webpack:///../common/lib/templates/configuration/jsconfig/index.js","webpack:///../common/lib/templates/configuration/netlify/index.js","webpack:///../common/lib/templates/configuration/now/index.js","webpack:///../common/lib/templates/configuration/package-json/index.js","webpack:///../common/lib/templates/configuration/parse.js","webpack:///../common/lib/templates/configuration/prettierRC/index.js","webpack:///../common/lib/templates/configuration/sandbox/index.js","webpack:///../common/lib/templates/configuration/tsconfig/index.js","webpack:///../common/lib/templates/custom.js","webpack:///../common/lib/templates/cxjs.js","webpack:///../common/lib/templates/docusaurus.js","webpack:///../common/lib/templates/dojo.js","webpack:///../common/lib/templates/ember.js","webpack:///../common/lib/templates/esmodule-react.js","webpack:///../common/lib/templates/gatsby.js","webpack:///../common/lib/templates/gridsome.js","webpack:///../common/lib/templates/helpers/react-template.js","webpack:///../common/lib/templates/index.js","webpack:///../common/lib/templates/marko.js","webpack:///../common/lib/templates/mdx-deck.js","webpack:///../common/lib/templates/nest.js","webpack:///../common/lib/templates/next.js","webpack:///../common/lib/templates/node.js","webpack:///../common/lib/templates/nuxt.js","webpack:///../common/lib/templates/parcel.js","webpack:///../common/lib/templates/preact.js","webpack:///../common/lib/templates/quasar.js","webpack:///../common/lib/templates/react-ts.js","webpack:///../common/lib/templates/react.js","webpack:///../common/lib/templates/reason.js","webpack:///../common/lib/templates/remix.js","webpack:///../common/lib/templates/sapper.js","webpack:///../common/lib/templates/solid.js","webpack:///../common/lib/templates/static.js","webpack:///../common/lib/templates/styleguidist.js","webpack:///../common/lib/templates/svelte.js","webpack:///../common/lib/templates/template.js","webpack:///../common/lib/templates/unibit.js","webpack:///../common/lib/templates/vue.js","webpack:///../common/lib/templates/vuepress.js","webpack:///../common/lib/utils/ci.js","webpack:///../common/lib/utils/debug.js","webpack:///../common/lib/utils/decorate-selector.js","webpack:///../common/lib/utils/delay.js","webpack:///../common/lib/utils/dependencies.js","webpack:///../common/lib/utils/global.js","webpack:///../common/lib/utils/is-babel-7.js","webpack:///../common/lib/utils/is-preact-10.js","webpack:///../common/lib/utils/is-url.js","webpack:///../common/lib/utils/metrics.js","webpack:///../common/lib/utils/path.js","webpack:///../common/lib/utils/slugify.js","webpack:///../common/lib/version.js","webpack:///../sandbox-hooks/errors/dependency-not-found-error.js","webpack:///../sandbox-hooks/errors/index.js","webpack:///../sandbox-hooks/errors/module-not-found-error.js","webpack:///../sandbox-hooks/errors/sandbox-error.js","webpack:///../sandbox-hooks/errors/transformers/index.js","webpack:///../sandbox-hooks/errors/transformers/raw-react-component-error.js","webpack:///../sandbox-hooks/not-found-screen/index.js","webpack:///../sandbox-hooks/not-found-screen/overlay-manager.js","webpack:///../sandbox-hooks/react-error-overlay/components/additional.js","webpack:///../sandbox-hooks/react-error-overlay/components/close.js","webpack:///../sandbox-hooks/react-error-overlay/components/code.js","webpack:///../sandbox-hooks/react-error-overlay/components/footer.js","webpack:///../sandbox-hooks/react-error-overlay/components/frame.js","webpack:///../sandbox-hooks/react-error-overlay/components/frames.js","webpack:///../sandbox-hooks/react-error-overlay/components/overlay.js","webpack:///../sandbox-hooks/react-error-overlay/components/suggestions.js","webpack:///../sandbox-hooks/react-error-overlay/effects/proxyConsole.js","webpack:///../sandbox-hooks/react-error-overlay/effects/stackTraceLimit.js","webpack:///../sandbox-hooks/react-error-overlay/effects/unhandledError.js","webpack:///../sandbox-hooks/react-error-overlay/effects/unhandledRejection.js","webpack:///../sandbox-hooks/react-error-overlay/listenToRuntimeErrors.js","webpack:///../sandbox-hooks/react-error-overlay/overlay.js","webpack:///../sandbox-hooks/react-error-overlay/styles.js","webpack:///../sandbox-hooks/react-error-overlay/utils/dom/consumeEvent.js","webpack:///../sandbox-hooks/react-error-overlay/utils/dom/css.js","webpack:///../sandbox-hooks/react-error-overlay/utils/dom/enableTabClick.js","webpack:///../sandbox-hooks/react-error-overlay/utils/errorRegister.js","webpack:///../sandbox-hooks/react-error-overlay/utils/getLinesAround.js","webpack:///../sandbox-hooks/react-error-overlay/utils/getSourceMap.js","webpack:///../sandbox-hooks/react-error-overlay/utils/getStackFrames.js","webpack:///../sandbox-hooks/react-error-overlay/utils/isInternalFile.js","webpack:///../sandbox-hooks/react-error-overlay/utils/mapper.js","webpack:///../sandbox-hooks/react-error-overlay/utils/parser.js","webpack:///../sandbox-hooks/react-error-overlay/utils/stack-frame.js","webpack:///../sandbox-hooks/react-error-overlay/utils/unmapper.js","webpack:///../sandbox-hooks/react-error-overlay/utils/warnings.js","webpack:///../sandpack-core/lib/cache.js","webpack:///../sandpack-core/lib/utils/benchmark.js","webpack:///../sandpack-core/lib/transpiled-module/errors/module-error.js","webpack:///../sandpack-core/lib/transpiled-module/errors/module-warning.js","webpack:///../sandpack-core/lib/runner/utils/process.js","webpack:///../sandpack-core/lib/runner/eval.js","webpack:///../sandpack-core/lib/transpiled-module/hmr.js","webpack:///../sandpack-core/lib/transpiled-module/utils/query-path.js","webpack:///../sandpack-core/lib/transpiled-module/transpiled-module.js","webpack:///../sandpack-core/lib/transpiled-module/module-url.js","webpack:///../sandpack-core/lib/runner/dependency-resolver.js","webpack:///../sandpack-core/lib/npm/get-core-libraries.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/file.js","webpack:///../sandpack-core/lib/utils/esmodule-url.js","webpack:///../sandpack-core/lib/manager.js","webpack:///../sandpack-core/lib/preset/preset.js","webpack:///../sandpack-core/lib/npm/dependencies-to-query.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-npm-module.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/csb.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/unpkg.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/jsdelivr/utils.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/jsdelivr/jsdelivr-npm.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/jsdelivr/jsdelivr-gh.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/tar.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/gist.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/index.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/utils.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/utils/tar-store.js","webpack:///../sandpack-core/lib/resolver/errors/ModuleNotFound.js","webpack:///../sandpack-core/lib/resolver/utils/alias.js","webpack:///../sandpack-core/lib/resolver/utils/exports.js","webpack:///../sandpack-core/lib/resolver/utils/constants.js","webpack:///../sandpack-core/lib/resolver/utils/pkg-json.js","webpack:///../sandpack-core/lib/resolver/utils/fs.js","webpack:///../sandpack-core/lib/resolver/utils/tsconfig.js","webpack:///../sandpack-core/lib/resolver/resolver.js","webpack:///../sandpack-core/lib/sandpack-secret.js","webpack:///../sandpack-core/lib/transpiler/transpiler.js","webpack:///../sandpack-core/lib/transpiler/transpilers/webpack/index.js","webpack:///../sandpack-core/lib/transpiler/utils/loader-utils/parse-query.js","webpack:///../sandpack-core/lib/transpiler/utils/loader-utils/stringify-request.js","webpack:///../sandpack-core/lib/transpiler/utils/loader-utils/index.js","webpack:///../sandpack-core/lib/transpiler/utils/loader-utils/get-remaining-request.js","webpack:///../sandpack-core/lib/transpiler/utils/loader-utils/get-options.js","webpack:///../sandpack-core/lib/utils/delay.js","webpack:///../sandpack-core/lib/utils/extensions.js","webpack:///../sandpack-core/lib/utils/get-dependency-name.js","webpack:///./config/polyfills.js","webpack:///./config/stubs/lru-cache.js","webpack:///../sandpack-core/lib/npm/dynamic/resolutions.js","webpack:///../sandpack-core/lib/npm/dynamic/resolve-dependency.js","webpack:///../sandpack-core/lib/npm/preloaded/fetch-dependencies.js","webpack:///../sandpack-core/lib/npm/merge-dependency.js","webpack:///../sandpack-core/lib/npm/index.js","webpack:///../sandpack-core/lib/npm/dynamic/fetch-protocols/npm-registry.js","webpack:///./src/sandbox/boilerplates/index.ts","webpack:///./src/sandbox/boilerplates/default-boilerplates.ts","webpack:///./src/sandbox/codesandbox-overlay/index.ts","webpack:///./src/sandbox/eval/transpilers/style/utils/insert-css.ts","webpack:///./src/sandbox/eval/transpilers/style/utils/to-definition.ts","webpack:///./src/sandbox/eval/transpilers/style/get-modules.ts","webpack:///./src/sandbox/eval/transpilers/style/index.ts","webpack:///../sandpack-core/lib/transpiler/utils/worker-error-handler.js","webpack:///./src/sandbox/eval/transpilers/worker-transpiler/worker-manager.ts","webpack:///./src/sandbox/eval/transpilers/worker-transpiler/transpiler.ts","webpack:///./src/sandbox/eval/transpilers/babel/babel-parser.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/syntax.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/syntax-info.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/ast-node-utils.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/convert-esmodule.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/generator-jsx.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/generator.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/utils.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/collect-dependencies.ts","webpack:///./src/sandbox/eval/transpilers/babel/index.ts","webpack:///./src/sandbox/eval/transpilers/babel/ast/rewrite-meta.ts","webpack:///./src/sandbox/eval/transpilers/json/index.ts","webpack:///./src/sandbox/eval/transpilers/sass/index.ts","webpack:///./src/sandbox/eval/transpilers/react-refresh/refresh-transpiler.ts","webpack:///./src/sandbox/eval/transpilers/less/index.ts","webpack:///./src/sandbox/eval/transpilers/postcss/index.ts","webpack:///./src/sandbox/eval/transpilers/svgr/index.ts","webpack:///./src/sandbox/eval/transpilers/react-svg/index.ts","webpack:///./src/sandbox/eval/transpilers/raw/index.ts","webpack:///./src/sandbox/eval/presets/create-react-app/utils.ts","webpack:///./src/sandbox/eval/presets/create-react-app/utils/initLegacyDevTools.ts","webpack:///./src/sandbox/eval/presets/create-react-app/utils/initLatestDevTools.ts","webpack:///./src/sandbox/eval/presets/create-react-app/utils/createRefreshEntry.ts","webpack:///./src/sandbox/eval/transpilers/base64/index.ts","webpack:///./src/sandbox/eval/presets/create-react-app/index.ts","webpack:///./src/sandbox/eval/transpilers/typescript/index.ts","webpack:///./src/sandbox/eval/utils/get-dependencies.ts","webpack:///./src/sandbox/eval/transpilers/stylus/index.ts","webpack:///./src/sandbox/eval/transpilers/noop/index.ts","webpack:///./src/sandbox/eval/transpilers/binary/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/v2/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/v2/template-compiler/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/v2/style-compiler/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/v2/selector/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/v2/style-loader/loader.ts","webpack:///./src/sandbox/eval/transpilers/vue/v2/style-loader/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/v2/css-loader/index.ts","webpack:///./src/sandbox/eval/transpilers/pug/index.ts","webpack:///./src/sandbox/eval/transpilers/coffee/index.ts","webpack:///./src/sandbox/eval/presets/vue-cli/v3.ts","webpack:///./src/sandbox/eval/presets/vue-cli/index.ts","webpack:///./src/sandbox/eval/presets/vue-cli/v2.ts","webpack:///./src/sandbox/eval/presets/preact-cli/transpilers/async.ts","webpack:///./src/sandbox/eval/presets/preact-cli/v8.ts","webpack:///./src/sandbox/eval/presets/preact-cli/preset.ts","webpack:///./src/sandbox/eval/transpilers/svelte/index.ts","webpack:///./src/sandbox/eval/presets/svelte/index.ts","webpack:///../sandpack-core/lib/transpiler/transpilers/csb-dynamic-import/dynamic-import/index.js","webpack:///../sandpack-core/lib/transpiler/transpilers/csb-dynamic-import/index.js","webpack:///./src/sandbox/eval/transpilers/angular2-template/index.ts","webpack:///./src/sandbox/eval/presets/angular-cli/index.ts","webpack:///./src/sandbox/eval/presets/parcel/transpilers/html-transpiler.ts","webpack:///./src/sandbox/eval/presets/parcel/index.ts","webpack:///./src/sandbox/eval/presets/babel-repl/index.ts","webpack:///./src/sandbox/eval/presets/cxjs/index.ts","webpack:///./src/sandbox/eval/transpilers/reason/index.ts","webpack:///./src/sandbox/eval/presets/reason/reason-remap.ts","webpack:///./src/sandbox/eval/presets/reason/index.ts","webpack:///./src/sandbox/eval/presets/dojo/transpilers/style.ts","webpack:///./src/sandbox/eval/presets/dojo/index.ts","webpack:///./src/sandbox/eval/presets/custom/index.ts","webpack:///./src/sandbox/eval/presets/solid/index.ts","webpack:///./src/sandbox/eval/index.ts","webpack:///./src/sandbox/external-resources.ts","webpack:///./src/sandbox/status-screen/overlay-manager.ts","webpack:///./src/sandbox/status-screen/index.ts","webpack:///./src/sandbox/compile.ts","webpack:///./src/sandbox/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","this","oldJsonpFunction","slice","Worker","BrowserFS","BFSRequire","parser","lexer","jsonlint","trace","yy","symbols_","JSONString","STRING","JSONNumber","NUMBER","JSONNullLiteral","NULL","JSONBooleanLiteral","TRUE","FALSE","JSONText","JSONValue","EOF","JSONObject","JSONArray","JSONMemberList","JSONMember","JSONElementList","$accept","$end","terminals_","2","4","6","8","10","11","14","17","18","21","22","23","24","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","$0","$","replace","Number","table","3","5","7","9","12","13","15","16","1","19","20","25","defaultActions","parseError","str","hash","parse","input","self","stack","vstack","lstack","recovering","setInput","yylloc","yyloc","lex","token","symbol","preErrorSymbol","state","action","len","newState","expected","yyval","errStr","showPosition","join","text","match","line","loc","toString","Array","first_line","last_line","first_column","last_column","_input","_more","_less","done","matched","conditionStack","ch","unput","more","less","pastInput","past","substr","upcomingInput","next","pre","tempMatch","index","lines","rules","_currentRules","options","flex","begin","condition","popState","pop","conditions","topState","pushState","yy_","$avoiding_name_collisions","YY_START","INITIAL","inclusive","arguments","__createBinding","k","k2","desc","getOwnPropertyDescriptor","writable","configurable","__setModuleDefault","v","__importStar","mod","default","captureStackTrace","then","printWidth","tabWidth","useTabs","semi","singleQuote","trailingComma","bracketSpacing","jsxBracketSameLine","unregister","isLocalhost","Boolean","window","location","hostname","isHttp","protocol","registerValidSW","swUrl","onUpdated","onInstalled","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","storage","estimate","results","usage","quota","caches","keys","names","forEach","delete","catch","opts","URL","process","env","PUBLIC_URL","origin","fetch","response","status","headers","indexOf","ready","reload","log","checkValidServiceWorker","__importDefault","inDirectory","resolveDirectoryWrapped","resolveModuleWrapped","findCurrentModule","findMainModule","isMainModule","getChildren","getDirectoryPath","getModulePath","resolveModule","getModulesInDirectory","getModulesAndDirectoriesInDirectory","resolveDirectory","memoize_1","templates_1","parse_1","compareTitle","original","test","ignoredExtensions","some","ext","throwError","path","_path","directories","_startdirectoryShortid","startdirectoryShortid","startsWith","splitPath","split","filter","foundDirectoryShortid","reduce","dirId","pathPart","dir","find","shortid","directoryShortid","nextDirectory","title","dirPath","lastPath","directory","parentPath","removedModules","moduleItem","removedDirectories","directoryItem","findByShortid","entities","modulesInFoundDirectory","foundModule","foundDirectory","indexModule","getPath","arrayToLookIn","id","findById","lastDirectoryShortid","map","entry","sandbox","templateDefinition","template","parsedConfigs","configurationFiles","defaultOpenModule","getDefaultOpenedFiles","entryModule","modulePath","mainModule","cleanPath","decodeURIComponent","rootShortid","sourceShortid","destinationShortid","template_1","decorate_selector_1","decorateSelector","mainFile","showOnHomePage","staticDeployment","path_1","configuration_1","AngularTemplate","entries","generated","parsed","concat","app","apps","root","main","absolute","getAngularCLIEntries","defaultProject","project","projects","architect","build","getAngularJSONEntries","warn","package","getAngularCLIHTMLEntry","getAngularJSONHTMLEntry","extraConfigurations","angularCli","angularJSON","tsconfig","isTypescript","distDir","popular","babelrc","babelTranspiler","config","description","moreInfoUrl","getDefaultCode","JSON","stringify","outDir","polyfills","styles","scripts","schema","partialSupportDisclaimer","version","newProjectRoot","codesandbox","sourceRoot","projectType","prefix","schematics","builder","outputPath","tsConfig","assets","configurations","production","fileReplacements","with","optimization","outputHashing","sourceMap","extractCss","namedChunks","aot","extractLicenses","vendorChunk","buildOptimizer","serve","browserTarget","karmaConfig","lint","exclude","e2e","protractorConfig","devServerTarget","is_babel_7_1","is_preact_10_1","JSX_PRAGMA","react","preact","isV7","isPreactV10","packageJSON","code","isBabel7","dependencies","devDependencies","isPreact10","presets","plugins","legacy","loose","pragma","pragmaFrag","export","import","targets","browsers","decoratorsBeforeExport","polyfill","regenerator","parserOpts","packageJSONModule","dep","chrome","ie","ff","edge","safari","useBuiltIns","templateName","templateColor","sandpack","defaultExtensions","aliases","transpilers","package_json_1","prettierRC_1","sandbox_1","babelrc_1","now_1","netlify_1","angular_cli_1","angular_json_1","tsconfig_1","jsconfig_1","babel_transpiler_1","custom_codesandbox_1","configs","prettierRC","sandboxConfig","customCodeSandbox","nowConfig","netlifyConfig","jsconfig","compilerOptions","baseUrl","generateFileFromSandbox","slugify_1","jsonFile","keywords","tags","npmDependencies","markty_toml_1","jsonlint_browser_1","getCode","configurationFile","titleIncludes","includes","paths","baseObject","assign","g","prettify_default_config_1","generateFileFromState","prettierConfig","docsUrl","infiniteLoopProtection","hardReloadOnChange","view","lib","allowJs","jsx","moduleResolution","rootDir","forceConsistentCasingInFileNames","noImplicitReturns","noImplicitThis","noImplicitAny","strictNullChecks","suppressImplicitAnyIndexErrors","noUnusedLocals","jsxFactory","esModuleInterop","declaration","removeComments","noLib","allowSyntheticDefaultImports","emitDecoratorMetadata","experimentalDecorators","importHelpers","downLevelIteration","strict","compileOnSave","downlevelIteration","jsxImportSource","types","CxJSTemplate","showCube","externalResourcesEnabled","DocusaurusTemplate","DojoTemplate","super","getEntries","githubPagesDeploy","react_template_1","ReactTemplate","GatsbyTemplate","views","closeable","url","open","GridsomeTemplate","hideOnEmbedPage","hideOnPrem","solid","remix","unibit","quasar","mdxDeck","docusaurus","vuepress","gridsome","styleguidist","staticTemplate","ember","nest","sapper","vue","svelte","reason","reactTs","parcel","dojo","cxjs","babel","esmReact","node","nuxt","marko","gatsby","apollo","custom","angular","adonis","adonis_1","angular_1","apollo_server_1","babel_1","custom_1","cxjs_1","dojo_1","ember_1","gatsby_1","gridsome_1","marko_1","mdx_deck_1","nest_1","next_1","node_1","nuxt_1","parcel_1","preact_1","quasar_1","react_1","react_ts_1","reason_1","sapper_1","static_1","styleguidist_1","svelte_1","unibit_1","vue_1","vuepress_1","docusaurus_1","esmodule_react_1","remix_1","solid_1","theme","backgroundColor","url_generator_1","ParcelTemplate","pathname","endsWith","configFiles","defaultOpenedFile","extendedSandboxConfig","container","port","SolidTemplate","is_server_1","defaultConfigurations","CLIENT_VIEWS","SERVER_VIEWS","niceName","color","alterDeploymentData","apiData","packageJSONFile","files","x","file","parsedFile","newParsedFile","isServer","pkg","isArray","_a","getMainFromPackage","VueTemplate","VuePressTemplate","formatVersion","CSB_PKG_PROTOCOL","commitSha","global_1","search","global","getGlobal","Raven","captureBreadcrumb","category","getDebugger","memoize_one_1","color_1","colorMethods","selector","method","args","fn","modifierArgs","lighten","rgb","string","addModifier","__awaiter","thisArg","_arguments","P","generator","step","rejected","getAbsoluteDependencies","getAbsoluteDependency","isValidSemver","isAbsoluteVersion","semver_1","fetchWithRetries","ok","json","getLatestVersion","allVersions","fetchAllVersions","maxSatisfying","versions","encodeURIComponent","resolveVersionFromUnpkg","depName","depVersion","valid","nonAbsoluteDependencies","newDependencies","commonPostMessage","Window","postMessage","protocolAndHost","ver","gte","minVersion","reactScriptsVersion","intersects","isCRAVersion2","preactVersion","isUrl","URL_RE","persistMeasurements","getMeasurements","clearMeasurements","getCumulativeMeasure","endMeasure","measure","now","debug_1","debug","runningMeasurements","Map","measurements","performance","totalTime","prev","silent","displayName","toFixed","clear","mark","Date","currentTime","set","lastTime","lastMeasurement","nowMeasurement","hadKey","body","measurement","browser","cache_used","cacheUsed","fields","transpilation","evaluation","external_resources","compilation","boot","total","_env_","IS_ONPREM","Accept","relative","extname","basename","dirname","normalize","isAbsolute","splitPathRe","normalizeArray","parts","allowAboveRoot","res","charAt","isAbs","trailingSlash","newPath","resolvedPath","resolvedAbsolute","cwd","TypeError","trimArray","arr","lastIndex","start","end","segment","filename","exec","sections","lastPart","assertPath","startDot","startPart","matchedSlash","preDotState","charCodeAt","from","to","fromParts","toParts","Math","min","samePartsLength","outputParts","a","RegExp","toLowerCase","getTimestamp","floor","DependencyNotFoundError","SandboxError","constructor","dependencyName","fromPath","severity","_dependencyName$split","_dependencyName$split2","_slicedToArray2","second","parsedName","suggestions","dispatch","actions","source","add","_exports","ref","errorsSentLastSecond","lastWarningSent","WARNING_INTERVAL_SECONDS","errorToSend","manager","getCurrentManager","relevantFrame","enhancedFrames","wrappedResolveModule","_originalFileName","fileName","tModule","resolveTranspiledModuleSync","parent","_originalLineNumber","column","_originalColumnNumber","payload","frames","_objectSpread","hideLine","lineNumber","babelMatched","parseInt","buildErrorMessage","buildDynamicError","show","columnNumber","setInterval","ModuleNotFoundError","isDependency","currentPath","_defineProperty2","ErrorClass","number","transformers","registerErrorTransformer","rawReactErrorTransformer","findRawModule","rawModule","foundResult","_result","sourceModule","rename","_x","_show","HTML","_asyncToGenerator2","sandboxId","createOverlay","contentDocument","getElementById","onclick","requestPreviewSecretFromApp","_createOverlay","removeChild","iframeReference","createIframe","iframe","html","innerHTML","additionalReference","currentError","totalErrors","switchCallback","lastChild","div","applyStyles","additionalChildStyle","group","groupStyle","left","groupElemLeft","addEventListener","consumeEvent","createTextNode","enableTabClick","right","groupElemRight","callback","hints","hintsStyle","close","hint","span","hintStyle","createHint","closeButtonStyle","sourceLines","lineNum","columnNum","contextSize","onSourceClick","sourceCode","whiteSpace","Infinity","content","isFinite","substring","ansiHighlight","codeFrame","forceColor","linesAbove","linesBelow","htmlHighlight","generateAnsiHtml","codeStyle","ccn","childNodes","oLoop","ccn2","index2","innerText","primaryErrorStyle","secondaryErrorStyle","primaryPreStyle","secondaryPreStyle","handler","style","cursor","footerStyle","frameSetting","frame","critical","omits","omitBundle","parentContainer","lastElement","errorName","compiled","functionName","sourceFileName","scriptLines","_scriptCode","sourceLineNumber","sourceColumnNumber","_originalScriptCode","prettyURL","trimMatch","getPrettyURL","needsHidden","isInternalUrl","isInternalFile","isThrownIntentionally","isBultinErrorName","shouldCollapse","hasReachedAppCode","collapseElement","capV","omittedFrames","omitsCount","text1","hide","textContent","list","getElementsByName","display","omittedFramesCollapsedStyle","omittedFramesExpandedStyle","getGroupToggle","requestAnimationFrame","actionElement","children","first","parentNode","click","insertBefore","insertBeforeBundle","bundle","trim","editor","openModule","elem","internalUrl","frameFunctionName","cleanedFunctionName","cleanedUrl","functionNameStyle","depStyle","frameLink","linkStyle","frameAnchor","anchorStyle","frameDiv","hiddenStyle","hasSource","createCode","resolvedFrames","frameSettings","traceStyle","lIndex","createFrameWrapper","factory","fac","elemWrapper","compiledDiv","toggleStyle","compiledText","createFrame","closeCallback","overlay","overlayStyle","containerStyle","createClose","additional","updateAdditional","header","headerStyle","messageHeader","messageHeaderStyle","finalMessage","originalName","originalMessage","originalErrorContainer","errorHeader","originalHeaderStyle","originalMessageHeader","originalMessageHeaderStyle","areActionsEnabled","createSuggestions","createFrames","createFooter","suggestionsContainerStyle","suggestionsTitleStyle","suggestion","button","suggestionsButtonStyle","preventDefault","orig","reactFrameStack","reactStack","reactStackEnd","limit","stackTraceLimit","errorHandler","boundErrorHandler","removeEventListener","rejectionHandler","crash","crashWithFramesRunTime","crashWithFrames","unregisterError","registerUnhandledError","unregisterUnhandledRejection","registerUnhandledRejection","registerStackTraceLimit","unregisterReactStack","registerReactStack","permanentRegisterConsole","warning","massageWarning","__unmap_source","unhandledRejection","getStackFrames","stackFrames","renderErrorOverlay","unregisterErrorHandlers","listenToRuntimeErrorsUnmounter","listenToRuntimeErrors","force","unmount","errorReferences","currReferenceIndex","render","disposeCurrentView","iframeStyle","w","contentWindow","offset","switchError","onkeydown","cb","keyEventHandler","shortcutHandler","margin","renderErrorByIndex","_getErrorRecord","getErrorRecord","nextView","drainErrors","sendErrorsToEditor","buildError","transformErrors","errRef","transformation","transformError","getTranspiledModules","newError","ex","consumeError","position","top","width","height","border","padding","overflow","_preStyle","_groupElemStyle","transition","blur","element","css","getHead","injectedCache","injectedCount","getElementsByTagName","which","keyCode","parsedFrames","enhancedFramesPromise","unmap","_ref","recorded","errorsConsumed","getLinesAround","count","max","ScriptLine","SourceMap","__source_map","getOriginalPosition","_this$__source_map$or","originalPositionFor","getGeneratedPosition","_this$__source_map$ge","generatedPositionFor","getSource","sourceName","sourceContentFor","getSources","sources","extractSourceMapUrl","fileUri","fileContents","regex","getSourceMap","_x2","_getSourceMap","sm","base64","match2","atob","SourceMapConsumer","lastIndexOf","obj","_getStackFrames","f","_map","contextLines","cache","settle","transpiledModule","getTranspiledModuleByHash","resolveTranspiledModule","fileSource","compiledCode","_ref2","_map$getOriginalPosit","originalSource","StackFrame","regexExtractLocation","extractLocation","isNaN","regexValidFrame_Chrome","regexValidFrame_FireFox","parseStack","isEval","last","highlight","scriptCode","sourceFunctionName","sourceScriptCode","_originalFunctionName","getFunctionName","_unmap","_fileUri","contents","uri","fN","seps","sep","penalties","sort","b","sign","sourceT","_map$getGeneratedPosi","lastFilename","lastLineNumber","stripInlineStacktrace","_frames$index","abs","defineDriver","setDriver","INDEXEDDB","LOCALSTORAGE","WEBSQL","APICacheUsed","storeName","clearIndexedDBCache","saveCache","managerModuleToTranspile","changes","firstRun","managerState","serialize","entryPath","optimizeForSize","setItem","clearCache","__SANDBOX_DATA__","shouldSaveOnlineCache","stringifiedManagerState","deleteAPICache","ignoreNextCache","localStorage","consumeCache","getItem","removeItem","cacheData","localData","cache1","cache2","timestamp","load","ModuleError","ModuleWarning","cachedSetTimeout","cachedClearTimeout","currentQueue","queue","draining","queueIndex","defaultSetTimout","defaultClearTimeout","runTimeout","fun","drainQueue","cleanUpNextTick","run","marker","runClearTimeout","Item","array","nextTick","argv","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","chdir","umask","hasGlobalDeclaration","globals","asUMD","NODE_ENV","allGlobals","require","allGlobalKeys","globalsCode","globalsValues","eval","isEvalError","HMR","dirty","selfAccepted","invalidated","disposeHandler","setSelfAccepted","isEntry","isHot","isFilePath","splitQueryFromPath","modulePathIndex","reverse","findIndex","queryPath","ModuleSource","sourceEqualsCompiled","query","previousSource","isTestFile","hmrConfig","hasMissingDependencies","createSourceForAsset","logWarnings","warnings","correction","isCompilationCached","errors","childModules","transpilationDependencies","Set","asyncDependencies","transpilationInitiators","initiators","markHardReload","reset","resetTranspilation","preset","getLoaders","transpiler","cleanModule","getLoaderContext","removeTranspiledModule","setIsEntry","setIsTestFile","setDirty","initiator","resetCompilation","size","depPath","isTranspilationDep","downloadDependency","fileResolver","transpilerOptions","emitWarning","emitError","emitModule","directoryPath","overwrite","isChild","moduleCopy","getTranspiledModule","update","addTranspiledModule","addTranspilationDependency","addDependency","addDependenciesInDirectory","folderPath","resolveTranspiledModulesInDirectory","resolveTranspiledModuleAsync","getModules","context","webpack","_module","href","remainingRequests","resourceQuery","getLoaderQuery","getQuery","dispose","finalSourceMap","requires","loaderContext","reGlob","transpilerConfig","measureKey","getId","transpiledCode","transpile","HMREnabled","transpileJobs","delay","foundTranspileJob","_transpile","finally","verifyTreeTranspiled","isReloading","localModule","webpackHMR","isDirty","isDeclined","isFirstLoad","setHmrStatus","callDisposeHandler","hotData","hot","accept","setType","setAcceptCallback","enableWebpackHMR","decline","setDisposeHandler","invalidate","setInvalidated","hmrStatus","addStatusHandler","removeStatusHandler","usedPath","getPresetAliasedPath","bfsModule","os","homedir","loaded","toPath","dependencyPath","requiredTranspiledModule","evaluateTranspiledModule","usedGlobals","__dirname","__filename","$csbImport","evaluate","envVariables","callAcceptCallback","stubbed","cacheable","serializableObject","war","isNpmDependency","loadModule","queryParts","transpiledModules","getModule","assert","buffer","child_process","cluster","constants","crypto","dgram","dns","domain","events","fs","http","https","net","punycode","querystring","readline","repl","stream","_stream_duplex","_stream_passthrough","_stream_readable","_stream_transform","_stream_writable","sys","timers","tls","tty","util","vm","zlib","tarStore","tarLocation","getUrlFromFileProtocol","meta","getESModuleUrl","NODE_LIBS","SKIPPED_BROWSER_FIELD_DEPENDENCIES","SHIMMED_MODULE","getShimmedModuleFromPath","triggerFileWatch","getFSModule","fileWatcher","triggerWatch","manifest","dependencyDependencies","dependencyAliases","bfsWrapper","addModule","removeModule","moveModule","updateModule","_isFileSync","stage","_isFileAsync","isFile","sync","async","_readFileSync","_readFileAsync","readFile","setStage","currentTModule","hmrStatusChangeListeners","cachedPaths","hardReload","transpiledModulesByHash","versionIdentifier","esmodules","resolverCache","reactDevTools","configure","hasFileResolver","setupFileResolver","baseTModule","sendMessage","pJsonCode","evaluateModule","postEvaluate","tModules","values","resetResolverCache","existingModule","hasDotEnv","envCode","envLine","val","setEnvironmentVariables","postTranspile","currentDependencyName","aliasedVersion","aliasedDependencyName","getAliasedPath","_b","moduleDirectoriesCache","baseTSCompilerConfig","typescript","NODE_PATH","fetchRemoteModule","esmoduleUrl","experimentalEsmSupport","fullUrl","cachedModule","downloadResult","downloadESModule","downloaded","dirredPath","cachedPath","measureStartTime","presetAliasedPath","aliasedPath","getAliasedDependencyPath","shimmedPath","extensions","moduleDirectories","getModuleDirectories","remoteFileContent","connectedPath","getTranspiledModulesByModule","resolvedModule","resolveModuleAsync","joinedPath","resetAllModules","addedModules","updatedModules","mirrorModule","tModulesToUpdate","uniq","modulesWithErrors","flattenedTModulesToUpdate","flattenDeep","allModulesToUpdate","transpiledModulesToUpdate","shouldTranspile","serializedTModules","dependenciesQuery","getDependencyQuery","getTime","normalizedDependencies","cacheVersion","newCombinedMetas","sTModule","getTranspilers","info","getTranspilerContext","alias","processDependencies","setup","teardown","htmlDisabled","preEvaluate","preTranspilers","postTranspilers","setAdditionalAliases","defaultAliases","aliasedPathCache","loaders","resetTranspilers","_transpilers","parseOptions","noop","deps","addTranspiler","has","aliasCache","exactFoundAlias","pathParts","foundAlias","orderBy","every","replacedPath","prepend","transpilerObject","unshift","evaluator","loader","extraTranspilers","loaderName","getTranspiler","webpackLoader","configStringified","encode","loaderQuery","VERSION_RE","normalizeVersion","matches","dependenciesToQuery","dependencyToQuery","metas","combinedMetas","normalizedMetas","packages","setCombinedMetas","givenCombinedMetas","ALIAS_REGEX","resolveNPMAlias","getMeta","packageJSONPath","useFallback","nameWithoutAlias","foundMeta","fromCache","newMeta","downloadedAllDependencies","downloadAllDependencyFiles","massFiles","foundPkg","relativePath","newPkg","resolvePath","ignoreDepNameVersion","subDepVersionVersionInfo","getDependencyVersion","subDepVersion","er","filepath","foundPackageJSONPath","rootDependency","savedDepDep","resolved","semver","fetchModule","versionInfo","rootPath","normalizedCacheKey","normalizedMeta","prependRootPath","foundPath","getTarballUrl","normalizeJSDelivr","fileObject","GH_RE","convertGitHubURLToVersion","ghUrl","repo","cleanedRepo","contributedProtocols","preloadedProtocols","jsdelivr","latestVersion","unpkg","childFiles","protocols","fetchedGists","getAPIURl","fetchGist","truncated","raw_url","normalizedResponse","fileNames","repoVersion","metaBranch","default_branch","sha","isGithubDependency","isTarDependency","_name","_version","prependToContributedProtocols","newProtocols","getFetchProtocol","runCondition","retries","requestInit","lastTryTime","responseObject","TarStore","fetchedTars","tarContents","normalized","tar","Buffer","tarKey","generateKey","arrayBuffer","untarredFile","normalizeTar","fetchTar","normalizeAliasFilePath","specifier","pkgRoot","EXPORTS_KEYS","normalizePackageExport","extractPathFromExport","exportValue","foundPaths","exportFilename","MAIN_PKG_FIELDS","PKG_ALIAS_FIELDS","isFileFn","getParentDirectories","processTSConfig","loadPackageJSON","packageFilePath","packageContent","hasExports","mainField","exportKeys","exportKey","resolvedExport","aliasFieldKey","aliasField","normalizedKey","normalizedValue","processPackageJSON","loadNearestPackageJSON","foundPackageJSON","resolveAlias","pkgJson","relativeFilepath","aliasKey","re","makeRe","capture","newAddition","moduleSpecifier","resolveFile","isAbsoluteFilename","findPackageJSON","expandFile","expandCount","expanded","resolver","inputOpts","skipIndexExpansion","normalizedSpecifier","normalizeModuleSpecifier","normalizedModuleDirectories","normalizeResolverOptions","parsedTSConfig","cachedConfig","processed","getTSConfig","potentialPaths","suffix","getPotentialPathsFromTSConfig","potentialPath","resolveNodeModule","pkgSpecifierParts","pkgName","extractPkgSpecifierParts","modulesPath","pkgFilePath","rootPkgJson","foundFile","resolveSync","resolveAsync","getSandpackSecret","cookie","removeSandpackSecret","getPopupDimensions","wLeft","screenLeft","screenX","wTop","screenTop","screenY","innerWidth","innerHeight","getPopupOffset","getProtocolAndHostWithSSE","host","requestSandpackSecretFromApp","teamId","parentDomain","ancestorOrigins","referrer","popup","$type","listener","secret","cookieValue","setSandpackSecret","Transpiler","doTranspilation","WebpackTranspiler","webpackCode","webpackLoaderContext","raw","specialValues","null","true","false","matchRelativePath","isAbsolutePath","getRemainingRequest","parseQuery","queryArgs","arg","idx","stringifyRequest","splitted","part","splittedPart","singlePath","getOptions","DEFAULT_EXTENSIONS","getDependencyName","dependencyParts","getAliasVersion","expectedSplitLength","cosmiconfig","prettier","jsdom","JSDOM","fragment","htmlString","LRUCache","makeSymbol","Yallist","MAX","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","naiveLength","lc","stale","maxAge","noDisposeOnSet","forEachStep","thisp","hit","isStale","del","doUse","unshiftNode","diff","walker","tail","removeNode","Entry","mL","allowStale","mA","lC","rforEach","toArray","dump","h","dumpLru","inspect","extras","didFirst","item","peek","expiresAt","prune","WRONG_PATTERNS","parsePatternInfo","globPattern","range","parsePackagePath","pattern","getPackageJSON","getLatestVersionForSemver","getDependencyDependencies","parsedResolutions","peerDependencyResult","packageJSONCode","parents","absoluteVersion","originalDep","applicableResolutions","getAbsoluteVersion","resolveDependencyInfo","IS_ALIAS","dependency","peerDependencies","resolutionsByPackage","allFiles","packageName","packageVersion","pkgSemver","URLS","packager","bucket","BUCKET_URL","PACKAGER_URL","callApi","statusText","statusCode","requestPackager","msDelay","round","random","VERSIONED_MODULE_RE","isEqual","s1","s2","replacePaths","oldName","newName","al","replaceDependencyInfo","depDepName","newDepDep","pkgJSONPath","v1","v2","min1","min2","loadedDependencyCombination","PRELOADED_PROTOCOLS","splitDependencies","forceFetchDynamically","dynamicDependencies","prebundledDependencies","fetchProtocol","shouldFetchDynamically","getDependenciesFromSources","resolutions","updateProgress","parseResolutions","remainingDependencies","totalDependencies","depsWithNodeLibs","newDeps","removeSpacesFromDependencies","updateLoadScreen","progress","dynamicPromise","prebundledPromise","normalizedVersion","dependencyUrl","packagerRequestUrl","dynamicLoadedDependencies","prebundledLoadedDependencies","responses","sortedResponses","localeCompare","pathPrefix","exDepDep","newerVersionDepDep","olderVersionDepDep","mergeDependencies","notifications","loadDependencies","disableExternalConnection","isNewCombination","dependenciesWithoutTypings","pickBy","depQuery","registryLocation","packageMetadata","proxyEnabled","scopeWhitelist","scope","scopeName","proxyUrl","authToken","provideTarballUrl","authType","tarballUrl","getProxiedUrl","encodedName","Headers","append","credentials","getRequestInit","errorMessage","detail","fetchRegistry","getPackageUrl","metadata","getPackageMetadata","foundVersion","getVersionInfo","tarball","dist","cachedBoilerplates","evalBoilerplates","_evalBoilerplates","_asyncToGenerator","boilerplates","boilerplate","fakeModule","extension","getBoilerplates","findBoilerplate","isBinary","parameters","getParameters","webpackHMREnabled","wrapper","toDefinition","classes","previous","className","core","Core","depPromises","_yield$core$load","injectableSource","exportTokens","getStyleId","StyleTranspiler","insertCss","hmrEnabled","FileError","_debug","WorkerStatus","WorkerManager","workerFactory","_defineProperty","_options$hasFS","hasFS","_options$preload","preload","_options$maxConcurren","maxConcurrency","_options$maxWorkerCou","maxWorkerCount","hardwareConcurrency","initialize","workerCount","loadWorker","firstLoadPromise","workers","worker","terminate","handleWorkerReady","workerData","startedAt","Ready","executeRemainingTasks","handleMessage","msg","handleCallRequest","handleCallResponse","_this","workerId","workerdata","Initializing","activeCalls","evt","browserfsMessage","FileSystem","WorkerFS","attachRemoteListener","pendingCalls","_slicedToArray","pendingCall","callId","registerFunction","functions","foundCall","isError","reconstructedError","parseWorkerError","foundWorker","_this2","callFn","_ref3","WorkerTranspiler","workerManager","loaderContexts","loaderContextId","found","isGlob","_x3","registerLoaderContext","cid","cleanupLoaderContext","queueCompileFn","_superprop_getGetTranspilerContext","_this3","initialized","DEFAULT_BABEL_CONFIG","Syntax","ESM_TYPES","generateRequireStatement","varName","requirePath","declarations","init","callee","kind","generateAllExportsIterator","expression","computed","params","operator","consequent","argument","alternate","generateExportGetter","generateExportStatement","exportName","exportObj","local","properties","shorthand","generateInteropRequireExpression","localName","generateVariableName","convertEsModule","ast","program","usedVarNames","varsToRename","trackedExports","exportNames","getVarName","usedName","importOffset","addNodeInImportSpace","oldPosition","addedSpecifier","addEsModuleSpecifier","addedDefaultInterop","addDefaultInterop","exportsDefined","walk","enter","skip","declNode","idNode","statement","specifiers","exported","positionToInsert","flatten","elements","newDeclaration","importName","imported","prop","scopeManager","escope","ecmaVersion","acquire","scopes","references","identifier","writeExpr","isWrite","detach","exportNamesArray","exportNamesToUse","totalNode","currentNode","addExportVoids","JSXElement","write","openingElement","closingElement","child","JSXOpeningElement","attributes","attr","JSXClosingElement","JSXIdentifier","JSXMemberExpression","JSXAttribute","JSXNamespacedName","namespace","JSXExpressionContainer","JSXText","EXPRESSIONS_PRECEDENCE","ArrayExpression","TaggedTemplateExpression","ThisExpression","Identifier","Literal","TemplateLiteral","Super","SequenceExpression","MemberExpression","CallExpression","NewExpression","ArrowFunctionExpression","ClassExpression","FunctionExpression","ObjectExpression","UpdateExpression","UnaryExpression","BinaryExpression","LogicalExpression","ConditionalExpression","AssignmentExpression","AwaitExpression","YieldExpression","RestElement","customGenerator","astring","FieldDefinition","static","ImportExpression","jsxGenerator","generateCode","finalCode","collectDependenciesFromAST","addCollectedDependencies","iteration","globalThis","babelworkers","BabelWorker","isNodeModule","simpleRequire","meriyah","parseModule","syntaxInfo","esm","dynamicImports","getSyntaxInfoFromAst","hasImportMeta","rewriteImportMeta","foundConfig","loaderOptions","hasMacros","babelConfig","resolvedConfig","disableCodeSandboxPlugins","finalConfig","sourceMaps","commonjsPluginName","getBabelConfig","_yield$_this$queueCom","babelTranspilerOptions","sandboxOptions","foundDependencies","baseConfig","availablePlugins","availablePresets","babelVersion","JSONTranspiler","SassWorker","indentedSyntax","HELPER_PATH","HELPER_CODE","prelude","postlude","RefreshTranspiler","LessWorker","interMediateFiles","FEATURE_REGEX","PostCSSCompiler","SVGRTranspiler","svgrTransform","codeIsHttp","downloadedCode","ReactSVGTranspiler","RawTranspiler","isMinimalSemverVersion","minimalVersion","isMinimalReactDomVersion","_isMinimalReactDomVersion","isMinimalAbsoluteVersion","isMinimalReactVersion","_x4","_isMinimalReactVersion","_x5","_x6","_x7","_isMinimalAbsoluteVersion","absoluteDependencies","hasRefresh","_x8","_hasRefresh","reactDom","supportsNewReactTransform","_supportsNewReactTransform","initializeReactDevToolsLegacy","_initializeReactDevToolsLegacy","opener","_yield$import","initializeDevTools","activate","__REACT_DEVTOOLS_GLOBAL_HOOK__","initializeReactDevToolsLatest","_initializeReactDevToolsLatest","uid","uuid","wall","listen","send","activateBackend","createBackendBridge","createBridge","initializeBackend","bridge","createRefreshEntry","_createRefreshEntry","tEntryModule","getMimeType","filePath","mimeTypes","_createDataUri","blob","reader","FileReader","readAsDataURL","onloadend","base64data","Base64Transpiler","Blob","createDataUri","BASE_REACT_BABEL_PLUGINS","corejs","helpers","BASE_REACT_PRESETS_CONFIG","ignoreBrowserslistConfig","CLASSIC_REACT_BABEL_CONFIG","runtime","NEW_REACT_BABEL_CONFIG","reactPreset","_reactPreset","refreshInitialized","Preset","originalDeps","isRefresh","registerTranspiler","skipEnvCheck","refreshTranspiler","compileNodeModulesWithEnv","svgrTranspiler","reactSvgTranspiler","lessTranspiler","postcssTranspiler","stylesTranspiler","sassTranspiler","jsonTranspiler","rawTranspiler","base64Transpiler","TypeScriptWorker","typescriptVersion","StylusWorker","NoopTranspiler","BinaryTranspiler","VueTranspiler","VueTemplateTranspiler","VueStyleCompiler","VueSelector","addStylesClientPath","addStylesClientRaw","listToStylesRaw","loaderUtils","VueStyleLoader","CSSTranspiler","PugWorker","CoffeeWorker","_initialize","vuePreset","stylePostLoader","vueLoader","templateLoader","sassWithConfig","scssWithConfig","lessWithConfig","stylusWithConfig","stylusTranspiler","typescriptTranspiler","coffeeTranspiler","scss","sass","styl","registerStyleTranspilers","binaryTranspiler","noopTranspiler","pugTranspiler","isV3","initializeV3","vue$","vueTranspiler","vueTemplateTranspiler","vueStyleTranspiler","vueSelector","vueStyleLoader","cssLoader","initializeV2","vueModule","transpileTree","Vue","warnHandler","_isVue","$options","__file","getFileNameFromVm","PreactPresetV8","preactPreset","preact$","cssModulesPaths","cssTypes","cssType","cssModulesRegex","asyncTranspiler","PreactPreset","SvelteWorker","coerce","babelOptions","sveltePreset","styleProcessor","svelteTranspiler","importRegex","convertDynamicImport","templateUrlRegex","stylesRegex","stringRegex","replaceStringsWithRequires","extensionConfig","quote","urlParts","finalUrl","Angular2Transpiler","newSource","_replaceStringsWithRe","templateProperty","urls","_replaceStringsWithRe2","styleProperty","polyfillsLoaded","_addAngularJSONPolyfills","polyfillLocation","transpileModules","_addAngularCLIPolyfills","_addAngularJSONResources","_build$options","_build$options$styles","_build$options$script","finalPath","getPathFromResource","nodeModuleRegex","_addAngularCLIResources","_app$styles","_app$scripts","environmentSource","environments","dev","zone","addAngularCLIPolyfills","addAngularJSONPolyfills","addAngularCLIResources","addAngularJSONResources","angular2Transpiler","csbDynamicImportTranspiler","HTMLWorker","parcelPreset","dynamicCSSModules","tsTranspiler","htmlTranspiler","babelPreset","cxjsPreset","addScript","IGNORED_DEPENDENCIES","getModuleName","moduleParts","unCapitalizedModuleName","toUpperCase","cachedDependencies","ReasonTranspiler","ocaml","reasonModules","moduleName","mainReasonModule","modulesToAdd","getDependencyList","listFunction","reason_list_dependencies","list_dependencies","modulesToAddArr","newCode","usedCode","printRE","parseML","typesPath","typesModule","reasonCode","_global$ocaml$reason_","reason_compile_super_errors","js_code","js_error_msg","row","stripANSI","reasonRemap","reasonTranspiler","packageJson","_exec","baseName","_yield$getModules","cssResult","stylesPath","dojoStylesTranspiler","transpilerMap","_registerTranspilers","savedTranspilers","configModule","initializers","evaluatedTranspilers","customPreset","customConfig","customTemplate","registerTranspilers","solidPreset","getPreset","_getPreset","preactPresetV8","reasonPreset","angularPreset","dojoPreset","getExternalResourcesConcatenation","resources","clearExternalResources","el","remove","addCSS","resource","link","rel","media","createExternalCSSLink","addJS","createExternalJSLink","addResource","resourceIsCss","waitForLoaded","readyState","cachedExternalResources","handleExternalResources","_handleExternalResources","externalResources","extResString","iframeRenderedAt","setIframeStyle","showFullScreen","opacity","currentScreen","loadTimeoutID","changeText","getElementsByClassName","resetScreen","lastIframeRenderedAt","resetOverlay","setScreen","screen","loadingHtml","indicatorHtml","actionsEnabled","getHTMLParts","bodyMatcher","headMatcher","headMatch","bodyMatch","testRunner","sendTestCount","tests","findTests","firstLoad","hadError","lastHeadHTML","lastBodyHTML","lastHeight","changedModuleCount","usedCache","WHITELISTED_DEV_DEPENDENCIES","PREINSTALLED_DEPENDENCIES","getDependencies","parsedPackage","_parsedPackage$depend","_parsedPackage$peerDe","_parsedPackage$devDep","returnedDependencies","foundWhitelistedDevDependencies","_p$split","_p$split2","_toArray","prefixedName","_p$split3","_p$split4","sandpackConfig","preinstalledDependencies","preInstalledDependencies","initializeManager","_initializeManager","_ref$hasFileResolver","_ref$customNpmRegistr","customNpmRegistries","newManager","Manager","SCRIPT_VERSION","sandpackToken","responseRegistry","Authorization","registry","enabledScopes","enabled_scopes","limitToScopes","limit_to_scopes","proxy_enabled","registryUrl","registry_url","registryAuthToken","registry_auth_key","registryAuthType","auth_type","cleanUrl","NpmRegistryFetcher","prependNpmProtocolDefinition","updateManager","_updateManager","managerModules","updateConfigurations","updateData","sendResize","documentElement","scrollHeight","offsetHeight","getDocumentHeight","initializeDOMMutationListener","MutationObserver","observer","observe","childList","subtree","disconnect","resizePollingTimer","resizePolling","clearInterval","onWindowResize","compile","_compile","_opts$customNpmRegist","hasActions","_opts$isModuleView","isModuleView","showOpenInCodeSandbox","_opts$showLoadingScre","showLoadingScreen","_opts$showErrorScreen","showErrorScreen","_opts$skipEval","skipEval","_opts$hasFileResolver","_opts$disableDependen","disableDependencyPreprocessing","_opts$clearConsoleDis","clearConsoleDisabled","metrics","startTime","uninject","inject","clearErrorTransformers","initializeErrorTransformers","getDefinition","parseConfigurations","parsedPackageJSON","_yield$loadDependenci","shouldReloadManager","setManifest","possibleEntries","foundMain","htmlEntries","getHTMLEntries","htmlModulePath","htmlModule","_getHTMLParts","clearCompiledCache","oldHTML","evalled","domChanged","defaultBoilerplates","createCodeSandboxOverlay","TestRunner","Event","dispatchEvent","userAgent","VERSION","compilatonError","__puppeteer__","oldClose","_len","_key","reattach","overrideDocumentClose","tasks","runningTask","executeTaskIfAvailable","_executeTaskIfAvailable","queueTask","currentScript","requirePolyfills","isInitializationCompile","_handleMessage","isStandalone","getSandboxId","getPreviewSecret","show404","camelized","camelizeKeys","npm_dependencies","moduleObject","npmRegistries"],"mappings":"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","file":"static/js/sandbox.6a45e39ae.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"sandbox\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"static/js/\" + ({\"css-loader\":\"css-loader\",\"vendors~css-modules-loader-core\":\"vendors~css-modules-loader-core\",\"css-modules-loader-core\":\"css-modules-loader-core\",\"vendors~postcss-compiler~vue-style-compiler\":\"vendors~postcss-compiler~vue-style-compiler\",\"postcss-compiler\":\"postcss-compiler\",\"vendors~vue-style-compiler\":\"vendors~vue-style-compiler\",\"vue-style-compiler\":\"vue-style-compiler\",\"vendors~react-devtools-backend\":\"vendors~react-devtools-backend\",\"vendors~vue-loader~vue-selector~vue-template-compiler\":\"vendors~vue-loader~vue-selector~vue-template-compiler\",\"vendors~vue-template-compiler\":\"vendors~vue-template-compiler\",\"vue-template-compiler\":\"vue-template-compiler\",\"vue-loader\":\"vue-loader\",\"vue-selector\":\"vue-selector\"}[chunkId]||chunkId) + \".\" + {\"0\":\"2cf5bacda\",\"1\":\"8ec60b652\",\"2\":\"53442668d\",\"5\":\"eeda4aa1d\",\"6\":\"43681cc64\",\"7\":\"c338a482f\",\"8\":\"9e613fa40\",\"css-loader\":\"64087c7f5\",\"vendors~css-modules-loader-core\":\"05c653935\",\"css-modules-loader-core\":\"2b4823c95\",\"vendors~postcss-compiler~vue-style-compiler\":\"49745dd34\",\"postcss-compiler\":\"4310b8556\",\"vendors~vue-style-compiler\":\"8f51b5006\",\"vue-style-compiler\":\"f0f11a7be\",\"vendors~react-devtools-backend\":\"f9bb808e7\",\"vendors~vue-loader~vue-selector~vue-template-compiler\":\"869041708\",\"vendors~vue-template-compiler\":\"a8c77cdee\",\"vue-template-compiler\":\"b8f7afc7a\",\"vue-loader\":\"ffeb766f7\",\"vue-selector\":\"91b0cc6f0\"}[chunkId] + \".chunk.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = this[\"csbJsonP\"] = this[\"csbJsonP\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors~sandbox\",\"default~sandbox~sandbox-startup\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = \"/* eslint-disable */\\n/*\\n  MIT License http://www.opensource.org/licenses/mit-license.php\\n  Author Tobias Koppers @sokra\\n  Modified by Evan You @yyx990803\\n*/\\n\\nvar hasDocument = typeof document !== 'undefined';\\n\\nif (typeof DEBUG !== 'undefined' && DEBUG) {\\n  if (!hasDocument) {\\n    throw new Error(\\n      'vue-style-loader cannot be used in a non-browser environment. ' +\\n        \\\"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\\\"\\n    );\\n  }\\n}\\n\\nvar listToStyles = require('./listToStyles');\\n\\n/*\\n* type StyleObject = {\\n*   id: number;\\n*   parts: Array<StyleObjectPart>\\n* }\\n*\\n* type StyleObjectPart = {\\n*   css: string;\\n*   media: string;\\n*   sourceMap: ?string\\n}\\n*/\\n\\nvar stylesInDom = {\\n  /*\\n   *   [id: number]: {\\n   *     id: number,\\n   *     refs: number,\\n   *     parts: Array<(obj?: StyleObjectPart) => void>\\n   *   }\\n   */\\n};\\n\\nvar head =\\n  hasDocument && (document.head || document.getElementsByTagName('head')[0]);\\nvar singletonElement = null;\\nvar singletonCounter = 0;\\nvar isProduction = false;\\nvar noop = function() {};\\n\\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\\n// tags it will allow on a page\\nvar isOldIE =\\n  typeof navigator !== 'undefined' &&\\n  /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\\n\\nmodule.exports = function(parentId, list, _isProduction) {\\n  isProduction = _isProduction;\\n\\n  var styles = listToStyles(parentId, list);\\n  addStylesToDom(styles);\\n\\n  return function update(newList) {\\n    var mayRemove = [];\\n    for (var i = 0; i < styles.length; i++) {\\n      var item = styles[i];\\n      var domStyle = stylesInDom[item.id];\\n      domStyle.refs--;\\n      mayRemove.push(domStyle);\\n    }\\n    if (newList) {\\n      styles = listToStyles(parentId, newList);\\n      addStylesToDom(styles);\\n    } else {\\n      styles = [];\\n    }\\n    for (var i = 0; i < mayRemove.length; i++) {\\n      var domStyle = mayRemove[i];\\n      if (domStyle.refs === 0) {\\n        for (var j = 0; j < domStyle.parts.length; j++) {\\n          domStyle.parts[j]();\\n        }\\n        delete stylesInDom[domStyle.id];\\n      }\\n    }\\n  };\\n};\\n\\nfunction addStylesToDom(styles /* Array<StyleObject> */) {\\n  for (var i = 0; i < styles.length; i++) {\\n    var item = styles[i];\\n    var domStyle = stylesInDom[item.id];\\n    if (domStyle) {\\n      domStyle.refs++;\\n      for (var j = 0; j < domStyle.parts.length; j++) {\\n        domStyle.parts[j](item.parts[j]);\\n      }\\n      for (; j < item.parts.length; j++) {\\n        domStyle.parts.push(addStyle(item.parts[j]));\\n      }\\n      if (domStyle.parts.length > item.parts.length) {\\n        domStyle.parts.length = item.parts.length;\\n      }\\n    } else {\\n      var parts = [];\\n      for (var j = 0; j < item.parts.length; j++) {\\n        parts.push(addStyle(item.parts[j]));\\n      }\\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts };\\n    }\\n  }\\n}\\n\\nfunction createStyleElement() {\\n  var styleElement = document.createElement('style');\\n  styleElement.type = 'text/css';\\n  head.appendChild(styleElement);\\n  return styleElement;\\n}\\n\\nfunction addStyle(obj /* StyleObjectPart */) {\\n  var update, remove;\\n  var styleElement = document.querySelector(\\n    'style[data-vue-ssr-id~=\\\"' + obj.id + '\\\"]'\\n  );\\n\\n  if (styleElement) {\\n    if (isProduction) {\\n      // has SSR styles and in production mode.\\n      // simply do nothing.\\n      return noop;\\n    } else {\\n      // has SSR styles but in dev mode.\\n      // for some reason Chrome can't handle source map in server-rendered\\n      // style tags - source maps in <style> only works if the style tag is\\n      // created and inserted dynamically. So we remove the server rendered\\n      // styles and inject new ones.\\n      styleElement.parentNode.removeChild(styleElement);\\n    }\\n  }\\n\\n  if (isOldIE) {\\n    // use singleton mode for IE9.\\n    var styleIndex = singletonCounter++;\\n    styleElement =\\n      singletonElement || (singletonElement = createStyleElement());\\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\\n  } else {\\n    // use multi-style-tag mode in all other cases\\n    styleElement = createStyleElement();\\n    update = applyToTag.bind(null, styleElement);\\n    remove = function() {\\n      styleElement.parentNode.removeChild(styleElement);\\n    };\\n  }\\n\\n  update(obj);\\n\\n  return function updateStyle(newObj /* StyleObjectPart */) {\\n    if (newObj) {\\n      if (\\n        newObj.css === obj.css &&\\n        newObj.media === obj.media &&\\n        newObj.sourceMap === obj.sourceMap\\n      ) {\\n        return;\\n      }\\n      update((obj = newObj));\\n    } else {\\n      remove();\\n    }\\n  };\\n}\\n\\nvar replaceText = (function() {\\n  var textStore = [];\\n\\n  return function(index, replacement) {\\n    textStore[index] = replacement;\\n    return textStore.filter(Boolean).join('\\\\n');\\n  };\\n})();\\n\\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\\n  var css = remove ? '' : obj.css;\\n\\n  if (styleElement.styleSheet) {\\n    styleElement.styleSheet.cssText = replaceText(index, css);\\n  } else {\\n    var cssNode = document.createTextNode(css);\\n    var childNodes = styleElement.childNodes;\\n    if (childNodes[index]) styleElement.removeChild(childNodes[index]);\\n    if (childNodes.length) {\\n      styleElement.insertBefore(cssNode, childNodes[index]);\\n    } else {\\n      styleElement.appendChild(cssNode);\\n    }\\n  }\\n}\\n\\nfunction applyToTag(styleElement, obj) {\\n  var css = obj.css;\\n  var media = obj.media;\\n  var sourceMap = obj.sourceMap;\\n\\n  if (media) {\\n    styleElement.setAttribute('media', media);\\n  }\\n\\n  if (sourceMap) {\\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\\n    // this makes source maps inside style tags work properly in Chrome\\n    css += '\\\\n/*# sourceURL=' + sourceMap.sources[0] + ' */';\\n    // http://stackoverflow.com/a/26603875\\n    css +=\\n      '\\\\n/*# sourceMappingURL=data:application/json;base64,' +\\n      btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) +\\n      ' */';\\n  }\\n\\n  if (styleElement.styleSheet) {\\n    styleElement.styleSheet.cssText = css;\\n  } else {\\n    while (styleElement.firstChild) {\\n      styleElement.removeChild(styleElement.firstChild);\\n    }\\n    styleElement.appendChild(document.createTextNode(css));\\n  }\\n}\\n\"","module.exports = \"/* eslint-disable */\\n/**\\n * Translates the list format produced by css-loader into something\\n * easier to manipulate.\\n */\\nmodule.exports = function listToStyles(parentId, list) {\\n  var styles = [];\\n  var newStyles = {};\\n  for (var i = 0; i < list.length; i++) {\\n    var item = list[i];\\n    var id = item[0];\\n    var css = item[1];\\n    var media = item[2];\\n    var sourceMap = item[3];\\n    var part = {\\n      id: parentId + ':' + i,\\n      css: css,\\n      media: media,\\n      sourceMap: sourceMap,\\n    };\\n    if (!newStyles[id]) {\\n      styles.push((newStyles[id] = { id: id, parts: [part] }));\\n    } else {\\n      newStyles[id].parts.push(part);\\n    }\\n  }\\n  return styles;\\n};\\n\"","module.exports = \"<style>\\n  body {\\n    color: #fff;\\n    font-family: 'Inter', sans-serif;\\n    background: transparent;\\n    -webkit-font-smoothing: antialiased;\\n  }\\n\\n  .container {\\n    display: flex;\\n    align-items: center;\\n    flex-direction: row;\\n  }\\n\\n  .text {\\n    font-size: 0.8rem;\\n    width: 100%;\\n    font-weight: 400;\\n    margin-left: 1rem;\\n  }\\n\\n  .cube {\\n    transform: translate(-34px, 15px) scale(0.25, 0.25);\\n  }\\n\\n  .cube,\\n  .cube * {\\n    position: absolute;\\n    width: 6rem;\\n    height: 6rem;\\n  }\\n  .cube .sides * {\\n    box-sizing: border-box;\\n    border: 10px solid rgba(0,0,0,0.7);\\n    border-radius: 8px;\\n    background: rgba(255, 255, 255, 0.6);\\n  }\\n\\n  @keyframes rotate {\\n    0% {\\n      transform: rotateX(-25.5deg) rotateY(45deg);\\n    }\\n\\n    100% {\\n      transform: rotateX(-25.5deg) rotateY(405deg);\\n    }\\n  }\\n\\n  .sides {\\n    animation: rotate 0.8s linear infinite;\\n    animation-fill-mode: forwards;\\n    transform-style: preserve-3d;\\n    transform: rotateX(-25.5deg) rotateY(45deg);\\n  }\\n\\n  .cube .sides .top {\\n    animation: top-animation 3s ease infinite;\\n    animation-delay: 0ms;\\n    transform: rotateX(90deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .bottom {\\n    animation: bottom-animation 3s ease infinite;\\n    animation-delay: 0ms;\\n    transform: rotateX(-90deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .front {\\n    animation: front-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(0deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .back {\\n    animation: back-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(-180deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .left {\\n    animation: left-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(-90deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .right {\\n    animation: right-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(90deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n</style>\\n<div class=\\\"container\\\">\\n  <div class=\\\"cube\\\">\\n    <div class=\\\"sides\\\">\\n      <div class=\\\"top\\\"></div>\\n      <div class=\\\"right\\\"></div>\\n      <div class=\\\"bottom\\\"></div>\\n      <div class=\\\"left\\\"></div>\\n      <div class=\\\"front\\\"></div>\\n      <div class=\\\"back\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n<link href=\\\"https://fonts.googleapis.com/css2?family=Inter:wght@200;400&display=swap\\\" rel=\\\"stylesheet\\\">\\n\"","module.exports = \"<style>\\n  body {\\n    color: #fff;\\n    font-family: 'Inter', sans-serif;\\n    background: #151515;\\n  }\\n\\n  .container {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    flex-direction: row;\\n  }\\n\\n  .text {\\n    margin-top: 22rem;\\n    font-size: 1rem;\\n    width: 100%;\\n    font-weight: 200;\\n    text-align: center;\\n  }\\n\\n  .cube,\\n  .cube * {\\n    position: absolute;\\n    width: 6rem;\\n    height: 6rem;\\n  }\\n  .cube .sides * {\\n    box-sizing: border-box;\\n    border: 0.12rem solid white;\\n    border-radius: 0.25rem;\\n    background: rgba(255, 255, 255, 0.1);\\n  }\\n\\n  @keyframes rotate {\\n    0% {\\n      transform: rotateX(-37.5deg) rotateY(45deg);\\n    }\\n    50% {\\n      transform: rotateX(-37.5deg) rotateY(405deg);\\n    }\\n    100% {\\n      transform: rotateX(-37.5deg) rotateY(405deg);\\n    }\\n  }\\n\\n  .sides {\\n    animation: rotate 3s ease infinite;\\n    animation-delay: 0.8s;\\n    transform-style: preserve-3d;\\n    transform: rotateX(-37.5deg) rotateY(45deg);\\n  }\\n\\n  .cube .sides .top {\\n    animation: top-animation 3s ease infinite;\\n    animation-delay: 0ms;\\n    transform: rotateX(90deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes top-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(100px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(100px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(100px);\\n    }\\n  }\\n  .cube .sides .bottom {\\n    animation: bottom-animation 3s ease infinite;\\n    animation-delay: 0ms;\\n    transform: rotateX(-90deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes bottom-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(100px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(100px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(100px);\\n    }\\n  }\\n  .cube .sides .front {\\n    animation: front-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(0deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes front-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(96px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(96px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(96px);\\n    }\\n  }\\n  .cube .sides .back {\\n    animation: back-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(-180deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes back-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(96px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(96px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(96px);\\n    }\\n  }\\n  .cube .sides .left {\\n    animation: left-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(-90deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes left-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(96px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(96px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(96px);\\n    }\\n  }\\n  .cube .sides .right {\\n    animation: right-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(90deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes right-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(96px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(96px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(96px);\\n    }\\n  }\\n</style>\\n<div class=\\\"container\\\">\\n  <div class=\\\"cube\\\">\\n    <div class=\\\"sides\\\">\\n      <div class=\\\"top\\\"></div>\\n      <div class=\\\"right\\\"></div>\\n      <div class=\\\"bottom\\\"></div>\\n      <div class=\\\"left\\\"></div>\\n      <div class=\\\"front\\\"></div>\\n      <div class=\\\"back\\\"></div>\\n    </div>\\n  </div>\\n  <div class=\\\"text\\\">Downloading dependencies</div>\\n</div>\\n<link href=\\\"https://fonts.googleapis.com/css2?family=Inter:wght@200;400&display=swap\\\" rel=\\\"stylesheet\\\">\\n\"","module.exports = \"<style>\\n  body {\\n    color: #fff;\\n    font-family: 'Inter', sans-serif;\\n    background: #151515;\\n    cursor: pointer;\\n    -webkit-font-smoothing: auto;\\n    -moz-font-smoothing: auto;\\n    -moz-osx-font-smoothing: grayscale;\\n    font-smoothing: auto;\\n    text-rendering: optimizeLegibility;\\n    font-smooth: always;\\n    -webkit-tap-highlight-color: transparent;\\n    -webkit-touch-callout: none;\\n  }\\n\\n  .container {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    flex-direction: row;\\n  }\\n\\n  .text {\\n    margin-top: 24rem;\\n    font-size: 1rem;\\n    line-height: 1.4;\\n    width: 100%;\\n    max-width: 600px;\\n    font-weight: 400;\\n    text-align: center;\\n  }\\n\\n  .cube,\\n  .cube * {\\n    position: absolute;\\n    width: 6rem;\\n    height: 6rem;\\n  }\\n  .cube .sides * {\\n    opacity: 0.1;\\n    box-sizing: border-box;\\n    border: 0.12rem solid white;\\n    border-radius: 0.25rem;\\n    background: rgba(255, 255, 255, 0.1);\\n  }\\n  .sides {\\n    transform-style: preserve-3d;\\n    transform: rotateX(-37.5deg) rotateY(45deg);\\n  }\\n\\n  .cube .sides .top {\\n    transform: rotateX(90deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .bottom {\\n    transform: rotateX(-90deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .front {\\n    transform: rotateY(0deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .back {\\n    transform: rotateY(-180deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n  .cube .sides .left {\\n    transform: rotateY(-90deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .right {\\n    transform: rotateY(90deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .play {\\n    position: absolute;\\n    background-color: white;\\n    text-align: left;\\n  }\\n  .play:before,\\n  .play:after {\\n    content: '';\\n    position: absolute;\\n    background-color: inherit;\\n  }\\n  .play,\\n  .play:before,\\n  .play:after {\\n    width: 1rem;\\n    height: 1rem;\\n    border-top-right-radius: 30%;\\n  }\\n\\n  .play {\\n    transform: rotate(-90deg) skewX(-30deg) scale(1, 0.866);\\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.24);\\n  }\\n  .play:before {\\n    transform: rotate(-135deg) skewX(-45deg) scale(1.414, 0.707)\\n      translate(0, -50%);\\n  }\\n  .play:after {\\n    transform: rotate(135deg) skewY(-45deg) scale(0.707, 1.414) translate(50%);\\n  }\\n</style>\\n<div class=\\\"container\\\">\\n  <div class=\\\"cube\\\">\\n    <div class=\\\"sides\\\">\\n      <div class=\\\"top\\\"></div>\\n      <div class=\\\"right\\\"></div>\\n      <div class=\\\"bottom\\\"></div>\\n      <div class=\\\"left\\\"></div>\\n      <div class=\\\"front\\\"></div>\\n      <div class=\\\"back\\\"></div>\\n    </div>\\n  </div>\\n  <div class=\\\"play\\\"></div>\\n  <div class=\\\"text\\\">\\n    <h1>Aw, Snap?</h1>\\n    <p style=\\\"color:rgba(255,255,255,0.9)\\\">\\n      We noticed that the sandbox didn't complete its last run. This could be\\n      because of some code that crashed the browser. We paused execution so you\\n      can check the code.\\n    </p>\\n    <p style=\\\"color:rgba(255,255,255,0.9)\\\">Click to continue execution</p>\\n  </div>\\n</div>\\n<link href=\\\"https://fonts.googleapis.com/css2?family=Inter:wght@200;400&display=swap\\\" rel=\\\"stylesheet\\\">\\n\"","module.exports = function() {\n  return new Worker(\"/\" + \"coffee-transpiler.6abe87e8.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"less-transpiler.74a88bd2.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"parcel-html-transpiler.e0273d5a.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"pug-transpiler.41006669.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"sass-transpiler.d0a9e805.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"stylus-transpiler.428164ba.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"svelte-transpiler.9ca0e0b3.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"typescript-transpiler.1585b49f.worker.js\");\n};","module.exports = BrowserFS.BFSRequire('fs');\n","\"use strict\";\n\n/**\n  This is a modified version of jsonlint lib.\n\n  It removes some of the native bindings to make\n  it safe to use in the browser.\n\n  Original: https://github.com/zaach/jsonlint/blob/master/lib/jsonlint.js\n*/\n\n/* Jison generated parser */\nvar jsonlint = function () {\n  var parser = {\n    trace: function trace() {},\n    yy: {},\n    symbols_: {\n      error: 2,\n      JSONString: 3,\n      STRING: 4,\n      JSONNumber: 5,\n      NUMBER: 6,\n      JSONNullLiteral: 7,\n      NULL: 8,\n      JSONBooleanLiteral: 9,\n      TRUE: 10,\n      FALSE: 11,\n      JSONText: 12,\n      JSONValue: 13,\n      EOF: 14,\n      JSONObject: 15,\n      JSONArray: 16,\n      '{': 17,\n      '}': 18,\n      JSONMemberList: 19,\n      JSONMember: 20,\n      ':': 21,\n      ',': 22,\n      '[': 23,\n      ']': 24,\n      JSONElementList: 25,\n      $accept: 0,\n      $end: 1\n    },\n    terminals_: {\n      2: 'error',\n      4: 'STRING',\n      6: 'NUMBER',\n      8: 'NULL',\n      10: 'TRUE',\n      11: 'FALSE',\n      14: 'EOF',\n      17: '{',\n      18: '}',\n      21: ':',\n      22: ',',\n      23: '[',\n      24: ']'\n    },\n    productions_: [0, [3, 1], [5, 1], [7, 1], [9, 1], [9, 1], [12, 2], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [15, 2], [15, 3], [20, 3], [19, 1], [19, 3], [16, 2], [16, 3], [25, 1], [25, 3]],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {\n      var $0 = $$.length - 1;\n      switch (yystate) {\n        case 1:\n          // replace escaped characters with actual character\n          this.$ = yytext.replace(/\\\\(\\\\|\")/g, '$' + '1').replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r').replace(/\\\\t/g, '\\t').replace(/\\\\v/g, '\\v').replace(/\\\\f/g, '\\f').replace(/\\\\b/g, '\\b');\n          break;\n        case 2:\n          this.$ = Number(yytext);\n          break;\n        case 3:\n          this.$ = null;\n          break;\n        case 4:\n          this.$ = true;\n          break;\n        case 5:\n          this.$ = false;\n          break;\n        case 6:\n          return this.$ = $$[$0 - 1];\n          break;\n        case 13:\n          this.$ = {};\n          break;\n        case 14:\n          this.$ = $$[$0 - 1];\n          break;\n        case 15:\n          this.$ = [$$[$0 - 2], $$[$0]];\n          break;\n        case 16:\n          this.$ = {};\n          this.$[$$[$0][0]] = $$[$0][1];\n          break;\n        case 17:\n          this.$ = $$[$0 - 2];\n          $$[$0 - 2][$$[$0][0]] = $$[$0][1];\n          break;\n        case 18:\n          this.$ = [];\n          break;\n        case 19:\n          this.$ = $$[$0 - 1];\n          break;\n        case 20:\n          this.$ = [$$[$0]];\n          break;\n        case 21:\n          this.$ = $$[$0 - 2];\n          $$[$0 - 2].push($$[$0]);\n          break;\n      }\n    },\n    table: [{\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      12: 1,\n      13: 2,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15]\n    }, {\n      1: [3]\n    }, {\n      14: [1, 16]\n    }, {\n      14: [2, 7],\n      18: [2, 7],\n      22: [2, 7],\n      24: [2, 7]\n    }, {\n      14: [2, 8],\n      18: [2, 8],\n      22: [2, 8],\n      24: [2, 8]\n    }, {\n      14: [2, 9],\n      18: [2, 9],\n      22: [2, 9],\n      24: [2, 9]\n    }, {\n      14: [2, 10],\n      18: [2, 10],\n      22: [2, 10],\n      24: [2, 10]\n    }, {\n      14: [2, 11],\n      18: [2, 11],\n      22: [2, 11],\n      24: [2, 11]\n    }, {\n      14: [2, 12],\n      18: [2, 12],\n      22: [2, 12],\n      24: [2, 12]\n    }, {\n      14: [2, 3],\n      18: [2, 3],\n      22: [2, 3],\n      24: [2, 3]\n    }, {\n      14: [2, 4],\n      18: [2, 4],\n      22: [2, 4],\n      24: [2, 4]\n    }, {\n      14: [2, 5],\n      18: [2, 5],\n      22: [2, 5],\n      24: [2, 5]\n    }, {\n      14: [2, 1],\n      18: [2, 1],\n      21: [2, 1],\n      22: [2, 1],\n      24: [2, 1]\n    }, {\n      14: [2, 2],\n      18: [2, 2],\n      22: [2, 2],\n      24: [2, 2]\n    }, {\n      3: 20,\n      4: [1, 12],\n      18: [1, 17],\n      19: 18,\n      20: 19\n    }, {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 23,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n      24: [1, 21],\n      25: 22\n    }, {\n      1: [2, 6]\n    }, {\n      14: [2, 13],\n      18: [2, 13],\n      22: [2, 13],\n      24: [2, 13]\n    }, {\n      18: [1, 24],\n      22: [1, 25]\n    }, {\n      18: [2, 16],\n      22: [2, 16]\n    }, {\n      21: [1, 26]\n    }, {\n      14: [2, 18],\n      18: [2, 18],\n      22: [2, 18],\n      24: [2, 18]\n    }, {\n      22: [1, 28],\n      24: [1, 27]\n    }, {\n      22: [2, 20],\n      24: [2, 20]\n    }, {\n      14: [2, 14],\n      18: [2, 14],\n      22: [2, 14],\n      24: [2, 14]\n    }, {\n      3: 20,\n      4: [1, 12],\n      20: 29\n    }, {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 30,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15]\n    }, {\n      14: [2, 19],\n      18: [2, 19],\n      22: [2, 19],\n      24: [2, 19]\n    }, {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 31,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15]\n    }, {\n      18: [2, 17],\n      22: [2, 17]\n    }, {\n      18: [2, 15],\n      22: [2, 15]\n    }, {\n      22: [2, 21],\n      24: [2, 21]\n    }],\n    defaultActions: {\n      16: [2, 6]\n    },\n    parseError: function parseError(str, hash) {\n      throw new Error(str);\n    },\n    parse: function parse(input) {\n      var self = this,\n        stack = [0],\n        vstack = [null],\n        // semantic value stack\n        lstack = [],\n        // location stack\n        table = this.table,\n        yytext = '',\n        yylineno = 0,\n        yyleng = 0,\n        recovering = 0,\n        TERROR = 2,\n        EOF = 1;\n\n      //this.reductionCount = this.shiftCount = 0;\n\n      this.lexer.setInput(input);\n      this.lexer.yy = this.yy;\n      this.yy.lexer = this.lexer;\n      if (typeof this.lexer.yylloc == 'undefined') this.lexer.yylloc = {};\n      var yyloc = this.lexer.yylloc;\n      lstack.push(yyloc);\n      if (typeof this.yy.parseError === 'function') this.parseError = this.yy.parseError;\n      function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n      }\n      function lex() {\n        var token;\n        token = self.lexer.lex() || 1; // $end = 1\n        // if token isn't its numeric value, convert\n        if (typeof token !== 'number') {\n          token = self.symbols_[token] || token;\n        }\n        return token;\n      }\n      var symbol,\n        preErrorSymbol,\n        state,\n        action,\n        a,\n        r,\n        yyval = {},\n        p,\n        len,\n        newState,\n        expected;\n      while (true) {\n        // retreive state number from top of stack\n        state = stack[stack.length - 1];\n\n        // use default actions if available\n        if (this.defaultActions[state]) {\n          action = this.defaultActions[state];\n        } else {\n          if (symbol == null) symbol = lex();\n          // read action for current state and first input\n          action = table[state] && table[state][symbol];\n        }\n\n        // handle parse error\n        _handle_error: if (typeof action === 'undefined' || !action.length || !action[0]) {\n          if (!recovering) {\n            // Report error\n            expected = [];\n            for (p in table[state]) {\n              if (this.terminals_[p] && p > 2) {\n                expected.push(\"'\" + this.terminals_[p] + \"'\");\n              }\n            }\n            var errStr = '';\n            if (this.lexer.showPosition) {\n              errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + this.lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + \", got '\" + this.terminals_[symbol] + \"'\";\n            } else {\n              errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == 1 /*EOF*/ ? 'end of input' : \"'\" + (this.terminals_[symbol] || symbol) + \"'\");\n            }\n            this.parseError(errStr, {\n              text: this.lexer.match,\n              token: this.terminals_[symbol] || symbol,\n              line: this.lexer.yylineno,\n              loc: yyloc,\n              expected: expected\n            });\n          }\n\n          // just recovered from another error\n          if (recovering == 3) {\n            if (symbol == EOF) {\n              throw new Error(errStr || 'Parsing halted.');\n            }\n\n            // discard current lookahead and grab another\n            yyleng = this.lexer.yyleng;\n            yytext = this.lexer.yytext;\n            yylineno = this.lexer.yylineno;\n            yyloc = this.lexer.yylloc;\n            symbol = lex();\n          }\n\n          // try to recover from error\n          while (1) {\n            // check for error recovery rule in this state\n            if (TERROR.toString() in table[state]) {\n              break;\n            }\n            if (state == 0) {\n              throw new Error(errStr || 'Parsing halted.');\n            }\n            popStack(1);\n            state = stack[stack.length - 1];\n          }\n          preErrorSymbol = symbol; // save the lookahead token\n          symbol = TERROR; // insert generic error symbol as new lookahead\n          state = stack[stack.length - 1];\n          action = table[state] && table[state][TERROR];\n          recovering = 3; // allow 3 real symbols to be shifted before reporting a new error\n        }\n\n        // this shouldn't happen, unless resolve defaults are off\n        if (action[0] instanceof Array && action.length > 1) {\n          throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n          case 1:\n            // shift\n            //this.shiftCount++;\n\n            stack.push(symbol);\n            vstack.push(this.lexer.yytext);\n            lstack.push(this.lexer.yylloc);\n            stack.push(action[1]); // push state\n            symbol = null;\n            if (!preErrorSymbol) {\n              // normal execution/no error\n              yyleng = this.lexer.yyleng;\n              yytext = this.lexer.yytext;\n              yylineno = this.lexer.yylineno;\n              yyloc = this.lexer.yylloc;\n              if (recovering > 0) recovering--;\n            } else {\n              // error just occurred, resume old lookahead f/ before error\n              symbol = preErrorSymbol;\n              preErrorSymbol = null;\n            }\n            break;\n          case 2:\n            // reduce\n            //this.reductionCount++;\n\n            len = this.productions_[action[1]][1];\n\n            // perform semantic action\n            yyval.$ = vstack[vstack.length - len]; // default to $$ = $1\n            // default location, uses first token for firsts, last for lasts\n            yyval._$ = {\n              first_line: lstack[lstack.length - (len || 1)].first_line,\n              last_line: lstack[lstack.length - 1].last_line,\n              first_column: lstack[lstack.length - (len || 1)].first_column,\n              last_column: lstack[lstack.length - 1].last_column\n            };\n            r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);\n            if (typeof r !== 'undefined') {\n              return r;\n            }\n\n            // pop off stack\n            if (len) {\n              stack = stack.slice(0, -1 * len * 2);\n              vstack = vstack.slice(0, -1 * len);\n              lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]); // push nonterminal (reduce)\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            // goto new state = table[STATE][NONTERMINAL]\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n          case 3:\n            // accept\n            return true;\n        }\n      }\n      return true;\n    }\n  };\n  /* Jison generated lexer */\n  var lexer = function () {\n    var lexer = {\n      EOF: 1,\n      parseError: function parseError(str, hash) {\n        if (this.yy.parseError) {\n          this.yy.parseError(str, hash);\n        } else {\n          throw new Error(str);\n        }\n      },\n      setInput: function setInput(input) {\n        this._input = input;\n        this._more = this._less = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n          first_line: 1,\n          first_column: 0,\n          last_line: 1,\n          last_column: 0\n        };\n        return this;\n      },\n      input: function input() {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/\\n/);\n        if (lines) this.yylineno++;\n        this._input = this._input.slice(1);\n        return ch;\n      },\n      unput: function unput(ch) {\n        this._input = ch + this._input;\n        return this;\n      },\n      more: function more() {\n        this._more = true;\n        return this;\n      },\n      less: function less(n) {\n        this._input = this.match.slice(n) + this._input;\n      },\n      pastInput: function pastInput() {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...' : '') + past.substr(-20).replace(/\\n/g, '');\n      },\n      upcomingInput: function upcomingInput() {\n        var next = this.match;\n        if (next.length < 20) {\n          next += this._input.substr(0, 20 - next.length);\n        }\n        return (next.substr(0, 20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, '');\n      },\n      showPosition: function showPosition() {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join('-');\n        return pre + this.upcomingInput() + '\\n' + c + '^';\n      },\n      next: function next() {\n        if (this.done) {\n          return this.EOF;\n        }\n        if (!this._input) this.done = true;\n        var token, match, tempMatch, index, col, lines;\n        if (!this._more) {\n          this.yytext = '';\n          this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n          tempMatch = this._input.match(this.rules[rules[i]]);\n          if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n            match = tempMatch;\n            index = i;\n            if (!this.options.flex) break;\n          }\n        }\n        if (match) {\n          lines = match[0].match(/\\n.*/g);\n          if (lines) this.yylineno += lines.length;\n          this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ? lines[lines.length - 1].length - 1 : this.yylloc.last_column + match[0].length\n          };\n          this.yytext += match[0];\n          this.match += match[0];\n          this.yyleng = this.yytext.length;\n          this._more = false;\n          this._input = this._input.slice(match[0].length);\n          this.matched += match[0];\n          token = this.performAction.call(this, this.yy, this, rules[index], this.conditionStack[this.conditionStack.length - 1]);\n          if (this.done && this._input) this.done = false;\n          if (token) return token;else return;\n        }\n        if (this._input === '') {\n          return this.EOF;\n        } else {\n          this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n            text: '',\n            token: null,\n            line: this.yylineno\n          });\n        }\n      },\n      lex: function lex() {\n        var r = this.next();\n        if (typeof r !== 'undefined') {\n          return r;\n        } else {\n          return this.lex();\n        }\n      },\n      begin: function begin(condition) {\n        this.conditionStack.push(condition);\n      },\n      popState: function popState() {\n        return this.conditionStack.pop();\n      },\n      _currentRules: function _currentRules() {\n        return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n      },\n      topState: function topState() {\n        return this.conditionStack[this.conditionStack.length - 2];\n      },\n      pushState: function begin(condition) {\n        this.begin(condition);\n      }\n    };\n    lexer.options = {};\n    lexer.performAction = function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {\n      var YYSTATE = YY_START;\n      switch ($avoiding_name_collisions) {\n        case 0 /* skip whitespace */:\n          break;\n        case 1:\n          return 6;\n          break;\n        case 2:\n          yy_.yytext = yy_.yytext.substr(1, yy_.yyleng - 2);\n          return 4;\n          break;\n        case 3:\n          return 17;\n          break;\n        case 4:\n          return 18;\n          break;\n        case 5:\n          return 23;\n          break;\n        case 6:\n          return 24;\n          break;\n        case 7:\n          return 22;\n          break;\n        case 8:\n          return 21;\n          break;\n        case 9:\n          return 10;\n          break;\n        case 10:\n          return 11;\n          break;\n        case 11:\n          return 8;\n          break;\n        case 12:\n          return 14;\n          break;\n        case 13:\n          return 'INVALID';\n          break;\n      }\n    };\n    lexer.rules = [/^(?:\\s+)/, /^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/, /^(?:\"(?:\\\\[\\\\\"bfnrt/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/, /^(?:\\{)/, /^(?:\\})/, /^(?:\\[)/, /^(?:\\])/, /^(?:,)/, /^(?::)/, /^(?:true\\b)/, /^(?:false\\b)/, /^(?:null\\b)/, /^(?:$)/, /^(?:.)/];\n    lexer.conditions = {\n      INITIAL: {\n        rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\n        inclusive: true\n      }\n    };\n    return lexer;\n  }();\n  parser.lexer = lexer;\n  return parser;\n}();\nexports.parser = jsonlint;\nexports.parse = function () {\n  return jsonlint.parse.apply(jsonlint, arguments);\n};","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction requirePolyfills() {\n    const promises = [];\n    if (typeof Error.captureStackTrace === 'undefined') {\n        promises.push(Promise.resolve().then(() => __importStar(require(/* webpackChunkName: 'error-polyfill' */ 'error-polyfill'))));\n    }\n    return Promise.all(promises);\n}\nexports.default = requirePolyfills;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    printWidth: 80,\n    tabWidth: 2,\n    useTabs: false,\n    semi: true,\n    singleQuote: false,\n    trailingComma: 'none',\n    bracketSpacing: true,\n    jsxBracketSameLine: false,\n};\n","\"use strict\";\n// In production, we register a service worker to serve assets from local cache.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unregister = void 0;\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\nconst isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\nconst isHttp = Boolean(window.location.protocol === 'http:');\nfunction register(swUrl, opts = {}) {\n    if ('serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        // @ts-ignore\n        const publicUrl = new URL(process.env.PUBLIC_URL || '/', window.location);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n        // window.addEventListener('load', () => {\n        if (!isLocalhost && !isHttp) {\n            // It's neither localhost nor http. Just register service worker\n            registerValidSW(swUrl, opts);\n        }\n        else if (isLocalhost) {\n            // This is running on localhost. Lets check if a service worker still exists or not.\n            checkValidServiceWorker(swUrl, opts);\n        }\n    }\n}\nexports.default = register;\nfunction registerValidSW(swUrl, { onUpdated, onInstalled } = {}) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n        registration.onupdatefound = () => {\n            const installingWorker = registration.installing;\n            installingWorker.onstatechange = () => {\n                if (installingWorker.state === 'installed') {\n                    if (navigator.serviceWorker.controller) {\n                        // At this point, the old content will have been purged and\n                        // the fresh content will have been added to the cache.\n                        // It's the perfect time to display a \"New content is\n                        // available; please refresh.\" message in your web app.\n                        if (onUpdated) {\n                            onUpdated();\n                        }\n                    }\n                    else if (onInstalled) {\n                        // At this point, everything has been precached.\n                        // It's the perfect time to display a\n                        // \"Content is cached for offline use.\" message.\n                        onInstalled();\n                    }\n                }\n                else if (installingWorker.state === 'redundant') {\n                    if ('storage' in navigator && 'estimate' in navigator.storage) {\n                        navigator.storage.estimate().then(results => {\n                            const percentUsed = results.usage / results.quota;\n                            // Let's assume that if we're using 95% of our quota, then this failure\n                            // was due to quota exceeded errors.\n                            // TODO: Hardcoding a threshold stinks.\n                            if (percentUsed >= 0.95) {\n                                // Get rid of the existing SW so that we're not stuck\n                                // with the previously cached content.\n                                registration.unregister();\n                                // Let's assume that we have some way of doing this without inadvertantly\n                                // blowing away storage being used on the origin by something other than\n                                // our service worker.\n                                // I don't think that the Clear-Site-Data: header helps here, unfortunately.\n                                self.caches.keys().then(names => {\n                                    names.forEach(name => {\n                                        self.caches.delete(name);\n                                    });\n                                });\n                                // TODO clear indexeddb\n                            }\n                        });\n                    }\n                    else {\n                        // What about browsers that don't support navigator.storage.estimate()?\n                        // There's no way of guessing why the service worker is redundant.\n                    }\n                }\n            };\n        };\n    })\n        .catch(error => {\n        console.error('Error during service worker registration:', error);\n    });\n}\nfunction checkValidServiceWorker(swUrl, { onUpdated, onInstalled }) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        if (response.status === 404 ||\n            response.headers.get('content-type').indexOf('javascript') === -1) {\n            // No service worker found. Probably a different app. Reload the page.\n            navigator.serviceWorker.ready.then(registration => {\n                registration.unregister().then(() => {\n                    window.location.reload();\n                });\n            });\n        }\n        else {\n            // Service worker found. Proceed as normal.\n            registerValidSW(swUrl, { onUpdated, onInstalled });\n        }\n    })\n        .catch(e => {\n        // eslint-disable-next-line no-console\n        console.log('No internet connection found. App is running in offline mode.', e);\n    });\n}\nfunction unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\nexports.unregister = unregister;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inDirectory = exports.resolveDirectoryWrapped = exports.resolveModuleWrapped = exports.findCurrentModule = exports.findMainModule = exports.isMainModule = exports.getChildren = exports.getDirectoryPath = exports.getModulePath = exports.resolveModule = exports.getModulesInDirectory = exports.getModulesAndDirectoriesInDirectory = exports.resolveDirectory = void 0;\nconst memoize_1 = __importDefault(require(\"lodash/memoize\"));\nconst templates_1 = __importDefault(require(\"../templates\"));\nconst parse_1 = __importDefault(require(\"../templates/configuration/parse\"));\nconst compareTitle = (original, test, ignoredExtensions) => {\n    if (original === test)\n        return true;\n    return ignoredExtensions.some(ext => original === `${test}.${ext}`);\n};\nconst throwError = (path) => {\n    throw new Error(`Cannot find module in ${path}`);\n};\nfunction resolveDirectory(_path, modules, directories, _startdirectoryShortid = undefined) {\n    if (!_path) {\n        return throwError('');\n    }\n    let path = _path;\n    let startdirectoryShortid = _startdirectoryShortid;\n    // If paths start with {{sandboxRoot}} we see them as root paths\n    if (path.startsWith('{{sandboxRoot}}')) {\n        startdirectoryShortid = undefined;\n        path = _path.replace('{{sandboxRoot}}/', './');\n    }\n    // Split path\n    const splitPath = path.replace(/^.\\//, '').split('/').filter(Boolean);\n    const foundDirectoryShortid = splitPath.reduce((dirId, pathPart, i) => {\n        // Meaning this is the last argument, so the directory\n        if (i === splitPath.length) {\n            return dirId;\n        }\n        if (pathPart === '..') {\n            // Find the parent\n            const dir = directories.find(d => d.shortid === dirId);\n            if (dir == null)\n                throwError(path);\n            return dir.directoryShortid;\n        }\n        const directoriesInDirectory = directories.filter(\n        // eslint-disable-next-line eqeqeq\n        m => m.directoryShortid == dirId);\n        const nextDirectory = directoriesInDirectory.find(d => compareTitle(d.title, pathPart, []));\n        if (nextDirectory == null)\n            throwError(path);\n        return nextDirectory.shortid;\n    }, startdirectoryShortid);\n    return directories.find(d => d.shortid === foundDirectoryShortid);\n}\nexports.resolveDirectory = resolveDirectory;\nfunction getModulesAndDirectoriesInDirectory(directory, modules, directories) {\n    const { path } = directory;\n    const parentPath = `${path}/`;\n    return {\n        removedModules: modules.filter(moduleItem => moduleItem.path.startsWith(parentPath)),\n        removedDirectories: directories.filter(directoryItem => directoryItem.path.startsWith(parentPath) && directoryItem !== directory),\n    };\n}\nexports.getModulesAndDirectoriesInDirectory = getModulesAndDirectoriesInDirectory;\nfunction getModulesInDirectory(_path, modules, directories, _startdirectoryShortid = undefined) {\n    if (!_path)\n        return throwError('');\n    let path = _path;\n    // If paths start with {{sandboxRoot}} we see them as root paths\n    if (path.startsWith('{{sandboxRoot}}')) {\n        path = _path.replace('{{sandboxRoot}}/', './');\n    }\n    // Split path\n    const splitPath = path.replace(/^.\\//, '').split('/').filter(Boolean);\n    const dirPath = path.replace(/^.\\//, '').split('/').filter(Boolean);\n    dirPath.pop();\n    const dir = resolveDirectory(dirPath.join('/') || '/', modules, directories, _startdirectoryShortid);\n    const foundDirectoryShortid = dir ? dir.shortid : null;\n    const lastPath = splitPath[splitPath.length - 1];\n    const modulesInFoundDirectory = modules.filter(\n    // eslint-disable-next-line eqeqeq\n    m => m.directoryShortid == foundDirectoryShortid);\n    return {\n        modules: modulesInFoundDirectory,\n        foundDirectoryShortid,\n        lastPath,\n        splitPath,\n    };\n}\nexports.getModulesInDirectory = getModulesInDirectory;\n/**\n * Convert the module path to a module\n */\nconst resolveModule = (path, modules, directories, startdirectoryShortid = undefined, ignoredExtensions = ['js', 'jsx', 'json']) => {\n    const { modules: modulesInFoundDirectory, lastPath, splitPath, foundDirectoryShortid, } = getModulesInDirectory(path, modules, directories, startdirectoryShortid);\n    // Find module with same name\n    const foundModule = modulesInFoundDirectory.find(m => compareTitle(m.title, lastPath, ignoredExtensions));\n    if (foundModule)\n        return foundModule;\n    // Check all directories in said directory for same name\n    const directoriesInFoundDirectory = directories.filter(\n    // eslint-disable-next-line eqeqeq\n    m => m.directoryShortid == foundDirectoryShortid);\n    const foundDirectory = directoriesInFoundDirectory.find(m => compareTitle(m.title, lastPath, ignoredExtensions));\n    // If it refers to a directory\n    if (foundDirectory) {\n        // Find module named index\n        const indexModule = modules.find(m => \n        // eslint-disable-next-line eqeqeq\n        m.directoryShortid == foundDirectory.shortid &&\n            compareTitle(m.title, 'index', ignoredExtensions));\n        if (indexModule == null)\n            throwError(path);\n        return indexModule;\n    }\n    if (splitPath[splitPath.length - 1] === '') {\n        // Last resort, check if there is something in the same folder called index\n        const indexModule = modulesInFoundDirectory.find(m => compareTitle(m.title, 'index', ignoredExtensions));\n        if (indexModule)\n            return indexModule;\n    }\n    return throwError(path);\n};\nexports.resolveModule = resolveModule;\nfunction findById(entities, id) {\n    return entities.find(e => e.id === id);\n}\nfunction findByShortid(entities, shortid) {\n    return entities.find(e => e.shortid === shortid);\n}\nconst getPath = (arrayToLookIn, modules, directories, id) => {\n    const module = findById(arrayToLookIn, id);\n    if (!module)\n        return '';\n    let directory = findByShortid(directories, module.directoryShortid);\n    let path = '/';\n    if (directory == null && module.directoryShortid) {\n        // Parent got deleted, return '';\n        return '';\n    }\n    while (directory != null) {\n        path = `/${directory.title}${path}`;\n        const lastDirectoryShortid = directory.directoryShortid;\n        directory = findByShortid(directories, directory.directoryShortid);\n        // In this case it couldn't find the parent directory of this dir, so probably\n        // deleted. we just return '' in that case\n        if (!directory && lastDirectoryShortid) {\n            return '';\n        }\n    }\n    return `${path}${module.title}`;\n};\nconst memoizeFunction = (modules, directories, id) => id +\n    modules.map(m => m.id + m.title + m.directoryShortid).join(',') +\n    directories.map(d => d.id + d.title + d.directoryShortid).join(',');\nconst getModulePath = (modules, directories, id) => getPath(modules, modules, directories, id);\nexports.getModulePath = getModulePath;\nconst getDirectoryPath = (modules, directories, id) => getPath(directories, modules, directories, id);\nexports.getDirectoryPath = getDirectoryPath;\nexports.getChildren = (0, memoize_1.default)((modules = [], directories = [], id) => [\n    ...directories.filter(d => d.directoryShortid === id),\n    ...modules.filter(m => m.directoryShortid === id),\n], memoizeFunction);\nconst isMainModule = (module, modules, directories, entry = 'index.js') => {\n    const path = (0, exports.getModulePath)(modules, directories, module.id);\n    return path.replace('/', '') === entry;\n};\nexports.isMainModule = isMainModule;\nconst findMainModule = (sandbox) => {\n    const resolve = (0, exports.resolveModuleWrapped)(sandbox);\n    // first attempt: try loading the first file that exists from\n    // the list of possible defaults in the template defination\n    const templateDefinition = (0, templates_1.default)(sandbox.template);\n    const parsedConfigs = (0, parse_1.default)(sandbox.template, templateDefinition.configurationFiles, resolve, sandbox);\n    const defaultOpenedFiles = templateDefinition.getDefaultOpenedFiles(parsedConfigs);\n    const defaultOpenModule = defaultOpenedFiles\n        .map(path => resolve(path))\n        .find(module => Boolean(module));\n    if (defaultOpenModule) {\n        return defaultOpenModule;\n    }\n    // second attempt: try loading the entry file if it exists\n    const entryModule = resolve(sandbox.entry);\n    if (entryModule) {\n        return entryModule;\n    }\n    // third attempt: give up and load the first file in the list\n    return sandbox.modules[0];\n};\nexports.findMainModule = findMainModule;\nconst findCurrentModule = (modules, directories, modulePath = '', mainModule) => {\n    // cleanPath, encode and replace first /\n    const cleanPath = decodeURIComponent(modulePath).replace('/', '');\n    let foundModule = null;\n    try {\n        foundModule = (0, exports.resolveModule)(cleanPath, modules, directories);\n    }\n    catch (e) {\n        /* leave empty */\n    }\n    return (foundModule ||\n        modules.find(m => m.id === modulePath) ||\n        modules.find(m => m.shortid === modulePath) || // deep-links requires this\n        mainModule);\n};\nexports.findCurrentModule = findCurrentModule;\nconst resolveModuleWrapped = sandbox => (path) => {\n    try {\n        return (0, exports.resolveModule)(path, sandbox.modules, sandbox.directories);\n    }\n    catch (e) {\n        return undefined;\n    }\n};\nexports.resolveModuleWrapped = resolveModuleWrapped;\nconst resolveDirectoryWrapped = sandbox => (path) => {\n    try {\n        return resolveDirectory(path, sandbox.modules, sandbox.directories);\n    }\n    catch (e) {\n        return undefined;\n    }\n};\nexports.resolveDirectoryWrapped = resolveDirectoryWrapped;\nconst inDirectoryMemoize = (directories, sourceShortid, destinationShortid) => sourceShortid +\n    destinationShortid +\n    directories.map(d => d.id + d.title + d.directoryShortid).join(',');\nexports.inDirectory = (0, memoize_1.default)((directories, rootShortid, shortid) => {\n    let directory = findByShortid(directories, shortid);\n    while (directory) {\n        if (directory.directoryShortid === rootShortid) {\n            return true;\n        }\n        directory = findByShortid(directories, directory.directoryShortid);\n    }\n    return false;\n}, inDirectoryMemoize);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('adonis', 'AdonisJs', 'https://adonisjs.com/', 'github/adonisjs/adonis-starter-codesandbox', (0, decorate_selector_1.decorateSelector)(() => '#fff'), {\n    mainFile: ['/start/routes.js'],\n    showOnHomePage: true,\n    staticDeployment: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path_1 = require(\"../utils/path\");\nconst template_1 = __importDefault(require(\"./template\"));\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nfunction getAngularCLIEntries(parsed) {\n    const entries = [];\n    if (parsed) {\n        const app = parsed.apps && parsed.apps[0];\n        if (app && app.root && app.main) {\n            entries.push((0, path_1.absolute)((0, path_1.join)(app.root, app.main)));\n        }\n    }\n    return entries;\n}\nfunction getAngularJSONEntries(parsed) {\n    const entries = [];\n    if (parsed) {\n        const { defaultProject } = parsed;\n        const project = parsed.projects[defaultProject];\n        if (project && project.architect) {\n            const { build } = project.architect;\n            if (build.options.main) {\n                entries.push((0, path_1.absolute)((0, path_1.join)(project.root, build.options.main)));\n            }\n        }\n    }\n    return entries;\n}\nfunction getAngularCLIHTMLEntry(parsed) {\n    if (parsed) {\n        const app = parsed.apps && parsed.apps[0];\n        if (app && app.root && app.index) {\n            return [(0, path_1.absolute)((0, path_1.join)(app.root, app.index))];\n        }\n    }\n    return [];\n}\nfunction getAngularJSONHTMLEntry(parsed) {\n    if (parsed) {\n        const { defaultProject } = parsed;\n        const project = parsed.projects[defaultProject];\n        if (project && project.architect) {\n            const { build } = project.architect;\n            if (build &&\n                project.root != null &&\n                build.options &&\n                build.options.index) {\n                return [(0, path_1.absolute)((0, path_1.join)(project.root, build.options.index))];\n            }\n        }\n    }\n    return [];\n}\nclass AngularTemplate extends template_1.default {\n    /**\n     * Override entry file because of angular-cli\n     */\n    getEntries(configurationFiles) {\n        let entries = [];\n        try {\n            if (!configurationFiles['angular-config'].generated) {\n                const { parsed } = configurationFiles['angular-config'];\n                entries = entries.concat(getAngularJSONEntries(parsed));\n            }\n            else {\n                const { parsed } = configurationFiles['angular-cli'];\n                entries = entries.concat(getAngularCLIEntries(parsed));\n            }\n        }\n        catch (e) {\n            console.warn(`${configurationFiles['angular-config'].path} is malformed: ${e.message}`);\n        }\n        if (configurationFiles.package.parsed &&\n            configurationFiles.package.parsed.main) {\n            entries.push((0, path_1.absolute)(configurationFiles.package.parsed.main));\n        }\n        entries.push('/src/main.ts');\n        entries.push('/main.ts');\n        return entries;\n    }\n    getHTMLEntries(configurationFiles) {\n        let entries = [];\n        if (!configurationFiles['angular-config'].generated) {\n            const { parsed } = configurationFiles['angular-config'];\n            entries = entries.concat(getAngularJSONHTMLEntry(parsed));\n        }\n        else if (configurationFiles['angular-cli']) {\n            const { parsed } = configurationFiles['angular-cli'];\n            entries = entries.concat(getAngularCLIHTMLEntry(parsed));\n        }\n        entries.push('/public/index.html');\n        entries.push('/index.html');\n        return entries;\n    }\n}\nexports.default = new AngularTemplate('angular-cli', 'Angular', 'https://github.com/angular/angular', 'angular', (0, decorate_selector_1.decorateSelector)(() => '#DD0031'), {\n    extraConfigurations: {\n        '/.angular-cli.json': configuration_1.default.angularCli,\n        '/angular.json': configuration_1.default.angularJSON,\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n    staticDeployment: false,\n    isTypescript: true,\n    distDir: 'dist',\n    showOnHomePage: true,\n    popular: true,\n    main: true,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('apollo', 'Apollo', 'https://www.apollographql.com/docs/apollo-server/', 'apollo-server', (0, decorate_selector_1.decorateSelector)(() => '#c4198b'), {\n    staticDeployment: false,\n    mainFile: ['/src/index.js'],\n    showOnHomePage: true,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nexports.default = new template_1.default('babel-repl', 'Babel', 'https://github.com/@babel/core', 'babel', (0, decorate_selector_1.decorateSelector)(() => '#F5DA55'), {\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n        '/babel-transpiler.json': configuration_1.default.babelTranspiler,\n    },\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config = {\n    title: '.angular-cli.json',\n    type: 'angular-cli',\n    description: 'The configuration used for angular-cli, the cli to run angular projects.',\n    moreInfoUrl: 'https://github.com/angular/angular-cli/wiki/angular-cli',\n    getDefaultCode: () => JSON.stringify({\n        apps: [\n            {\n                root: 'src',\n                outDir: 'dist',\n                index: 'index.html',\n                main: 'main.ts',\n                polyfills: 'polyfills.ts',\n                styles: [],\n                scripts: [],\n            },\n        ],\n    }, null, 2),\n    schema: 'https://raw.githubusercontent.com/angular/angular-cli/master/packages/@angular/cli/lib/config/schema.json',\n};\nexports.default = config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config = {\n    title: 'angular.json',\n    type: 'angular-config',\n    description: 'The configuration used for angular-cli v6, the new cli to run angular projects.',\n    moreInfoUrl: 'https://github.com/angular/angular-cli/wiki/angular-cli',\n    partialSupportDisclaimer: `Only \\`project.build\\` field is supported.`,\n    getDefaultCode: () => JSON.stringify({\n        version: 1,\n        newProjectRoot: 'projects',\n        projects: {\n            codesandbox: {\n                root: '',\n                sourceRoot: 'src',\n                projectType: 'application',\n                prefix: 'app',\n                schematics: {},\n                architect: {\n                    build: {\n                        builder: '@angular-devkit/build-angular:browser',\n                        options: {\n                            outputPath: 'dist/codesandbox',\n                            index: 'src/index.html',\n                            main: 'src/main.ts',\n                            polyfills: 'src/polyfills.ts',\n                            tsConfig: 'src/tsconfig.app.json',\n                            assets: ['src/favicon.png', 'src/assets'],\n                            styles: ['src/styles.css'],\n                            scripts: [],\n                        },\n                        configurations: {\n                            production: {\n                                fileReplacements: [\n                                    {\n                                        replace: 'src/environments/environment.ts',\n                                        with: 'src/environments/environment.prod.ts',\n                                    },\n                                ],\n                                optimization: true,\n                                outputHashing: 'all',\n                                sourceMap: false,\n                                extractCss: true,\n                                namedChunks: false,\n                                aot: true,\n                                extractLicenses: true,\n                                vendorChunk: false,\n                                buildOptimizer: true,\n                            },\n                        },\n                    },\n                    serve: {\n                        builder: '@angular-devkit/build-angular:dev-server',\n                        options: {\n                            browserTarget: 'codesandbox:build',\n                        },\n                        configurations: {\n                            production: {\n                                browserTarget: 'codesandbox:build:production',\n                            },\n                        },\n                    },\n                    'extract-i18n': {\n                        builder: '@angular-devkit/build-angular:extract-i18n',\n                        options: {\n                            browserTarget: 'codesandbox:build',\n                        },\n                    },\n                    test: {\n                        builder: '@angular-devkit/build-angular:karma',\n                        options: {\n                            main: 'src/test.ts',\n                            polyfills: 'src/polyfills.ts',\n                            tsConfig: 'src/tsconfig.spec.json',\n                            karmaConfig: 'src/karma.conf.js',\n                            styles: ['src/styles.css'],\n                            scripts: [],\n                            assets: ['src/favicon.png', 'src/assets'],\n                        },\n                    },\n                    lint: {\n                        builder: '@angular-devkit/build-angular:tslint',\n                        options: {\n                            tsConfig: ['src/tsconfig.app.json', 'src/tsconfig.spec.json'],\n                            exclude: ['**/node_modules/**'],\n                        },\n                    },\n                },\n            },\n            'codesandbox-e2e': {\n                root: 'e2e/',\n                projectType: 'application',\n                architect: {\n                    e2e: {\n                        builder: '@angular-devkit/build-angular:protractor',\n                        options: {\n                            protractorConfig: 'e2e/protractor.conf.js',\n                            devServerTarget: 'codesandbox:serve',\n                        },\n                        configurations: {\n                            production: {\n                                devServerTarget: 'codesandbox:serve:production',\n                            },\n                        },\n                    },\n                    lint: {\n                        builder: '@angular-devkit/build-angular:tslint',\n                        options: {\n                            tsConfig: 'e2e/tsconfig.e2e.json',\n                            exclude: ['**/node_modules/**'],\n                        },\n                    },\n                },\n            },\n        },\n        defaultProject: 'codesandbox',\n    }, null, 2),\n    schema: 'https://raw.githubusercontent.com/angular/angular-cli/master/packages/angular/cli/lib/config/schema.json',\n};\nexports.default = config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config = {\n    title: 'babel-transpiler.json',\n    type: 'babelTranspiler',\n    description: 'Configuration for the Babel REPL.',\n    moreInfoUrl: 'https://eslint.org/docs/user-guide/configuring',\n    getDefaultCode: () => '{}',\n};\nexports.default = config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst is_babel_7_1 = require(\"../../../utils/is-babel-7\");\nconst is_preact_10_1 = require(\"../../../utils/is-preact-10\");\nconst JSX_PRAGMA = {\n    react: 'React.createElement',\n    preact: 'h',\n};\nconst config = {\n    title: '.babelrc',\n    type: 'babel',\n    description: 'Custom configuration for Babel, the transpiler we use.',\n    moreInfoUrl: 'https://babeljs.io/docs/usage/babelrc/',\n    getDefaultCode: (template, resolveModule) => {\n        let isV7 = false;\n        let isPreactV10 = false;\n        try {\n            const packageJSON = resolveModule('/package.json');\n            const parsed = JSON.parse(packageJSON.code || '');\n            isV7 = (0, is_babel_7_1.isBabel7)(parsed.dependencies, parsed.devDependencies);\n            isPreactV10 = (0, is_preact_10_1.isPreact10)(parsed.dependencies, parsed.devDependencies);\n        }\n        catch (e) {\n            console.error(e);\n        }\n        if (template === 'preact-cli') {\n            if (isPreactV10) {\n                return JSON.stringify({\n                    presets: ['env', 'typescript'],\n                    plugins: [\n                        'syntax-dynamic-import',\n                        'transform-object-assign',\n                        ['proposal-decorators', { legacy: true }],\n                        ['proposal-class-properties', { loose: true }],\n                        'proposal-object-rest-spread',\n                        'babel-plugin-macros',\n                        ['transform-react-jsx', { pragma: 'h', pragmaFrag: 'Fragment' }],\n                        [\n                            'jsx-pragmatic',\n                            {\n                                module: 'preact',\n                                export: 'h',\n                                import: 'h',\n                            },\n                        ],\n                    ],\n                }, null, 2);\n            }\n            return JSON.stringify({\n                presets: ['latest', 'stage-1'],\n                plugins: [\n                    'transform-object-assign',\n                    'transform-decorators-legacy',\n                    ['transform-react-jsx', { pragma: 'h' }],\n                    [\n                        'jsx-pragmatic',\n                        {\n                            module: 'preact',\n                            export: 'h',\n                            import: 'h',\n                        },\n                    ],\n                ],\n            }, null, 2);\n        }\n        if (template === 'vue-cli') {\n            // TODO remove this\n            /**\n             * This hacky fix got added for vue cli templates that are v3, but don't have a config.\n             *\n             * We correctly detect v3 templates, so start using babel 7, but they don't work with the old version of babel config. We need to create a new one.\n             *\n             * Need to fix this ASAP and make vue-cli 3 a separate template.\n             */\n            if (isV7) {\n                return JSON.stringify({\n                    presets: [\n                        [\n                            'env',\n                            {\n                                modules: false,\n                                targets: {\n                                    browsers: ['>0.25%', 'not ie 11', 'not op_mini all'],\n                                },\n                            },\n                        ],\n                    ],\n                    plugins: [\n                        '@vue/babel-plugin-jsx',\n                        '@babel/plugin-syntax-dynamic-import',\n                        [\n                            '@babel/plugin-proposal-decorators',\n                            {\n                                decoratorsBeforeExport: false,\n                                legacy: false,\n                            },\n                        ],\n                        [\n                            '@babel/plugin-proposal-class-properties',\n                            {\n                                loose: false,\n                            },\n                        ],\n                    ],\n                });\n            }\n            return JSON.stringify({\n                presets: [\n                    [\n                        'env',\n                        {\n                            modules: false,\n                            targets: {\n                                browsers: ['> 1%', 'last 2 versions', 'not ie <= 8'],\n                            },\n                        },\n                    ],\n                    'stage-2',\n                ],\n                plugins: ['transform-vue-jsx', 'transform-runtime'],\n                env: {\n                    test: {\n                        presets: ['env', 'stage-2'],\n                        plugins: [\n                            'transform-vue-jsx',\n                            'transform-es2015-modules-commonjs',\n                            'dynamic-import-node',\n                        ],\n                    },\n                },\n            }, null, 2);\n        }\n        if (template === 'parcel') {\n            const presets = ['env'];\n            const plugins = isV7\n                ? ['transform-runtime']\n                : [\n                    [\n                        'transform-runtime',\n                        {\n                            polyfill: false,\n                            regenerator: true,\n                        },\n                    ],\n                    'transform-object-rest-spread',\n                ];\n            const parserOpts = isV7 ? { plugins: ['dynamicImport'] } : {};\n            const packageJSONModule = resolveModule('/package.json');\n            if (packageJSONModule) {\n                try {\n                    const parsed = JSON.parse(packageJSONModule.code);\n                    let pragma = null;\n                    Object.keys(JSX_PRAGMA).forEach(dep => {\n                        if ((parsed.dependencies && parsed.dependencies[dep]) ||\n                            (parsed.devDependencies && parsed.devDependencies[dep])) {\n                            pragma = JSX_PRAGMA[dep];\n                        }\n                    });\n                    if (pragma !== null) {\n                        // @ts-ignore\n                        plugins.push(['transform-react-jsx', { pragma }]);\n                    }\n                }\n                catch (e) {\n                    /* do nothing */\n                }\n            }\n            return JSON.stringify({ presets, plugins, parserOpts }, null, 2);\n        }\n        if (template === 'cxjs') {\n            if (isV7) {\n                return JSON.stringify({\n                    presets: ['env'],\n                    plugins: [\n                        '@babel/plugin-proposal-class-properties',\n                        '@babel/plugin-proposal-object-rest-spread',\n                        '@babel/plugin-proposal-function-bind',\n                        'transform-cx-jsx',\n                        '@babel/plugin-transform-parameters',\n                        '@babel/plugin-syntax-dynamic-import',\n                        [\n                            '@babel/plugin-transform-react-jsx',\n                            { pragma: 'VDOM.createElement' },\n                        ],\n                    ],\n                }, null, 2);\n            }\n            return JSON.stringify({\n                presets: [\n                    [\n                        'env',\n                        {\n                            targets: {\n                                chrome: 50,\n                                ie: 11,\n                                ff: 30,\n                                edge: 12,\n                                safari: 9,\n                            },\n                            modules: false,\n                            loose: true,\n                            useBuiltIns: true,\n                        },\n                    ],\n                    'stage-2',\n                ],\n                plugins: [\n                    ['transform-cx-jsx'],\n                    ['transform-react-jsx', { pragma: 'VDOM.createElement' }],\n                    'transform-function-bind',\n                    'transform-runtime',\n                    'transform-regenerator',\n                ],\n            }, null, 2);\n        }\n        if (template === 'solid') {\n            return JSON.stringify({\n                presets: ['env', 'typescript', 'babel-preset-solid'],\n                plugins: [\n                    '@babel/plugin-syntax-dynamic-import',\n                    'solid-refresh/babel',\n                ],\n            }, null, 2);\n        }\n        return JSON.stringify({ presets: [], plugins: [] }, null, 2);\n    },\n    schema: 'https://raw.githubusercontent.com/SchemaStore/schemastore/master/src/schemas/json/babelrc.json',\n};\nexports.default = config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config = {\n    title: 'template.json',\n    type: 'customTemplate',\n    description: 'Configuration for the custom template',\n    moreInfoUrl: 'https://codesandbox.io',\n    getDefaultCode: () => JSON.stringify({\n        templateName: 'custom',\n        templateColor: '#aaa',\n        sandpack: {\n            defaultExtensions: ['js', 'jsx', 'ts', 'tsx', 'json'],\n            aliases: {},\n            transpilers: {\n                '\\\\.jsx?$': ['codesandbox:babel'],\n                '\\\\.json$': ['codesandbox:json'],\n            },\n        },\n    }, null, 2),\n};\nexports.default = config;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst package_json_1 = __importDefault(require(\"./package-json\"));\nconst prettierRC_1 = __importDefault(require(\"./prettierRC\"));\nconst sandbox_1 = __importDefault(require(\"./sandbox\"));\nconst babelrc_1 = __importDefault(require(\"./babelrc\"));\nconst now_1 = __importDefault(require(\"./now\"));\nconst netlify_1 = __importDefault(require(\"./netlify\"));\nconst angular_cli_1 = __importDefault(require(\"./angular-cli\"));\nconst angular_json_1 = __importDefault(require(\"./angular-json\"));\nconst tsconfig_1 = __importDefault(require(\"./tsconfig\"));\nconst jsconfig_1 = __importDefault(require(\"./jsconfig\"));\nconst babel_transpiler_1 = __importDefault(require(\"./babel-transpiler\"));\nconst custom_codesandbox_1 = __importDefault(require(\"./custom-codesandbox\"));\nconst configs = {\n    babelrc: babelrc_1.default,\n    babelTranspiler: babel_transpiler_1.default,\n    packageJSON: package_json_1.default,\n    prettierRC: prettierRC_1.default,\n    sandboxConfig: sandbox_1.default,\n    angularCli: angular_cli_1.default,\n    angularJSON: angular_json_1.default,\n    tsconfig: tsconfig_1.default,\n    customCodeSandbox: custom_codesandbox_1.default,\n    nowConfig: now_1.default,\n    netlifyConfig: netlify_1.default,\n    jsconfig: jsconfig_1.default,\n};\nexports.default = configs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config = {\n    title: 'jsconfig.json',\n    type: 'jsconfig',\n    description: 'Configuration for how the editor (and sometimes the bundler) reads and parses JavaScript.',\n    moreInfoUrl: 'https://code.visualstudio.com/docs/languages/jsconfig',\n    getDefaultCode: (template, resolveModule) => JSON.stringify({ compilerOptions: { baseUrl: '.' } }, null, 2),\n    schema: 'https://raw.githubusercontent.com/SchemaStore/schemastore/master/src/schemas/json/jsconfig.json',\n    partialSupportDisclaimer: `Only \\`compilerOptions.baseUrl\\` field is supported.`,\n};\nexports.default = config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config = {\n    title: 'netlify.toml',\n    type: 'netlify',\n    description: 'Configuration for your deployments in netlify.',\n    moreInfoUrl: 'https://www.netlify.com/docs/netlify-toml-reference/',\n    getDefaultCode: () => '',\n};\nexports.default = config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config = {\n    title: 'vercel.json',\n    type: 'now',\n    description: 'Configuration for your deployments on Vercel.',\n    moreInfoUrl: 'https://vercel.com/docs/configuration#introduction/configuration-reference',\n    getDefaultCode: () => JSON.stringify({}, null, 2),\n};\nexports.default = config;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateFileFromSandbox = void 0;\nconst slugify_1 = __importDefault(require(\"../../../utils/slugify\"));\nfunction generateFileFromSandbox(sandbox) {\n    const jsonFile = {\n        name: (0, slugify_1.default)(sandbox.title || sandbox.id),\n        version: '1.0.0',\n        description: sandbox.description || '',\n        keywords: sandbox.tags,\n        main: sandbox.entry,\n        dependencies: sandbox.npmDependencies,\n    };\n    return JSON.stringify(jsonFile, null, 2);\n}\nexports.generateFileFromSandbox = generateFileFromSandbox;\nconst config = {\n    title: 'package.json',\n    type: 'package',\n    description: 'Describes the overall configuration of your project.',\n    moreInfoUrl: 'https://docs.npmjs.com/files/package.json',\n    generateFileFromSandbox,\n    schema: 'https://raw.githubusercontent.com/SchemaStore/schemastore/master/src/schemas/json/package.json',\n};\nexports.default = config;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst markty_toml_1 = __importDefault(require(\"markty-toml\"));\nconst jsonlint_browser_1 = require(\"../../forked-vendors/jsonlint.browser\");\nfunction stripJSONComments(jsonString) {\n    return jsonString.replace(/\\\\\"|\"(?:\\\\\"|[^\"])*\"|(\\/\\/.*|\\/\\*[\\s\\S]*?\\*\\/)/g, (m, g) => (g ? '' : m));\n}\nfunction getCode(template, module, sandbox, resolveModule, configurationFile) {\n    if (module) {\n        return { code: module.code, generated: false };\n    }\n    if (configurationFile.getDefaultCode) {\n        return {\n            code: configurationFile.getDefaultCode(template, resolveModule),\n            generated: true,\n        };\n    }\n    if (sandbox && configurationFile.generateFileFromSandbox) {\n        return {\n            code: configurationFile.generateFileFromSandbox(sandbox),\n            generated: true,\n        };\n    }\n    return { code: '', generated: false };\n}\nfunction titleIncludes(module, test) {\n    if ('title' in module) {\n        return module.title.includes(test);\n    }\n    if ('path' in module) {\n        return module.path.includes(test);\n    }\n    return false;\n}\n/**\n * We convert all configuration file configs to an object with configuration per\n * type. This makes configs universal.\n */\nfunction parseConfigurations(template, configurationFiles, resolveModule, sandbox) {\n    const configurations = {};\n    const paths = Object.keys(configurationFiles);\n    for (let i = 0; i < paths.length; i++) {\n        const path = paths[i];\n        const module = resolveModule(path);\n        const configurationFile = configurationFiles[path];\n        const baseObject = Object.assign({ path }, getCode(template, module, sandbox, resolveModule, configurationFile));\n        const { code } = baseObject;\n        if (code) {\n            try {\n                let parsed;\n                // it goes here three times and the third time it doesn't have a title but a path\n                // that took a while ffs\n                // if toml do it with toml parser\n                if (module && titleIncludes(module, 'toml')) {\n                    // never throws\n                    parsed = (0, markty_toml_1.default)(code);\n                }\n                else if (module && titleIncludes(module, 'tsconfig.json')) {\n                    parsed = (0, jsonlint_browser_1.parse)(stripJSONComments(code));\n                }\n                else {\n                    parsed = (0, jsonlint_browser_1.parse)(code);\n                }\n                configurations[configurationFile.type] = Object.assign(Object.assign({}, baseObject), { parsed });\n            }\n            catch (e) {\n                configurations[configurationFile.type] = Object.assign(Object.assign({}, baseObject), { error: e });\n            }\n        }\n    }\n    return configurations;\n}\nexports.default = parseConfigurations;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst prettify_default_config_1 = __importDefault(require(\"../../../prettify-default-config\"));\nconst config = {\n    title: '.prettierrc',\n    type: 'prettier',\n    description: 'Defines how all files will be prettified by Prettier.',\n    moreInfoUrl: 'https://prettier.io/docs/en/configuration.html',\n    generateFileFromState: prettierConfig => JSON.stringify(Object.assign(Object.assign({}, prettify_default_config_1.default), (prettierConfig || {})), null, 2),\n    schema: 'https://raw.githubusercontent.com/SchemaStore/schemastore/master/src/schemas/json/prettierrc.json',\n};\nexports.default = config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst url_generator_1 = require(\"../../../utils/url-generator\");\nconst config = {\n    title: 'sandbox.config.json',\n    type: 'sandbox',\n    description: 'Configuration specific to the current sandbox.',\n    moreInfoUrl: (0, url_generator_1.docsUrl)('/learn/browser-sandboxes/configuration#sandbox-configuration'),\n    getDefaultCode: () => JSON.stringify({\n        infiniteLoopProtection: true,\n        hardReloadOnChange: false,\n        view: 'browser',\n    }, null, 2),\n};\nexports.default = config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst JSX_PRAGMA = {\n    react: 'React.createElement',\n    preact: 'h',\n};\nconst config = {\n    title: 'tsconfig.json',\n    type: 'typescript',\n    description: 'Configuration for how TypeScript transpiles.',\n    moreInfoUrl: 'http://www.typescriptlang.org/docs/handbook/tsconfig-json.html',\n    getDefaultCode: (template, resolveModule) => {\n        if (template === 'create-react-app-typescript') {\n            return JSON.stringify({\n                compilerOptions: {\n                    outDir: 'build/dist',\n                    module: 'esnext',\n                    target: 'es5',\n                    lib: ['es6', 'dom'],\n                    sourceMap: true,\n                    allowJs: true,\n                    jsx: 'react',\n                    moduleResolution: 'node',\n                    rootDir: 'src',\n                    forceConsistentCasingInFileNames: true,\n                    noImplicitReturns: true,\n                    noImplicitThis: true,\n                    noImplicitAny: true,\n                    strictNullChecks: true,\n                    suppressImplicitAnyIndexErrors: true,\n                    noUnusedLocals: true,\n                },\n                exclude: [\n                    'node_modules',\n                    'build',\n                    'scripts',\n                    'acceptance-tests',\n                    'webpack',\n                    'jest',\n                    'src/setupTests.ts',\n                ],\n            }, null, 2);\n        }\n        if (template === 'parcel') {\n            const tsconfig = {\n                compilerOptions: {\n                    module: 'commonjs',\n                    jsx: 'preserve',\n                    jsxFactory: undefined,\n                    esModuleInterop: true,\n                    sourceMap: true,\n                    allowJs: true,\n                    lib: ['es6', 'dom'],\n                    rootDir: 'src',\n                    moduleResolution: 'node',\n                },\n            };\n            const packageJSONModule = resolveModule('/package.json');\n            if (packageJSONModule) {\n                try {\n                    const parsed = JSON.parse(packageJSONModule.code);\n                    let pragma = null;\n                    Object.keys(JSX_PRAGMA).forEach(dep => {\n                        if ((parsed.dependencies && parsed.dependencies[dep]) ||\n                            (parsed.devDependencies && parsed.devDependencies[dep])) {\n                            pragma = JSX_PRAGMA[dep];\n                        }\n                    });\n                    if (pragma !== null) {\n                        tsconfig.compilerOptions.jsx = 'react';\n                        tsconfig.compilerOptions.jsxFactory = pragma;\n                    }\n                }\n                catch (e) {\n                    /* do nothing */\n                }\n            }\n            return JSON.stringify(tsconfig, null, 2);\n        }\n        if (template === 'nest') {\n            return JSON.stringify({\n                compilerOptions: {\n                    module: 'commonjs',\n                    declaration: true,\n                    noImplicitAny: false,\n                    removeComments: true,\n                    noLib: false,\n                    allowSyntheticDefaultImports: true,\n                    emitDecoratorMetadata: true,\n                    experimentalDecorators: true,\n                    target: 'es6',\n                    sourceMap: true,\n                    outDir: './dist',\n                    baseUrl: './src',\n                },\n            }, null, 2);\n        }\n        if (template === '@dojo/cli-create-app') {\n            return JSON.stringify({\n                compilerOptions: {\n                    declaration: false,\n                    experimentalDecorators: true,\n                    jsx: 'react',\n                    jsxFactory: 'tsx',\n                    lib: [\n                        'dom',\n                        'es5',\n                        'es2015.promise',\n                        'es2015.iterable',\n                        'es2015.symbol',\n                        'es2015.symbol.wellknown',\n                    ],\n                    module: 'commonjs',\n                    moduleResolution: 'node',\n                    noUnusedLocals: true,\n                    outDir: '_build/',\n                    removeComments: false,\n                    importHelpers: true,\n                    downLevelIteration: true,\n                    sourceMap: true,\n                    strict: true,\n                    target: 'es5',\n                },\n            });\n        }\n        if (template === 'angular-cli') {\n            return JSON.stringify({\n                compileOnSave: false,\n                compilerOptions: {\n                    baseUrl: './',\n                    outDir: './dist/out-tsc',\n                    sourceMap: true,\n                    declaration: false,\n                    downlevelIteration: true,\n                    experimentalDecorators: true,\n                    moduleResolution: 'node',\n                    importHelpers: true,\n                    target: 'es2015',\n                    module: 'es2020',\n                    lib: ['es2018', 'dom'],\n                },\n            }, null, 2);\n        }\n        if (template === 'solid') {\n            return JSON.stringify({\n                compileOnSave: false,\n                compilerOptions: {\n                    strict: false,\n                    module: 'ESNext',\n                    target: 'ESNext',\n                    jsx: 'preserve',\n                    esModuleInterop: true,\n                    sourceMap: true,\n                    allowJs: true,\n                    lib: ['es6', 'dom'],\n                    rootDir: 'src',\n                    moduleResolution: 'node',\n                    jsxImportSource: 'solid-js',\n                    types: ['solid-js', 'solid-js/web'],\n                },\n            }, null, 2);\n        }\n        return JSON.stringify({\n            compilerOptions: {\n                outDir: 'build/dist',\n                module: 'esnext',\n                target: 'es5',\n                lib: ['es6', 'dom'],\n                sourceMap: true,\n                allowJs: true,\n                jsx: 'react',\n                moduleResolution: 'node',\n                rootDir: 'src',\n                forceConsistentCasingInFileNames: true,\n                noImplicitReturns: true,\n                noImplicitThis: true,\n                noImplicitAny: true,\n                strictNullChecks: true,\n                suppressImplicitAnyIndexErrors: true,\n                noUnusedLocals: true,\n            },\n        }, null, 2);\n    },\n    schema: 'https://raw.githubusercontent.com/SchemaStore/schemastore/master/src/schemas/json/tsconfig.json',\n    partialSupportDisclaimer: `Only \\`compilerOptions\\` field is supported.`,\n};\nexports.default = config;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nexports.default = new template_1.default('custom', 'Custom', 'https://codesandbox.io', 'custom', (0, decorate_selector_1.decorateSelector)(() => '#F5DA55'), {\n    extraConfigurations: {\n        '/.codesandbox/template.json': configuration_1.default.customCodeSandbox,\n    },\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nclass CxJSTemplate extends template_1.default {\n    getEntries() {\n        return ['/app/index.js', '/src/index.js', '/index.html'];\n    }\n    getHTMLEntries() {\n        return ['/app/index.html', '/src/index.html', '/index.html'];\n    }\n}\nexports.default = new CxJSTemplate('cxjs', 'CxJS', 'https://cxjs.io/', 'github/codaxy/cxjs-codesandbox-template', (0, decorate_selector_1.decorateSelector)(() => '#11689f'), {\n    showOnHomePage: true,\n    showCube: false,\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n    externalResourcesEnabled: false,\n    distDir: 'dist',\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocusaurusTemplate = void 0;\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nclass DocusaurusTemplate extends template_1.default {\n    // The file to open by the editor\n    getDefaultOpenedFiles() {\n        return ['/src/pages/index.js'];\n    }\n}\nexports.DocusaurusTemplate = DocusaurusTemplate;\nexports.default = new DocusaurusTemplate('docusaurus', 'Docusaurus', 'https://docusaurus.io/', 'github/facebook/docusaurus/tree/master/examples/classic', (0, decorate_selector_1.decorateSelector)(() => '#3ECC5F'), {\n    mainFile: [],\n    distDir: 'build',\n    showOnHomePage: true,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DojoTemplate = void 0;\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nclass DojoTemplate extends template_1.default {\n    // eslint-disable-next-line no-unused-vars\n    getHTMLEntries(configurationFiles) {\n        return ['/src/index.html'];\n    }\n    getEntries(configurationFiles) {\n        const entries = super.getEntries(configurationFiles);\n        entries.push('/src/main.ts');\n        return entries;\n    }\n}\nexports.DojoTemplate = DojoTemplate;\nexports.default = new DojoTemplate('@dojo/cli-create-app', 'Dojo', 'https://github.com/dojo/cli-create-app', 'github/dojo/dojo-codesandbox-template', (0, decorate_selector_1.decorateSelector)(() => '#D3471C'), {\n    showOnHomePage: true,\n    showCube: false,\n    distDir: 'output/dist',\n    isTypescript: true,\n    githubPagesDeploy: false,\n    extraConfigurations: {\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('ember', 'Ember', 'https://emberjs.com/', \n/**\n * Ideally, we'd point to https://github.com/ember-cli/ember-new-output\n * but there are a few tweaks that must be addressed before then.\n *  - Auto-detection of ember-cli projects as node projects,\n *    without requiring a sandbox.config.json\n *    PR: https://github.com/codesandbox-app/codesandbox-importers/pull/16\n *  - Ember-CLI initial build chokes on empty app/styles/app.css file\n *  - A small livereload fix, for proper port detection through the CSB proxy stuff\n *    BUG: https://github.com/ember-cli/ember-cli/issues/8073\n *\n * Here is a complete diff of these changes, w.r.t. the code generated by\n * `ember new my-app`\n *\n * https://github.com/ember-cli/ember-new-output/compare/stable...NullVoxPopuli:stable\n */\n'github/NullVoxPopuli/ember-new-output/tree/stable', (0, decorate_selector_1.decorateSelector)(() => '#E04E39'), {\n    showOnHomePage: true,\n    main: false,\n    staticDeployment: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nconst react_template_1 = require(\"./helpers/react-template\");\nexports.default = new react_template_1.ReactTemplate('esm-react', 'React - ESModules', 'https://github.com/facebookincubator/create-react-app', 'esm-react', (0, decorate_selector_1.decorateSelector)(() => '#61DAFB'), {\n    showOnHomePage: false,\n    popular: false,\n    main: false,\n    mainFile: ['/src/index.js', '/src/index.tsx', '/src/index.ts'],\n    extraConfigurations: {\n        '/jsconfig.json': configuration_1.default.jsconfig,\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nclass GatsbyTemplate extends template_1.default {\n    getViews() {\n        const GATSBY_VIEWS = [\n            {\n                views: [\n                    { id: 'codesandbox.browser' },\n                    {\n                        id: 'codesandbox.browser',\n                        closeable: true,\n                        options: {\n                            url: '/___graphql',\n                            title: 'GraphiQL',\n                        },\n                    },\n                ],\n            },\n            {\n                open: true,\n                views: [\n                    { id: 'codesandbox.terminal' },\n                    { id: 'codesandbox.console' },\n                    { id: 'codesandbox.problems' },\n                ],\n            },\n        ];\n        return GATSBY_VIEWS;\n    }\n}\nexports.default = new GatsbyTemplate('gatsby', 'Gatsby', 'https://www.gatsbyjs.org/', 'github/gatsbyjs/gatsby-starter-default', (0, decorate_selector_1.decorateSelector)(() => '#8C65B3'), {\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n    },\n    distDir: 'public',\n    mainFile: ['/src/pages/index.js'],\n    showOnHomePage: true,\n    main: true,\n    popular: true,\n    showCube: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nclass GridsomeTemplate extends template_1.default {\n    getViews() {\n        const GRIDSOME_VIEWS = [\n            {\n                views: [\n                    { id: 'codesandbox.browser' },\n                    {\n                        id: 'codesandbox.browser',\n                        closeable: true,\n                        options: {\n                            url: '/___explore',\n                            title: 'GraphiQL',\n                        },\n                    },\n                ],\n            },\n            {\n                open: true,\n                views: [\n                    { id: 'codesandbox.terminal' },\n                    { id: 'codesandbox.console' },\n                    { id: 'codesandbox.problems' },\n                ],\n            },\n        ];\n        return GRIDSOME_VIEWS;\n    }\n}\nexports.default = new GridsomeTemplate('gridsome', 'Gridsome', 'https://gridsome.org/', 'github/SaraVieira/gridsome-starter-codesandbox', (0, decorate_selector_1.decorateSelector)(() => '#00a672'), {\n    distDir: 'dist',\n    mainFile: ['/src/pages/Index.vue'],\n    showOnHomePage: true,\n    main: true,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReactTemplate = void 0;\nconst template_1 = __importDefault(require(\"../template\"));\nclass ReactTemplate extends template_1.default {\n    getViews() {\n        const REACT_VIEWS = [\n            {\n                views: [\n                    { id: 'codesandbox.browser' },\n                    { id: 'codesandbox.tests' },\n                    {\n                        id: 'codesandbox.terminalUpgrade',\n                        hideOnEmbedPage: true,\n                        hideOnPrem: true,\n                    },\n                ],\n            },\n            {\n                views: [\n                    { id: 'codesandbox.console' },\n                    { id: 'codesandbox.problems' },\n                    { id: 'codesandbox.react-devtools' },\n                ],\n            },\n        ];\n        return REACT_VIEWS;\n    }\n    getDefaultOpenedFiles(configurationFiles) {\n        let entries = [];\n        entries.push('/src/App.js');\n        entries.push('/src/App.tsx');\n        entries = entries.concat(this.getEntries(configurationFiles));\n        return entries;\n    }\n}\nexports.ReactTemplate = ReactTemplate;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.solid = exports.remix = exports.unibit = exports.quasar = exports.mdxDeck = exports.docusaurus = exports.vuepress = exports.gridsome = exports.styleguidist = exports.staticTemplate = exports.ember = exports.nest = exports.sapper = exports.vue = exports.svelte = exports.reason = exports.reactTs = exports.react = exports.preact = exports.parcel = exports.dojo = exports.cxjs = exports.babel = exports.esmReact = exports.node = exports.nuxt = exports.next = exports.marko = exports.gatsby = exports.apollo = exports.custom = exports.angular = exports.adonis = void 0;\nconst adonis_1 = __importDefault(require(\"./adonis\"));\nexports.adonis = adonis_1.default;\nconst angular_1 = __importDefault(require(\"./angular\"));\nexports.angular = angular_1.default;\nconst apollo_server_1 = __importDefault(require(\"./apollo-server\"));\nexports.apollo = apollo_server_1.default;\nconst babel_1 = __importDefault(require(\"./babel\"));\nexports.babel = babel_1.default;\nconst custom_1 = __importDefault(require(\"./custom\"));\nexports.custom = custom_1.default;\nconst cxjs_1 = __importDefault(require(\"./cxjs\"));\nexports.cxjs = cxjs_1.default;\nconst dojo_1 = __importDefault(require(\"./dojo\"));\nexports.dojo = dojo_1.default;\nconst ember_1 = __importDefault(require(\"./ember\"));\nexports.ember = ember_1.default;\nconst gatsby_1 = __importDefault(require(\"./gatsby\"));\nexports.gatsby = gatsby_1.default;\nconst gridsome_1 = __importDefault(require(\"./gridsome\"));\nexports.gridsome = gridsome_1.default;\nconst marko_1 = __importDefault(require(\"./marko\"));\nexports.marko = marko_1.default;\nconst mdx_deck_1 = __importDefault(require(\"./mdx-deck\"));\nexports.mdxDeck = mdx_deck_1.default;\nconst nest_1 = __importDefault(require(\"./nest\"));\nexports.nest = nest_1.default;\nconst next_1 = __importDefault(require(\"./next\"));\nexports.next = next_1.default;\nconst node_1 = __importDefault(require(\"./node\"));\nexports.node = node_1.default;\nconst nuxt_1 = __importDefault(require(\"./nuxt\"));\nexports.nuxt = nuxt_1.default;\nconst parcel_1 = __importDefault(require(\"./parcel\"));\nexports.parcel = parcel_1.default;\nconst preact_1 = __importDefault(require(\"./preact\"));\nexports.preact = preact_1.default;\nconst quasar_1 = __importDefault(require(\"./quasar\"));\nexports.quasar = quasar_1.default;\nconst react_1 = __importDefault(require(\"./react\"));\nexports.react = react_1.default;\nconst react_ts_1 = __importDefault(require(\"./react-ts\"));\nexports.reactTs = react_ts_1.default;\nconst reason_1 = __importDefault(require(\"./reason\"));\nexports.reason = reason_1.default;\nconst sapper_1 = __importDefault(require(\"./sapper\"));\nexports.sapper = sapper_1.default;\nconst static_1 = __importDefault(require(\"./static\"));\nexports.staticTemplate = static_1.default;\nconst styleguidist_1 = __importDefault(require(\"./styleguidist\"));\nexports.styleguidist = styleguidist_1.default;\nconst svelte_1 = __importDefault(require(\"./svelte\"));\nexports.svelte = svelte_1.default;\nconst unibit_1 = __importDefault(require(\"./unibit\"));\nexports.unibit = unibit_1.default;\nconst vue_1 = __importDefault(require(\"./vue\"));\nexports.vue = vue_1.default;\nconst vuepress_1 = __importDefault(require(\"./vuepress\"));\nexports.vuepress = vuepress_1.default;\nconst docusaurus_1 = __importDefault(require(\"./docusaurus\"));\nexports.docusaurus = docusaurus_1.default;\nconst esmodule_react_1 = __importDefault(require(\"./esmodule-react\"));\nexports.esmReact = esmodule_react_1.default;\nconst remix_1 = __importDefault(require(\"./remix\"));\nexports.remix = remix_1.default;\nconst solid_1 = __importDefault(require(\"./solid\"));\nexports.solid = solid_1.default;\nfunction getDefinition(theme) {\n    switch (theme) {\n        case adonis_1.default.name:\n            return adonis_1.default;\n        case react_1.default.name:\n            return react_1.default;\n        case vue_1.default.name:\n            return vue_1.default;\n        case preact_1.default.name:\n            return preact_1.default;\n        case react_ts_1.default.name:\n            return react_ts_1.default;\n        case svelte_1.default.name:\n            return svelte_1.default;\n        case angular_1.default.name:\n            return angular_1.default;\n        case parcel_1.default.name:\n            return parcel_1.default;\n        case babel_1.default.name:\n            return babel_1.default;\n        case cxjs_1.default.name:\n            return cxjs_1.default;\n        case dojo_1.default.name:\n            return dojo_1.default;\n        case custom_1.default.name:\n            return custom_1.default;\n        case gatsby_1.default.name:\n            return gatsby_1.default;\n        case marko_1.default.name:\n            return marko_1.default;\n        case nuxt_1.default.name:\n            return nuxt_1.default;\n        case next_1.default.name:\n            return next_1.default;\n        case reason_1.default.name:\n            return reason_1.default;\n        case node_1.default.name:\n            return node_1.default;\n        case apollo_server_1.default.name:\n            return apollo_server_1.default;\n        case sapper_1.default.name:\n            return sapper_1.default;\n        case nest_1.default.name:\n            return nest_1.default;\n        case static_1.default.name:\n            return static_1.default;\n        case styleguidist_1.default.name:\n            return styleguidist_1.default;\n        case mdx_deck_1.default.name:\n            return mdx_deck_1.default;\n        case gridsome_1.default.name:\n            return gridsome_1.default;\n        case ember_1.default.name:\n            return ember_1.default;\n        case vuepress_1.default.name:\n            return vuepress_1.default;\n        case docusaurus_1.default.name:\n            return docusaurus_1.default;\n        case quasar_1.default.name:\n            return quasar_1.default;\n        case unibit_1.default.name:\n            return unibit_1.default;\n        case esmodule_react_1.default.name:\n            return esmodule_react_1.default;\n        case remix_1.default.name:\n            return remix_1.default;\n        case solid_1.default.name:\n            return solid_1.default;\n        default:\n            return react_1.default;\n    }\n}\nexports.default = getDefinition;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('marko', 'Marko', 'https://markojs.com/', 'github/nm123github/marko-codesandbox', (0, decorate_selector_1.decorateSelector)(() => '#f5ac00'), {\n    showOnHomePage: true,\n    main: false,\n    staticDeployment: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('mdx-deck', 'MDX Deck', 'https://github.com/jxnblk/mdx-deck', 'github/jxnblk/mdx-deck/tree/master/templates/basic', (0, decorate_selector_1.decorateSelector)(() => '#FAD961'), {\n    distDir: 'dist',\n    mainFile: ['deck.mdx'],\n    showOnHomePage: true,\n    githubPagesDeploy: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nexports.default = new template_1.default('nest', 'Nest', 'https://nestjs.com/', 'github/nestjs/typescript-starter', (0, decorate_selector_1.decorateSelector)(() => '#ed2945'), {\n    extraConfigurations: {\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n    mainFile: ['/src/main.ts'],\n    showOnHomePage: true,\n    staticDeployment: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nexports.default = new template_1.default('next', 'Next.js', 'https://nextjs.org/', 'github/zeit/next.js/tree/master/examples/hello-world', (0, decorate_selector_1.decorateSelector)(() => '#ffffff'), {\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n    },\n    distDir: 'out',\n    staticDeployment: false,\n    mainFile: ['/pages/index.js'],\n    backgroundColor: (0, decorate_selector_1.decorateSelector)(() => '#000000'),\n    showOnHomePage: true,\n    main: true,\n    popular: true,\n    showCube: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst url_generator_1 = require(\"../utils/url-generator\");\nexports.default = new template_1.default('node', 'Node', (0, url_generator_1.docsUrl)('/learn/environment/vm'), 'node', (0, decorate_selector_1.decorateSelector)(() => '#66cc33'), {\n    showOnHomePage: true,\n    main: true,\n    staticDeployment: false,\n    popular: true,\n    mainFile: ['/pages/index.vue', '/pages/index.js', '/src/pages/index.js'],\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nexports.default = new template_1.default('nuxt', 'Nuxt.js', 'https://nuxtjs.org/', 'github/nuxt/codesandbox-nuxt', (0, decorate_selector_1.decorateSelector)(() => '#3B8070'), {\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n    },\n    distDir: 'dist',\n    popular: true,\n    mainFile: ['/pages/index.vue'],\n    showOnHomePage: true,\n    main: true,\n    showCube: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParcelTemplate = void 0;\nconst path_1 = require(\"../utils/path\");\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nclass ParcelTemplate extends template_1.default {\n    getEntries(configurationFiles) {\n        const entries = [];\n        if (typeof document !== 'undefined' && document.location.pathname !== '/') {\n            // Push the location of the address bar, eg. when someone has a file\n            // /2.html open, you actually want to have that as entry point instead\n            // of index.html.\n            entries.push(document.location.pathname);\n        }\n        entries.push(configurationFiles.package &&\n            configurationFiles.package.parsed &&\n            configurationFiles.package.parsed.main &&\n            (0, path_1.absolute)(configurationFiles.package.parsed.main));\n        entries.push('/index.html');\n        entries.push('/src/index.html');\n        return entries.filter(Boolean);\n    }\n    getHTMLEntries(configurationFiles) {\n        const entries = this.getEntries(configurationFiles);\n        return entries.filter(e => e.endsWith('.html'));\n    }\n    /**\n     * The file to open by the editor\n     */\n    getDefaultOpenedFiles(configFiles) {\n        let entries = [];\n        entries.push('/index.js');\n        entries.push('/src/index.js');\n        entries.push('/index.ts');\n        entries.push('/src/index.ts');\n        entries = entries.concat(this.getEntries(configFiles));\n        return entries;\n    }\n}\nexports.ParcelTemplate = ParcelTemplate;\nexports.default = new ParcelTemplate('parcel', 'Vanilla', 'https://parceljs.org/', 'vanilla', (0, decorate_selector_1.decorateSelector)(() => '#dfb07a'), {\n    showOnHomePage: true,\n    showCube: true,\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n    externalResourcesEnabled: false,\n    distDir: 'dist',\n    main: true,\n    isTypescript: true,\n    popular: true,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nexports.default = new template_1.default('preact-cli', 'Preact', 'https://github.com/developit/preact-cli', 'preact', (0, decorate_selector_1.decorateSelector)(() => '#AD78DC'), {\n    showOnHomePage: true,\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n    },\n    defaultOpenedFile: ['/src/app.js'],\n    githubPagesDeploy: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('quasar', 'Quasar', 'https://quasar.dev/', 'github/quasarframework/quasar-codesandbox', (0, decorate_selector_1.decorateSelector)(() => '#43A4F2'), {\n    mainFile: ['/src/pages/Index.vue'],\n    showOnHomePage: true,\n    staticDeployment: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst react_template_1 = require(\"./helpers/react-template\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nexports.default = new react_template_1.ReactTemplate('create-react-app-typescript', 'React + TS', 'https://github.com/wmonk/create-react-app-typescript', 'react-ts', (0, decorate_selector_1.decorateSelector)(() => '#009fff'), {\n    isTypescript: true,\n    showOnHomePage: false,\n    extraConfigurations: {\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nconst react_template_1 = require(\"./helpers/react-template\");\nexports.default = new react_template_1.ReactTemplate('create-react-app', 'React', 'https://github.com/facebookincubator/create-react-app', 'new', (0, decorate_selector_1.decorateSelector)(() => '#61DAFB'), {\n    showOnHomePage: true,\n    popular: true,\n    main: true,\n    mainFile: ['/src/index.js', '/src/index.tsx', '/src/index.ts'],\n    extraConfigurations: {\n        '/jsconfig.json': configuration_1.default.jsconfig,\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('reason', 'Reason', 'https://reasonml.github.io/reason-react/en/', 'reason', (0, decorate_selector_1.decorateSelector)(() => '#CB5747'), {\n    showOnHomePage: true,\n    main: false,\n    staticDeployment: false,\n    mainFile: ['/src/Main.re', 'App.re', 'Index.re'],\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('remix-starter', 'Remix', 'https://remix.run/', 'https://github.com/remix-run', (0, decorate_selector_1.decorateSelector)(() => '#ffffff'), {\n    distDir: 'build',\n    showOnHomePage: true,\n    main: true,\n    popular: true,\n    showCube: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst extendedSandboxConfig = Object.assign(Object.assign({}, configuration_1.default.sandboxConfig), { getDefaultCode: () => JSON.stringify({\n        container: {\n            port: 3000,\n        },\n    }, null, 2) });\nexports.default = new template_1.default('sapper', 'Sapper', 'https://sapper.svelte.dev/', 'github/codesandbox-app/sapper-template', (0, decorate_selector_1.decorateSelector)(() => '#159497'), {\n    extraConfigurations: {\n        '/sandbox.config.json': extendedSandboxConfig,\n    },\n    staticDeployment: false,\n    mainFile: ['/src/routes/index.html'],\n    showOnHomePage: true,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nclass SolidTemplate extends template_1.default {\n    getEntries(configurationFiles) {\n        const entries = super.getEntries(configurationFiles);\n        entries.push('/src/index.tsx', '/src/index.jsx', '/src/App.tsx', '/src/App.jsx');\n        return entries;\n    }\n    getHTMLEntries() {\n        return ['/static/index.html', '/public/index.html', '/index.html'];\n    }\n}\nexports.default = new SolidTemplate('solid', 'Solid JS', 'https://github.com/solidjs/solid', 'solid', (0, decorate_selector_1.decorateSelector)(() => '#2596be'), {\n    showOnHomePage: false,\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n    distDir: 'dist',\n    main: true,\n    popular: true,\n    mainFile: [\n        '/src/index.tsx',\n        '/src/index.jsx',\n        '/src/App.tsx',\n        '/src/App.jsx',\n    ],\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('static', 'Static', 'https://developer.mozilla.org/en-US/docs/Learn/HTML', 'github/codesandbox-app/static-template', (0, decorate_selector_1.decorateSelector)(() => '#3AA855'), {\n    showOnHomePage: true,\n    distDir: './',\n    main: false,\n    mainFile: ['/index.html'],\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nexports.default = new template_1.default('styleguidist', 'Styleguidist', 'https://react-styleguidist.js.org/', 'github/styleguidist/example', (0, decorate_selector_1.decorateSelector)(() => '#25d8fc'), {\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n    },\n    distDir: 'styleguide',\n    mainFile: [],\n    showOnHomePage: true,\n    githubPagesDeploy: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('svelte', 'Svelte', 'https://svelte.dev', 'svelte', (0, decorate_selector_1.decorateSelector)(() => '#FF3E00'), {\n    showOnHomePage: true,\n    showCube: false,\n    distDir: 'public',\n    mainFile: ['/app.svelte'],\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path_1 = require(\"../utils/path\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nconst is_server_1 = require(\"./helpers/is-server\");\nconst defaultConfigurations = {\n    '/package.json': configuration_1.default.packageJSON,\n    '/.prettierrc': configuration_1.default.prettierRC,\n    '/sandbox.config.json': configuration_1.default.sandboxConfig,\n    '/vercel.json': configuration_1.default.nowConfig,\n    '/netlify.toml': configuration_1.default.netlifyConfig,\n};\nconst CLIENT_VIEWS = [\n    {\n        views: [\n            { id: 'codesandbox.browser' },\n            { id: 'codesandbox.tests' },\n            {\n                id: 'codesandbox.terminalUpgrade',\n                hideOnEmbedPage: true,\n                hideOnPrem: true,\n            },\n        ],\n    },\n    {\n        views: [{ id: 'codesandbox.console' }, { id: 'codesandbox.problems' }],\n    },\n];\nconst SERVER_VIEWS = [\n    {\n        views: [{ id: 'codesandbox.browser' }],\n    },\n    {\n        open: true,\n        views: [\n            { id: 'codesandbox.terminal' },\n            { id: 'codesandbox.console' },\n            { id: 'codesandbox.problems' },\n        ],\n    },\n];\nclass Template {\n    constructor(name, niceName, url, shortid, color, options = {}) {\n        /**\n         * Alter the apiData to Vercel for making deployment work\n         */\n        this.alterDeploymentData = (apiData) => {\n            const packageJSONFile = apiData.files.find(x => x.file === 'package.json');\n            const parsedFile = JSON.parse(packageJSONFile.data);\n            const newParsedFile = Object.assign(Object.assign({}, parsedFile), { devDependencies: Object.assign(Object.assign({}, parsedFile.devDependencies), { serve: '^10.1.1' }), scripts: Object.assign({ 'now-start': `cd ${this.distDir} && serve -s ./` }, parsedFile.scripts) });\n            return Object.assign(Object.assign({}, apiData), { files: [\n                    ...apiData.files.filter(x => x.file !== 'package.json'),\n                    {\n                        file: 'package.json',\n                        data: JSON.stringify(newParsedFile, null, 2),\n                    },\n                ] });\n        };\n        this.name = name;\n        this.niceName = niceName;\n        this.url = url;\n        this.shortid = shortid;\n        this.color = color;\n        this.popular = options.popular || false;\n        this.isServer = (0, is_server_1.isServer)(this.name);\n        this.main = options.main || false;\n        this.showOnHomePage = options.showOnHomePage || false;\n        this.distDir = options.distDir || 'build';\n        this.configurationFiles = Object.assign(Object.assign({}, defaultConfigurations), (options.extraConfigurations || {}));\n        this.isTypescript = options.isTypescript || false;\n        this.externalResourcesEnabled =\n            options.externalResourcesEnabled != null\n                ? options.externalResourcesEnabled\n                : true;\n        this.mainFile = options.mainFile;\n        this.staticDeployment = options.staticDeployment;\n        this.githubPagesDeploy = options.githubPagesDeploy;\n        this.backgroundColor = options.backgroundColor;\n        this.showCube = options.showCube != null ? options.showCube : true;\n        this.defaultOpenedFile = options.defaultOpenedFile || [];\n    }\n    // eslint-disable-next-line\n    getMainFromPackage(pkg) {\n        try {\n            if (!pkg.main) {\n                return undefined;\n            }\n            if (Array.isArray(pkg.main)) {\n                return (0, path_1.absolute)(pkg.main[0]);\n            }\n            if (typeof pkg.main === 'string') {\n                return (0, path_1.absolute)(pkg.main);\n            }\n        }\n        catch (e) {\n            // eslint-disable-next-line\n            console.log(e);\n        }\n    }\n    /**\n     * Get possible entry files to evaluate, differs per template\n     */\n    getEntries(configurationFiles) {\n        var _a;\n        return [\n            ((_a = configurationFiles.package) === null || _a === void 0 ? void 0 : _a.parsed) &&\n                this.getMainFromPackage(configurationFiles.package.parsed),\n            ...(this.mainFile || []),\n            '/index.' + (this.isTypescript ? 'ts' : 'js'),\n            '/src/index.' + (this.isTypescript ? 'ts' : 'js'),\n            '/src/index.ts',\n            '/src/index.tsx',\n            '/src/index.js',\n            '/src/pages/index.js',\n            '/src/pages/index.vue',\n            '/index.js',\n            '/index.ts',\n            '/index.tsx',\n            '/README.md',\n            '/package.json',\n        ].filter(x => x);\n    }\n    /**\n     * Files to be opened by default by the editor when opening the editor\n     */\n    getDefaultOpenedFiles(configurationFiles) {\n        return [...this.defaultOpenedFile, ...this.getEntries(configurationFiles)];\n    }\n    /**\n     * Get the views that are tied to the template\n     */\n    getViews(configurationFiles) {\n        if (this.isServer) {\n            return SERVER_VIEWS;\n        }\n        return CLIENT_VIEWS;\n    }\n    // eslint-disable-next-line no-unused-vars\n    getHTMLEntries(configurationFiles) {\n        return ['/public/index.html', '/index.html'];\n    }\n}\nexports.default = Template;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nexports.default = new template_1.default('unibit', 'Unibit', 'https://www.stackbit.com', 'github/stackbithq/stackbit-theme-universal/tree/master/', (0, decorate_selector_1.decorateSelector)(() => '#3EB0FD'), {\n    distDir: 'public',\n    popular: true,\n    mainFile: ['README.md'],\n    showOnHomePage: true,\n    main: false,\n    showCube: false,\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nconst configuration_1 = __importDefault(require(\"./configuration\"));\nclass VueTemplate extends template_1.default {\n    getEntries(configurationFiles) {\n        const entries = super.getEntries(configurationFiles);\n        entries.push('/src/main.js');\n        entries.push('/main.js');\n        return entries;\n    }\n    getHTMLEntries() {\n        return ['/static/index.html', '/public/index.html', '/index.html'];\n    }\n}\nexports.default = new VueTemplate('vue-cli', 'Vue', 'https://github.com/vuejs/vue-cli', 'vue', (0, decorate_selector_1.decorateSelector)(() => '#41B883'), {\n    showOnHomePage: true,\n    extraConfigurations: {\n        '/.babelrc': configuration_1.default.babelrc,\n        '/tsconfig.json': configuration_1.default.tsconfig,\n    },\n    distDir: 'dist',\n    main: true,\n    popular: true,\n    mainFile: ['/src/main.js', '/src/main.ts'],\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VuePressTemplate = void 0;\nconst template_1 = __importDefault(require(\"./template\"));\nconst decorate_selector_1 = require(\"../utils/decorate-selector\");\nclass VuePressTemplate extends template_1.default {\n    // The file to open by the editor\n    getDefaultOpenedFiles() {\n        return ['/README.md', '/guide/README.md'];\n    }\n}\nexports.VuePressTemplate = VuePressTemplate;\nexports.default = new VuePressTemplate('vuepress', 'VuePress', 'https://vuepress.vuejs.org/', 'github/vicbergquist/codesandbox-vuepress', (0, decorate_selector_1.decorateSelector)(() => '#4abf8a'), {\n    mainFile: [],\n    distDir: '.vuepress/dist',\n    showOnHomePage: true,\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatVersion = exports.CSB_PKG_PROTOCOL = void 0;\nexports.CSB_PKG_PROTOCOL = /https:\\/\\/pkg(-staging)?\\.csb.dev/;\nconst formatVersion = (version) => {\n    if (exports.CSB_PKG_PROTOCOL.test(version)) {\n        const commitSha = version.match(/commit\\/([\\w\\d]*)\\//);\n        if (commitSha && commitSha[1]) {\n            return `csb:${commitSha[1]}`;\n        }\n    }\n    return version;\n};\nexports.formatVersion = formatVersion;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst global_1 = require(\"./global\");\nconst shouldShowDebugger = () => {\n    if (typeof __DEV__ !== 'undefined' && __DEV__) {\n        return true;\n    }\n    if (process.env.NODE_ENV === 'development') {\n        return true;\n    }\n    if (typeof document !== 'undefined' &&\n        document.location.search.includes('debug')) {\n        return true;\n    }\n    return false;\n};\nconst getDebugger = () => {\n    if (!shouldShowDebugger()) {\n        const global = (0, global_1.getGlobal)();\n        // Return a debugger that will log to sentry\n        return (key) => (message) => {\n            // Disable it for now, seems to affect performance. That's the last thing we want\n            // from this (https://github.com/codesandbox/codesandbox-client/issues/1671)\n            // TODO: move this to sentry\n            if (false || typeof global.Raven === 'object') {\n                try {\n                    global.Raven.captureBreadcrumb({\n                        message: `${key} - ${message}`,\n                        category: 'logging',\n                    });\n                }\n                catch (e) {\n                    console.error(e);\n                }\n            }\n        };\n    }\n    // @ts-ignore\n    const debug = require('debug'); // eslint-disable-line global-require\n    // debug.enable('cs:*');\n    // debug.disable('cs:cp-*');\n    return debug;\n};\nexports.default = getDebugger();\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decorateSelector = void 0;\nconst memoize_one_1 = __importDefault(require(\"memoize-one\"));\nconst color_1 = __importDefault(require(\"color\"));\nconst colorMethods = [\n    'negate',\n    'lighten',\n    'darken',\n    'saturate',\n    'desaturate',\n    'greyscale',\n    'whiten',\n    'blacken',\n    'clearer',\n    'opaquer',\n    'rotate', // hsl(60, 20%, 20%) -> hsl(330, 20%, 20%)\n];\n/**\n * Takes a selector that returns a color string and returns new decorated selector that calls the\n * original function to get the color and then modifies that color, ultimately returning another\n * color string.\n *\n * vy60q8l043\n */\nconst addModifier = (fn, method, ...modifierArgs) => (...args) => {\n    if (method === 'clearer') {\n        return ((0, color_1.default)(fn(...args))\n            // @ts-ignore\n            .lighten(...modifierArgs)\n            .rgb()\n            .string());\n    }\n    return (0, color_1.default)(fn(...args))[method](...modifierArgs)\n        .rgb()\n        .string();\n};\n/**\n * Add useful methods directly to selector function, as well as put an rgbString() call at the end\n * @param selector\n */\nconst decorateSelector = (selector) => {\n    // add member functions to our selector\n    colorMethods.forEach(method => {\n        selector[method] = (0, memoize_one_1.default)((...args) => (0, exports.decorateSelector)(addModifier(selector, method, ...args)));\n    });\n    return selector;\n};\nexports.decorateSelector = decorateSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction delay(timeout = 1000) {\n    return new Promise(resolve => setTimeout(resolve, timeout));\n}\nexports.default = delay;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAbsoluteDependencies = exports.getAbsoluteDependency = exports.isValidSemver = exports.isAbsoluteVersion = void 0;\nconst semver_1 = require(\"semver\");\nfunction fetchWithRetries(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let err;\n        for (let i = 0; i < 2; i++) {\n            try {\n                // eslint-disable-next-line\n                return yield fetch(url).then(x => {\n                    if (x.ok) {\n                        return x.json();\n                    }\n                    throw new Error('Could not fetch ' + url);\n                });\n            }\n            catch (e) {\n                err = e;\n            }\n        }\n        throw err;\n    });\n}\nfunction fetchAllVersions(dep) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return fetchWithRetries(`https://data.jsdelivr.com/v1/package/npm/${dep}`);\n    });\n}\n/** Resolves version range from unpkg, use this as a fallback when jsdelivr fails */\nconst resolveVersionFromUnpkg = (dep, version) => {\n    return fetchWithRetries(`https://unpkg.com/${dep}@${encodeURIComponent(version)}/package.json`).then(x => x.version);\n};\nfunction getLatestVersion(dep, version) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // No need to resolve absolute versions...\n        if (isAbsoluteVersion(version)) {\n            return version;\n        }\n        try {\n            // If it is not an absolute version (e.g. a tag like `next`), we don't want to fetch\n            // using JSDelivr, because JSDelivr caches the response for a long time. Because of this,\n            // when a tag updates to a new version, people won't see that update for a long time.\n            // Instead, we download all possible versions from JSDelivr, and we check those versions\n            // to see what's the maximum satisfying version. The API call is cached for only 10s.\n            const allVersions = yield fetchAllVersions(dep);\n            return (allVersions.tags[version] || (0, semver_1.maxSatisfying)(allVersions.versions, version));\n        }\n        catch (e) {\n            return resolveVersionFromUnpkg(dep, version);\n        }\n    });\n}\nfunction isAbsoluteVersion(version) {\n    return /(^\\d+\\.\\d+\\.\\d+(-.*)?$)|(.+\\/.+)/.test(version);\n}\nexports.isAbsoluteVersion = isAbsoluteVersion;\nfunction isValidSemver(version) {\n    return Boolean((0, semver_1.valid)(version));\n}\nexports.isValidSemver = isValidSemver;\nfunction getAbsoluteDependency(depName, depVersion) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return {\n            name: depName,\n            version: yield getLatestVersion(depName, depVersion),\n        };\n    });\n}\nexports.getAbsoluteDependency = getAbsoluteDependency;\nfunction getAbsoluteDependencies(dependencies) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const nonAbsoluteDependencies = Object.keys(dependencies).filter(dep => !isAbsoluteVersion(dependencies[dep]));\n        const newDependencies = Object.assign({}, dependencies);\n        yield Promise.all(nonAbsoluteDependencies.map((dep) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { version } = yield getAbsoluteDependency(dep, newDependencies[dep]);\n                newDependencies[dep] = version;\n            }\n            catch (e) {\n                /* ignore */\n            }\n        })));\n        return newDependencies;\n    });\n}\nexports.getAbsoluteDependencies = getAbsoluteDependencies;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.commonPostMessage = exports.getGlobal = void 0;\nconst url_generator_1 = require(\"./url-generator\");\nfunction getGlobal() {\n    try {\n        if (typeof window !== 'undefined') {\n            return window;\n        }\n        if (typeof self !== 'undefined') {\n            const returnedGlobal = self;\n            return returnedGlobal;\n        }\n        if (typeof global !== 'undefined') {\n            return global;\n        }\n    }\n    catch (e) {\n        /* Couldn't find anything */\n    }\n    return {};\n}\nexports.getGlobal = getGlobal;\nconst global = getGlobal();\n/**\n * A postmessage that works in main window and in worker.\n * It will send the message to the default origin.\n * @param message The message to send\n */\nfunction commonPostMessage(message) {\n    if (typeof Window !== 'undefined') {\n        global.postMessage(message, (0, url_generator_1.protocolAndHost)());\n    }\n    else {\n        global.postMessage(message);\n    }\n}\nexports.commonPostMessage = commonPostMessage;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isBabel7 = void 0;\nconst semver_1 = __importDefault(require(\"semver\"));\nfunction isCRAVersion2(dependencies, devDependencies) {\n    const reactScriptsVersion = dependencies['react-scripts'] || devDependencies['react-scripts'];\n    if (reactScriptsVersion) {\n        return (/^[a-z]/.test(reactScriptsVersion) ||\n            semver_1.default.intersects(reactScriptsVersion, '^2.0.0') ||\n            semver_1.default.intersects(reactScriptsVersion, '^3.0.0') ||\n            semver_1.default.intersects(reactScriptsVersion, '^4.0.0'));\n    }\n    return false;\n}\nfunction isBabel7(dependencies = {}, devDependencies = {}) {\n    if (dependencies['@vue/cli-plugin-babel'] ||\n        devDependencies['@vue/cli-plugin-babel']) {\n        return true;\n    }\n    if (devDependencies['@babel/core'] || dependencies['@babel/core']) {\n        return true;\n    }\n    if (dependencies.svelte || devDependencies.svelte) {\n        const ver = dependencies.svelte || devDependencies.svelte;\n        return semver_1.default.gte(semver_1.default.minVersion(ver), '3.0.0');\n    }\n    if ('typescript' in devDependencies && !dependencies['@angular/core']) {\n        return true;\n    }\n    if (isCRAVersion2(dependencies, devDependencies)) {\n        return true;\n    }\n    return false;\n}\nexports.isBabel7 = isBabel7;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isPreact10 = void 0;\nconst semver_1 = __importDefault(require(\"semver\"));\nfunction isPreact10(dependencies, devDependencies) {\n    const preactVersion = (dependencies || {}).preact || (devDependencies || {}).preact;\n    if (preactVersion) {\n        return (/^[a-z]/.test(preactVersion) ||\n            semver_1.default.intersects(preactVersion, '>=10.0.0'));\n    }\n    return false;\n}\nexports.isPreact10 = isPreact10;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isUrl = void 0;\nconst URL_RE = /^https?:\\/\\/.+/;\nfunction isUrl(url) {\n    return URL_RE.test(url);\n}\nexports.isUrl = isUrl;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.persistMeasurements = exports.getMeasurements = exports.clearMeasurements = exports.getCumulativeMeasure = exports.endMeasure = exports.measure = exports.now = void 0;\nconst debug_1 = __importDefault(require(\"./debug\"));\nconst global_1 = require(\"./global\");\nconst debug = (0, debug_1.default)('cs:measurements');\nconst runningMeasurements = new Map();\nlet measurements = {};\nconst global = (0, global_1.getGlobal)();\nif (typeof global.performance === 'undefined') {\n    global.performance = {\n        mark: () => { },\n        now: () => Date.now(),\n        measure: () => { },\n    };\n}\nfunction now() {\n    try {\n        return performance.now();\n    }\n    catch (err) {\n        console.warn(err);\n        return 0;\n    }\n}\nexports.now = now;\nfunction measure(key) {\n    try {\n        performance.mark(`${key}_start`);\n        const currentTime = now();\n        runningMeasurements.set(key, currentTime);\n        return currentTime;\n    }\n    catch (e) {\n        console.warn(`Something went wrong while adding measure: ${e.message}`);\n        return 0;\n    }\n}\nexports.measure = measure;\nfunction endMeasure(key, options = {}) {\n    try {\n        const { lastTime } = options;\n        performance.mark(`${key}_end`);\n        const lastMeasurement = typeof lastTime === 'undefined' ? runningMeasurements.get(key) : lastTime;\n        if (typeof lastMeasurement === 'undefined') {\n            console.warn(`Measurement for '${key}' was requested, but never was started`);\n            return 0;\n        }\n        const nowMeasurement = performance.now();\n        measurements[key] = nowMeasurement - lastMeasurement;\n        if (!options.silent) {\n            debug(`${options.displayName || key} Time: ${measurements[key].toFixed(2)}ms`);\n        }\n        const hadKey = runningMeasurements.delete(key);\n        performance.measure(key, hadKey ? `${key}_start` : undefined, `${key}_end`);\n        return measurements[key];\n    }\n    catch (e) {\n        console.warn(`Something went wrong while adding measure: ${e.message}`);\n        return 0;\n    }\n}\nexports.endMeasure = endMeasure;\n/**\n * Get the cumulative of a specific measurement by prefix. If you had for example these measurements:\n * - transpile-index.js\n * - transpile-test.js\n *\n * You can get the sum of these measurements with getCumulativeMeasure('transpile', 'Transpilation')\n */\nfunction getCumulativeMeasure(prefix, options = {}) {\n    const keys = Object.keys(measurements).filter(p => p.startsWith(prefix + '-'));\n    const totalTime = keys.reduce((prev, key) => prev + measurements[key], 0);\n    if (!options.silent) {\n        debug(`${options.displayName || prefix} Total Time: ${totalTime.toFixed(2)}ms`);\n        debug(`  Average Time: ${(totalTime / keys.length).toFixed(2)}ms`);\n    }\n    return totalTime;\n}\nexports.getCumulativeMeasure = getCumulativeMeasure;\nfunction clearMeasurements() {\n    measurements = {};\n    runningMeasurements.clear();\n}\nexports.clearMeasurements = clearMeasurements;\nfunction getMeasurements() {\n    return measurements;\n}\nexports.getMeasurements = getMeasurements;\n(0, global_1.getGlobal)().measurements = {\n    clearMeasurements,\n    getCumulativeMeasure,\n    getMeasurements,\n};\nconst MEASUREMENT_API = `https://col.csbops.io/data/sandpack`;\nfunction persistMeasurements(data) {\n    var _a;\n    const body = [\n        {\n            measurement: 'load_times',\n            tags: {\n                browser: data.browser,\n                cache_used: data.cacheUsed,\n                version: data.version,\n            },\n            fields: {\n                transpilation: measurements.transpilation,\n                evaluation: measurements.evaluation,\n                external_resources: measurements['external-resources'],\n                compilation: measurements.compilation,\n                boot: measurements.boot,\n                total: measurements.total,\n                dependencies: measurements.dependencies,\n            },\n        },\n    ];\n    if (process.env.NODE_ENV === 'development' || process.env.STAGING) {\n        // eslint-disable-next-line\n        console.log(body);\n        return Promise.resolve();\n    }\n    // Ignore external call for on-prem deploys\n    // @ts-ignore\n    if (((_a = window._env_) === null || _a === void 0 ? void 0 : _a.IS_ONPREM) === 'true') {\n        return Promise.resolve();\n    }\n    return fetch(MEASUREMENT_API, {\n        method: 'POST',\n        body: JSON.stringify(body),\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n        },\n    });\n}\nexports.persistMeasurements = persistMeasurements;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.relative = exports.resolve = exports.extname = exports.absolute = exports.basename = exports.dirname = exports.join = exports.normalize = exports.isAbsolute = void 0;\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-continue */\nconst splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^/]+?|)(\\.[^./]*|))(?:[/]*)$/;\nfunction splitPath(filename) {\n    return splitPathRe.exec(filename).slice(1);\n}\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n    const res = [];\n    for (let i = 0; i < parts.length; i += 1) {\n        const p = parts[i];\n        // ignore empty parts\n        if (!p || p === '.')\n            continue; // eslint-disable-line no-continue\n        if (p === '..') {\n            if (res.length && res[res.length - 1] !== '..') {\n                res.pop();\n            }\n            else if (allowAboveRoot) {\n                res.push('..');\n            }\n        }\n        else {\n            res.push(p);\n        }\n    }\n    return res;\n}\nfunction isAbsolute(path) {\n    return path.charAt(0) === '/';\n}\nexports.isAbsolute = isAbsolute;\nfunction normalize(path) {\n    const isAbs = isAbsolute(path);\n    const trailingSlash = path && path[path.length - 1] === '/';\n    let newPath = path;\n    // Normalize the path\n    newPath = normalizeArray(newPath.split('/'), !isAbs).join('/');\n    if (!newPath && !isAbs) {\n        newPath = '.';\n    }\n    if (newPath && trailingSlash) {\n        newPath += '/';\n    }\n    return (isAbs ? '/' : '') + newPath;\n}\nexports.normalize = normalize;\nfunction join(...paths) {\n    let path = '';\n    for (let i = 0; i < paths.length; i += 1) {\n        const segment = paths[i];\n        if (typeof segment !== 'string') {\n            throw new TypeError('Arguments to path.join must be strings');\n        }\n        if (segment) {\n            if (!path) {\n                path += segment;\n            }\n            else {\n                path += `/${segment}`;\n            }\n        }\n    }\n    return normalize(path);\n}\nexports.join = join;\nfunction dirname(path) {\n    const result = splitPath(path);\n    const root = result[0];\n    let dir = result[1];\n    if (!root && !dir) {\n        // No dirname whatsoever\n        return '.';\n    }\n    if (dir) {\n        // It has a dirname, strip trailing slash\n        dir = dir.substr(0, dir.length - 1);\n    }\n    return root + dir;\n}\nexports.dirname = dirname;\nfunction basename(p, ext = '') {\n    // Special case: Normalize will modify this to '.'\n    if (p === '') {\n        return p;\n    }\n    // Normalize the string first to remove any weirdness.\n    const path = normalize(p);\n    // Get the last part of the string.\n    const sections = path.split('/');\n    const lastPart = sections[sections.length - 1];\n    // Special case: If it's empty, then we have a string like so: foo/\n    // Meaning, 'foo' is guaranteed to be a directory.\n    if (lastPart === '' && sections.length > 1) {\n        return sections[sections.length - 2];\n    }\n    // Remove the extension, if need be.\n    if (ext.length > 0) {\n        const lastPartExt = lastPart.substr(lastPart.length - ext.length);\n        if (lastPartExt === ext) {\n            return lastPart.substr(0, lastPart.length - ext.length);\n        }\n    }\n    return lastPart;\n}\nexports.basename = basename;\nfunction absolute(path) {\n    if (path.startsWith('/')) {\n        return path;\n    }\n    if (path.startsWith('./')) {\n        return path.replace('./', '/');\n    }\n    return '/' + path;\n}\nexports.absolute = absolute;\nfunction assertPath(path) {\n    if (typeof path !== 'string') {\n        throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n    }\n}\nfunction extname(path) {\n    assertPath(path);\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    let preDotState = 0;\n    for (let i = path.length - 1; i >= 0; --i) {\n        const code = path.charCodeAt(i);\n        if (code === 47) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n                startPart = i + 1;\n                break;\n            }\n            // eslint-disable-next-line\n            continue;\n        }\n        if (end === -1) {\n            // We saw the first non-path separator, mark this as the end of our\n            // extension\n            matchedSlash = false;\n            end = i + 1;\n        }\n        if (code === 46 /* . */) {\n            // If this is our first dot, mark it as the start of our extension\n            if (startDot === -1)\n                startDot = i;\n            else if (preDotState !== 1)\n                preDotState = 1;\n        }\n        else if (startDot !== -1) {\n            // We saw a non-dot and non-path separator before our dot, so we should\n            // have a good chance at having a non-empty extension\n            preDotState = -1;\n        }\n    }\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)) {\n        return '';\n    }\n    return path.slice(startDot, end);\n}\nexports.extname = extname;\nfunction resolve(...args) {\n    let resolvedPath = '';\n    let resolvedAbsolute = false;\n    for (let i = args.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n        const path = i >= 0 ? args[i] : process.cwd();\n        // Skip empty and invalid entries\n        if (typeof path !== 'string') {\n            throw new TypeError('Arguments to path.resolve must be strings');\n        }\n        else if (!path) {\n            continue;\n        }\n        resolvedPath = path + '/' + resolvedPath;\n        resolvedAbsolute = path[0] === '/';\n    }\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n    // Normalize the path\n    resolvedPath = normalizeArray(resolvedPath.split('/'), !resolvedAbsolute).join('/');\n    return (resolvedAbsolute ? '/' : '') + resolvedPath || '.';\n}\nexports.resolve = resolve;\nfunction trimArray(arr) {\n    const lastIndex = arr.length - 1;\n    let start = 0;\n    for (; start <= lastIndex; start++) {\n        if (arr[start])\n            break;\n    }\n    let end = lastIndex;\n    for (; end >= 0; end--) {\n        if (arr[end])\n            break;\n    }\n    if (start === 0 && end === lastIndex)\n        return arr;\n    if (start > end)\n        return [];\n    return arr.slice(start, end + 1);\n}\nfunction relative(from, to) {\n    from = resolve(from).substr(1);\n    to = resolve(to).substr(1);\n    const fromParts = trimArray(from.split('/'));\n    const toParts = trimArray(to.split('/'));\n    const length = Math.min(fromParts.length, toParts.length);\n    let samePartsLength = length;\n    for (let i = 0; i < length; i++) {\n        if (fromParts[i] !== toParts[i]) {\n            samePartsLength = i;\n            break;\n        }\n    }\n    let outputParts = [];\n    for (let i = samePartsLength; i < fromParts.length; i++) {\n        outputParts.push('..');\n    }\n    outputParts = outputParts.concat(toParts.slice(samePartsLength));\n    return outputParts.join('/');\n}\nexports.relative = relative;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction slugify(text) {\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;';\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n    const p = new RegExp(a.split('').join('|'), 'g');\n    /* eslint-disable */\n    return text\n        .toString()\n        .toLowerCase()\n        .replace(/\\s+/g, '-') // Replace spaces with -\n        .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n        .replace(/&/g, '-and-') // Replace & with 'and'\n        .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n        .replace(/^-+/, '') // Trim - from start of text\n        .replace(/-+$/, ''); // Trim - from end of text\n    /* eslint-enable */\n}\nexports.default = slugify;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTimestamp = exports[\"default\"] = void 0;\n// This is .js for preval\n\nvar versionType = \"PROD\";\nvar versionNumber = Math.floor(1709065599718 / 1000);\nvar shortCommitSha = \"e8817f725\";\nvar getTimestamp = exports.getTimestamp = function getTimestamp(version) {\n  return +version.split('-')[1];\n};\nvar _default = exports[\"default\"] = \"PROD-1709065599-e8817f725\";","import { actions, dispatch } from 'codesandbox-api';\nimport SandboxError from './sandbox-error';\n\nexport default class DependencyNotFoundError extends SandboxError {\n  constructor(dependencyName, fromPath) {\n    super();\n\n    this.type = 'dependency-not-found';\n    this.severity = 'error';\n    this.path = dependencyName;\n\n    const [root, second] = dependencyName.split('/');\n\n    // If the package starts with a @ it's scoped, we should add the second\n    // part of the name in that case\n    const parsedName = root.startsWith('@') ? `${root}/${second}` : root;\n    this.suggestions = [\n      {\n        title: `Add ${parsedName} as dependency`,\n        action: () => {\n          dispatch(actions.source.dependencies.add(parsedName));\n        },\n      },\n    ];\n\n    this.name = 'DependencyNotFoundError';\n    this.message = `Could not find dependency: '${parsedName}'`;\n\n    if (fromPath) {\n      this.message += ` relative to '${fromPath}'`;\n    }\n  }\n}\n","// @flow\nimport { dispatch, actions } from 'codesandbox-api';\nimport { getCurrentManager } from 'app/src/sandbox/compile';\nimport type TranspiledModule from 'app/src/sandbox/eval/transpiled-module';\n\nimport type { ErrorRecord } from 'sandbox-hooks/react-error-overlay/utils/errorRegister';\n\ntype TModuleError = Error & {\n  hideLine?: boolean,\n  line?: number,\n  path?: Object,\n  severity?: string,\n  payload?: Object,\n  tModule?: TranspiledModule,\n};\n\nfunction buildErrorMessage(e: TModuleError) {\n  const title = e.name;\n  const message = e.message;\n  let line = null;\n  let column = null;\n  if (!e.hideLine) {\n    // Safari\n    if (e.line != null) {\n      line = e.line;\n\n      // FF\n    } else if (e.lineNumber != null) {\n      line = e.lineNumber;\n\n      // Chrome\n    } else if (e.stack) {\n      const matched = e.stack.match(/<anonymous>:(\\d+):(\\d+)/);\n      if (matched) {\n        line = matched[1];\n        column = matched[2];\n      } else {\n        // Maybe it's a babel transpiler error\n        const babelMatched = e.stack.match(/(\\d+):(\\d+)/);\n        if (babelMatched) {\n          line = babelMatched[1];\n          column = babelMatched[2];\n        }\n      }\n    }\n  }\n\n  return {\n    path: e.tModule ? e.tModule.module.path : e.path,\n    title,\n    message,\n    line: parseInt(line, 10),\n    column: parseInt(column, 10),\n    payload: e.payload || {},\n    severity: e.severity || 'error',\n  };\n}\n\nconst wrappedResolveModule = (manager, path) => {\n  try {\n    return manager && manager.resolveTranspiledModuleSync(path, '/');\n  } catch (e) {\n    return null;\n  }\n};\n\nfunction buildDynamicError(ref: ErrorRecord) {\n  // TODO remove this logic for the SSE handler, move it to something more generic\n  // like a file store\n  const manager = getCurrentManager();\n\n  const relevantFrame = ref.enhancedFrames.find(r =>\n    wrappedResolveModule(\n      manager,\n      (r._originalFileName || r.fileName || '')\n        .replace(location.origin, '')\n        .replace('file://', '')\n    )\n  );\n\n  if (relevantFrame && manager) {\n    const fileName = relevantFrame._originalFileName || relevantFrame.fileName;\n    if (fileName) {\n      const tModule = manager.resolveTranspiledModuleSync(\n        fileName.replace(location.origin, '').replace('file://', ''),\n        '/'\n      );\n\n      if (tModule) {\n        const module = tModule.module;\n        return {\n          type: 'action',\n          action: 'show-error',\n          path: module.parent ? module.parent.path : module.path,\n          title: ref.error.name,\n          message: ref.error.message,\n          line: relevantFrame._originalLineNumber,\n          column: relevantFrame._originalColumnNumber,\n          payload: {\n            frames: ref.enhancedFrames,\n          },\n          severity: 'error',\n        };\n      }\n    }\n  } else {\n    const error: TModuleError = ref.error;\n    const tModule =\n      error.tModule ||\n      wrappedResolveModule(\n        manager,\n        (error.fileName || '')\n          .replace(location.origin, '')\n          .replace('file://', '')\n      );\n\n    if (tModule) {\n      const newError = {\n        ...buildErrorMessage(error),\n        path: error.fileName,\n        type: 'action',\n        action: 'show-error',\n      };\n\n      return newError;\n    }\n  }\n\n  return null;\n}\n\nconst MAX_ERRORS_PER_SECOND = 10;\nconst WARNING_INTERVAL_SECONDS = 10;\nlet errorsSentLastSecond = 0;\nlet lastWarningSent = 0;\n\nsetInterval(() => {\n  // Reset errors sent\n  errorsSentLastSecond = 0;\n}, 1000);\n\n/* eslint-disable no-underscore-dangle */\nexport default function showError(ref: ErrorRecord) {\n  // We don't want to flood the editor with errors, because of this\n  // we make sure to only send a max of MAX_ERRORS_PER_SECOND per second.\n  if (++errorsSentLastSecond > MAX_ERRORS_PER_SECOND) {\n    if (Date.now() - lastWarningSent > WARNING_INTERVAL_SECONDS * 1000) {\n      console.warn(\n        'Received too many errors in quick succession, not showing all errors in editor...'\n      );\n      lastWarningSent = Date.now();\n    }\n\n    return;\n  }\n\n  const errorToSend = buildDynamicError(ref);\n  if (errorToSend) {\n    dispatch(\n      actions.error.show(errorToSend.title, errorToSend.message, {\n        line: errorToSend.line,\n        column: errorToSend.column,\n        path: errorToSend.path,\n        payload: errorToSend.payload,\n      })\n    );\n  } else {\n    // Show based on error\n    dispatch(\n      actions.error.show(ref.error.name, ref.error.message, {\n        line: ref.error.lineNumber,\n        column: ref.error.columnNumber,\n        path: ref.error.fileName,\n        payload: {},\n      })\n    );\n  }\n}\n","// @flow\n\nimport SandboxError from './sandbox-error';\n\nexport default class ModuleNotFoundError extends SandboxError {\n  constructor(path: string, isDependency: boolean, currentPath?: string) {\n    super();\n    this.path = path;\n    this.isDependency = isDependency;\n\n    this.name = 'ModuleNotFoundError';\n    this.message = `Could not find module in path: '${path}'`;\n\n    if (currentPath) {\n      this.message += ` relative to '${currentPath}'`;\n    }\n  }\n  type = 'module-not-found';\n  severity = 'error';\n  path: string;\n  isDependency: boolean;\n}\n","// import type { Module } from '@codesandbox/common/lib/types';\n\n// type Suggestion = {\n//   title: string,\n//   action: Function,\n// };\n\nconst ErrorClass = Error;\n\nexport default class SandboxError extends ErrorClass {\n  // severity: 'error' | 'warning';\n  // type: string;\n  // module: Module;\n  // payload: ?Object;\n  // suggestions: Array<Suggestion>;\n\n  constructor(error /*: ?Error */) {\n    super(error ? error.message : null);\n\n    this.suggestions = [];\n\n    if (error) {\n      this.fileName = error.fileName;\n      this.description = error.description;\n      this.message = error.message;\n      this.name = error.name;\n      this.stack = error.stack;\n      this.number = error.number;\n    }\n  }\n}\n","import { registerErrorTransformer } from 'codesandbox-api';\n\nimport rawReactErrorTransformer from './raw-react-component-error';\n\nconst transformers = [rawReactErrorTransformer];\n\nexport default function registerErrorTransformers() {\n  transformers.forEach(t => registerErrorTransformer(t));\n}\n","import { actions, dispatch } from 'codesandbox-api';\n\nimport { basename } from '@codesandbox/common/lib/utils/path';\n\nfunction findRawModule(module) {\n  const rawModule = Array.from(module.dependencies).find(\n    m => !/\\.([\\w]{2}|[\\w]{3})$/.test(m.module.path)\n  );\n\n  if (rawModule) {\n    return [module, rawModule];\n  }\n\n  // The error is thrown at the root, so we check for children components\n  return Array.from(module.dependencies).reduce((foundResult, m) => {\n    // We already found it, immediately return\n    if (foundResult) return foundResult;\n\n    return findRawModule(m);\n  }, null);\n}\n\n/**\n * This transformer detects raw imports used as React component, when the module\n * is missing a file extension\n *\n * @export\n * @param {Error} error\n * @param {any} module\n * @returns\n */\nexport default function (error: Error, module) {\n  if (\n    error.message.includes(\n      \"Failed to execute 'createElement' on 'Document': The tag name provided \"\n    )\n  ) {\n    const result = findRawModule(module);\n\n    if (result) {\n      const [sourceModule, rawModule] = result;\n      return {\n        name: 'Raw import',\n        message: `It seems like '${basename(\n          sourceModule.module.path\n        )}' is importing a raw module (${basename(rawModule.module.path)})`,\n        suggestions: [\n          {\n            title: `Rename ${basename(rawModule.module.path)} to ${basename(\n              rawModule.module.path\n            )}.js`,\n            action: () => {\n              dispatch(\n                actions.source.modules.rename(\n                  rawModule.module.path,\n                  `${basename(rawModule.module.path)}.js`\n                )\n              );\n            },\n          },\n        ],\n      };\n    }\n  }\n\n  return null;\n}\n","import { createOverlay } from './overlay-manager';\nimport { requestPreviewSecretFromApp } from '../preview-secret';\n\nconst HTML = `\n<style>\nbody {\n  font-family: \"Roboto\", sans-serif;\n  background-color: #1d2022;\n  width: 100vw;\n  height: 100vh;\n  -webkit-font-smoothing: antialiased;\n  -moz-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-smoothing: antialiased;\n  text-rendering: optimizeLegibility;\n  font-smooth: always;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n  min-height: 100%;\n  -webkit-text-size-adjust: 100%;\n  line-height: 1.4;\n  overflow: hidden;\n}\n\n.container {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  margin: 0 auto;\n  max-width: 530px;\n  height: 100%;\n}\n\n.title {\n  color: #efefef;\n  font-size: 3rem;\n  width: 100%;\n  font-weight: 600;\n  text-align: center;\n  margin-bottom: 1rem;\n}\n.description {\n  color: #eeeeee;\n  font-size: 1.5rem;\n  width: 100%;\n  font-weight: 300;\n  text-align: center;\n  margin-top: 0;\n}\n\nbutton {\n  text-decoration: none;\n  color: #40a9f3;\n  outline: none;\n  border: none;\n  background: transparent;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  font-size: 1em;\n}\n</style>\n\n<div class=\"container\">\n<h1 class=\"title\">404</h1>\n<p class=\"description\">\n  We could not find the sandbox you’re looking for, did you try\n  <button id=\"sign-in-button\">signing in</button>?\n</p>\n</div>\n`;\n\nexport async function show404(sandboxId) {\n  const windowRef = await createOverlay(HTML);\n\n  windowRef.contentDocument.getElementById('sign-in-button').onclick = () => {\n    requestPreviewSecretFromApp(sandboxId);\n  };\n}\n","let iframeReference = null;\n\nexport function resetOverlay() {\n  try {\n    window.document.body.removeChild(iframeReference);\n    iframeReference = null;\n  } catch (e) {\n    /* nothing */\n  }\n}\n\nfunction createIframe() {\n  return new Promise(resolve => {\n    if (iframeReference) {\n      resolve(iframeReference);\n    }\n\n    const iframe = document.createElement('iframe');\n\n    iframe.setAttribute(\n      'style',\n      `position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 214748366;`\n    );\n    iframe.setAttribute('id', 'frame');\n\n    iframeReference = iframe;\n\n    document.body.appendChild(iframe);\n\n    if (iframe.contentDocument) {\n      resolve(iframe);\n    } else if (document.getElementById('not-found-frame')) {\n      document.getElementById('not-found-frame').onload = () => {\n        resolve(iframe);\n      };\n    } else {\n      resolve(iframe);\n    }\n  });\n}\n\nexport async function createOverlay(html) {\n  const iframe = await createIframe();\n\n  const isMounted = !!document.getElementById('not-found-frame');\n  if (!isMounted) {\n    document.body.appendChild(iframe);\n  }\n\n  iframe.contentDocument.body.innerHTML = html;\n\n  return iframe;\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport {\n  additionalChildStyle,\n  groupElemLeft,\n  groupElemRight,\n  groupStyle,\n} from '../styles';\nimport { consumeEvent } from '../utils/dom/consumeEvent';\nimport { applyStyles } from '../utils/dom/css';\nimport { enableTabClick } from '../utils/dom/enableTabClick';\n\ntype SwitchCallback = (offset: number) => void;\nfunction updateAdditional(\n  document: Document,\n  additionalReference: HTMLDivElement,\n  currentError: number,\n  totalErrors: number,\n  switchCallback: SwitchCallback\n) {\n  if (additionalReference.lastChild) {\n    additionalReference.removeChild(additionalReference.lastChild);\n  }\n\n  if (totalErrors <= 1) {\n    return;\n  }\n\n  const div = document.createElement('div');\n  applyStyles(div, additionalChildStyle);\n\n  const group = document.createElement('span');\n  applyStyles(group, groupStyle);\n\n  const left = document.createElement('button');\n  applyStyles(left, groupElemLeft);\n  left.addEventListener('click', function(e: MouseEvent) {\n    consumeEvent(e);\n    switchCallback(-1);\n  });\n  left.appendChild(document.createTextNode('←'));\n  enableTabClick(left);\n\n  const right = document.createElement('button');\n  applyStyles(right, groupElemRight);\n  right.addEventListener('click', function(e: MouseEvent) {\n    consumeEvent(e);\n    switchCallback(1);\n  });\n  right.appendChild(document.createTextNode('→'));\n  enableTabClick(right);\n\n  group.appendChild(left);\n  group.appendChild(right);\n  div.appendChild(group);\n\n  const text = `${currentError} of ${totalErrors} errors on the page`;\n  div.appendChild(document.createTextNode(text));\n\n  additionalReference.appendChild(div);\n}\n\nexport type { SwitchCallback };\nexport { updateAdditional };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { closeButtonStyle, hintsStyle, hintStyle } from '../styles';\nimport { applyStyles } from '../utils/dom/css';\n\nfunction createHint(document: Document, hint: string, title: string) {\n  const span = document.createElement('span');\n  span.appendChild(document.createTextNode(hint));\n  span.setAttribute('title', title);\n  applyStyles(span, hintStyle);\n  return span;\n}\n\ntype CloseCallback = () => void;\nfunction createClose(document: Document, callback: CloseCallback) {\n  const hints = document.createElement('div');\n  applyStyles(hints, hintsStyle);\n\n  const close = createHint(document, '×', 'Click or press Escape to dismiss.');\n  close.addEventListener('click', () => callback());\n  applyStyles(close, closeButtonStyle);\n  hints.appendChild(close);\n  return hints;\n}\n\nexport type { CloseCallback };\nexport { createClose };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport type { ScriptLine } from '../utils/stack-frame';\nimport codeFrame from 'babel-code-frame';\nimport generateAnsiHtml from 'react-dev-utils/ansiHTML';\nimport {\n  codeStyle,\n  primaryErrorStyle,\n  primaryPreStyle,\n  secondaryErrorStyle,\n  secondaryPreStyle,\n} from '../styles';\nimport { applyStyles } from '../utils/dom/css';\n\nfunction createCode(\n  document: Document,\n  sourceLines: ScriptLine[],\n  lineNum: number,\n  columnNum: number | null,\n  contextSize: number,\n  main: boolean,\n  onSourceClick: ?Function\n) {\n  const sourceCode = [];\n  let whiteSpace = Infinity;\n  sourceLines.forEach(function(e) {\n    const { content: text } = e;\n    const m = text.match(/^\\s*/);\n    if (text === '') {\n      return;\n    }\n    if (m && m[0]) {\n      whiteSpace = Math.min(whiteSpace, m[0].length);\n    } else {\n      whiteSpace = 0;\n    }\n  });\n  sourceLines.forEach(function(e) {\n    let { content: text } = e;\n    const { lineNumber: line } = e;\n\n    if (isFinite(whiteSpace)) {\n      text = text.substring(whiteSpace);\n    }\n    sourceCode[line - 1] = text;\n  });\n  const ansiHighlight = codeFrame(\n    sourceCode.join('\\n'),\n    lineNum,\n    columnNum == null ? 0 : columnNum - (isFinite(whiteSpace) ? whiteSpace : 0),\n    {\n      forceColor: true,\n      linesAbove: contextSize,\n      linesBelow: contextSize,\n    }\n  );\n  const htmlHighlight = generateAnsiHtml(ansiHighlight);\n  const code = document.createElement('code');\n  code.innerHTML = htmlHighlight;\n  applyStyles(code, codeStyle);\n\n  const ccn = code.childNodes;\n  // eslint-disable-next-line\n  oLoop: for (let index = 0; index < ccn.length; ++index) {\n    const node = ccn[index];\n    const ccn2 = node.childNodes;\n    for (let index2 = 0; index2 < ccn2.length; ++index2) {\n      const lineNode = ccn2[index2];\n      const text = lineNode.innerText;\n      if (text == null) {\n        continue;\n      }\n      if (text.indexOf(' ' + lineNum + ' |') === -1) {\n        continue;\n      }\n      // $FlowFixMe\n      applyStyles(node, main ? primaryErrorStyle : secondaryErrorStyle);\n      // eslint-disable-next-line\n      break oLoop;\n    }\n  }\n  const pre = document.createElement('pre');\n  applyStyles(pre, main ? primaryPreStyle : secondaryPreStyle);\n  pre.appendChild(code);\n\n  if (typeof onSourceClick === 'function') {\n    let handler = onSourceClick;\n    pre.style.cursor = 'pointer';\n    pre.addEventListener('click', function() {\n      handler();\n    });\n  }\n\n  return pre;\n}\n\nexport { createCode };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { footerStyle } from '../styles';\nimport { applyStyles } from '../utils/dom/css';\n\nfunction createFooter(document: Document) {\n  const div = document.createElement('div');\n  applyStyles(div, footerStyle);\n  div.appendChild(\n    document.createTextNode(\n      'This screen is visible only in development. It will not appear if the app crashes in production.'\n    )\n  );\n  div.appendChild(document.createElement('br'));\n  div.appendChild(\n    document.createTextNode(\n      'Open your browser’s developer console to further inspect this error.'\n    )\n  );\n  div.appendChild(document.createElement('br'));\n  div.appendChild(\n    document.createTextNode(\n      'This error overlay is powered by `react-error-overlay` used in `create-react-app`.'\n    )\n  );\n  return div;\n}\n\nexport { createFooter };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { getCurrentManager } from 'app/src/sandbox/compile';\nimport { actions, dispatch } from 'codesandbox-api';\nimport {\n  anchorStyle,\n  depStyle,\n  functionNameStyle,\n  hiddenStyle,\n  linkStyle,\n  omittedFramesCollapsedStyle,\n  omittedFramesExpandedStyle,\n} from '../styles';\nimport { applyStyles } from '../utils/dom/css';\nimport { enableTabClick } from '../utils/dom/enableTabClick';\nimport { isInternalFile } from '../utils/isInternalFile';\nimport { createCode } from './code';\nimport type { StackFrame } from '../utils/stack-frame';\nimport type { FrameSetting, OmitsObject } from './frames';\n\nfunction getGroupToggle(\n  document: Document,\n  omitsCount: number,\n  omitBundle: number\n) {\n  const omittedFrames = document.createElement('div');\n  enableTabClick(omittedFrames);\n  const text1 = document.createTextNode(\n    '\\u25B6 ' + omitsCount + ' stack frames were collapsed.'\n  );\n  omittedFrames.appendChild(text1);\n  omittedFrames.addEventListener('click', function() {\n    const hide = text1.textContent.match(/▲/);\n    const list = document.getElementsByName('bundle-' + omitBundle);\n    for (let index = 0; index < list.length; ++index) {\n      const n = list[index];\n      if (hide) {\n        n.style.display = 'none';\n      } else {\n        n.style.display = '';\n      }\n    }\n    if (hide) {\n      text1.textContent = text1.textContent.replace(/▲/, '▶');\n      text1.textContent = text1.textContent.replace(/expanded/, 'collapsed');\n      applyStyles(omittedFrames, omittedFramesCollapsedStyle);\n    } else {\n      text1.textContent = text1.textContent.replace(/▶/, '▲');\n      text1.textContent = text1.textContent.replace(/collapsed/, 'expanded');\n      applyStyles(omittedFrames, omittedFramesExpandedStyle);\n    }\n  });\n  applyStyles(omittedFrames, omittedFramesCollapsedStyle);\n  return omittedFrames;\n}\n\nfunction insertBeforeBundle(\n  document: Document,\n  parent: Node,\n  omitsCount: number,\n  omitBundle: number,\n  actionElement\n) {\n  const children = document.getElementsByName('bundle-' + omitBundle);\n  if (children.length < 1) {\n    return;\n  }\n  let first: ?Node = children[0];\n  while (first != null && first.parentNode !== parent) {\n    first = first.parentNode;\n  }\n  const div = document.createElement('div');\n  enableTabClick(div);\n  div.setAttribute('name', 'bundle-' + omitBundle);\n  const text = document.createTextNode(\n    '\\u25BC ' + omitsCount + ' stack frames were expanded.'\n  );\n  div.appendChild(text);\n  div.addEventListener('click', function() {\n    return actionElement.click();\n  });\n  applyStyles(div, omittedFramesExpandedStyle);\n  div.style.display = 'none';\n\n  parent.insertBefore(div, first);\n}\n\nfunction frameDiv(\n  document: Document,\n  functionName,\n  url,\n  internalUrl,\n  onSourceClick: ?Function\n) {\n  const frame = document.createElement('div');\n  const frameFunctionName = document.createElement('div');\n\n  let cleanedFunctionName;\n  if (!functionName || functionName === 'Object.<anonymous>') {\n    cleanedFunctionName = '(anonymous function)';\n  } else {\n    cleanedFunctionName = functionName;\n  }\n\n  const cleanedUrl = url.replace('webpack://', '.');\n\n  if (internalUrl) {\n    applyStyles(\n      frameFunctionName,\n      { ...functionNameStyle, ...depStyle}\n    );\n  } else {\n    applyStyles(frameFunctionName, functionNameStyle);\n  }\n\n  frameFunctionName.appendChild(document.createTextNode(cleanedFunctionName));\n  frame.appendChild(frameFunctionName);\n\n  const frameLink = document.createElement('div');\n  applyStyles(frameLink, linkStyle);\n  const frameAnchor = document.createElement('a');\n  applyStyles(frameAnchor, anchorStyle);\n  frameAnchor.appendChild(document.createTextNode(cleanedUrl));\n  frameLink.appendChild(frameAnchor);\n  frame.appendChild(frameLink);\n\n  if (typeof onSourceClick === 'function') {\n    const handler = onSourceClick;\n    enableTabClick(frameAnchor);\n    frameAnchor.style.cursor = 'pointer';\n    frameAnchor.addEventListener('click', function() {\n      handler();\n    });\n  }\n\n  return frame;\n}\n\nfunction isBultinErrorName(errorName: ?string) {\n  switch (errorName) {\n    case 'EvalError':\n    case 'InternalError':\n    case 'RangeError':\n    case 'ReferenceError':\n    case 'SyntaxError':\n    case 'TypeError':\n    case 'URIError':\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction getPrettyURL(\n  sourceFileName: ?string,\n  sourceLineNumber: ?number,\n  sourceColumnNumber: ?number,\n  fileName: ?string,\n  lineNumber: ?number,\n  columnNumber: ?number,\n  compiled: boolean\n): string {\n  let prettyURL;\n  if (!compiled && sourceFileName && typeof sourceLineNumber === 'number') {\n    // Remove everything up to the first /src/ or /node_modules/\n    const trimMatch = /^[/|\\\\].*?[/|\\\\]((src|node_modules)[/|\\\\].*)/.exec(\n      sourceFileName\n    );\n    if (trimMatch && trimMatch[1]) {\n      prettyURL = trimMatch[1];\n    } else {\n      prettyURL = sourceFileName;\n    }\n    prettyURL += ':' + sourceLineNumber;\n    // Note: we intentionally skip 0's because they're produced by cheap Webpack maps\n    if (sourceColumnNumber) {\n      prettyURL += ':' + sourceColumnNumber;\n    }\n  } else if (fileName && typeof lineNumber === 'number') {\n    prettyURL = fileName + ':' + lineNumber;\n    // Note: we intentionally skip 0's because they're produced by cheap Webpack maps\n    if (columnNumber) {\n      prettyURL += ':' + columnNumber;\n    }\n  } else {\n    prettyURL = 'unknown';\n  }\n  return prettyURL;\n}\n\nfunction createFrame(\n  document: Document,\n  frameSetting: FrameSetting,\n  frame: StackFrame,\n  contextSize: number,\n  critical: boolean,\n  omits: OmitsObject,\n  omitBundle: number,\n  parentContainer: HTMLDivElement,\n  lastElement: boolean,\n  errorName: ?string\n) {\n  const { compiled } = frameSetting;\n  let { functionName, _originalFileName: sourceFileName } = frame;\n  const {\n    fileName,\n    lineNumber,\n    columnNumber,\n    _scriptCode: scriptLines,\n    _originalLineNumber: sourceLineNumber,\n    _originalColumnNumber: sourceColumnNumber,\n    _originalScriptCode: sourceLines,\n  } = frame;\n\n  // TODO: find a better place for this.\n  // Chrome has a bug with inferring function.name:\n  // https://github.com/facebookincubator/create-react-app/issues/2097\n  // Let's ignore a meaningless name we get for top-level modules.\n  if (\n    functionName === 'Object.friendlySyntaxErrorLabel' ||\n    functionName === 'Object.exports.__esModule'\n  ) {\n    functionName = '(anonymous function)';\n  }\n\n  const prettyURL = getPrettyURL(\n    sourceFileName,\n    sourceLineNumber,\n    sourceColumnNumber,\n    fileName,\n    lineNumber,\n    columnNumber,\n    compiled\n  );\n\n  let needsHidden = false;\n  const isInternalUrl = isInternalFile(sourceFileName, fileName);\n  const isThrownIntentionally = !isBultinErrorName(errorName);\n  const shouldCollapse =\n    isInternalUrl && (isThrownIntentionally || omits.hasReachedAppCode);\n\n  if (!isInternalUrl) {\n    omits.hasReachedAppCode = true;\n  }\n\n  if (shouldCollapse) {\n    ++omits.value;\n    needsHidden = true;\n  }\n\n  let collapseElement = null;\n  if (!shouldCollapse || lastElement) {\n    if (omits.value > 0) {\n      const capV = omits.value;\n      const omittedFrames = getGroupToggle(document, capV, omitBundle);\n      window.requestAnimationFrame(() => {\n        insertBeforeBundle(\n          document,\n          parentContainer,\n          capV,\n          omitBundle,\n          omittedFrames\n        );\n      });\n      if (lastElement && shouldCollapse) {\n        collapseElement = omittedFrames;\n      } else {\n        parentContainer.appendChild(omittedFrames);\n      }\n      ++omits.bundle;\n    }\n    omits.value = 0;\n  }\n\n  let onSourceClick = null;\n  if (sourceFileName) {\n    // e.g. \"/path-to-my-app/webpack/bootstrap eaddeb46b67d75e4dfc1\"\n    const isInternalWebpackBootstrapCode =\n      sourceFileName.trim().indexOf(' ') !== -1;\n    if (!isInternalWebpackBootstrapCode) {\n      onSourceClick = () => {\n        const manager = getCurrentManager();\n        if (manager) {\n          const tModule = manager.resolveTranspiledModuleSync(\n            sourceFileName.replace(location.origin, '').replace('file://', ''),\n            '/'\n          );\n\n          dispatch(\n            actions.editor.openModule(\n              // A module has a parent when it has been generated by a module,\n              // Vue is an example of this: SFC's generate submodules\n              tModule.module.parent\n                ? tModule.module.parent.path\n                : tModule.module.path,\n              window.encodeURIComponent(sourceLineNumber || 1)\n            )\n          );\n        }\n      };\n    }\n  }\n\n  const elem = frameDiv(\n    document,\n    functionName,\n    prettyURL,\n    shouldCollapse,\n    onSourceClick\n  );\n  if (needsHidden) {\n    applyStyles(elem, hiddenStyle);\n    elem.setAttribute('name', 'bundle-' + omitBundle);\n  }\n\n  let hasSource = false;\n  if (!shouldCollapse) {\n    if (\n      compiled &&\n      scriptLines &&\n      scriptLines.length !== 0 &&\n      lineNumber != null\n    ) {\n      elem.appendChild(\n        createCode(\n          document,\n          scriptLines,\n          lineNumber,\n          columnNumber,\n          contextSize,\n          critical,\n          onSourceClick\n        )\n      );\n      hasSource = true;\n    } else if (\n      !compiled &&\n      sourceLines &&\n      sourceLines.length !== 0 &&\n      sourceLineNumber != null\n    ) {\n      elem.appendChild(\n        createCode(\n          document,\n          sourceLines,\n          sourceLineNumber,\n          sourceColumnNumber,\n          contextSize,\n          critical,\n          onSourceClick\n        )\n      );\n      hasSource = true;\n    }\n  }\n\n  return { elem, hasSource, collapseElement };\n}\n\nexport { createFrame };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport type { StackFrame } from '../utils/stack-frame';\nimport { applyStyles } from '../utils/dom/css';\nimport { traceStyle, toggleStyle } from '../styles';\nimport { enableTabClick } from '../utils/dom/enableTabClick';\nimport { createFrame } from './frame';\n\ntype OmitsObject = {\n  value: number,\n  bundle: number,\n  hasReachedAppCode: boolean,\n};\ntype FrameSetting = { compiled: boolean };\nexport type { OmitsObject, FrameSetting };\n\nfunction createFrameWrapper(\n  document: Document,\n  parent: HTMLDivElement,\n  factory,\n  lIndex: number,\n  frameSettings: FrameSetting[],\n  contextSize: number\n) {\n  const fac = factory();\n  if (fac == null) {\n    return;\n  }\n  const { hasSource, elem, collapseElement } = fac;\n\n  const elemWrapper = document.createElement('div');\n  elemWrapper.appendChild(elem);\n\n  if (hasSource) {\n    const compiledDiv = document.createElement('div');\n    enableTabClick(compiledDiv);\n    applyStyles(compiledDiv, toggleStyle);\n\n    const o = frameSettings[lIndex];\n    const compiledText = document.createTextNode(\n      'View ' + (o && o.compiled ? 'source' : 'compiled')\n    );\n    compiledDiv.addEventListener('click', function() {\n      if (o) {\n        o.compiled = !o.compiled;\n      }\n\n      const next = createFrameWrapper(\n        document,\n        parent,\n        factory,\n        lIndex,\n        frameSettings,\n        contextSize\n      );\n      if (next != null) {\n        parent.insertBefore(next, elemWrapper);\n        parent.removeChild(elemWrapper);\n      }\n    });\n    compiledDiv.appendChild(compiledText);\n    elemWrapper.appendChild(compiledDiv);\n  }\n\n  if (collapseElement != null) {\n    elemWrapper.appendChild(collapseElement);\n  }\n\n  return elemWrapper;\n}\n\nfunction createFrames(\n  document: Document,\n  resolvedFrames: StackFrame[],\n  frameSettings: FrameSetting[],\n  contextSize: number,\n  errorName: ?string\n) {\n  if (resolvedFrames.length !== frameSettings.length) {\n    throw new Error(\n      'You must give a frame settings array of identical length to resolved frames.'\n    );\n  }\n  const trace = document.createElement('div');\n  applyStyles(trace, traceStyle);\n\n  let index = 0;\n  let critical = true;\n  const omits: OmitsObject = { value: 0, bundle: 1, hasReachedAppCode: false };\n  resolvedFrames.forEach(function(frame) {\n    const lIndex = index++;\n    const elem = createFrameWrapper(\n      document,\n      trace,\n      createFrame.bind(\n        undefined,\n        document,\n        frameSettings[lIndex],\n        frame,\n        contextSize,\n        critical,\n        omits,\n        omits.bundle,\n        trace,\n        index === resolvedFrames.length,\n        errorName\n      ),\n      lIndex,\n      frameSettings,\n      contextSize\n    );\n    if (elem == null) {\n      return;\n    }\n    critical = false;\n    trace.appendChild(elem);\n  });\n  //TODO: fix this\n  omits.value = 0;\n\n  return trace;\n}\n\nexport { createFrames };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { areActionsEnabled } from 'app/src/sandbox/compile';\nimport {\n  containerStyle,\n  headerStyle,\n  messageHeaderStyle,\n  originalHeaderStyle,\n  originalMessageHeaderStyle,\n  overlayStyle,\n} from '../styles';\nimport { applyStyles } from '../utils/dom/css';\nimport { updateAdditional } from './additional';\nimport { createClose } from './close';\nimport { createFooter } from './footer';\nimport { createFrames } from './frames';\nimport { createSuggestions } from './suggestions';\nimport type { CloseCallback } from './close';\nimport type { StackFrame } from '../utils/stack-frame';\nimport type { FrameSetting } from './frames';\nimport type { SwitchCallback } from './additional';\n\nfunction createOverlay(\n  document: Document,\n  error: Error,\n  name: ?string,\n  message: string,\n  frames: StackFrame[],\n  contextSize: number,\n  currentError: number,\n  totalErrors: number,\n  switchCallback: SwitchCallback,\n  closeCallback: CloseCallback\n): {\n  overlay: HTMLDivElement,\n  additional: HTMLDivElement,\n} {\n  const frameSettings: FrameSetting[] = frames.map(() => ({ compiled: false }));\n  // Create overlay\n  const overlay = document.createElement('div');\n  applyStyles(overlay, overlayStyle);\n\n  // Create container\n  const container = document.createElement('div');\n  applyStyles(container, containerStyle);\n  overlay.appendChild(container);\n  container.appendChild(createClose(document, closeCallback));\n\n  // Create \"Errors X of Y\" in case of multiple errors\n  const additional = document.createElement('div');\n  updateAdditional(\n    document,\n    additional,\n    currentError,\n    totalErrors,\n    switchCallback\n  );\n  container.appendChild(additional);\n\n  // Create header\n  const header = document.createElement('div');\n  applyStyles(header, headerStyle);\n\n  const messageHeader = document.createElement('div');\n  applyStyles(messageHeader, messageHeaderStyle);\n\n  // Make message prettier\n  let finalMessage = message;\n\n  finalMessage = finalMessage\n    // TODO: maybe remove this prefix from fbjs?\n    // It's just scaring people\n    .replace(/^Invariant Violation:\\s*/, '')\n    // This is not helpful either:\n    .replace(/^Warning:\\s*/, '')\n    // Break the actionable part to the next line.\n    // AFAIK React 16+ should already do this.\n    .replace(' Check the render method', '\\n\\nCheck the render method')\n    .replace(' Check your code at', '\\n\\nCheck your code at');\n\n  // Put it in the DOM\n  header.appendChild(document.createTextNode(name || ''));\n  messageHeader.appendChild(document.createTextNode(finalMessage));\n\n  container.appendChild(header);\n  container.appendChild(messageHeader);\n\n  // If the error has been transformed\n  if (error.originalName || error.originalMessage) {\n    const originalErrorContainer = document.createElement('div');\n    const errorHeader = document.createElement('div');\n    applyStyles(errorHeader, originalHeaderStyle);\n    errorHeader.appendChild(document.createTextNode('Original error:'));\n    originalErrorContainer.appendChild(errorHeader);\n\n    // Create header\n    const originalMessageHeader = document.createElement('div');\n    applyStyles(originalMessageHeader, originalMessageHeaderStyle);\n\n    originalMessageHeader.appendChild(\n      document.createTextNode(\n        `${error.originalName || ''}: ${error.originalMessage}`\n      )\n    );\n\n    originalErrorContainer.appendChild(originalMessageHeader);\n    messageHeader.appendChild(originalErrorContainer);\n  }\n\n  if (\n    areActionsEnabled() &&\n    error.suggestions &&\n    error.suggestions.length > 0\n  ) {\n    container.appendChild(createSuggestions(error));\n  }\n\n  // Create trace\n  container.appendChild(\n    createFrames(document, frames, frameSettings, contextSize, name)\n  );\n\n  // Show message\n  container.appendChild(createFooter(document));\n\n  return {\n    overlay,\n    additional,\n  };\n}\n\nexport { createOverlay };\n","import { applyStyles } from '../utils/dom/css';\nimport {\n  suggestionsContainerStyle,\n  suggestionsTitleStyle,\n  suggestionsButtonStyle,\n} from '../styles';\n\nexport function createSuggestions(error: SandboxError) {\n  const container = document.createElement('div');\n\n  applyStyles(container, suggestionsContainerStyle);\n\n  const title = document.createElement('div');\n  title.appendChild(document.createTextNode('Suggested solutions:'));\n  applyStyles(title, suggestionsTitleStyle);\n  container.appendChild(title);\n\n  error.suggestions.forEach(suggestion => {\n    const button = document.createElement('button');\n    button.appendChild(document.createTextNode(suggestion.title));\n    button.setAttribute('onmouseover', 'this.style.backgroundColor=\"#78CDF7\"');\n    button.setAttribute(\n      'onmouseout',\n      `this.style.backgroundColor=\"${suggestionsButtonStyle['background-color']}\"`\n    );\n    applyStyles(button, suggestionsButtonStyle);\n\n    button.addEventListener('click', e => {\n      e.preventDefault();\n      suggestion.action();\n    });\n\n    container.appendChild(button);\n  });\n\n  return container;\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/* @flow */\n\ntype ReactFrame = {\n  fileName: string | null,\n  lineNumber: number | null,\n  name: string | null,\n};\nconst reactFrameStack: Array<ReactFrame[]> = [];\n\nexport type { ReactFrame };\n\n// This is a stripped down barebones version of this proposal:\n// https://gist.github.com/sebmarkbage/bdefa100f19345229d526d0fdd22830f\n// We're implementing just enough to get the invalid element type warnings\n// to display the component stack in React 15.6+:\n// https://github.com/facebook/react/pull/9679\n// / TODO: a more comprehensive implementation.\n\nexport function registerReactStack() {\n  if (typeof console !== 'undefined') {\n    // $FlowFixMe\n    console.reactStack = frames => reactFrameStack.push(frames);\n    // $FlowFixMe\n    console.reactStackEnd = frames => reactFrameStack.pop();\n\n    return () => {\n      // $FlowFixMe\n      console.reactStack = undefined;\n      // $FlowFixMe\n      console.reactStackEnd = undefined;\n    };\n  }\n\n  return () => {};\n}\n\ntype ConsoleProxyCallback = (message: string, frames: ReactFrame[]) => void;\nexport function permanentRegister(\n  type: string,\n  callback: ConsoleProxyCallback\n) {\n  if (typeof console !== 'undefined') {\n    const orig = console[type];\n    if (typeof orig === 'function') {\n      console[type] = function __stack_frame_overlay_proxy_console__() {\n        try {\n          const message = arguments[0];\n          if (typeof message === 'string' && reactFrameStack.length > 0) {\n            callback(message, reactFrameStack[reactFrameStack.length - 1]);\n          }\n        } catch (err) {\n          // Warnings must never crash. Rethrow with a clean stack.\n          setTimeout(function () {\n            throw err;\n          });\n        }\n        return orig.apply(this, arguments);\n      };\n    }\n  }\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nconst MAX_STACK_LENGTH: number = 50;\n\nexport function registerStackTraceLimit(limit: number = MAX_STACK_LENGTH) {\n  try {\n    Error.stackTraceLimit = limit;\n  } catch (e) {\n    // Not all browsers support this so we don't care if it errors\n  }\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\ntype ErrorCallback = (error: Error) => void;\n\nfunction errorHandler(callback: ErrorCallback, e: Event): void {\n  if (!e.error) {\n    return;\n  }\n  \n  // $FlowFixMe\n  const { error } = e;\n  if (error instanceof Error) {\n    callback(error);\n  } else {\n    // A non-error was thrown, we don't have a trace. :(\n    // Look in your browser's devtools for more information\n    callback(new Error(error));\n  }\n}\n\nexport function registerUnhandledError(target: EventTarget, callback: ErrorCallback) {\n  const boundErrorHandler = errorHandler.bind(undefined, callback);\n  target.addEventListener('error', boundErrorHandler);\n  return () => {\n    target.removeEventListener('error', boundErrorHandler);\n  }\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\ntype ErrorCallback = (error: Error) => void;\n\nexport function registerUnhandledRejection(\n  target: EventTarget,\n  callback: ErrorCallback\n) {\n  const rejectionHandler = err => {\n    if (err == null || err.reason == null) {\n      return callback(new Error('Unknown'));\n    }\n\n    const { reason } = err;\n    if (reason instanceof Error) {\n      return callback(reason);\n    }\n\n    // A non-error was rejected, we don't have a trace :(\n    // Look in your browser's devtools for more information\n    return callback(new Error(reason));\n  };\n  \n  target.addEventListener('unhandledrejection', rejectionHandler);\n\n  return () => {\n    target.removeEventListener('unhandledrejection', rejectionHandler);\n  };\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { registerUnhandledError } from './effects/unhandledError';\nimport { registerUnhandledRejection } from './effects/unhandledRejection';\nimport { registerStackTraceLimit } from './effects/stackTraceLimit';\nimport {\n  permanentRegister as permanentRegisterConsole,\n  registerReactStack,\n} from './effects/proxyConsole';\nimport { massage as massageWarning } from './utils/warnings';\nimport { getStackFrames } from './utils/getStackFrames';\n\nimport type { StackFrame } from './utils/stack-frame';\n\nconst CONTEXT_SIZE: number = 3;\n\nexport type ErrorRecord = {|\n  error: Error,\n  unhandledRejection: boolean,\n  contextSize: number,\n  stackFrames: StackFrame[],\n|};\n\nexport const crashWithFrames = (crash: ErrorRecord => void) => (\n  error: Error,\n  unhandledRejection = false\n) => {\n  getStackFrames(error, unhandledRejection, CONTEXT_SIZE)\n    .then(stackFrames => {\n      crash({\n        error,\n        unhandledRejection,\n        contextSize: CONTEXT_SIZE,\n        stackFrames,\n      });\n    })\n    .catch(e => {\n      console.log('Could not get the stack frames of error:', e);\n    });\n};\n\nexport function listenToRuntimeErrors(\n  crash: ErrorRecord => void,\n  filename: string = '/static/js/bundle.js'\n) {\n  const crashWithFramesRunTime = crashWithFrames(crash);\n\n  const unregisterError = registerUnhandledError(window, error =>\n    crashWithFramesRunTime(error, false)\n  );\n  const unregisterUnhandledRejection = registerUnhandledRejection(\n    window,\n    error => crashWithFramesRunTime(error, true)\n  );\n  registerStackTraceLimit();\n  const unregisterReactStack = registerReactStack();\n  permanentRegisterConsole('error', (warning, stack) => {\n    const data = massageWarning(warning, stack);\n    crashWithFramesRunTime(\n      // $FlowFixMe\n      {\n        message: data.message,\n        stack: data.stack,\n        __unmap_source: filename,\n      },\n      false\n    );\n  });\n\n  return () => {\n    unregisterUnhandledRejection();\n    unregisterError();\n    unregisterReactStack();\n  };\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { transformError } from 'codesandbox-api';\nimport { getCurrentManager } from 'app/src/sandbox/compile';\n\nimport { listenToRuntimeErrors } from './listenToRuntimeErrors';\n\nimport {\n  consume as consumeError,\n  getErrorRecord,\n  drain as drainErrors,\n} from './utils/errorRegister';\nimport type { ErrorRecordReference } from './utils/errorRegister';\n\nimport type { StackFrame } from './utils/stack-frame';\nimport { iframeStyle } from './styles';\nimport { applyStyles } from './utils/dom/css';\nimport { createOverlay } from './components/overlay';\nimport { updateAdditional } from './components/additional';\n\nimport buildError from '../errors';\n\nconst CONTEXT_SIZE: number = 3;\nlet iframeReference: HTMLIFrameElement | null = null;\nlet additionalReference = null;\nlet errorReferences: ErrorRecordReference[] = [];\nlet currReferenceIndex: number = -1;\n\nfunction render(\n  name: ?string,\n  message: string,\n  resolvedFrames: StackFrame[],\n  error\n) {\n  disposeCurrentView();\n\n  const iframe = window.document.createElement('iframe');\n  applyStyles(iframe, iframeStyle);\n  iframeReference = iframe;\n  iframe.onload = () => {\n    if (iframeReference == null) {\n      return;\n    }\n    const w = iframeReference.contentWindow;\n    const document = iframeReference.contentDocument;\n\n    const { overlay, additional } = createOverlay(\n      document,\n      error,\n      name,\n      message,\n      resolvedFrames,\n      CONTEXT_SIZE,\n      currReferenceIndex + 1,\n      errorReferences.length,\n      offset => {\n        switchError(offset);\n      },\n      () => {\n        unmount();\n      }\n    );\n    if (w != null) {\n      w.onkeydown = event => {\n        keyEventHandler(type => shortcutHandler(type), event);\n      };\n    }\n    if (document.body != null) {\n      document.body.style.margin = '0';\n      // Keep popup within body boundaries for iOS Safari\n      // $FlowFixMe\n      document.body.style['max-width'] = '100vw';\n\n      (document.body: any).appendChild(overlay);\n    }\n    additionalReference = additional;\n  };\n  window.document.body.appendChild(iframe);\n}\n\nfunction renderErrorByIndex(index: number) {\n  currReferenceIndex = index;\n\n  const { error, unhandledRejection, enhancedFrames } = getErrorRecord(\n    errorReferences[index]\n  );\n\n  if (unhandledRejection) {\n    render(\n      'Unhandled Rejection (' + error.name + ')',\n      error.message,\n      enhancedFrames,\n      error\n    );\n  } else {\n    render(error.name, error.message, enhancedFrames, error);\n  }\n}\n\nconst SHORTCUT_ESCAPE = 1;\nconst SHORTCUT_LEFT = 2;\nconst SHORTCUT_RIGHT = 3;\n\nfunction keyEventHandler(cb, event) {\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    cb(SHORTCUT_ESCAPE);\n  } else if (event.key === 'Left' || event.key === 'ArrowLeft') {\n    cb(SHORTCUT_LEFT);\n  } else if (event.key === 'Right' || event.key === 'ArrowRight') {\n    cb(SHORTCUT_RIGHT);\n  }\n}\n\nfunction switchError(offset) {\n  if (errorReferences.length === 0) {\n    return;\n  }\n\n  let nextView = currReferenceIndex + offset;\n\n  if (nextView < 0) {\n    nextView = errorReferences.length - 1;\n  } else if (nextView >= errorReferences.length) {\n    nextView = 0;\n  }\n\n  renderErrorByIndex(nextView);\n}\n\nfunction disposeCurrentView(force: boolean) {\n  // CodeSandbox already resets this, only do this if force is on\n  if (force) {\n    if (iframeReference == null) {\n      return;\n    }\n    try {\n      window.document.body.removeChild(iframeReference);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  iframeReference = null;\n  additionalReference = null;\n}\n\nfunction unmount(force: boolean = true) {\n  disposeCurrentView(force);\n  drainErrors();\n  errorReferences = [];\n  currReferenceIndex = -1;\n}\n\nfunction sendErrorsToEditor() {\n  errorReferences.forEach(ref => {\n    const error = getErrorRecord(ref);\n    buildError(error);\n  });\n}\n\n/**\n * Transforms the error with give transformers to codesandbox-api, this adds\n * suggestions and can alter the error name + message.\n */\nfunction transformErrors() {\n  const manager = getCurrentManager();\n  if (manager) {\n    errorReferences.forEach(ref => {\n      const errRef = getErrorRecord(ref);\n\n      const relevantFrame = errRef.enhancedFrames.find(r => {\n        try {\n          return (\n            manager &&\n            !!manager.resolveTranspiledModuleSync(\n              (r._originalFileName || r.fileName || '').replace(\n                location.origin,\n                ''\n              ),\n              '/'\n            )\n          );\n        } catch (e) {\n          /* don't do anything */\n          return false;\n        }\n      });\n\n      let { tModule } = errRef.error;\n\n      if (!tModule && relevantFrame) {\n        const fileName =\n          relevantFrame._originalFileName || relevantFrame.fileName || '';\n        tModule = manager.resolveTranspiledModuleSync(\n          fileName.replace(location.origin, ''),\n          '/'\n        );\n      }\n\n      if (!tModule) {\n        return;\n      }\n\n      try {\n        const transformation = transformError(\n          errRef.error,\n          tModule,\n          manager.getTranspiledModules()\n        );\n\n        if (transformation) {\n          const newError = new Error(transformation.name || errRef.error.name);\n          newError.message = transformation.message;\n          newError.suggestions = transformation.suggestions;\n          newError.originalName = errRef.error.name;\n          newError.originalMessage = errRef.error.message;\n          errRef.error = newError;\n        }\n      } catch (ex) {\n        /* just catch */\n        console.error(ex);\n      }\n    });\n  }\n}\n\nfunction crash(\n  error: Error,\n  unhandledRejection = false,\n  renderErrorOverlay = true\n) {\n  if (module.hot && typeof module.hot.decline === 'function') {\n    module.hot.decline();\n  }\n\n  consumeError(error, unhandledRejection, CONTEXT_SIZE)\n    .then(ref => {\n      if (ref == null) {\n        return;\n      }\n\n      errorReferences.push(ref);\n\n      sendErrorsToEditor();\n      transformErrors();\n      if (renderErrorOverlay) {\n        if (iframeReference !== null && additionalReference !== null) {\n          updateAdditional(\n            iframeReference.contentDocument,\n            additionalReference,\n            currReferenceIndex + 1,\n            errorReferences.length,\n            offset => {\n              switchError(offset);\n            }\n          );\n        } else {\n          if (errorReferences.length !== 1) {\n            throw new Error('Something is *really* wrong.');\n          }\n          renderErrorByIndex((currReferenceIndex = 0));\n        }\n      }\n    })\n    .catch(e => {\n      console.log('Could not consume error:', e);\n    });\n}\n\nfunction shortcutHandler(type: string) {\n  switch (type) {\n    case SHORTCUT_ESCAPE: {\n      unmount();\n      break;\n    }\n    case SHORTCUT_LEFT: {\n      switchError(-1);\n      break;\n    }\n    case SHORTCUT_RIGHT: {\n      switchError(1);\n      break;\n    }\n    default: {\n      // TODO: this\n      break;\n    }\n  }\n}\n\nlet listenToRuntimeErrorsUnmounter;\n\nfunction unregisterErrorHandlers() {\n  if (listenToRuntimeErrorsUnmounter) {\n    listenToRuntimeErrorsUnmounter();\n    listenToRuntimeErrorsUnmounter = null;\n  }\n}\n\nfunction uninject(force) {\n  unregisterErrorHandlers();\n  unmount(force);\n}\n\nfunction inject(renderErrorOverlay = true) {\n  // Remove existing listeners if there are any\n  unregisterErrorHandlers();\n\n  listenToRuntimeErrorsUnmounter = listenToRuntimeErrors(error => {\n    crash(error.error, false, renderErrorOverlay);\n  });\n}\n\nexport { inject, uninject, unmount };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nconst black = '#293238',\n  darkGray = '#878e91',\n  red = '#ce1126',\n  redTransparent = 'rgba(206, 17, 38, 0.05)',\n  lightRed = '#fccfcf',\n  yellow = '#fbf5b4',\n  yellowTransparent = 'rgba(251, 245, 180, 0.3)',\n  whiteTranslucent = 'rgba(244, 244, 244, 0.9)';\n\nconst iframeStyle = {\n  position: 'fixed',\n  top: '0',\n  left: '0',\n  width: '100%',\n  height: '100%',\n  border: 'none',\n  'z-index': 2147483647 - 1, // below the compile error overlay\n};\n\nconst overlayStyle = {\n  width: '100%',\n  height: '100%',\n  'box-sizing': 'border-box',\n  'text-align': 'center',\n  'background-color': whiteTranslucent,\n  '-webkit-font-smoothing': 'antialiased',\n  '-moz-font-smoothing': 'antialiased',\n  '-moz-osx-font-smoothing': 'grayscale',\n  'font-smoothing': 'antialiased',\n  'text-rendering': 'optimizeLegibility',\n  'font-smooth': 'always',\n  '-webkit-tap-highlight-color': 'transparent',\n  '-webkit-touch-callout': 'none',\n};\n\nconst containerStyle = {\n  position: 'relative',\n  display: 'inline-flex',\n  'flex-direction': 'column',\n  height: '100%',\n  width: '1024px',\n  'max-width': '100%',\n  'overflow-x': 'hidden',\n  'overflow-y': 'auto',\n  padding: '0.5rem',\n  'box-sizing': 'border-box',\n  'text-align': 'left',\n  'font-family': 'Consolas, Menlo, monospace',\n  'font-size': '11px',\n  'white-space': 'pre-wrap',\n  'word-break': 'break-word',\n  'line-height': 1.5,\n  color: black,\n};\n\nconst hintsStyle = {\n  color: darkGray,\n};\n\nconst hintStyle = {\n  padding: '0.5em 1em',\n  cursor: 'pointer',\n};\n\nconst closeButtonStyle = {\n  color: black,\n  'line-height': '1rem',\n  'font-size': '1.5rem',\n  padding: '1rem',\n  cursor: 'pointer',\n  position: 'absolute',\n  right: 0,\n  top: 0,\n};\n\nconst additionalChildStyle = {\n  'margin-bottom': '0.5rem',\n};\n\nconst headerStyle = {\n  'font-size': '2em',\n  'font-family': 'Roboto, sans-serif',\n  color: red,\n  'white-space': 'pre-wrap',\n  // Top bottom margin spaces header\n  // Right margin revents overlap with close button\n  margin: '0 2rem 0.5rem 0',\n  flex: '0 0 auto',\n  'max-height': '50%',\n  overflow: 'auto',\n  'font-weight': '400',\n};\n\nconst messageHeaderStyle = {\n  ...headerStyle,\n  color: 'black',\n  'font-weight': '300',\n  'font-size': '1.5em',\n  'font-family': 'Consolas, Menlo, monospace',\n  margin: 0,\n  'padding-bottom': '1rem',\n  'border-bottom': '1px solid #ddd',\n};\n\nconst originalHeaderStyle = {\n  color: 'rgba(0, 0, 0, 0.7)',\n  'font-size': '.75em',\n  'padding-top': '1rem',\n  'padding-bottom': '.5rem',\n};\n\nconst originalMessageHeaderStyle = {\n  color: 'black',\n  'font-size': '.875em',\n  'font-family': 'Consolas, Menlo, monospace',\n  margin: 0,\n  'white-space': 'pre-wrap',\n  overflow: 'auto',\n};\n\nconst functionNameStyle = {};\n\nconst linkStyle = {\n  'font-size': '0.9em',\n  'margin-bottom': '0.9em',\n};\n\nconst anchorStyle = {\n  'text-decoration': 'none',\n  color: darkGray,\n};\n\nconst traceStyle = {\n  'font-size': '1em',\n  flex: '0 1 auto',\n  'min-height': '0px',\n  overflow: 'auto',\n  'padding-top': '1rem',\n};\n\nconst depStyle = {};\n\nconst primaryErrorStyle = {\n  'background-color': lightRed,\n};\n\nconst secondaryErrorStyle = {\n  'background-color': yellow,\n};\n\nconst omittedFramesCollapsedStyle = {\n  color: black,\n  cursor: 'pointer',\n  'margin-bottom': '1.5em',\n};\n\nconst omittedFramesExpandedStyle = {\n  color: black,\n  cursor: 'pointer',\n  'margin-bottom': '0.6em',\n};\n\nconst _preStyle = {\n  display: 'block',\n  padding: '0.5em',\n  'margin-top': '0.5em',\n  'margin-bottom': '0.5em',\n  'overflow-x': 'auto',\n  'white-space': 'pre-wrap',\n  'border-radius': '0.25rem',\n};\nconst primaryPreStyle = Object.assign({}, _preStyle, {\n  'background-color': redTransparent,\n});\nconst secondaryPreStyle = Object.assign({}, _preStyle, {\n  'background-color': yellowTransparent,\n});\n\nconst toggleStyle = {\n  'margin-bottom': '1.5em',\n  color: darkGray,\n  cursor: 'pointer',\n};\n\nconst codeStyle = {\n  'font-family': 'Consolas, Menlo, monospace',\n};\n\nconst hiddenStyle = {\n  display: 'none',\n};\n\nconst groupStyle = {\n  'margin-right': '1em',\n};\n\nconst _groupElemStyle = {\n  'background-color': redTransparent,\n  color: red,\n  border: 'none',\n  'border-radius': '4px',\n  padding: '3px 6px',\n  cursor: 'pointer',\n};\n\nconst groupElemLeft = Object.assign({}, _groupElemStyle, {\n  'border-top-right-radius': '0px',\n  'border-bottom-right-radius': '0px',\n  'margin-right': '1px',\n});\n\nconst groupElemRight = Object.assign({}, _groupElemStyle, {\n  'border-top-left-radius': '0px',\n  'border-bottom-left-radius': '0px',\n});\n\nconst footerStyle = {\n  'font-family': 'sans-serif',\n  color: darkGray,\n  'margin-top': '0.5rem',\n  flex: '0 0 auto',\n};\n\nconst suggestionsContainerStyle = {\n  'font-family': 'Roboto, sans-serif',\n  'padding-top': '1rem',\n};\n\nconst suggestionsTitleStyle = {\n  'font-size': '1rem',\n  'font-weight': '300',\n};\n\nconst suggestionsButtonStyle = {\n  transition: '0.3s ease all',\n  'background-color': '#B6E7FF',\n  color: 'rgba(0, 0, 0, 0.6)',\n  padding: '0.5rem',\n  margin: '.5rem 0',\n  'margin-bottom': '.5rem',\n  'font-size': '.75rem',\n  'border-radius': '4px',\n  'margin-right': '.5rem',\n  border: '1px solid #6CAEDD',\n  cursor: 'pointer',\n};\n\nexport {\n  containerStyle,\n  iframeStyle,\n  overlayStyle,\n  hintsStyle,\n  hintStyle,\n  closeButtonStyle,\n  additionalChildStyle,\n  headerStyle,\n  messageHeaderStyle,\n  functionNameStyle,\n  linkStyle,\n  anchorStyle,\n  traceStyle,\n  depStyle,\n  primaryErrorStyle,\n  primaryPreStyle,\n  secondaryErrorStyle,\n  secondaryPreStyle,\n  omittedFramesCollapsedStyle,\n  omittedFramesExpandedStyle,\n  originalHeaderStyle,\n  originalMessageHeaderStyle,\n  toggleStyle,\n  codeStyle,\n  hiddenStyle,\n  groupStyle,\n  groupElemLeft,\n  groupElemRight,\n  footerStyle,\n  suggestionsContainerStyle,\n  suggestionsTitleStyle,\n  suggestionsButtonStyle,\n};\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nfunction consumeEvent(e: Event) {\n  e.preventDefault();\n  if (typeof e.target.blur === 'function') {\n    e.target.blur();\n  }\n}\n\nexport { consumeEvent };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nlet injectedCount = 0;\nconst injectedCache = {};\n\nfunction getHead(document: Document) {\n  return document.head || document.getElementsByTagName('head')[0];\n}\n\nfunction injectCss(document: Document, css: string): number {\n  const head = getHead(document);\n  const style = document.createElement('style');\n  style.type = 'text/css';\n  style.appendChild(document.createTextNode(css));\n  head.appendChild(style);\n\n  injectedCache[++injectedCount] = style;\n  return injectedCount;\n}\n\nfunction removeCss(document: Document, ref: number) {\n  if (injectedCache[ref] == null) {\n    return;\n  }\n  const head = getHead(document);\n  head.removeChild(injectedCache[ref]);\n  delete injectedCache[ref];\n}\n\nfunction applyStyles(element: HTMLElement, styles: Object) {\n  element.setAttribute('style', '');\n  for (const key in styles) {\n    if (!styles.hasOwnProperty(key)) {\n      continue;\n    }\n    // $FlowFixMe\n    element.style[key] = styles[key];\n  }\n}\n\nexport { getHead, injectCss, removeCss, applyStyles };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nfunction enableTabClick(node: Element) {\n  node.setAttribute('tabindex', '0');\n  node.addEventListener('keydown', function(e: KeyboardEvent) {\n    const { key, which, keyCode } = e;\n    if (key === 'Enter' || which === 13 || keyCode === 13) {\n      e.preventDefault();\n      if (typeof e.target.click === 'function') {\n        e.target.click();\n      }\n    }\n  });\n}\n\nexport { enableTabClick };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport type { StackFrame } from './stack-frame';\nimport { parse } from './parser';\nimport { map } from './mapper';\nimport { unmap } from './unmapper';\n\nexport type ErrorRecord = {\n  error: Error,\n  unhandledRejection: boolean,\n  contextSize: number,\n  enhancedFrames: StackFrame[],\n};\ntype ErrorRecordReference = number;\nconst recorded: ErrorRecord[] = [];\n\nlet errorsConsumed: ErrorRecordReference = 0;\n\nfunction consume(\n  error: Error,\n  unhandledRejection: boolean = false,\n  contextSize: number = 3\n): Promise<ErrorRecordReference | null> {\n  const parsedFrames = parse(error);\n  let enhancedFramesPromise;\n  if (error.__unmap_source) {\n    enhancedFramesPromise = unmap(\n      // $FlowFixMe\n      error.__unmap_source,\n      parsedFrames,\n      contextSize\n    );\n  } else {\n    enhancedFramesPromise = map(parsedFrames, contextSize);\n  }\n  return enhancedFramesPromise.then(enhancedFrames => {\n    // // We comment this out, because we always want to show errors\n    // if (\n    //   enhancedFrames\n    //     .map(f => f._originalFileName)\n    //     .filter(f => f != null && f.indexOf('node_modules') === -1).length === 0\n    // ) {\n    //   return null;\n    // }\n    enhancedFrames = enhancedFrames.filter(\n      ({ functionName }) =>\n        functionName == null ||\n        functionName.indexOf('__stack_frame_overlay_proxy_console__') === -1\n    );\n    recorded[++errorsConsumed] = {\n      error,\n      unhandledRejection,\n      contextSize,\n      enhancedFrames,\n    };\n    return errorsConsumed;\n  });\n}\n\nfunction getErrorRecord(ref: ErrorRecordReference): ErrorRecord {\n  return recorded[ref];\n}\n\nfunction drain() {\n  // $FlowFixMe\n  const keys = Object.keys(recorded);\n  for (let index = 0; index < keys.length; ++index) {\n    delete recorded[keys[index]];\n  }\n}\n\nexport { consume, getErrorRecord, drain };\nexport type { ErrorRecordReference };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n//@flow\nimport { ScriptLine } from './stack-frame';\n\n/**\n *\n * @param {number} line The line number to provide context around.\n * @param {number} count The number of lines you'd like for context.\n * @param {string[] | string} lines The source code.\n */\nfunction getLinesAround(\n  line: number,\n  count: number,\n  lines: string[] | string\n): ScriptLine[] {\n  if (typeof lines === 'string') {\n    lines = lines.split('\\n');\n  }\n  const result = [];\n  for (\n    let index = Math.max(0, line - 1 - count);\n    index <= Math.min(lines.length - 1, line - 1 + count);\n    ++index\n  ) {\n    result.push(new ScriptLine(index + 1, lines[index], index === line - 1));\n  }\n  return result;\n}\n\nexport { getLinesAround };\nexport default getLinesAround;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n//@flow\nimport { SourceMapConsumer } from 'source-map';\n\n/**\n * A wrapped instance of a <code>{@link https://github.com/mozilla/source-map SourceMapConsumer}</code>.\n *\n * This exposes methods which will be indifferent to changes made in <code>{@link https://github.com/mozilla/source-map source-map}</code>.\n */\nexport class SourceMap {\n  __source_map: SourceMapConsumer;\n\n  constructor(sourceMap) {\n    this.__source_map = sourceMap;\n  }\n\n  /**\n   * Returns the original code position for a generated code position.\n   * @param {number} line The line of the generated code position.\n   * @param {number} column The column of the generated code position.\n   */\n  getOriginalPosition(\n    line: number,\n    column: number\n  ): { source: string, line: number, column: number } {\n    const {\n      line: l,\n      column: c,\n      source: s,\n    } = this.__source_map.originalPositionFor({\n      line,\n      column,\n    });\n    return { line: l, column: c, source: s };\n  }\n\n  /**\n   * Returns the generated code position for an original position.\n   * @param {string} source The source file of the original code position.\n   * @param {number} line The line of the original code position.\n   * @param {number} column The column of the original code position.\n   */\n  getGeneratedPosition(\n    source: string,\n    line: number,\n    column: number\n  ): { line: number, column: number } {\n    const { line: l, column: c } = this.__source_map.generatedPositionFor({\n      source,\n      line,\n      column,\n    });\n    return {\n      line: l,\n      column: c,\n    };\n  }\n\n  /**\n   * Returns the code for a given source file name.\n   * @param {string} sourceName The name of the source file.\n   */\n  getSource(sourceName: string): string {\n    return this.__source_map.sourceContentFor(sourceName);\n  }\n\n  getSources(): string[] {\n    return this.__source_map.sources;\n  }\n}\n\nfunction extractSourceMapUrl(fileUri: string, fileContents: string) {\n  const regex = /\\/\\/[#@] ?sourceMappingURL=([^\\s'\"]+)\\s*$/gm;\n  let match = null;\n  for (;;) {\n    let next = regex.exec(fileContents);\n    if (next == null) {\n      break;\n    }\n    match = next;\n  }\n  if (!(match && match[1])) {\n    return Promise.reject(`Cannot find a source map directive for ${fileUri}.`);\n  }\n  return Promise.resolve(match[1].toString());\n}\n\n/**\n * Returns an instance of <code>{@link SourceMap}</code> for a given fileUri and fileContents.\n * @param {string} fileUri The URI of the source file.\n * @param {string} fileContents The contents of the source file.\n */\nasync function getSourceMap(\n  fileUri: string,\n  fileContents: string\n): Promise<SourceMap> {\n  let sm = await extractSourceMapUrl(fileUri, fileContents);\n  if (sm.indexOf('data:') === 0) {\n    const base64 = /^data:application\\/json;([\\w=:\"-]+;)*base64,/;\n    const match2 = sm.match(base64);\n    if (!match2) {\n      throw new Error(\n        'Sorry, non-base64 inline source-map encoding is not supported.'\n      );\n    }\n    sm = sm.substring(match2[0].length);\n    sm = window.atob(sm);\n    sm = JSON.parse(sm);\n    return new SourceMap(new SourceMapConsumer(sm));\n  } else {\n    const index = fileUri.lastIndexOf('/');\n    const url = fileUri.substring(0, index + 1) + sm;\n    const obj = await fetch(url).then(res => res.json());\n    return new SourceMap(new SourceMapConsumer(obj));\n  }\n}\n\nexport { extractSourceMapUrl, getSourceMap };\nexport default getSourceMap;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/* @flow */\nimport type { StackFrame } from './stack-frame';\nimport { parse } from './parser';\nimport { map } from './mapper';\nimport { unmap } from './unmapper';\n\nexport async function getStackFrames(\n  error: Error,\n  unhandledRejection: boolean = false,\n  contextSize: number = 3\n): Promise<StackFrame[] | null> {\n  const parsedFrames = parse(error);\n  let enhancedFrames;\n  // $FlowFixMe\n  if (error.__unmap_source) {\n    enhancedFrames = await unmap(\n      // $FlowFixMe\n      error.__unmap_source,\n      parsedFrames,\n      contextSize\n    );\n  } else {\n    enhancedFrames = await map(parsedFrames, contextSize);\n  }\n\n  if (\n    enhancedFrames\n      .map(f => f._originalFileName)\n      .filter(f => f != null && f.indexOf('node_modules') === -1).length === 0\n  ) {\n    return null;\n  }\n\n  return enhancedFrames.filter(({ functionName }) => \n    functionName == null || functionName.indexOf('__stack_frame_overlay_proxy_console__') === -1\n  );\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nfunction isInternalFile(sourceFileName: ?string, fileName: ?string) {\n  return (\n    sourceFileName == null ||\n    sourceFileName === '' ||\n    sourceFileName.indexOf('/~/') !== -1 ||\n    sourceFileName.indexOf('/node_modules/') !== -1 ||\n    sourceFileName.trim().indexOf(' ') !== -1 ||\n    fileName == null ||\n    fileName === ''\n  );\n}\n\nexport { isInternalFile };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n// TODO change this\nimport { getCurrentManager } from 'app/src/sandbox/compile';\n// @flow\nimport { settle } from 'settle-promise';\nimport StackFrame from './stack-frame';\nimport { getSourceMap } from './getSourceMap';\nimport { getLinesAround } from './getLinesAround';\n\n/**\n * Enhances a set of <code>StackFrame</code>s with their original positions and code (when available).\n * @param {StackFrame[]} frames A set of <code>StackFrame</code>s which contain (generated) code positions.\n * @param {number} [contextLines=3] The number of lines to provide before and after the line specified in the <code>StackFrame</code>.\n */\nasync function map(\n  frames: StackFrame[],\n  contextLines: number = 3\n): Promise<StackFrame[]> {\n  const cache: any = {};\n  const files: string[] = [];\n  frames.forEach(frame => {\n    const { fileName } = frame;\n    if (fileName == null) {\n      return;\n    }\n    if (files.indexOf(fileName) !== -1) {\n      return;\n    }\n    files.push(fileName);\n  });\n  await settle(\n    files.map(async fileName => {\n      const manager = getCurrentManager();\n      if (manager != null && !fileName.startsWith('webpack')) {\n        let transpiledModule;\n        if (fileName.includes('?')) {\n          transpiledModule = manager.getTranspiledModuleByHash(\n            fileName.split('?')[1]\n          );\n        } else {\n          transpiledModule = await manager.resolveTranspiledModule(\n            fileName.replace(location.origin, ''),\n            '/'\n          );\n        }\n\n        if (transpiledModule) {\n          const fileSource =\n            transpiledModule.source && transpiledModule.source.compiledCode;\n\n          const map = await getSourceMap(fileName, fileSource);\n\n          cache[fileName] = { fileSource, map };\n        }\n      }\n    })\n  );\n  return frames.map(frame => {\n    const { functionName, fileName, lineNumber, columnNumber } = frame;\n    const { map, fileSource } = cache[fileName] || {};\n    if (map == null || lineNumber == null) {\n      return frame;\n    }\n    const { source, line, column } = map.getOriginalPosition(\n      lineNumber,\n      columnNumber\n    );\n    const originalSource = source == null ? [] : map.getSource(source);\n    return new StackFrame(\n      functionName,\n      fileName,\n      lineNumber,\n      columnNumber,\n      getLinesAround(lineNumber, contextLines, fileSource),\n      functionName,\n      source,\n      line,\n      column,\n      getLinesAround(line, contextLines, originalSource)\n    );\n  });\n}\n\nexport { map };\nexport default map;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/* @flow */\nimport StackFrame from './stack-frame';\n\nconst regexExtractLocation = /\\(?(.+?)(?::(\\d+))?(?::(\\d+))?\\)?$/;\n\n// $FlowFixMe\nfunction extractLocation(token: string): [string, number, number] {\n  return (\n    regexExtractLocation\n      .exec(token)\n      // $FlowFixMe\n      .slice(1)\n      .map(v => {\n        const p = Number(v);\n        if (!isNaN(p)) {\n          return p;\n        }\n        return v;\n      })\n  );\n}\n\nconst regexValidFrame_Chrome = /^\\s*(at|in)\\s.+(:\\d+)/;\nconst regexValidFrame_FireFox = /(^|@)\\S+:\\d+|.+line\\s+\\d+\\s+>\\s+(eval|Function).+/;\n\nfunction parseStack(stack: string[]): StackFrame[] {\n  const frames = stack\n    .filter(\n      e => regexValidFrame_Chrome.test(e) || regexValidFrame_FireFox.test(e)\n    )\n    .map(e => {\n      if (regexValidFrame_FireFox.test(e)) {\n        // Strip eval, we don't care about it\n        let isEval = false;\n        if (/ > (eval|Function)/.test(e)) {\n          e = e.replace(\n            / line (\\d+)(?: > eval line \\d+)* > (eval|Function):\\d+:\\d+/g,\n            ':$1'\n          );\n          isEval = true;\n        }\n        const data = e.split(/[@]/g);\n        const last = data.pop();\n        return new StackFrame(\n          data.join('@') || (isEval ? 'eval' : null),\n          ...extractLocation(last)\n        );\n      } else {\n        // Strip eval, we don't care about it\n        if (e.indexOf('(eval ') !== -1) {\n          e = e.replace(/(\\(eval at [^()]*)|(\\),.*$)/g, '');\n        }\n        if (e.indexOf('(at ') !== -1) {\n          e = e.replace(/\\(at /, '(');\n        }\n        const data = e.trim().split(/\\s+/g).slice(1);\n        const last = data.pop();\n        return new StackFrame(data.join(' ') || null, ...extractLocation(last));\n      }\n    });\n  return frames;\n}\n\n/**\n * Turns an <code>Error</code>, or similar object, into a set of <code>StackFrame</code>s.\n * @alias parse\n */\nfunction parseError(error: Error | string | string[]): StackFrame[] {\n  if (error == null) {\n    throw new Error('You cannot pass a null object.');\n  }\n  if (typeof error === 'string') {\n    return parseStack(error.split('\\n'));\n  }\n  if (Array.isArray(error)) {\n    return parseStack(error);\n  }\n  if (typeof error.stack === 'string') {\n    return parseStack(error.stack.split('\\n'));\n  }\n  throw new Error('The error you provided does not contain a stack trace.');\n}\n\nexport { parseError as parse };\nexport default parseError;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n//@flow\n\n/** A container holding a script line. */\nclass ScriptLine {\n  /** The line number of this line of source. */\n  lineNumber: number;\n  /** The content (or value) of this line of source. */\n  content: string;\n  /** Whether or not this line should be highlighted. Particularly useful for error reporting with context. */\n  highlight: boolean;\n\n  constructor(lineNumber: number, content: string, highlight: boolean = false) {\n    this.lineNumber = lineNumber;\n    this.content = content;\n    this.highlight = highlight;\n  }\n}\n\n/**\n * A representation of a stack frame.\n */\nclass StackFrame {\n  functionName: string | null;\n  fileName: string | null;\n  lineNumber: number | null;\n  columnNumber: number | null;\n\n  _originalFunctionName: string | null;\n  _originalFileName: string | null;\n  _originalLineNumber: number | null;\n  _originalColumnNumber: number | null;\n\n  _scriptCode: ScriptLine[] | null;\n  _originalScriptCode: ScriptLine[] | null;\n\n  constructor(\n    functionName: string | null = null,\n    fileName: string | null = null,\n    lineNumber: number | null = null,\n    columnNumber: number | null = null,\n    scriptCode: ScriptLine[] | null = null,\n    sourceFunctionName: string | null = null,\n    sourceFileName: string | null = null,\n    sourceLineNumber: number | null = null,\n    sourceColumnNumber: number | null = null,\n    sourceScriptCode: ScriptLine[] | null = null\n  ) {\n    this.functionName = functionName;\n\n    this.fileName = fileName;\n    this.lineNumber = lineNumber;\n    this.columnNumber = columnNumber;\n\n    this._originalFunctionName = sourceFunctionName;\n    this._originalFileName = sourceFileName;\n    this._originalLineNumber = sourceLineNumber;\n    this._originalColumnNumber = sourceColumnNumber;\n\n    this._scriptCode = scriptCode;\n    this._originalScriptCode = sourceScriptCode;\n  }\n\n  /**\n   * Returns the name of this function.\n   */\n  getFunctionName(): string | null {\n    return this.functionName;\n  }\n\n  /**\n   * Returns the source of the frame.\n   * This contains the file name, line number, and column number when available.\n   */\n  getSource(): string {\n    let str = '';\n    if (this.fileName != null) {\n      str += this.fileName + ':';\n    }\n    if (this.lineNumber != null) {\n      str += this.lineNumber + ':';\n    }\n    if (this.columnNumber != null) {\n      str += this.columnNumber + ':';\n    }\n    return str.slice(0, -1);\n  }\n\n  /**\n   * Returns a pretty version of this stack frame.\n   */\n  toString(): string {\n    const f = this.getFunctionName();\n    if (f == null) {\n      return this.getSource();\n    }\n    return `${f} (${this.getSource()})`;\n  }\n}\n\nexport { StackFrame, ScriptLine };\nexport default StackFrame;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n// @flow\nimport StackFrame from './stack-frame';\nimport { getSourceMap } from './getSourceMap';\nimport { getLinesAround } from './getLinesAround';\nimport path from 'path';\n\nfunction count(search: string, string: string): number {\n  // Count starts at -1 becuse a do-while loop always runs at least once\n  let count = -1,\n    index = -1;\n  do {\n    // First call or the while case evaluated true, meaning we have to make\n    // count 0 or we found a character\n    ++count;\n    // Find the index of our search string, starting after the previous index\n    index = string.indexOf(search, index + 1);\n  } while (index !== -1);\n  return count;\n}\n\n/**\n * Turns a set of mapped <code>StackFrame</code>s back into their generated code position and enhances them with code.\n * @param {string} fileUri The URI of the <code>bundle.js</code> file.\n * @param {StackFrame[]} frames A set of <code>StackFrame</code>s which are already mapped and missing their generated positions.\n * @param {number} [fileContents=3] The number of lines to provide before and after the line specified in the <code>StackFrame</code>.\n */\nasync function unmap(\n  _fileUri: string | { uri: string, contents: string },\n  frames: StackFrame[],\n  contextLines: number = 3\n): Promise<StackFrame[]> {\n  let fileContents = typeof _fileUri === 'object' ? _fileUri.contents : null;\n  let fileUri = typeof _fileUri === 'object' ? _fileUri.uri : _fileUri;\n  if (fileContents == null) {\n    fileContents = await fetch(fileUri).then(res => res.text());\n  }\n  const map = await getSourceMap(fileUri, fileContents);\n  return frames.map(frame => {\n    const {\n      functionName,\n      lineNumber,\n      columnNumber,\n      _originalLineNumber,\n    } = frame;\n    if (_originalLineNumber != null) {\n      return frame;\n    }\n    let { fileName } = frame;\n    if (fileName) {\n      fileName = path.normalize(fileName);\n    }\n    if (fileName == null) {\n      return frame;\n    }\n    const fN: string = fileName;\n    const source = map\n      .getSources()\n      .map(s => s.replace(/[\\\\]+/g, '/'))\n      .filter(p => {\n        p = path.normalize(p);\n        const i = p.lastIndexOf(fN);\n        return i !== -1 && i === p.length - fN.length;\n      })\n      .map(p => ({\n        token: p,\n        seps: count(path.sep, path.normalize(p)),\n        penalties: count('node_modules', p) + count('~', p),\n      }))\n      .sort((a, b) => {\n        const s = Math.sign(a.seps - b.seps);\n        if (s !== 0) {\n          return s;\n        }\n        return Math.sign(a.penalties - b.penalties);\n      });\n    if (source.length < 1 || lineNumber == null) {\n      return new StackFrame(\n        null,\n        null,\n        null,\n        null,\n        null,\n        functionName,\n        fN,\n        lineNumber,\n        columnNumber,\n        null\n      );\n    }\n    const sourceT = source[0].token;\n    const { line, column } = map.getGeneratedPosition(\n      sourceT,\n      lineNumber,\n      // $FlowFixMe\n      columnNumber\n    );\n    const originalSource = map.getSource(sourceT);\n    return new StackFrame(\n      functionName,\n      fileUri,\n      line,\n      column || null,\n      getLinesAround(line, contextLines, fileContents || []),\n      functionName,\n      fN,\n      lineNumber,\n      columnNumber,\n      getLinesAround(lineNumber, contextLines, originalSource)\n    );\n  });\n}\n\nexport { unmap };\nexport default unmap;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n// @flow\nimport type { ReactFrame } from '../effects/proxyConsole';\n\nfunction stripInlineStacktrace(message: string): string {\n  return message\n    .split('\\n')\n    .filter(line => !line.match(/^\\s*in/))\n    .join('\\n'); // \"  in Foo\"\n}\n\nfunction massage(\n  warning: string,\n  frames: ReactFrame[]\n): { message: string, stack: string } {\n  let message = stripInlineStacktrace(warning);\n\n  // Reassemble the stack with full filenames provided by React\n  let stack = '';\n  let lastFilename;\n  let lastLineNumber;\n  for (let index = 0; index < frames.length; ++index) {\n    const { fileName, lineNumber } = frames[index];\n    if (fileName == null || lineNumber == null) {\n      continue;\n    }\n\n    // TODO: instead, collapse them in the UI\n    if (\n      fileName === lastFilename &&\n      typeof lineNumber === 'number' &&\n      typeof lastLineNumber === 'number' &&\n      Math.abs(lineNumber - lastLineNumber) < 3\n    ) {\n      continue;\n    }\n    lastFilename = fileName;\n    lastLineNumber = lineNumber;\n\n    let { name } = frames[index];\n    name = name || '(anonymous function)';\n    stack += `in ${name} (at ${fileName}:${lineNumber})\\n`;\n  }\n\n  return { message, stack };\n}\n\nexport { massage };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// Responsible for consuming and syncing with the server/local cache\nimport localforage from 'localforage';\nimport * as memoryDriver from 'localforage-driver-memory';\nimport _debug from '@codesandbox/common/lib/utils/debug';\nconst debug = _debug('cs:compiler:cache');\nconst host = process.env.CODESANDBOX_HOST;\nlocalforage.defineDriver(memoryDriver);\nlocalforage.setDriver([\n    localforage.INDEXEDDB,\n    localforage.LOCALSTORAGE,\n    localforage.WEBSQL,\n    memoryDriver._driver,\n]);\nconst MAX_CACHE_SIZE = 1024 * 1024 * 20;\nlet APICacheUsed = false;\ntry {\n    localforage.config({\n        name: 'CodeSandboxApp',\n        storeName: 'sandboxes',\n        description: 'Cached transpilations of the sandboxes, for faster initialization time.',\n    });\n    // Prewarm store\n    localforage.keys();\n}\ncatch (e) {\n    console.warn('Problems initializing IndexedDB store.');\n    console.warn(e);\n}\nfunction shouldSaveOnlineCache(firstRun, changes) {\n    if (!firstRun || changes > 0) {\n        return false;\n    }\n    if (!window.__SANDBOX_DATA__) {\n        return true;\n    }\n    return false;\n}\nexport function clearIndexedDBCache() {\n    return localforage.clear();\n}\nexport function saveCache(managerModuleToTranspile, manager, changes, firstRun) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!manager.id) {\n            return Promise.resolve(false);\n        }\n        const managerState = Object.assign({}, (yield manager.serialize({\n            entryPath: managerModuleToTranspile\n                ? managerModuleToTranspile.path\n                : null,\n            optimizeForSize: true,\n        })));\n        try {\n            if (process.env.NODE_ENV === 'development') {\n                debug('Saving cache of ' +\n                    (JSON.stringify(managerState).length / 1024).toFixed(2) +\n                    'kb to indexedDB');\n            }\n            yield localforage.setItem(manager.id, managerState);\n        }\n        catch (e) {\n            if (process.env.NODE_ENV === 'development') {\n                console.error(e);\n            }\n            manager.clearCache();\n        }\n        if (shouldSaveOnlineCache(firstRun, changes)) {\n            const stringifiedManagerState = JSON.stringify(managerState);\n            if (stringifiedManagerState.length > MAX_CACHE_SIZE) {\n                return Promise.resolve(false);\n            }\n            debug('Saving cache of ' +\n                (stringifiedManagerState.length / 1024).toFixed(2) +\n                'kb to CodeSandbox API');\n            return window\n                .fetch(`${host}/api/v1/sandboxes/${manager.id}/cache`, {\n                method: 'POST',\n                body: JSON.stringify({\n                    version: manager.version,\n                    data: stringifiedManagerState,\n                }),\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            })\n                .then(x => x.json())\n                .catch(e => {\n                if (process.env.NODE_ENV === 'development') {\n                    console.warn('Something went wrong while saving cache.');\n                    console.warn(e);\n                }\n            });\n        }\n        return Promise.resolve(false);\n    });\n}\nexport function deleteAPICache(sandboxId, version) {\n    if (APICacheUsed && !process.env.SANDPACK) {\n        debug('Deleting cache of API');\n        return window\n            .fetch(`${host}/api/v1/sandboxes/${sandboxId}/cache`, {\n            method: 'DELETE',\n            body: JSON.stringify({\n                version,\n            }),\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        })\n            .then(x => x.json())\n            .catch(e => {\n            console.error('Something went wrong while deleting cache.');\n            console.error(e);\n        });\n    }\n    return Promise.resolve(false);\n}\nfunction findCacheToUse(cache1, cache2) {\n    if (!cache1 && !cache2) {\n        return null;\n    }\n    if (cache1 && !cache2) {\n        return cache1;\n    }\n    if (cache2 && !cache1) {\n        return cache2;\n    }\n    return cache2.timestamp > cache1.timestamp ? cache2 : cache1;\n}\nexport function ignoreNextCache() {\n    try {\n        localStorage.setItem('ignoreCache', 'true');\n    }\n    catch (e) {\n        console.warn(e);\n    }\n}\nexport function consumeCache(manager) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!manager.id) {\n            return false;\n        }\n        try {\n            const shouldIgnoreCache = localStorage.getItem('ignoreCache') ||\n                localStorage.getItem('ignoreCacheDev');\n            if (shouldIgnoreCache) {\n                localStorage.removeItem('ignoreCache');\n                return false;\n            }\n            const cacheData = window.__SANDBOX_DATA__;\n            const localData = yield localforage.getItem(manager.id);\n            const cache = findCacheToUse(cacheData && cacheData.data, localData);\n            if (cache) {\n                if (cache.version === manager.version) {\n                    if (cache === localData) {\n                        APICacheUsed = false;\n                    }\n                    else {\n                        APICacheUsed = true;\n                    }\n                    debug(`Loading cache from ${cache === localData ? 'IndexedDB' : 'API'}`, cache);\n                    yield manager.load(cache);\n                    return true;\n                }\n            }\n            return false;\n        }\n        catch (e) {\n            console.warn('Problems consuming cache');\n            console.warn(e);\n            return false;\n        }\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport { clearMeasurements, measure, endMeasure, getMeasurements, getCumulativeMeasure, } from '@codesandbox/common/lib/utils/metrics';\nconst debug = _debug('cs:compiler:benchmarks');\nconst printTranspilationMeasurements = (results) => {\n    debug(`Total ${results.total.toFixed(2)}ms`);\n    debug(`  Transpiling ${results.transpile.toFixed(2)}ms`);\n    debug(`  Resolving ${results.resolving.toFixed(2)}ms`);\n    debug(`  Converting ES ${results.esConverting.toFixed(2)}ms`);\n};\nexport function generateBenchmarkInterface(manager) {\n    return {\n        transpilation: (n = 10, path = '/src/index.js') => __awaiter(this, void 0, void 0, function* () {\n            const module = yield manager.resolveModuleAsync({\n                path,\n            });\n            const times = [];\n            for (let i = 0; i < n; i++) {\n                manager.clearTranspilationCache();\n                manager.cachedPaths = {};\n                clearMeasurements();\n                measure('transpilation');\n                // eslint-disable-next-line\n                yield manager.transpileModules(module);\n                const total = endMeasure('transpilation', { silent: true });\n                times.push({\n                    total,\n                    resolving: getCumulativeMeasure('resolve', { silent: true }),\n                    esConverting: getCumulativeMeasure('esconvert', { silent: true }),\n                    transpile: getCumulativeMeasure('transpile', { silent: true }),\n                });\n            }\n            const averageResults = times.reduce((result, entry) => ({\n                total: result.total + entry.total / n,\n                esConverting: result.esConverting + entry.esConverting / n,\n                resolving: result.resolving + entry.resolving / n,\n                transpile: result.transpile + entry.transpile / n,\n            }), { total: 0, esConverting: 0, resolving: 0, transpile: 0 });\n            printTranspilationMeasurements(averageResults);\n        }),\n        getLastTranspilationMeasurements() {\n            printTranspilationMeasurements({\n                total: getMeasurements().transpilation,\n                resolving: getCumulativeMeasure('resolve', { silent: true }),\n                esConverting: getCumulativeMeasure('esconvert', { silent: true }),\n                transpile: getCumulativeMeasure('transpile', { silent: true }),\n            });\n        },\n    };\n}\n","// Babel bug workaround (https://github.com/babel/babel/issues/8061)\nconst ErrorClass = Error;\nexport default class ModuleError extends ErrorClass {\n    constructor(module, err) {\n        super();\n        this.name = 'ModuleError';\n        this.path = err.fileName || module.module.path;\n        this.message = err.message;\n        this.error = err;\n        this.stack = err.stack;\n    }\n}\n","export default class ModuleWarning extends Error {\n    constructor(module, warning) {\n        super();\n        this.name = 'ModuleWarning';\n        this.path = warning.fileName || module.module.path;\n        this.message = warning.message;\n        this.warning = warning.message;\n        this.lineNumber = warning.lineNumber;\n        this.columnNumber = warning.columnNumber;\n        this.severity = warning.severity || 'warning';\n        this.source = warning.source;\n    }\n    serialize() {\n        return {\n            name: 'ModuleWarning',\n            message: this.message,\n            fileName: this.path,\n            lineNumber: this.lineNumber,\n            columnNumber: this.columnNumber,\n            source: this.source,\n            severity: this.severity,\n        };\n    }\n}\n","/* eslint-disable */\n// from https://unpkg.com/process@0.11.10/browser.js\nconst process = {};\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\nlet cachedSetTimeout;\nlet cachedClearTimeout;\nlet queue = [];\nlet draining = false;\nlet currentQueue;\nlet queueIndex = -1;\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        }\n        else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    }\n    catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        }\n        else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    }\n    catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n})();\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        // normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) &&\n        setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    }\n    catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        }\n        catch (e) {\n            // eslint-disable-line no-shadow\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            // @ts-ignore\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        // normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) &&\n        clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    }\n    catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        }\n        catch (e) {\n            // eslint-disable-line no-shadow\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            // @ts-ignore\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n}\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    // eslint-disable-next-line no-use-before-define\n    const timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n    let len = queue.length;\n    while (len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    }\n    else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    // @ts-ignore\n    this.fun = fun;\n    // @ts-ignore\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.nextTick = function (fun) {\n    const args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (let i = 1; i < arguments.length; i++) {\n            // eslint-disable-next-line prefer-rest-params\n            args[i - 1] = arguments[i];\n        }\n    }\n    // @ts-ignore\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\nfunction noop() { }\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\nprocess.listeners = function () {\n    return [];\n};\nprocess.binding = function () {\n    throw new Error('process.binding is not supported');\n};\nprocess.cwd = function () {\n    return '/';\n};\nprocess.chdir = function () {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function () {\n    return 0;\n};\nexport default function build(env) {\n    process.env = Object.assign({ NODE_ENV: 'development' }, env);\n    return process;\n}\n","/* eslint-disable no-eval */\nimport buildProcess from './utils/process';\nconst g = typeof window === 'undefined' ? self : window;\nconst hasGlobalDeclaration = /^const global/m;\n/* eslint-disable no-unused-vars */\nexport default function (code, require, module, env = {}, globals = {}, { asUMD = false } = {}) {\n    const { exports } = module;\n    const global = g;\n    const process = buildProcess(env);\n    // @ts-ignore\n    g.global = global;\n    const allGlobals = Object.assign({ require,\n        module,\n        exports,\n        process,\n        global }, globals);\n    if (asUMD) {\n        delete allGlobals.module;\n        delete allGlobals.exports;\n        delete allGlobals.global;\n    }\n    if (hasGlobalDeclaration.test(code)) {\n        delete allGlobals.global;\n    }\n    const allGlobalKeys = Object.keys(allGlobals);\n    const globalsCode = allGlobalKeys.length ? allGlobalKeys.join(', ') : '';\n    const globalsValues = allGlobalKeys.map(k => allGlobals[k]);\n    try {\n        const newCode = `(function $csb$eval(` + globalsCode + `) {` + code + `\\n})`;\n        // @ts-ignore\n        (0, eval)(newCode).apply(allGlobals.global, globalsValues);\n        return module.exports;\n    }\n    catch (e) {\n        let error = e;\n        if (typeof e === 'string') {\n            error = new Error(e);\n        }\n        error.isEvalError = true;\n        throw error;\n    }\n}\n/* eslint-enable no-unused-vars */\n","export default class HMR {\n    constructor() {\n        this.data = {};\n        this.dirty = false;\n        this.selfAccepted = false;\n        this.invalidated = false;\n    }\n    callDisposeHandler() {\n        if (this.disposeHandler) {\n            this.data = {};\n            this.disposeHandler(this.data);\n            this.disposeHandler = undefined;\n        }\n    }\n    callAcceptCallback() {\n        if (this.callback) {\n            this.callback();\n        }\n    }\n    setAcceptCallback(callback) {\n        this.callback = callback;\n        this.setSelfAccepted(false);\n    }\n    setDisposeHandler(callback) {\n        this.disposeHandler = callback;\n    }\n    setSelfAccepted(selfAccepted) {\n        this.selfAccepted = selfAccepted;\n        if (selfAccepted) {\n            this.data = {};\n        }\n    }\n    setType(type) {\n        this.type = type;\n    }\n    setDirty(dirty) {\n        this.dirty = dirty;\n    }\n    isDirty() {\n        return this.dirty;\n    }\n    /**\n     * Returns whether this module should reset the compilation of its parents\n     */\n    isHot() {\n        return this.type === 'accept';\n    }\n    isDeclined(isEntry) {\n        if (this.type === 'decline') {\n            return true;\n        }\n        return !this.isHot() && isEntry;\n    }\n    /**\n     * Setting the module to invalidated means that we MUST evaluate it again, which means\n     * that we throw away its compilation and hmrConfig, and we're going to force a second evaluation\n     * once this has been run.\n     */\n    setInvalidated(invalidated) {\n        this.invalidated = invalidated;\n    }\n}\n","import { isUrl } from '@codesandbox/common/lib/utils/is-url';\nconst isFilePath = (path) => /^\\.?\\/.*/.test(path) || isUrl(path);\nexport const splitQueryFromPath = (path) => {\n    if (path.includes('!') && !isFilePath(path)) {\n        const parts = path.split('!');\n        let modulePathIndex = [...parts]\n            .reverse()\n            .findIndex(v => isFilePath(v));\n        if (modulePathIndex < 0) {\n            modulePathIndex = parts.length - 1;\n        }\n        else {\n            modulePathIndex = parts.length - modulePathIndex - 1;\n        }\n        const modulePath = parts.splice(modulePathIndex).join('!');\n        return {\n            queryPath: parts.join('!'),\n            modulePath,\n        };\n    }\n    if (path.includes('?')) {\n        const queryPath = path.split('?');\n        const query = queryPath.pop();\n        return {\n            queryPath: '?' + query,\n            modulePath: queryPath.join('?'),\n        };\n    }\n    return {\n        queryPath: '',\n        modulePath: path,\n    };\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// eslint-disable-next-line max-classes-per-file\nimport { actions, dispatch } from 'codesandbox-api';\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport interopRequireWildcard from '@babel/runtime/helpers/interopRequireWildcard';\nimport hashsum from 'hash-sum';\nimport * as pathUtils from '@codesandbox/common/lib/utils/path';\nimport { measure, endMeasure } from '@codesandbox/common/lib/utils/metrics';\nimport ModuleError from './errors/module-error';\nimport ModuleWarning from './errors/module-warning';\nimport resolveDependency from '../runner/dependency-resolver';\nimport evaluate from '../runner/eval';\nimport HMR from './hmr';\nimport { splitQueryFromPath } from './utils/query-path';\nimport { getModuleUrl } from './module-url';\nimport delay from '../utils/delay';\nconst debug = _debug('cs:compiler:transpiled-module');\nclass ModuleSource {\n    constructor(fileName, compiledCode, sourceMap, sourceEqualsCompiled = false) {\n        this.fileName = fileName;\n        this.compiledCode = compiledCode;\n        this.sourceMap = sourceMap;\n        this.sourceEqualsCompiled = sourceEqualsCompiled;\n    }\n}\nexport class TranspiledModule {\n    /**\n     * Create a new TranspiledModule, a transpiled module is a module that contains\n     * all info for transpilation and compilation. Note that there can be multiple\n     * transpiled modules for 1 module, since a same module can have different loaders\n     * attached using queries.\n     * @param {*} module\n     * @param {*} query A webpack query, eg: \"url-loader?mimetype=image/png\"\n     */\n    constructor(module, query = '') {\n        this.previousSource = null;\n        this.source = null;\n        this.compilation = null;\n        this.isTestFile = false;\n        /**\n         * Set how this module handles HMR. The default is undefined, which means\n         * that we handle the HMR like CodeSandbox does.\n         */\n        this.hmrConfig = null;\n        this.hasMissingDependencies = false;\n        this.createSourceForAsset = (name, content, sourceMap) => new ModuleSource(name, content, sourceMap);\n        this.logWarnings = () => {\n            if (this.warnings.length) {\n                this.warnings.forEach(warning => {\n                    console.warn(warning.message); // eslint-disable-line no-console\n                    dispatch(actions.correction.show(warning.message, {\n                        line: warning.lineNumber,\n                        column: warning.columnNumber,\n                        path: warning.path,\n                        source: warning.source,\n                        severity: warning.severity || 'warning',\n                    }));\n                });\n            }\n        };\n        this.isCompilationCached = (globals) => {\n            if (!this.compilation || !this.compilation.exports) {\n                return false;\n            }\n            if (this.compilation.globals === globals) {\n                return true;\n            }\n            return false;\n        };\n        this.module = module;\n        this.query = query;\n        this.errors = [];\n        this.warnings = [];\n        this.childModules = [];\n        this.transpilationDependencies = new Set();\n        this.dependencies = new Set();\n        this.asyncDependencies = [];\n        this.transpilationInitiators = new Set();\n        this.initiators = new Set();\n        this.isEntry = false;\n        this.isTestFile = false;\n        this.hash = hashsum(`${this.module.path}:${this.query}`);\n    }\n    getId() {\n        return `${this.module.path}:${this.query}`;\n    }\n    dispose(manager) {\n        if (this.hmrConfig) {\n            // If this is a hot module we fully reload the application, same as Webpack v2.\n            manager.markHardReload();\n        }\n        this.reset();\n        // Reset parents\n        this.initiators.forEach(tModule => {\n            tModule.resetTranspilation();\n        });\n        // There are no other modules calling this module, so we run a function on\n        // all transpilers that clears side effects if there are any. Example:\n        // Remove CSS styles from the dom.\n        manager.preset.getLoaders(this.module, manager, this.query).forEach(t => {\n            if (t.transpiler.cleanModule) {\n                t.transpiler.cleanModule(this.getLoaderContext(manager, t.options));\n            }\n        });\n        manager.removeTranspiledModule(this);\n    }\n    reset() {\n        // We don't reset the compilation if itself and its parents if HMR is\n        // accepted for this module. We only mark it as changed so we can properly\n        // handle the update in the evaluation.\n        this.childModules.forEach(m => {\n            m.reset();\n        });\n        this.childModules = [];\n        this.resetTranspilation();\n        this.setIsEntry(false);\n        this.setIsTestFile(false);\n    }\n    resetTranspilation() {\n        Array.from(this.transpilationInitiators)\n            .filter(t => t.source)\n            .forEach(dep => {\n            dep.resetTranspilation();\n        });\n        this.previousSource = this.source;\n        this.source = null;\n        this.errors = [];\n        this.warnings = [];\n        Array.from(this.dependencies).forEach(t => {\n            t.initiators.delete(this);\n        });\n        // Don't do it for transpilation dependencies, since those cannot be traced back since we also reset transpilation of them.\n        this.dependencies.clear();\n        this.transpilationDependencies.clear();\n        this.asyncDependencies = [];\n    }\n    resetCompilation() {\n        if (this.compilation) {\n            this.compilation = null;\n        }\n        if (this.hmrConfig && this.hmrConfig.isHot()) {\n            this.hmrConfig.setDirty(true);\n        }\n        else {\n            Array.from(this.initiators)\n                .filter(t => t.compilation)\n                .forEach(initiator => {\n                initiator.resetCompilation();\n            });\n            Array.from(this.transpilationInitiators)\n                .filter(t => t.compilation)\n                .forEach(dep => {\n                dep.resetCompilation();\n            });\n            // If this is an entry we want all direct entries to be reset as well.\n            // Entries generally have side effects\n            if (this.isEntry) {\n                Array.from(this.dependencies)\n                    .filter(t => t.compilation && t.isEntry)\n                    .forEach(dep => {\n                    dep.resetCompilation();\n                });\n            }\n        }\n    }\n    /**\n     * Determines if this is a module that should be transpiled if updated. If this\n     * is a transpilationDependency that's updated then it should not get transpiled, but the parent should.\n     */\n    shouldTranspile() {\n        return (!this.source &&\n            !this.isTestFile &&\n            !(this.initiators.size === 0 && this.transpilationInitiators.size > 0));\n    }\n    addDependency(manager, depPath, options = {}, isTranspilationDep = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (depPath.startsWith('codesandbox-api')) {\n                return;\n            }\n            try {\n                const tModule = yield manager.resolveTranspiledModule(depPath, options && options.isAbsolute ? '/' : this.module.path);\n                if (isTranspilationDep) {\n                    this.transpilationDependencies.add(tModule);\n                    tModule.transpilationInitiators.add(this);\n                }\n                else {\n                    this.dependencies.add(tModule);\n                    tModule.initiators.add(this);\n                }\n                if (options.isEntry) {\n                    tModule.setIsEntry(true);\n                }\n            }\n            catch (e) {\n                if (e.type === 'module-not-found' && e.isDependency) {\n                    const { queryPath } = splitQueryFromPath(depPath);\n                    this.asyncDependencies.push(manager.downloadDependency(e.path, this, queryPath));\n                }\n                else {\n                    // When a custom file resolver is given to the manager we will try\n                    // to resolve using this file resolver. If that fails we will still\n                    // mark the dependency as having missing deps.\n                    if (manager.fileResolver) {\n                        this.asyncDependencies.push(\n                        // eslint-disable-next-line\n                        new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\n                            try {\n                                const tModule = yield manager.resolveTranspiledModule(depPath, options && options.isAbsolute ? '/' : this.module.path, undefined);\n                                if (isTranspilationDep) {\n                                    this.transpilationDependencies.add(tModule);\n                                    tModule.transpilationInitiators.add(this);\n                                }\n                                else {\n                                    this.dependencies.add(tModule);\n                                    tModule.initiators.add(this);\n                                }\n                                if (options.isEntry) {\n                                    tModule.setIsEntry(true);\n                                }\n                                resolve(tModule);\n                            }\n                            catch (err) {\n                                if (process.env.NODE_ENV === 'development') {\n                                    console.error('Problem while trying to fetch file from custom fileResolver');\n                                    console.error(err);\n                                }\n                                this.hasMissingDependencies = true;\n                            }\n                        })));\n                        return;\n                    }\n                    // Don't throw the error, we want to throw this error during evaluation\n                    // so we get the correct line as error\n                    // ... Thank you so much for this younger Ives, you saved me here.\n                    if (process.env.NODE_ENV === 'development') {\n                        console.error(e);\n                    }\n                    this.hasMissingDependencies = true;\n                }\n            }\n        });\n    }\n    update(module) {\n        if (this.module.path !== module.path || this.module.code !== module.code) {\n            this.module = module;\n            this.resetTranspilation();\n        }\n        return this;\n    }\n    getLoaderContext(manager, transpilerOptions = {}) {\n        return {\n            emitWarning: warning => {\n                this.warnings.push(new ModuleWarning(this, warning));\n            },\n            emitError: error => {\n                this.errors.push(new ModuleError(this, error));\n            },\n            emitModule: (path, code, directoryPath = pathUtils.dirname(this.module.path), overwrite = true, isChild = true) => {\n                const queryPath = path.split('!');\n                // pop() mutates queryPath, queryPath is now just the loaders\n                const modulePath = queryPath.pop();\n                const moduleCopy = {\n                    path: pathUtils.join(directoryPath, modulePath),\n                    parent: this.module,\n                    code,\n                };\n                let transpiledModule;\n                if (overwrite) {\n                    try {\n                        transpiledModule = manager.getTranspiledModule(moduleCopy, queryPath.join('!'));\n                        transpiledModule.update(moduleCopy);\n                    }\n                    catch (e) {\n                        /* Nothing is here, just continue */\n                    }\n                }\n                transpiledModule =\n                    transpiledModule ||\n                        manager.addTranspiledModule(moduleCopy, queryPath.join('!'));\n                if (isChild) {\n                    this.childModules.push(transpiledModule);\n                }\n                this.dependencies.add(transpiledModule);\n                transpiledModule.initiators.add(this);\n                return transpiledModule;\n            },\n            // Add an explicit transpilation dependency, this is needed for loaders\n            // that include the source of another file by themselves, we need to\n            // force transpilation to rebuild the file\n            addTranspilationDependency: (depPath, options) => this.addDependency(manager, depPath, options, true),\n            addDependency: (depPath, options = {}) => this.addDependency(manager, depPath, options),\n            addDependenciesInDirectory: (folderPath, options = {}) => {\n                const tModules = manager.resolveTranspiledModulesInDirectory(folderPath, options && options.isAbsolute ? '/' : this.module.path);\n                tModules.forEach(tModule => {\n                    this.dependencies.add(tModule);\n                    tModule.initiators.add(this);\n                    if (options.isEntry) {\n                        tModule.setIsEntry(true);\n                    }\n                });\n            },\n            resolveTranspiledModule: (depPath, options = {}) => manager.resolveTranspiledModuleSync(depPath, options.isAbsolute ? '/' : this.module.path, options.ignoredExtensions),\n            resolveTranspiledModuleAsync: (depPath, options = {}) => manager.resolveTranspiledModuleAsync(depPath, options.isAbsolute ? undefined : this, options.ignoredExtensions),\n            getModules: () => manager.getModules(),\n            options: Object.assign({ context: pathUtils.dirname(this.module.path), configurations: manager.configurations }, transpilerOptions),\n            webpack: true,\n            sourceMap: true,\n            target: 'web',\n            _module: this,\n            path: this.module.path,\n            url: this.module.url ? this.module.url : getModuleUrl(this.module.path),\n            template: manager.preset.name,\n            remainingRequests: '',\n            sandboxId: manager.id,\n            resourceQuery: this.query,\n            getLoaderQuery: (module) => manager.preset.getQuery(module, manager),\n        };\n    }\n    /**\n     * Mark the transpiled module as entry (or not), this is needed to let the\n     * cleanup know that this module can have no initiators, but is still required.\n     * @param {*} isEntry\n     */\n    setIsEntry(isEntry) {\n        this.isEntry = isEntry;\n    }\n    /**\n     * Mark if this is a test file. If this is a test file we know that we don't\n     * need to do any refresh or fixing when an error is thrown by the module. It's\n     * not a vital module after all.\n     */\n    setIsTestFile(isTestFile) {\n        this.isTestFile = isTestFile;\n    }\n    /**\n     * Transpile the module, it takes in all loaders from the default loaders +\n     * query string and passes the result from loader to loader. During transpilation\n     * dependencies can be added, these dependencies will be transpiled concurrently\n     * after the initial transpilation finished.\n     * @param {*} manager\n     */\n    _transpile(manager) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.hasMissingDependencies = false;\n            // Remove this module from the initiators of old deps, so we can populate a\n            // fresh cache\n            this.dependencies.forEach(tModule => {\n                tModule.initiators.delete(this);\n            });\n            this.transpilationDependencies.forEach(tModule => {\n                tModule.transpilationInitiators.delete(this);\n            });\n            this.childModules.forEach(tModule => {\n                tModule.dispose(manager);\n            });\n            this.dependencies.clear();\n            this.transpilationDependencies.clear();\n            this.childModules.length = 0;\n            this.errors = [];\n            this.warnings = [];\n            let code = this.module.code || '';\n            let finalSourceMap = null;\n            const { requires } = this.module;\n            if (requires != null && this.query === '') {\n                // We now know that this has been transpiled on the server, so we shortcut\n                const loaderContext = this.getLoaderContext(manager, {});\n                // These are precomputed requires, for npm dependencies\n                yield Promise.all(requires.map(r => {\n                    if (r.indexOf('glob:') === 0) {\n                        const reGlob = r.replace('glob:', '');\n                        loaderContext.addDependenciesInDirectory(reGlob);\n                        return Promise.resolve();\n                    }\n                    return loaderContext.addDependency(r);\n                }));\n                // eslint-disable-next-line\n                code = this.module.code;\n            }\n            else {\n                const transpilers = manager.preset.getLoaders(this.module, manager, this.query);\n                for (let i = 0; i < transpilers.length; i += 1) {\n                    const transpilerConfig = transpilers[i];\n                    const loaderContext = this.getLoaderContext(manager, transpilerConfig.options || {});\n                    loaderContext.remainingRequests = transpilers\n                        .slice(i + 1)\n                        .map(transpiler => transpiler.transpiler.name)\n                        .concat([this.module.path])\n                        .join('!');\n                    const measureKey = `transpile-${transpilerConfig.transpiler.name}-${this.getId()}`;\n                    try {\n                        measure(measureKey);\n                        const { transpiledCode, sourceMap,\n                        // eslint-disable-next-line no-await-in-loop\n                         } = yield transpilerConfig.transpiler.transpile(code, loaderContext);\n                        endMeasure(measureKey, { silent: true });\n                        if (this.errors.length) {\n                            throw this.errors[0];\n                        }\n                        code = transpiledCode;\n                        finalSourceMap = sourceMap;\n                    }\n                    catch (e) {\n                        e.fileName = loaderContext.path;\n                        e.tModule = this;\n                        this.resetTranspilation();\n                        // Compilation should also be reset, since the code will be different now\n                        // we don't have a transpilation.\n                        this.resetCompilation();\n                        manager.clearCache();\n                        throw e;\n                    }\n                }\n                this.logWarnings();\n            }\n            this.source = new ModuleSource(this.module.path, code, finalSourceMap, code === this.module.code);\n            if (this.previousSource &&\n                this.previousSource.compiledCode !== this.source.compiledCode) {\n                const hasHMR = manager.preset\n                    .getLoaders(this.module, manager, this.query)\n                    .some(t => t.transpiler.HMREnabled == null ? true : t.transpiler.HMREnabled);\n                if (!hasHMR) {\n                    manager.markHardReload();\n                }\n                else {\n                    this.resetCompilation();\n                }\n            }\n            yield Promise.all(this.asyncDependencies.map((p) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const tModule = yield p;\n                    this.dependencies.add(tModule);\n                    tModule.initiators.add(this);\n                }\n                catch (e) {\n                    /* let this handle at evaluation */\n                }\n            })));\n            this.asyncDependencies = [];\n            yield Promise.all([\n                ...Array.from(this.transpilationInitiators).map(t => t.transpile(manager)),\n                ...Array.from(this.dependencies).map(t => t.transpile(manager)),\n            ]);\n            return this;\n        });\n    }\n    transpile(manager) {\n        // TODO: Rework this into\n        // - A queue that does code transpilation per module\n        // - This function adds this module and all it's dependencies to that queue\n        // - await all the transpilations of this queue and returning when it's all done\n        if (this.source) {\n            return Promise.resolve(this);\n        }\n        const id = this.getId();\n        if (manager.transpileJobs[id]) {\n            if (manager.transpileJobs[id] === true) {\n                // Is currently being transpiled, and the promise hasn't been set yet\n                // because it is working on executing the promise. This rare case only\n                // happens when we have a dependency loop, which could result in a\n                // StackTraceOverflow. Dependency loop: A -> B -> C -> A -> B -> C\n                // eslint-disable-next-line no-async-promise-executor\n                return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                    while (!this.source && manager.transpileJobs[id] === true) {\n                        // eslint-disable-next-line\n                        yield delay(10);\n                    }\n                    const foundTranspileJob = manager.transpileJobs[id];\n                    if (foundTranspileJob !== true) {\n                        try {\n                            const result = yield foundTranspileJob;\n                            resolve(result);\n                        }\n                        catch (err) {\n                            reject(err);\n                        }\n                    }\n                    else {\n                        resolve(this);\n                    }\n                }));\n            }\n            return manager.transpileJobs[id];\n        }\n        manager.transpileJobs[id] = true;\n        // eslint-disable-next-line\n        return (manager.transpileJobs[id] = this._transpile(manager)).finally(() => {\n            delete manager.transpileJobs[id];\n        });\n    }\n    /** Transpile current module and ensure the surrounding tree (dependencies and initiators) are also transpiled */\n    transpileTree(manager) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.transpile(manager);\n            yield manager.verifyTreeTranspiled();\n            return this;\n        });\n    }\n    evaluate(manager, { asUMD = false, force = false, globals, } = {}, initiator) {\n        // empty module\n        if (this.module.path === '/node_modules/empty/index.js') {\n            return {};\n        }\n        // Just let the browser reload...\n        if (manager.isReloading) {\n            return {};\n        }\n        if (this.source == null) {\n            if (this.module.path.startsWith('/node_modules') &&\n                !this.module.path.endsWith('.vue')) {\n                if (process.env.NODE_ENV === 'development') {\n                    console.warn(`[WARN] Sandpack: loading an untranspiled module: ${this.module.path}`);\n                }\n                const code = this.module.path.endsWith('.json')\n                    ? `module.exports = JSON.parse(${JSON.stringify(this.module.code)})`\n                    : this.module.code;\n                this.source = new ModuleSource(this.module.path, code, null);\n                if (initiator) {\n                    initiator.dependencies.add(this);\n                    this.initiators.add(initiator);\n                }\n            }\n            else {\n                // This scenario only happens when we are in an inconsistent state, the quickest way to solve\n                // this state is to just hard reload everything.\n                manager.clearCache();\n                throw new Error(`${this.getId()} hasn't been transpiled yet.`);\n            }\n        }\n        const localModule = this.module;\n        if (manager.webpackHMR) {\n            if (!this.compilation) {\n                const shouldReloadPage = this.hmrConfig\n                    ? this.hmrConfig.isDeclined(this.isEntry)\n                    : this.isEntry && !this.isTestFile;\n                if (shouldReloadPage) {\n                    if (manager.isFirstLoad) {\n                        // We're in a reload loop! Ignore all caches!\n                        manager.isReloading = true;\n                        manager.clearCache();\n                        manager.deleteAPICache().then(() => {\n                            manager.reload();\n                        });\n                    }\n                    else {\n                        manager.reload();\n                    }\n                    return {};\n                }\n            }\n            else if (!this.isTestFile &&\n                (!this.hmrConfig || !this.hmrConfig.isDirty())) {\n                return this.compilation.exports;\n            }\n        }\n        else if (this.isCompilationCached(globals) &&\n            !this.isEntry &&\n            this.compilation) {\n            return this.compilation.exports;\n        }\n        if (this.hmrConfig) {\n            /* eslint-disable no-param-reassign */\n            manager.setHmrStatus('dispose');\n            // Call module.hot.dispose handler\n            // https://webpack.js.org/api/hot-module-replacement/#dispose-or-adddisposehandler-\n            this.hmrConfig.callDisposeHandler();\n            manager.setHmrStatus('idle');\n            /* eslint-enable */\n        }\n        const hotData = this.hmrConfig ? this.hmrConfig.data : undefined;\n        this.compilation =\n            this.compilation ||\n                {\n                    id: this.getId(),\n                    exports: {},\n                    globals,\n                    hot: {\n                        accept: (path, cb) => {\n                            if (typeof path === 'undefined' ||\n                                (typeof path !== 'string' && !Array.isArray(path))) {\n                                // Self mark hot\n                                this.hmrConfig = this.hmrConfig || new HMR();\n                                if (this.hmrConfig) {\n                                    const { hmrConfig } = this;\n                                    hmrConfig.setType('accept');\n                                    hmrConfig.setSelfAccepted(true);\n                                }\n                            }\n                            else {\n                                const paths = typeof path === 'string' ? [path] : path;\n                                paths.forEach((p) => __awaiter(this, void 0, void 0, function* () {\n                                    const tModule = yield manager.resolveTranspiledModule(p, this.module.path);\n                                    tModule.hmrConfig = tModule.hmrConfig || new HMR();\n                                    const { hmrConfig } = tModule;\n                                    hmrConfig.setType('accept');\n                                    hmrConfig.setAcceptCallback(cb);\n                                }));\n                            }\n                            manager.enableWebpackHMR();\n                        },\n                        decline: (path) => {\n                            if (typeof path === 'undefined') {\n                                this.hmrConfig = this.hmrConfig || new HMR();\n                                this.hmrConfig.setType('decline');\n                                this.resetCompilation();\n                            }\n                            else {\n                                const paths = typeof path === 'string' ? [path] : path;\n                                paths.forEach((p) => __awaiter(this, void 0, void 0, function* () {\n                                    const tModule = yield manager.resolveTranspiledModule(p, this.module.path);\n                                    tModule.hmrConfig = tModule.hmrConfig || new HMR();\n                                    tModule.hmrConfig.setType('decline');\n                                    tModule.resetCompilation();\n                                }));\n                            }\n                            manager.enableWebpackHMR();\n                        },\n                        dispose: (cb) => {\n                            this.hmrConfig = this.hmrConfig || new HMR();\n                            this.hmrConfig.setDisposeHandler(cb);\n                        },\n                        invalidate: () => {\n                            this.hmrConfig = this.hmrConfig || new HMR();\n                            // We have to bubble up, so reset compilation of parents\n                            Array.from(this.initiators)\n                                .filter(t => t.compilation)\n                                .forEach(dep => {\n                                dep.resetCompilation();\n                            });\n                            this.hmrConfig.setInvalidated(true);\n                        },\n                        data: hotData,\n                        status: () => manager.hmrStatus,\n                        addStatusHandler: manager.addStatusHandler,\n                        removeStatusHandler: manager.removeStatusHandler,\n                    },\n                };\n        if (this.compilation.hot && hotData) {\n            this.compilation.hot.data = hotData;\n        }\n        const transpiledModule = this;\n        try {\n            // eslint-disable-next-line no-inner-declarations\n            function require(path) {\n                if (path === '') {\n                    throw new Error('Cannot import an empty path');\n                }\n                const usedPath = manager.getPresetAliasedPath(path);\n                const bfsModule = BrowserFS.BFSRequire(usedPath);\n                if (path === 'os') {\n                    const os = require('os-browserify');\n                    os.homedir = () => '/home/sandbox';\n                    return os;\n                }\n                if (bfsModule) {\n                    return bfsModule;\n                }\n                if (path === 'module') {\n                    return class NodeModule {\n                        constructor() {\n                            this.filename = undefined;\n                            this.id = undefined;\n                            this.loaded = false;\n                        }\n                        static _resolveFilename(toPath, module) {\n                            if (module.filename == null) {\n                                throw new Error('Module has no filename');\n                            }\n                            const m = manager.resolveModule({\n                                path: toPath,\n                                parentPath: module.filename,\n                            });\n                            return m.path;\n                        }\n                        static _nodeModulePaths() {\n                            return [];\n                        }\n                    };\n                }\n                // So it must be a dependency\n                if (path.startsWith('codesandbox-api')) {\n                    return resolveDependency(path);\n                }\n                const requiredTranspiledModule = manager.resolveTranspiledModuleSync(path, localModule.path);\n                // Check if this module has been evaluated before, if so return the exports\n                // of that compilation\n                const cache = requiredTranspiledModule.compilation;\n                return requiredTranspiledModule.isCompilationCached(globals)\n                    ? cache.exports\n                    : manager.evaluateTranspiledModule(requiredTranspiledModule, transpiledModule, { force, globals });\n            }\n            // @ts-ignore\n            require.resolve = function resolve(path) {\n                const foundModule = manager.resolveModule({\n                    path,\n                    parentPath: localModule.path,\n                });\n                return foundModule.path;\n            };\n            const usedGlobals = globals || {};\n            usedGlobals.__dirname = pathUtils.dirname(this.module.path);\n            usedGlobals.__filename = this.module.path;\n            usedGlobals.$csbImport = (path) => manager\n                .evaluate(path, this)\n                .then(result => interopRequireWildcard(result));\n            const code = this.source.compiledCode +\n                `\\n//# sourceURL=${location.origin}${this.module.path}${this.query ? `?${this.hash}` : ''}`;\n            const exports = evaluate(code, require, this.compilation, manager.envVariables, usedGlobals, { asUMD });\n            /* eslint-disable no-param-reassign */\n            manager.setHmrStatus('apply');\n            const { hmrConfig } = this;\n            if (hmrConfig && hmrConfig.isHot()) {\n                hmrConfig.setDirty(false);\n                hmrConfig.callAcceptCallback();\n            }\n            manager.setHmrStatus('idle');\n            /* eslint-enable */\n            return exports;\n        }\n        catch (e) {\n            e.tModule = e.tModule || transpiledModule;\n            this.resetCompilation();\n            throw e;\n        }\n    }\n    postTranspile(manager) {\n        if (this.initiators.size === 0 &&\n            this.transpilationInitiators.size === 0 &&\n            !this.isEntry &&\n            !manager.isFirstLoad &&\n            // Don't delete stubbed modules, they are here for a reason, most probably\n            // because they are aliased with a browser field\n            !this.module.stubbed) {\n            // Remove the module from the transpiler if it's not used anymore\n            debug(`Removing '${this.getId()}' from manager.`);\n            this.dispose(manager);\n        }\n    }\n    postEvaluate(manager) {\n        // Question: do we need to disable this for HMR projects?\n        // For non cacheable transpilers we remove the cached evaluation\n        if (manager.preset\n            .getLoaders(this.module, manager, this.query)\n            .some(t => t.transpiler.cacheable == null ? false : !t.transpiler.cacheable)) {\n            debug(`Removing '${this.getId()}' cache as it's not cacheable.`);\n            this.compilation = null;\n        }\n    }\n    serialize(optimizeForSize = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const sourceEqualsCompiled = Boolean(this.source && this.source.sourceEqualsCompiled);\n            const serializableObject = {\n                query: this.query,\n                module: this.module,\n                isEntry: this.isEntry,\n                isTestFile: this.isTestFile,\n                sourceEqualsCompiled,\n                childModules: this.childModules.map(m => m.getId()),\n                dependencies: Array.from(this.dependencies).map(m => m.getId()),\n                initiators: Array.from(this.initiators).map(m => m.getId()),\n                transpilationDependencies: Array.from(this.transpilationDependencies).map(m => m.getId()),\n                transpilationInitiators: Array.from(this.transpilationInitiators).map(m => m.getId()),\n                asyncDependencies: yield Promise.all(Array.from(this.asyncDependencies).map(m => m.then(x => x.getId()))),\n                warnings: this.warnings.map(war => war.serialize()),\n                hasMissingDependencies: this.hasMissingDependencies,\n                source: null,\n            };\n            const isNpmDependency = this.module.path.startsWith('/node_modules/');\n            const canOptimizeSize = sourceEqualsCompiled && optimizeForSize;\n            // Don't cache source if it didn't change, also don't cache changed source from npm\n            // dependencies as we can compile those really quickly.\n            const shouldCacheTranspiledSource = !canOptimizeSize && !isNpmDependency;\n            if (shouldCacheTranspiledSource) {\n                // source can be null if module is not transpiled, i.e. included in other transpiled module (for example .scss files)\n                serializableObject.source = this.source || null;\n            }\n            return serializableObject;\n        });\n    }\n    load(data, state, manager) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.query = data.query;\n            this.module = data.module;\n            this.isEntry = data.isEntry;\n            this.isTestFile = data.isTestFile;\n            this.hasMissingDependencies = data.hasMissingDependencies;\n            if (data.sourceEqualsCompiled) {\n                this.source = new ModuleSource(this.module.path, this.module.code, null, true);\n            }\n            else {\n                // source can be null if module is not transpiled, i.e. included in other transpiled module (for example .scss files)\n                this.source = data.source || null;\n            }\n            const getModule = (depId) => {\n                if (state[depId]) {\n                    return state[depId];\n                }\n                const [path, ...queryParts] = depId.split(':');\n                const query = queryParts.join(':');\n                const { module } = manager.transpiledModules[path];\n                return manager.getTranspiledModule(module, query);\n            };\n            const loadModule = (depId, initiator = false, transpilation = false) => {\n                const tModule = getModule(depId);\n                if (initiator) {\n                    if (transpilation) {\n                        tModule.transpilationDependencies.add(this);\n                    }\n                    else {\n                        tModule.dependencies.add(this);\n                    }\n                }\n                else if (transpilation) {\n                    tModule.transpilationInitiators.add(this);\n                }\n                else {\n                    tModule.initiators.add(this);\n                }\n                return tModule;\n            };\n            data.dependencies.forEach((depId) => {\n                this.dependencies.add(loadModule(depId));\n            });\n            data.childModules.forEach((depId) => {\n                this.childModules.push(loadModule(depId));\n            });\n            data.initiators.forEach((depId) => {\n                this.initiators.add(loadModule(depId, true));\n            });\n            data.transpilationDependencies.forEach((depId) => {\n                this.transpilationDependencies.add(loadModule(depId, false, true));\n            });\n            data.transpilationInitiators.forEach((depId) => {\n                this.transpilationInitiators.add(loadModule(depId, true, true));\n            });\n            data.asyncDependencies.forEach((depId) => {\n                this.asyncDependencies.push(Promise.resolve(loadModule(depId)));\n            });\n            this.warnings =\n                data.warnings.map(war => new ModuleWarning(this, war)) || [];\n            this.logWarnings();\n        });\n    }\n}\n","import { isUrl } from '@codesandbox/common/lib/utils/is-url';\nexport function getModuleUrl(path) {\n    if (isUrl(path)) {\n        return path;\n    }\n    return new URL(path, window.location.href).href;\n}\n","// @ts-ignore\nimport DependencyNotFoundError from 'sandbox-hooks/errors/dependency-not-found-error';\n/**\n * Converts a dependency string to an actual dependency\n *\n * @param {string} dependencyPath\n * @param {Object} externals\n * @returns\n */\nexport default function getDependency(dependencyPath) {\n    if (dependencyPath === 'codesandbox-api') {\n        // eslint-disable-next-line\n        return require('codesandbox-api');\n    }\n    throw new DependencyNotFoundError(dependencyPath);\n}\n","export default {\n    assert: 'assert/assert.js',\n    buffer: 'buffer/index.js',\n    child_process: null,\n    cluster: null,\n    console: 'console-browserify/index.js',\n    constants: 'constants-browserify/constants.json',\n    crypto: 'crypto-browserify/index.js',\n    dgram: null,\n    dns: null,\n    domain: 'domain-browser/index.js',\n    events: 'events/events.js',\n    fs: null,\n    http: 'stream-http/index.js',\n    https: 'https-browserify/index.js',\n    module: null,\n    net: null,\n    os: 'os-browserify/browser.js',\n    path: 'path-browserify/index.js',\n    punycode: 'punycode/punycode.js',\n    process: 'process/browser.js',\n    querystring: 'querystring-es3/index.js',\n    readline: null,\n    repl: null,\n    stream: 'stream-browserify/index.js',\n    _stream_duplex: 'readable-stream/duplex.js',\n    _stream_passthrough: 'readable-stream/passthrough.js',\n    _stream_readable: 'readable-stream/readable.js',\n    _stream_transform: 'readable-stream/transform.js',\n    _stream_writable: 'readable-stream/writable.js',\n    sys: 'util/util.js',\n    timers: 'timers-browserify/main.js',\n    tls: null,\n    tty: 'tty-browserify/index.js',\n    url: 'url/url.js',\n    util: 'util/util.js',\n    vm: 'vm-browserify/index.js',\n    zlib: 'browserify-zlib/src/index.js',\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TarStore } from './utils/tar-store';\n/**\n * Remove the ./ or / from the start\n */\nfunction normalizePath(path) {\n    return path.replace(/^\\.\\//, '').replace(/^\\//, '');\n}\nexport class FileFetcher {\n    constructor(manager) {\n        this.manager = manager;\n        this.tarStore = new TarStore();\n    }\n    getUrlFromFileProtocol(version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tarLocation = normalizePath(version.replace(/^file:/, ''));\n            const module = this.manager.transpiledModules['/' + tarLocation];\n            if (!module) {\n                throw new Error(`Could not find ${version} while resolving dependency`);\n            }\n            return module.module.code;\n        });\n    }\n    file(name, version, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = yield this.getUrlFromFileProtocol(version);\n            return this.tarStore.file(name, url, path);\n        });\n    }\n    meta(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = yield this.getUrlFromFileProtocol(version);\n            return this.tarStore.meta(name, url);\n        });\n    }\n}\n","import { isUrl } from '@codesandbox/common/lib/utils/is-url';\n// TODO: Figure out node_modules, ie read pkg.json from ESModule file tree, would need some major refactoring...\nexport function getESModuleUrl(parent, path) {\n    if (isUrl(path)) {\n        return path;\n    }\n    if (path.startsWith('/node_modules/')) {\n        return null;\n    }\n    if (isUrl(parent) && (path[0] === '.' || path[0] === '/')) {\n        return new URL(path, parent).href;\n    }\n    return null;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { flattenDeep, uniq, values } from 'lodash-es';\nimport { Protocol } from 'codesandbox-api';\nimport fs from 'fs';\nimport gensync from 'gensync';\nimport * as pathUtils from '@codesandbox/common/lib/utils/path';\nimport { isUrl } from '@codesandbox/common/lib/utils/is-url';\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport { getGlobal } from '@codesandbox/common/lib/utils/global';\nimport { endMeasure, now } from '@codesandbox/common/lib/utils/metrics';\nimport DependencyNotFoundError from 'sandbox-hooks/errors/dependency-not-found-error';\nimport ModuleNotFoundError from 'sandbox-hooks/errors/module-not-found-error';\nimport { resolveAsync, resolveSync } from './resolver/resolver';\nimport { generateBenchmarkInterface } from './utils/benchmark';\nimport { TranspiledModule, } from './transpiled-module/transpiled-module';\nimport fetchModule, { setCombinedMetas, combinedMetas, } from './npm/dynamic/fetch-npm-module';\nimport coreLibraries from './npm/get-core-libraries';\nimport dependenciesToQuery from './npm/dependencies-to-query';\nimport { getAliasVersion, getDependencyName, } from './utils/get-dependency-name';\nimport { ignoreNextCache, deleteAPICache, clearIndexedDBCache, } from './cache';\nimport { splitQueryFromPath } from './transpiled-module/utils/query-path';\nimport { prependToContributedProtocols, } from './npm/dynamic/fetch-protocols';\nimport { FileFetcher } from './npm/dynamic/fetch-protocols/file';\nimport { DEFAULT_EXTENSIONS } from './utils/extensions';\nimport { fetchWithRetries } from './npm/dynamic/fetch-protocols/utils';\nimport { getESModuleUrl } from './utils/esmodule-url';\nconst NODE_LIBS = ['dgram', 'net', 'tls', 'fs', 'module', 'child_process'];\n// For these dependencies we don't want to follow along with the `browser` field\nconst SKIPPED_BROWSER_FIELD_DEPENDENCIES = [\n    'babel-core',\n    '@babel/core',\n].reduce((result, next) => (Object.assign(Object.assign({}, result), { [`/node_modules/${next}/package.json`]: true })), {});\nconst SHIMMED_MODULE = {\n    path: pathUtils.join('/node_modules', 'empty', 'index.js'),\n    code: `// empty`,\n    requires: [],\n};\nconst getShimmedModuleFromPath = (currentPath, path) => (Object.assign(Object.assign({}, SHIMMED_MODULE), { path: pathUtils.join(pathUtils.dirname(currentPath), path) }));\nconst debug = _debug('cs:compiler:manager');\nfunction triggerFileWatch(path, type) {\n    try {\n        // @ts-ignore\n        fs.getFSModule().fileWatcher.triggerWatch(path, type);\n    }\n    catch (e) {\n        /* ignore */\n    }\n}\nfunction fetchRemoteModule(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const r = yield fetchWithRetries(url);\n            if (!r.ok) {\n                throw new Error(`Fetching ESModule return error status ${r.status}`);\n            }\n            const content = yield r.text();\n            return {\n                url: r.url,\n                content,\n            };\n        }\n        catch (err) {\n            console.error(err);\n            throw new ModuleNotFoundError(url, true);\n        }\n    });\n}\nexport default class Manager {\n    constructor(id, preset, modules, options, cb) {\n        this.envVariables = {};\n        this.manifest = {\n            contents: {},\n            dependencies: [],\n            dependencyDependencies: {},\n            dependencyAliases: {},\n        };\n        this.hmrStatus = 'idle';\n        this.isReloading = false;\n        this.bfsWrapper = {\n            getTranspiledModules: () => this.transpiledModules,\n            addModule: (module) => {\n                this.addModule(module);\n            },\n            removeModule: (module) => {\n                this.removeModule(module);\n            },\n            moveModule: (module, newPath) => {\n                this.moveModule(module, newPath);\n            },\n            updateModule: (module) => {\n                this.updateModule(module);\n            },\n        };\n        this._isFileSync = (p) => {\n            if (this.stage === 'transpilation') {\n                // In transpilation phase we can afford to download the file if not found,\n                // because we're async. That's why we also include the meta here.\n                return Boolean(this.transpiledModules[p] || combinedMetas[p]);\n            }\n            return Boolean(this.transpiledModules[p]);\n        };\n        this._isFileAsync = (p) => {\n            const exists = this._isFileSync(p);\n            if (exists) {\n                return Promise.resolve(true);\n            }\n            if (this.fileResolver) {\n                return this.fileResolver.isFile(p);\n            }\n            return Promise.resolve(false);\n        };\n        this.isFile = gensync({\n            sync: this._isFileSync,\n            async: this._isFileAsync,\n        });\n        this._readFileSync = (p) => {\n            if (!this.transpiledModules[p]) {\n                const err = new Error('Could not find ' + p);\n                // @ts-ignore\n                err.code = 'ENOENT';\n                throw err;\n            }\n            return this.transpiledModules[p].module.code;\n        };\n        this._readFileAsync = (p) => {\n            try {\n                const content = this._readFileSync(p);\n                return Promise.resolve(content);\n            }\n            catch (err) {\n                if (this.fileResolver) {\n                    return this.fileResolver\n                        .readFile(p)\n                        .then(code => {\n                        this.addModule({ path: p, code });\n                        return code;\n                    })\n                        .catch(() => {\n                        throw err;\n                    });\n                }\n                return Promise.reject(err);\n            }\n        };\n        this.readFile = gensync({\n            sync: this._readFileSync,\n            async: this._readFileAsync,\n        });\n        this.setStage = (stage) => {\n            this.stage = stage;\n        };\n        this.resolveTranspiledModuleAsync = (path, currentTModule, ignoredExtensions) => __awaiter(this, void 0, void 0, function* () {\n            const tModule = currentTModule || this.getTranspiledModule(this.modules['/package.json']); // Get arbitrary file from root\n            try {\n                const transpiledModule = yield this.resolveTranspiledModule(path, tModule.module.path, ignoredExtensions);\n                return transpiledModule;\n            }\n            catch (e) {\n                if (e.type === 'module-not-found' && e.isDependency) {\n                    const { queryPath } = splitQueryFromPath(path);\n                    return this.downloadDependency(e.path, tModule, queryPath, ignoredExtensions);\n                }\n                throw e;\n            }\n        });\n        this.setHmrStatus = (status) => {\n            this.hmrStatusChangeListeners.forEach(v => {\n                v(status);\n            });\n            this.hmrStatus = status;\n        };\n        this.addStatusHandler = (cb) => {\n            this.hmrStatusChangeListeners.add(cb);\n        };\n        this.removeStatusHandler = (cb) => {\n            this.hmrStatusChangeListeners.delete(cb);\n        };\n        this.id = id;\n        this.preset = preset;\n        this.transpiledModules = {};\n        this.cachedPaths = {};\n        this.transpileJobs = {};\n        this.webpackHMR = false;\n        this.hardReload = false;\n        this.hmrStatus = 'idle';\n        this.hmrStatusChangeListeners = new Set();\n        this.isFirstLoad = true;\n        this.transpiledModulesByHash = {};\n        this.configurations = {};\n        this.stage = 'transpilation';\n        this.version = options.versionIdentifier;\n        this.esmodules = new Map();\n        this.resolverCache = new Map();\n        this.reactDevTools = options.reactDevTools;\n        /**\n         * Contribute the file fetcher, which needs the manager to resolve the files\n         */\n        prependToContributedProtocols([\n            {\n                condition: (name, version) => version.startsWith('file:'),\n                protocol: new FileFetcher(this),\n            },\n        ]);\n        this.modules = modules;\n        Object.keys(modules).forEach(k => this.addModule(modules[k]));\n        getGlobal().manager = this;\n        if (process.env.NODE_ENV === 'development') {\n            // eslint-disable-next-line no-console\n            console.log(this);\n            // Initialize benchmark logic\n            getGlobal().Benchmark = generateBenchmarkInterface(this);\n        }\n        BrowserFS.configure({\n            fs: 'CodeSandboxFS',\n            options: {\n                manager: this.bfsWrapper,\n            },\n        }, () => {\n            if (cb) {\n                cb();\n            }\n        });\n        if (options.hasFileResolver) {\n            this.setupFileResolver();\n        }\n    }\n    reload() {\n        this.isReloading = true;\n        if (typeof window !== 'undefined') {\n            window.location.reload();\n        }\n    }\n    prependNpmProtocolDefinition(protocol) {\n        prependToContributedProtocols([protocol]);\n    }\n    // Call this whenever the file structure or modules change, so before each compilation...\n    resetResolverCache() {\n        this.cachedPaths = {};\n        this.resolverCache = new Map();\n    }\n    evaluate(path, baseTModule) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tModule = yield this.resolveTranspiledModuleAsync(path, baseTModule, this.preset.ignoredExtensions);\n            yield tModule.transpile(this);\n            return tModule.evaluate(this);\n        });\n    }\n    setupFileResolver() {\n        const protocol = new Protocol('file-resolver', () => true, window.parent);\n        this.fileResolver = {\n            protocol,\n            isFile: (path) => protocol.sendMessage({ m: 'isFile', p: path }),\n            readFile: (path) => protocol.sendMessage({ m: 'readFile', p: path }),\n        };\n    }\n    resetAllModules() {\n        this.getTranspiledModules().forEach(t => {\n            t.resetTranspilation();\n            t.resetCompilation();\n        });\n    }\n    setManifest(manifest) {\n        this.manifest = manifest || {\n            contents: {},\n            dependencies: [],\n            dependencyDependencies: {},\n            dependencyAliases: {},\n        };\n        Object.keys(this.manifest.contents).forEach(path => {\n            const module = {\n                path,\n                code: this.manifest.contents[path].content,\n            };\n            if (SKIPPED_BROWSER_FIELD_DEPENDENCIES[path]) {\n                const pJsonCode = JSON.parse(this.manifest.contents[path].content);\n                // eslint-disable-next-line\n                delete pJsonCode.browser;\n                module.code = JSON.stringify(pJsonCode, null, 2);\n            }\n            this.addModule(module);\n        });\n        debug(`Loaded manifest.`);\n    }\n    evaluateModule(module, { force = false, globals } = {}) {\n        // Do a hard reload\n        if (this.hardReload && !this.isFirstLoad) {\n            this.reload();\n            return {};\n        }\n        // Page is reloading, skip further evaluation\n        if (this.isReloading) {\n            return {};\n        }\n        // Evaluate the *changed* HMR modules first\n        this.getTranspiledModules()\n            .filter(t => t.hmrConfig && t.hmrConfig.isDirty())\n            .forEach(t => t.evaluate(this));\n        const transpiledModule = this.getTranspiledModule(module);\n        if (force && transpiledModule.compilation) {\n            transpiledModule.compilation = null;\n        }\n        try {\n            const exports = this.evaluateTranspiledModule(transpiledModule, undefined, { force, globals });\n            if (this.webpackHMR) {\n                // Check if any module has been invalidated, because in that case we need to\n                // restart evaluation.\n                const invalidatedModules = this.getTranspiledModules().filter(t => {\n                    var _a;\n                    if ((_a = t.hmrConfig) === null || _a === void 0 ? void 0 : _a.invalidated) {\n                        t.compilation = null;\n                        t.hmrConfig = null;\n                        return true;\n                    }\n                    return false;\n                });\n                if (invalidatedModules.length > 0) {\n                    return this.evaluateModule(module, { force, globals });\n                }\n            }\n            this.setHmrStatus('idle');\n            return exports;\n        }\n        finally {\n            // Run post evaluate\n            this.getTranspiledModules().forEach(t => t.postEvaluate(this));\n        }\n    }\n    evaluateTranspiledModule(transpiledModule, initiator, { force = false, globals } = {}) {\n        if (force && transpiledModule.compilation) {\n            transpiledModule.compilation = null;\n        }\n        return transpiledModule.evaluate(this, { force, globals }, initiator);\n    }\n    addModule(module) {\n        this.transpiledModules[module.path] = this.transpiledModules[module.path] || { module, tModules: {} };\n        triggerFileWatch(module.path, 'rename');\n    }\n    addTranspiledModule(module, query = '') {\n        if (this.transpiledModules[module.path] &&\n            this.transpiledModules[module.path].tModules[query] &&\n            this.transpiledModules[module.path].module.code === module.code) {\n            // fix: loaderContext.emitModule() may replace tModule directly\n            return this.transpiledModules[module.path].tModules[query];\n        }\n        if (!this.transpiledModules[module.path]) {\n            this.addModule(module);\n        }\n        this.transpiledModules[module.path].module = module;\n        const transpiledModule = new TranspiledModule(module, query);\n        this.transpiledModules[module.path].tModules[query] = transpiledModule;\n        this.transpiledModulesByHash[transpiledModule.hash] = transpiledModule;\n        return transpiledModule;\n    }\n    getTranspiledModuleByHash(hash) {\n        return this.transpiledModulesByHash[hash];\n    }\n    /**\n     * Get Transpiled Module from the registry, if there is no transpiled module\n     * in the registry it will create a new one.\n     *\n     * @param {Module} module\n     * @param {string} query A webpack like syntax (!url-loader)\n     */\n    getTranspiledModule(module, query = '') {\n        const moduleObject = this.transpiledModules[module.path];\n        if (!moduleObject) {\n            this.addModule(module);\n        }\n        let transpiledModule = this.transpiledModules[module.path].tModules[query];\n        if (!transpiledModule) {\n            transpiledModule = this.addTranspiledModule(module, query);\n        }\n        return transpiledModule;\n    }\n    /**\n     * One module can have multiple transpiled modules, because modules can be\n     * required in different ways. For example, require(`babel-loader!./Test.vue`) isn't\n     * the same as require(`./Test.vue`).\n     *\n     * This will return all transpiled modules, with different configurations associated one module.\n     * @param {*} module\n     */\n    getTranspiledModulesByModule(module) {\n        return this.transpiledModules[module.path]\n            ? values(this.transpiledModules[module.path].tModules)\n            : [];\n    }\n    getTranspiledModules() {\n        return values(this.transpiledModulesByHash);\n    }\n    removeTranspiledModule(tModule) {\n        delete this.transpiledModulesByHash[tModule.hash];\n        delete this.transpiledModules[tModule.module.path].tModules[tModule.query];\n    }\n    removeModule(module) {\n        // File structure changed, reset resolver cache\n        this.resetResolverCache();\n        const existingModule = this.transpiledModules[module.path];\n        values(existingModule.tModules).forEach(m => {\n            m.dispose(this);\n            this.removeTranspiledModule(m);\n        });\n        delete this.transpiledModules[module.path];\n        triggerFileWatch(module.path, 'rename');\n        this.markHardReload();\n    }\n    moveModule(module, newPath) {\n        this.removeModule(module);\n        this.addModule(Object.assign(Object.assign({}, module), { path: newPath }));\n    }\n    setEnvironmentVariables() {\n        if (this.transpiledModules['/.env'] && this.preset.hasDotEnv) {\n            const envCode = this.transpiledModules['/.env'].module.code;\n            this.envVariables = {};\n            try {\n                envCode.split('\\n').forEach(envLine => {\n                    const [name, ...val] = envLine.split('=');\n                    this.envVariables[name] = val.join('=').replace(/^('|\")|('|\")$/g, '');\n                });\n            }\n            catch (e) {\n                console.error(e);\n            }\n        }\n    }\n    /**\n     * Will transpile this module and all eventual children (requires) that go with it\n     * @param {*} entry\n     */\n    transpileModules(entry, isTestFile = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.setHmrStatus('check');\n            this.setEnvironmentVariables();\n            const transpiledModule = this.getTranspiledModule(entry);\n            transpiledModule.setIsEntry(true);\n            transpiledModule.setIsTestFile(isTestFile);\n            const result = yield transpiledModule.transpile(this);\n            this.getTranspiledModules().forEach(t => t.postTranspile(this));\n            return result;\n        });\n    }\n    verifyTreeTranspiled() {\n        const promises = [];\n        for (const tModule of this.getTranspiledModules()) {\n            promises.push(tModule.transpile(this));\n        }\n        return Promise.all(promises);\n    }\n    clearCompiledCache() {\n        this.getTranspiledModules().map(tModule => tModule.resetCompilation());\n    }\n    clearTranspilationCache() {\n        this.getTranspiledModules().map(tModule => tModule.resetTranspilation());\n    }\n    getModules() {\n        return values(this.transpiledModules).map(t => t.module);\n    }\n    /**\n     * The packager returns a list of dependencies that require a different path\n     * of their subdependencies.\n     *\n     * An example:\n     * if react requires lodash v3, and react-dom requires lodash v4. We add them\n     * both to the bundle, and rewrite paths for lodash v3 to `lodash/3.0.0/`. Then\n     * we specify that when react resolves `lodash` it should resolve `lodash/3.0.0`.\n     *\n     * @param {string} path\n     * @param {string} currentPath\n     * @returns\n     * @memberof Manager\n     */\n    getAliasedDependencyPath(path, currentPath) {\n        const isDependency = /^(\\w|@\\w|@-)/.test(path);\n        if (!isDependency) {\n            return path;\n        }\n        const isCurrentPathDependency = currentPath.startsWith('/node_modules');\n        if (!isCurrentPathDependency) {\n            return path;\n        }\n        const dependencyName = getDependencyName(path);\n        const currentDependencyName = getDependencyName(currentPath.replace('/node_modules/', ''));\n        // There's a case where an aliased dependency requests itself. Eg. @babel/runtime/7.13.1 has an import\n        // of @babel/runtime. We know that this dependency needs to be @babel/runtime/7.13.1, so we do an explicit\n        // check for this here.\n        if (currentDependencyName.startsWith(dependencyName + '/')) {\n            // Okay, we now know for sure that the current dependency is aliased, and the imported dependency is the same\n            const aliasedVersion = getAliasVersion(currentPath.replace('/node_modules/', ''));\n            if (aliasedVersion) {\n                return path.replace(dependencyName, dependencyName + '/' + aliasedVersion);\n            }\n        }\n        if (currentDependencyName &&\n            dependencyName &&\n            this.manifest.dependencyAliases[currentDependencyName] &&\n            this.manifest.dependencyAliases[currentDependencyName][dependencyName]) {\n            const aliasedDependencyName = this.manifest.dependencyAliases[currentDependencyName][dependencyName];\n            return path.replace(dependencyName, aliasedDependencyName);\n        }\n        return path;\n    }\n    /**\n     * Set the manager to use Webpack HMR, this changes how modules are hot reloaded\n     * and how the manager cleans up the website.\n     *\n     * @memberof Manager\n     */\n    enableWebpackHMR() {\n        this.webpackHMR = true;\n    }\n    getPresetAliasedPath(path) {\n        return this.preset\n            .getAliasedPath(path)\n            .replace(/.*\\{\\{sandboxRoot\\}\\}/, '');\n    }\n    getModuleDirectories() {\n        var _a, _b;\n        if (this.moduleDirectoriesCache) {\n            return this.moduleDirectoriesCache;\n        }\n        const baseTSCompilerConfig = [\n            this.configurations.typescript,\n            this.configurations.jsconfig,\n        ].find(config => config && config.generated !== true);\n        let baseUrl = (_b = (_a = baseTSCompilerConfig === null || baseTSCompilerConfig === void 0 ? void 0 : baseTSCompilerConfig.parsed) === null || _a === void 0 ? void 0 : _a.compilerOptions) === null || _b === void 0 ? void 0 : _b.baseUrl;\n        // TODO: we need to extract our resolver to a plugin system and use the TypeScript resolver\n        // if we see a tsconfig. A `.` doesn't work and messes up resolving.\n        if (baseUrl === '.') {\n            baseUrl = undefined;\n        }\n        this.moduleDirectoriesCache = [\n            'node_modules',\n            baseUrl,\n            this.envVariables.NODE_PATH,\n        ].filter(Boolean);\n        return this.moduleDirectoriesCache;\n    }\n    downloadESModule(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const mod = this.esmodules.get(url) || fetchRemoteModule(url);\n            this.esmodules.set(url, mod);\n            return mod;\n        });\n    }\n    // ALWAYS KEEP THIS METHOD IN SYNC WITH SYNC VERSION\n    resolveModuleAsync(opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { path, query = '', defaultExtensions = DEFAULT_EXTENSIONS } = opts;\n            let parentPath = opts.parentPath || '/index.js';\n            const esmoduleUrl = getESModuleUrl(parentPath, path);\n            // Handle ESModule import\n            if (esmoduleUrl) {\n                if (!this.preset.experimentalEsmSupport) {\n                    throw new Error('ESModules url imports are only supported in the experimental ESModule preset.');\n                }\n                const fullUrl = `${esmoduleUrl}?${query}`;\n                const cachedModule = this.transpiledModules[fullUrl];\n                if (cachedModule) {\n                    return cachedModule.module;\n                }\n                const downloadResult = yield this.downloadESModule(fullUrl);\n                this.addModule({\n                    path: fullUrl,\n                    url: downloadResult.url,\n                    code: downloadResult.content || '',\n                    downloaded: true,\n                });\n                return this.transpiledModules[fullUrl].module;\n            }\n            // This handles the imports of node_modules from remote ESModules\n            // In the future we should probably resolve these from a pkg.json the ESModule provides...\n            if (isUrl(parentPath) && !esmoduleUrl) {\n                // eslint-disable-next-line no-param-reassign\n                parentPath = '/package.json';\n            }\n            const dirredPath = pathUtils.dirname(parentPath);\n            if (this.cachedPaths[dirredPath] === undefined) {\n                this.cachedPaths[dirredPath] = {};\n            }\n            const cachedPath = this.cachedPaths[dirredPath][path];\n            let resolvedPath;\n            if (cachedPath && this.transpiledModules[cachedPath]) {\n                resolvedPath = cachedPath;\n            }\n            else {\n                const measureKey = `resolve-async:${path}::${parentPath}::${query}`;\n                const measureStartTime = now();\n                const presetAliasedPath = this.getPresetAliasedPath(path);\n                const aliasedPath = this.getAliasedDependencyPath(presetAliasedPath, parentPath);\n                const shimmedPath = coreLibraries[aliasedPath] || aliasedPath;\n                if (NODE_LIBS.indexOf(shimmedPath) > -1) {\n                    this.cachedPaths[dirredPath][path] = shimmedPath;\n                    return getShimmedModuleFromPath(parentPath, path);\n                }\n                try {\n                    resolvedPath = yield resolveAsync(shimmedPath, {\n                        filename: parentPath,\n                        extensions: defaultExtensions.map(ext => '.' + ext),\n                        isFile: this.isFile,\n                        readFile: this.readFile,\n                        moduleDirectories: this.getModuleDirectories(),\n                        resolverCache: this.resolverCache,\n                    });\n                    endMeasure(measureKey, { silent: true, lastTime: measureStartTime });\n                    this.cachedPaths[dirredPath][path] = resolvedPath;\n                    if (resolvedPath === '//empty.js') {\n                        return getShimmedModuleFromPath(parentPath, path);\n                    }\n                    if (!this.transpiledModules[resolvedPath]) {\n                        try {\n                            const remoteFileContent = yield this.readFile.async(resolvedPath);\n                            this.addModule({\n                                path: resolvedPath,\n                                code: remoteFileContent || '',\n                            });\n                        }\n                        catch (err) {\n                            throw new Error(`Could not find '${resolvedPath}' in local files.`);\n                        }\n                    }\n                }\n                catch (err) {\n                    if (this.cachedPaths[dirredPath] &&\n                        this.cachedPaths[dirredPath][path]) {\n                        delete this.cachedPaths[dirredPath][path];\n                    }\n                    let connectedPath = shimmedPath;\n                    if (connectedPath.indexOf('/node_modules') !== 0) {\n                        connectedPath = /^(\\w|@\\w|@-)/.test(shimmedPath)\n                            ? pathUtils.join('/node_modules', shimmedPath)\n                            : pathUtils.join(pathUtils.dirname(parentPath), shimmedPath);\n                    }\n                    const isDependency = connectedPath.includes('/node_modules/');\n                    connectedPath = connectedPath.replace('/node_modules/', '');\n                    if (!isDependency) {\n                        throw new ModuleNotFoundError(shimmedPath, false, parentPath);\n                    }\n                    const dependencyName = getDependencyName(connectedPath);\n                    // TODO: fix the stack hack\n                    if (dependencyName &&\n                        (this.manifest.dependencies.find(d => d.name === dependencyName) ||\n                            this.manifest.dependencyDependencies[dependencyName] ||\n                            this.manifest.contents[`/node_modules/${dependencyName}/package.json`])) {\n                        throw new ModuleNotFoundError(connectedPath, true, parentPath);\n                    }\n                    else {\n                        throw new DependencyNotFoundError(connectedPath, parentPath);\n                    }\n                }\n            }\n            if (resolvedPath === '//empty.js') {\n                return getShimmedModuleFromPath(parentPath, path);\n            }\n            return this.transpiledModules[resolvedPath].module;\n        });\n    }\n    // ALWAYS KEEP THIS METHOD IN SYNC WITH ASYNC VERSION\n    resolveModule({ path, parentPath = '/', query = '', defaultExtensions = DEFAULT_EXTENSIONS, }) {\n        const esmoduleUrl = getESModuleUrl(parentPath, path);\n        // Handle ESModule import\n        if (esmoduleUrl) {\n            if (!this.preset.experimentalEsmSupport) {\n                throw new Error('ESModules url imports are only supported in the experimental ESModule preset.');\n            }\n            const fullUrl = `${esmoduleUrl}?${query}`;\n            const cachedModule = this.transpiledModules[fullUrl];\n            if (cachedModule) {\n                return cachedModule.module;\n            }\n            throw new Error(`Cannot download ESModule dependencies synchronously: ${fullUrl}`);\n        }\n        // This handles the imports of node_modules from remote ESModules\n        // In the future we should probably resolve these from a pkg.json the ESModule provides...\n        if (isUrl(parentPath) && !esmoduleUrl) {\n            // eslint-disable-next-line no-param-reassign\n            parentPath = '/package.json';\n        }\n        const dirredPath = pathUtils.dirname(parentPath);\n        if (this.cachedPaths[dirredPath] === undefined) {\n            this.cachedPaths[dirredPath] = {};\n        }\n        const cachedPath = this.cachedPaths[dirredPath][path];\n        let resolvedPath;\n        if (cachedPath && this.transpiledModules[cachedPath]) {\n            resolvedPath = cachedPath;\n        }\n        else {\n            const measureKey = `resolve-sync:${path}:${parentPath}`;\n            const measureStartTime = now();\n            const presetAliasedPath = this.getPresetAliasedPath(path);\n            const aliasedPath = this.getAliasedDependencyPath(presetAliasedPath, parentPath);\n            const shimmedPath = coreLibraries[aliasedPath] || aliasedPath;\n            if (NODE_LIBS.indexOf(shimmedPath) > -1) {\n                this.cachedPaths[dirredPath][path] = shimmedPath;\n                return getShimmedModuleFromPath(parentPath, path);\n            }\n            try {\n                resolvedPath = resolveSync(shimmedPath, {\n                    filename: parentPath,\n                    extensions: defaultExtensions.map(ext => '.' + ext),\n                    isFile: this.isFile,\n                    readFile: this.readFile,\n                    moduleDirectories: this.getModuleDirectories(),\n                    resolverCache: this.resolverCache,\n                });\n                endMeasure(measureKey, { silent: true, lastTime: measureStartTime });\n                this.cachedPaths[dirredPath][path] = resolvedPath;\n                if (resolvedPath === '//empty.js') {\n                    return getShimmedModuleFromPath(parentPath, path);\n                }\n                if (!this.transpiledModules[resolvedPath]) {\n                    throw new Error(`Could not find '${resolvedPath}' in local files.`);\n                }\n            }\n            catch (e) {\n                // MAKE SURE TO SYNC THIS WITH ASYNC VERSION\n                if (this.cachedPaths[dirredPath] &&\n                    this.cachedPaths[dirredPath][path]) {\n                    delete this.cachedPaths[dirredPath][path];\n                }\n                let connectedPath = shimmedPath;\n                if (connectedPath.indexOf('/node_modules') !== 0) {\n                    connectedPath = /^(\\w|@\\w|@-)/.test(shimmedPath)\n                        ? pathUtils.join('/node_modules', shimmedPath)\n                        : pathUtils.join(pathUtils.dirname(parentPath), shimmedPath);\n                }\n                const isDependency = connectedPath.includes('/node_modules/');\n                connectedPath = connectedPath.replace('/node_modules/', '');\n                if (!isDependency) {\n                    throw new ModuleNotFoundError(shimmedPath, false, parentPath);\n                }\n                const dependencyName = getDependencyName(connectedPath);\n                // TODO: fix the stack hack\n                if (dependencyName &&\n                    (this.manifest.dependencies.find(d => d.name === dependencyName) ||\n                        this.manifest.dependencyDependencies[dependencyName] ||\n                        this.manifest.contents[`/node_modules/${dependencyName}/package.json`])) {\n                    throw new ModuleNotFoundError(connectedPath, true, parentPath);\n                }\n                else {\n                    throw new DependencyNotFoundError(connectedPath, parentPath);\n                }\n            }\n        }\n        if (resolvedPath === '//empty.js') {\n            return getShimmedModuleFromPath(parentPath, path);\n        }\n        return this.transpiledModules[resolvedPath].module;\n    }\n    downloadDependency(path, currentTModule, query = '', ignoredExtensions = this.preset.ignoredExtensions) {\n        return fetchModule(path, currentTModule, this, ignoredExtensions).then(module => {\n            this.resetResolverCache();\n            return this.getTranspiledModule(module, query);\n        });\n    }\n    updateModule(m) {\n        this.transpiledModules[m.path].module = m;\n        triggerFileWatch(m.path, 'change');\n        return this.getTranspiledModulesByModule(m).map(tModule => {\n            tModule.update(m);\n            return tModule;\n        });\n    }\n    /**\n     * Resolve the transpiled module from the path, note that the path can actually\n     * include loaders. That's why we're focussing on first extracting this query\n     * @param {*} path\n     * @param {*} currentPath\n     */\n    resolveTranspiledModule(path, currentPath, ignoredExtensions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (path.startsWith('webpack:')) {\n                throw new Error('Cannot resolve webpack path');\n            }\n            const { queryPath, modulePath } = splitQueryFromPath(path);\n            const resolvedModule = yield this.resolveModuleAsync({\n                path: modulePath,\n                parentPath: currentPath,\n                query: queryPath,\n                defaultExtensions: ignoredExtensions || this.preset.ignoredExtensions,\n            });\n            return this.getTranspiledModule(resolvedModule, queryPath);\n        });\n    }\n    /**\n     * Resolve the transpiled module from the path, note that the path can actually\n     * include loaders. That's why we're focussing on first extracting this query\n     * @param {*} path\n     * @param {*} currentPath\n     */\n    resolveTranspiledModuleSync(path, currentPath, ignoredExtensions) {\n        if (path.startsWith('webpack:')) {\n            throw new Error('Cannot resolve webpack path');\n        }\n        const { queryPath, modulePath } = splitQueryFromPath(path);\n        const resolvedModule = this.resolveModule({\n            path: modulePath,\n            parentPath: currentPath,\n            query: queryPath,\n            defaultExtensions: ignoredExtensions || this.preset.ignoredExtensions,\n        });\n        return this.getTranspiledModule(resolvedModule, queryPath);\n    }\n    resolveTranspiledModulesInDirectory(path, currentPath) {\n        const { queryPath, modulePath } = splitQueryFromPath(path);\n        const joinedPath = pathUtils.join(pathUtils.dirname(currentPath), modulePath);\n        return Object.keys(this.transpiledModules)\n            .filter(p => p.startsWith(joinedPath))\n            .map(m => this.getTranspiledModule(this.transpiledModules[m].module, queryPath));\n    }\n    updateConfigurations(configurations) {\n        const configsUpdated = this.configurations\n            ? JSON.stringify(configurations) !== JSON.stringify(this.configurations)\n            : false;\n        if (configsUpdated) {\n            this.resetAllModules();\n        }\n        this.configurations = configurations;\n    }\n    /**\n     * Find all changed, added and deleted modules. Update trees and\n     * delete caches accordingly\n     */\n    updateData(modules) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.transpileJobs = {};\n            this.hardReload = false;\n            this.modules = modules;\n            const addedModules = [];\n            const updatedModules = [];\n            // File structure likely changed, reset resolver cache\n            this.resetResolverCache();\n            Object.keys(modules).forEach(k => {\n                const module = modules[k];\n                const mirrorModule = this.transpiledModules[k];\n                if (!mirrorModule) {\n                    addedModules.push(module);\n                }\n                else if (mirrorModule.module.code !== module.code) {\n                    updatedModules.push(module);\n                }\n            });\n            this.getModules().forEach(m => {\n                if (!m.path.startsWith('/node_modules') &&\n                    m.path !== '/var/task/node_modules/browser-resolve/empty.js' &&\n                    !isUrl(m.path) &&\n                    !modules[m.path] &&\n                    !m.parent // not an emitted module\n                ) {\n                    this.removeModule(m);\n                }\n            });\n            addedModules.forEach(m => {\n                this.addTranspiledModule(m);\n            });\n            const modulesToUpdate = uniq([\n                ...addedModules,\n                ...updatedModules,\n            ]);\n            // We eagerly transpile changed files,\n            // this way we don't have to traverse the whole\n            // dependency graph each time a file changes\n            const tModulesToUpdate = modulesToUpdate.map(m => this.updateModule(m));\n            if (tModulesToUpdate.length > 0 && this.configurations.sandbox) {\n                this.hardReload =\n                    this.hardReload ||\n                        this.configurations.sandbox.parsed.hardReloadOnChange;\n            }\n            const modulesWithErrors = this.getTranspiledModules().filter(t => {\n                if (t.hasMissingDependencies) {\n                    t.resetTranspilation();\n                }\n                return t.errors.length > 0 || t.hasMissingDependencies;\n            });\n            const flattenedTModulesToUpdate = flattenDeep([\n                tModulesToUpdate,\n                modulesWithErrors,\n            ]);\n            const allModulesToUpdate = uniq(flattenedTModulesToUpdate);\n            const transpiledModulesToUpdate = allModulesToUpdate.filter(m => !m.isTestFile);\n            // Reset test files, but don't transpile. We want to do that in the test runner\n            // so we can catch any errors\n            allModulesToUpdate\n                .filter(m => m.isTestFile)\n                .forEach(m => {\n                m.resetTranspilation();\n            });\n            debug(`Generated update diff, updating ${transpiledModulesToUpdate.length} modules.`, transpiledModulesToUpdate);\n            const transpilationResults = yield Promise.all(transpiledModulesToUpdate\n                .map(tModule => {\n                if (tModule.shouldTranspile()) {\n                    return tModule.transpile(this);\n                }\n                return Promise.resolve(false);\n            })\n                .filter(Boolean));\n            return transpilationResults;\n        });\n    }\n    /**\n     * Mark that the next evaluation should first have a location.reload() before\n     * continuing\n     */\n    markHardReload() {\n        this.setHmrStatus('fail');\n        this.hardReload = true;\n    }\n    serialize({ entryPath, optimizeForSize, } = {\n        optimizeForSize: true,\n    }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const serializedTModules = {};\n            yield Promise.all(Object.keys(this.transpiledModules).map(path => Promise.all(Object.keys(this.transpiledModules[path].tModules).map((query) => __awaiter(this, void 0, void 0, function* () {\n                const tModule = this.transpiledModules[path].tModules[query];\n                if (!this.manifest.contents[tModule.module.path] ||\n                    tModule.module.downloaded) {\n                    // Only save modules that are not precomputed\n                    serializedTModules[tModule.getId()] = yield tModule.serialize(optimizeForSize);\n                }\n            })))));\n            const dependenciesQuery = this.getDependencyQuery();\n            const meta = {};\n            Object.keys(combinedMetas || {}).forEach(p => {\n                const dir = pathUtils.dirname(p.replace('/node_modules', ''));\n                meta[dir] = meta[dir] || [];\n                meta[dir].push(pathUtils.basename(p));\n            });\n            return {\n                transpiledModules: serializedTModules,\n                cachedPaths: this.cachedPaths,\n                version: this.version,\n                timestamp: new Date().getTime(),\n                configurations: this.configurations,\n                entry: entryPath,\n                meta,\n                dependenciesQuery,\n            };\n        });\n    }\n    getDependencyQuery() {\n        if (!this.manifest || !this.manifest.dependencies) {\n            return '';\n        }\n        const normalizedDependencies = {};\n        this.manifest.dependencies.forEach(dep => {\n            normalizedDependencies[dep.name] = dep.version;\n        });\n        return dependenciesToQuery(normalizedDependencies);\n    }\n    load(data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (data) {\n                    this.clearCache();\n                    const { transpiledModules: serializedTModules, cachedPaths, version: cacheVersion, configurations, dependenciesQuery, meta, } = data;\n                    // Only use the cache if the cached version was cached with the same\n                    // version of the compiler and dependencies haven't changed\n                    if (cacheVersion === this.version &&\n                        dependenciesQuery === this.getDependencyQuery()) {\n                        const newCombinedMetas = {};\n                        Object.keys(meta).forEach(dir => {\n                            meta[dir].forEach(file => {\n                                newCombinedMetas[`/node_modules` + dir + '/' + file] = true;\n                            });\n                        });\n                        setCombinedMetas(newCombinedMetas);\n                        this.cachedPaths = cachedPaths;\n                        this.configurations = configurations;\n                        const tModules = {};\n                        // First create tModules for all the saved modules, so we have references\n                        Object.keys(serializedTModules).forEach(id => {\n                            const sTModule = serializedTModules[id];\n                            const tModule = this.addTranspiledModule(sTModule.module, sTModule.query);\n                            tModules[id] = tModule;\n                        });\n                        yield Promise.all(Object.keys(tModules).map(id => {\n                            const tModule = tModules[id];\n                            return tModule.load(serializedTModules[id], tModules, this);\n                        }));\n                        debug(`Loaded cache.`);\n                    }\n                }\n            }\n            catch (e) {\n                if (process.env.NODE_ENV === 'development') {\n                    console.warn('Problems parsing cache');\n                    console.warn(e);\n                }\n            }\n            this.clearCache();\n        });\n    }\n    dispose() {\n        if (this.preset) {\n            this.preset.getTranspilers().forEach(t => {\n                if (t.dispose) {\n                    t.dispose();\n                }\n            });\n            if (this.fileResolver) {\n                this.fileResolver.protocol.dispose();\n            }\n        }\n    }\n    deleteAPICache() {\n        ignoreNextCache();\n        if (!this.id) {\n            return Promise.resolve();\n        }\n        return deleteAPICache(this.id, this.version);\n    }\n    clearCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                this.moduleDirectoriesCache = undefined;\n                yield clearIndexedDBCache();\n            }\n            catch (ex) {\n                if (process.env.NODE_ENV === 'development') {\n                    console.error(ex);\n                }\n            }\n        });\n    }\n    /**\n     * Get information about all transpilers currently registered for this manager\n     */\n    getTranspilerContext() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const info = {};\n            const data = yield Promise.all(this.preset\n                .getTranspilers()\n                .map(t => t\n                .getTranspilerContext(this)\n                .then(context => ({ name: t.name, data: context }))));\n            data.forEach(t => {\n                info[t.name] = t.data;\n            });\n            return info;\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport orderBy from 'lodash-es/orderBy';\nimport querystring from 'querystring';\nimport { WebpackTranspiler } from '../transpiler/transpilers/webpack';\n/**\n * This is essentially where it all comes together. The manager is responsible for\n * doing evaluation and transpilation using the Transpiler and Loader classes.\n *\n * You can build presets with this, for example the create-react-app template\n * could create a new instance of this and register all desired loaders.\n *\n * Note that this manager should never have state besides the transpilers and\n * the loaders, the only responsibility is to activate the right transpilers\n * and loaders.\n */\nexport class Preset {\n    constructor(name, ignoredExtensions, alias, { hasDotEnv, processDependencies, setup, teardown, htmlDisabled, preEvaluate, } = {}) {\n        this.experimentalEsmSupport = false;\n        this.preTranspilers = [];\n        this.postTranspilers = [\n        // { transpiler: csbDynamicImportTranspiler },\n        ];\n        this.setAdditionalAliases = (aliases) => {\n            this.alias = Object.assign(Object.assign({}, this.defaultAliases), aliases);\n            this.aliasedPathCache = {};\n        };\n        this.reset = () => {\n            this.loaders = [];\n        };\n        this.resetTranspilers = () => {\n            this._transpilers.clear();\n            this.loaders.length = 0;\n        };\n        this.aliasedPathCache = {};\n        this.parseOptions = (options) => {\n            if (options == null) {\n                return {};\n            }\n            try {\n                return JSON.parse(options);\n            }\n            catch (e) {\n                return querystring.parse(options);\n            }\n        };\n        this.loaders = [];\n        this._transpilers = new Map();\n        this.name = name;\n        this.hasDotEnv = hasDotEnv || false;\n        this.alias = alias || {};\n        this.aliasedPathCache = {};\n        this.defaultAliases = alias || {};\n        this.ignoredExtensions = ignoredExtensions || ['js', 'jsx', 'json', 'mjs'];\n        const noop = () => { };\n        this.processDependencies = processDependencies || ((deps) => __awaiter(this, void 0, void 0, function* () { return deps; }));\n        this.setup = setup || noop;\n        this.teardown = teardown || noop;\n        this.preEvaluate = preEvaluate || noop;\n        this.htmlDisabled = htmlDisabled || false;\n        this.postTranspilers.forEach(transpiler => {\n            this.addTranspiler(transpiler.transpiler);\n        });\n    }\n    addTranspiler(t) {\n        // TODO: Should this overwrite or skip?\n        if (this._transpilers.has(t.name))\n            return;\n        this._transpilers.set(t.name, t);\n    }\n    getTranspiler(name) {\n        return this._transpilers.get(name);\n    }\n    getTranspilers() {\n        return Array.from(this._transpilers.values());\n    }\n    /**\n     * Checks if there is an alias given for the path, if there is it will return\n     * the altered path, otherwise it will just return the known path.\n     */\n    getAliasedPath(path) {\n        const aliasCache = this.aliasedPathCache[path];\n        if (aliasCache === null) {\n            return path;\n        }\n        if (aliasCache) {\n            return aliasCache;\n        }\n        const aliases = Object.keys(this.alias);\n        const exactAliases = aliases.filter(a => a.endsWith('$'));\n        const exactFoundAlias = exactAliases.find(a => {\n            const alias = a.slice(0, -1);\n            if (path === alias) {\n                return true;\n            }\n            return false;\n        });\n        if (exactFoundAlias) {\n            this.aliasedPathCache[path] = this.alias[exactFoundAlias];\n            return this.alias[exactFoundAlias];\n        }\n        const pathParts = path.split('/');\n        // Find matching aliases\n        const foundAlias = orderBy(aliases, a => -a.split('/').length).find(a => {\n            const parts = a.split('/');\n            return parts.every((p, i) => pathParts[i] === p);\n        });\n        if (foundAlias) {\n            const replacedPath = path.replace(foundAlias, this.alias[foundAlias]);\n            this.aliasedPathCache[path] = replacedPath;\n            // if an alias is found we will replace the path with the alias\n            return replacedPath;\n        }\n        this.aliasedPathCache[path] = null;\n        return path;\n    }\n    registerTranspiler(test, transpilers, prepend = false) {\n        const transpilerObject = {\n            test,\n            transpilers,\n        };\n        if (prepend) {\n            this.loaders.unshift(transpilerObject);\n        }\n        else {\n            this.loaders.push(transpilerObject);\n        }\n        transpilers.forEach(t => this.addTranspiler(t.transpiler));\n        return this.loaders;\n    }\n    /**\n     * Get transpilers from the given query, the query is webpack like:\n     * eg. !babel-loader!./test.js\n     */\n    getLoaders(module, evaluator, query = '') {\n        const loader = this.loaders.find(t => t.test(module));\n        // Starting !, drop all transpilers\n        const transpilers = query.startsWith('!') // eslint-disable-line no-nested-ternary\n            ? []\n            : loader\n                ? loader.transpilers\n                : [];\n        // Remove \"\" values\n        const transpilerNames = query.split('!').filter(Boolean);\n        const extraTranspilers = transpilerNames\n            .map(loaderName => loaderName.split('?'))\n            .filter(([name]) => !!name)\n            .map(([name, options]) => {\n            let transpiler = this.getTranspiler(name);\n            if (!transpiler) {\n                const webpackLoader = new WebpackTranspiler(name, evaluator);\n                // If the loader is not installed, we try to run the webpack loader.\n                this.addTranspiler(webpackLoader);\n                transpiler = webpackLoader;\n            }\n            const parsedOptions = this.parseOptions(options);\n            return { transpiler, options: parsedOptions };\n        })\n            .reverse(); // Reverse, because webpack is also in reverse order\n        const finalTranspilers = [\n            ...this.preTranspilers,\n            ...transpilers,\n            ...extraTranspilers,\n            ...this.postTranspilers,\n        ];\n        return finalTranspilers;\n    }\n    /**\n     * Get the query syntax of the module\n     */\n    getQuery(module, evaluator, query = '') {\n        const loaders = this.getLoaders(module, evaluator, query).reverse();\n        return `!${loaders\n            .map(t => {\n            const configStringified = querystring.encode(t.options);\n            const loaderQuery = configStringified ? '?' + configStringified : '';\n            return t.transpiler.name + loaderQuery;\n        })\n            .join('!')}`;\n    }\n}\n","const VERSION_RE = /(\\d+)(\\.\\d+)?(\\.\\d+)?(-[^\\s+]+)?/;\nexport function normalizeVersion(version) {\n    const matches = version.match(VERSION_RE);\n    if (!(matches === null || matches === void 0 ? void 0 : matches.length)) {\n        // Invalid semver or a string like `latest` which is also an invalid semver but someone introduced it for some reason...\n        return version;\n    }\n    return matches[0];\n}\nexport function dependencyToQuery(name, version) {\n    return encodeURIComponent(`${name}@${normalizeVersion(version)}`);\n}\nexport default function dependenciesToQuery(dependencies) {\n    return Object.keys(dependencies)\n        .sort()\n        .map(name => dependencyToQuery(name, dependencies[name]))\n        .join('+');\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as pathUtils from '@codesandbox/common/lib/utils/path';\nimport gensync from 'gensync';\nimport DependencyNotFoundError from 'sandbox-hooks/errors/dependency-not-found-error';\nimport { getFetchProtocol } from './fetch-protocols';\nimport { getDependencyName } from '../../utils/get-dependency-name';\nimport { DEFAULT_EXTENSIONS } from '../../utils/extensions';\nimport { resolveAsync } from '../../resolver/resolver';\n// dependencyAndVersion => P<Meta>\nconst metas = new Map();\nexport let combinedMetas = {}; // eslint-disable-line\nconst normalizedMetas = {};\n// path => P<Module>\nconst packages = new Map();\nfunction prependRootPath(meta, rootPath) {\n    const newMeta = {};\n    Object.keys(meta).forEach(path => {\n        newMeta[rootPath + path] = meta[path];\n    });\n    return newMeta;\n}\nexport function setCombinedMetas(givenCombinedMetas) {\n    combinedMetas = givenCombinedMetas;\n}\n// Strips the version of a path, eg. test/1.3.0 -> test\nconst ALIAS_REGEX = /\\/\\d*\\.\\d*\\.\\d*.*?(\\/|$)/;\n/*\n * Resolve name and version from npm aliases\n * e.g. \"react\": \"npm:preact-compat@16.0.0\"\n */\nconst resolveNPMAlias = (name, version) => {\n    const IS_ALIAS = /^npm:/;\n    if (!version.match(IS_ALIAS)) {\n        return [name, version];\n    }\n    const parts = version.match(/^npm:(.+)@(.+)/);\n    return [parts[1], parts[2]];\n};\nfunction getMeta(name, packageJSONPath, version, useFallback = false) {\n    const [depName, depVersion] = resolveNPMAlias(name, version);\n    const nameWithoutAlias = depName.replace(ALIAS_REGEX, '');\n    const id = `${packageJSONPath || depName}@${depVersion}`;\n    const foundMeta = metas.get(id);\n    if (foundMeta) {\n        return foundMeta.then(x => ({\n            meta: x,\n            fromCache: true,\n        }));\n    }\n    const protocol = getFetchProtocol(depName, depVersion, useFallback);\n    const newMeta = protocol.meta(nameWithoutAlias, depVersion).catch(e => {\n        metas.delete(id);\n        throw e;\n    });\n    metas.set(id, newMeta);\n    return newMeta.then(x => ({\n        meta: x,\n        fromCache: false,\n    }));\n}\nconst downloadedAllDependencies = new Set();\n/**\n * If the protocol supports it, download all all files of the dependency\n * at once. It's an optimization.\n */\nexport function downloadAllDependencyFiles(name, version) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (downloadedAllDependencies.has(`${name}@${version}`)) {\n            return null;\n        }\n        downloadedAllDependencies.add(`${name}@${version}`);\n        const [depName, depVersion] = resolveNPMAlias(name, version);\n        const nameWithoutAlias = depName.replace(ALIAS_REGEX, '');\n        const protocol = getFetchProtocol(depName, depVersion);\n        if (protocol.massFiles) {\n            // If the protocol supports returning many files at once, we opt for that instead.\n            return protocol.massFiles(nameWithoutAlias, depVersion);\n        }\n        return null;\n    });\n}\nexport function downloadDependency(name, version, path) {\n    const [depName, depVersion] = resolveNPMAlias(name, version);\n    const id = depName + depVersion + path;\n    const foundPkg = packages.get(id);\n    if (foundPkg) {\n        return foundPkg;\n    }\n    const relativePath = path\n        .replace(new RegExp(`.*${pathUtils.join('/node_modules', depName)}`.replace('/', '\\\\/')), '')\n        .replace(/#/g, '%23');\n    const nameWithoutAlias = depName.replace(ALIAS_REGEX, '');\n    const protocol = getFetchProtocol(depName, depVersion);\n    const newPkg = protocol\n        .file(nameWithoutAlias, depVersion, relativePath)\n        .catch(() => __awaiter(this, void 0, void 0, function* () {\n        const fallbackProtocol = getFetchProtocol(nameWithoutAlias, depVersion, true);\n        return fallbackProtocol.file(nameWithoutAlias, depVersion, relativePath);\n    }))\n        .then(code => ({\n        path,\n        code,\n        downloaded: true,\n    }));\n    packages.set(id, newPkg);\n    return newPkg;\n}\nfunction resolvePath(path, currentTModule, manager, defaultExtensions = DEFAULT_EXTENSIONS, meta = {}, ignoreDepNameVersion = '') {\n    const currentPath = currentTModule.module.path;\n    const isFile = gensync({\n        sync: (p) => Boolean(manager.transpiledModules[p]) || Boolean(meta[p]),\n    });\n    const readFile = gensync({\n        sync: () => {\n            throw new Error('Sync not supported for readFile');\n        },\n        async: (p) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                const tModule = yield manager.resolveTranspiledModule(p, '/', []);\n                tModule.initiators.add(currentTModule);\n                currentTModule.dependencies.add(tModule);\n                return tModule.module.code;\n            }\n            catch (e) {\n                const depPath = p.replace(/.*\\/node_modules\\//, '');\n                const depName = getDependencyName(depPath);\n                // To prevent infinite loops we keep track of which dependencies have been requested before.\n                if ((!manager.transpiledModules[p] && !meta[p]) ||\n                    ignoreDepNameVersion === depName) {\n                    const err = new Error('Could not find ' + p);\n                    // @ts-ignore\n                    err.code = 'ENOENT';\n                    throw err;\n                }\n                // eslint-disable-next-line\n                const subDepVersionVersionInfo = yield getDependencyVersion(currentTModule, manager, depName);\n                if (subDepVersionVersionInfo) {\n                    const { version: subDepVersion } = subDepVersionVersionInfo;\n                    try {\n                        const module = yield downloadDependency(depName, subDepVersion, p);\n                        if (module) {\n                            manager.addModule(module);\n                            const tModule = manager.addTranspiledModule(module, '');\n                            tModule.initiators.add(currentTModule);\n                            currentTModule.dependencies.add(tModule);\n                            return module.code;\n                        }\n                    }\n                    catch (er) {\n                        // Let it throw the error\n                    }\n                }\n                throw e;\n            }\n        }),\n    });\n    return resolveAsync(path, {\n        filename: currentPath,\n        extensions: defaultExtensions.map(ext => '.' + ext),\n        moduleDirectories: ['node_modules', manager.envVariables.NODE_PATH].filter(Boolean),\n        isFile,\n        readFile,\n    });\n}\nfunction getDependencyVersion(currentTModule, manager, dependencyName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { manifest } = manager;\n        try {\n            const filepath = pathUtils.join(dependencyName, 'package.json');\n            const foundPackageJSONPath = yield resolvePath(filepath, currentTModule, manager, [], {}, dependencyName);\n            // If the dependency is in the root we get it from the manifest, as the manifest\n            // contains all the versions that we really wanted to resolve in the first place.\n            // An example of this is csb.dev packages, the package.json version doesn't say the\n            // actual version, but the semver it relates to. In this case we really want to have\n            // the actual url\n            if (foundPackageJSONPath ===\n                pathUtils.join('/node_modules', dependencyName, 'package.json')) {\n                const rootDependency = manifest.dependencies.find(dep => dep.name === dependencyName);\n                if (rootDependency) {\n                    return {\n                        packageJSONPath: foundPackageJSONPath,\n                        version: rootDependency.version,\n                    };\n                }\n            }\n            const packageJSON = manager.transpiledModules[foundPackageJSONPath] &&\n                manager.transpiledModules[foundPackageJSONPath].module.code;\n            const { version } = JSON.parse(packageJSON);\n            const savedDepDep = manifest.dependencyDependencies[dependencyName];\n            if (savedDepDep &&\n                savedDepDep.resolved === version &&\n                savedDepDep.semver.startsWith('https://')) {\n                return {\n                    packageJSONPath: foundPackageJSONPath,\n                    version: savedDepDep.semver,\n                };\n            }\n            if (packageJSON !== '//empty.js') {\n                return { packageJSONPath: foundPackageJSONPath, version };\n            }\n        }\n        catch (e) {\n            /* do nothing */\n        }\n        let version = null;\n        if (manifest.dependencyDependencies[dependencyName]) {\n            if (manifest.dependencyDependencies[dependencyName].semver.startsWith('https://')) {\n                version = manifest.dependencyDependencies[dependencyName].semver;\n            }\n            else {\n                version = manifest.dependencyDependencies[dependencyName].resolved;\n            }\n        }\n        else {\n            const dep = manifest.dependencies.find(m => m.name === dependencyName);\n            if (dep) {\n                // eslint-disable-next-line\n                version = dep.version;\n            }\n        }\n        if (version) {\n            return { packageJSONPath: null, version };\n        }\n        return null;\n    });\n}\nexport default function fetchModule(path, currentTModule, manager, defaultExtensions = DEFAULT_EXTENSIONS) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const currentPath = currentTModule.module.path;\n        // Get the last part of the path as dependency name for paths like\n        // instantsearch.js/node_modules/lodash/sum.js\n        // In this case we want to get the lodash dependency info\n        const dependencyName = getDependencyName(path.replace(/.*\\/node_modules\\//, ''));\n        const versionInfo = yield getDependencyVersion(currentTModule, manager, dependencyName);\n        if (versionInfo === null) {\n            throw new DependencyNotFoundError(path);\n        }\n        const { packageJSONPath, version } = versionInfo;\n        let meta;\n        try {\n            meta = yield getMeta(dependencyName, packageJSONPath, version);\n        }\n        catch (e) {\n            // Use fallback\n            meta = yield getMeta(dependencyName, packageJSONPath, version, true);\n        }\n        const rootPath = packageJSONPath\n            ? pathUtils.dirname(packageJSONPath)\n            : pathUtils.join('/node_modules', dependencyName);\n        const normalizedCacheKey = dependencyName + rootPath;\n        const normalizedMeta = normalizedMetas[normalizedCacheKey] || prependRootPath(meta.meta, rootPath);\n        if (!normalizedMetas[normalizedCacheKey]) {\n            normalizedMetas[normalizedCacheKey] = normalizedMeta;\n        }\n        else if (!meta.fromCache) {\n            combinedMetas = Object.assign(Object.assign({}, combinedMetas), normalizedMeta);\n        }\n        const foundPath = yield resolvePath(path, currentTModule, manager, defaultExtensions, normalizedMeta);\n        if (foundPath === '//empty.js') {\n            // Mark the path of the module as the real module, because during evaluation\n            // we don't have meta to find which modules are browser modules and we still\n            // need to return an empty module for browser modules.\n            const isDependency = /^(\\w|@\\w|@-)/.test(path);\n            const fullFilePath = isDependency\n                ? pathUtils.join('/node_modules', path)\n                : pathUtils.join(currentPath, path);\n            return {\n                path: fullFilePath,\n                code: 'module.exports = {};',\n                requires: [],\n                stubbed: true,\n            };\n        }\n        return downloadDependency(dependencyName, version, foundPath);\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TarStore } from './utils/tar-store';\nfunction getTarballUrl(url) {\n    return url.replace(/\\/_pkg.tgz$/, '');\n}\nexport class CsbFetcher {\n    constructor() {\n        this.tarStore = new TarStore();\n    }\n    file(name, version, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = getTarballUrl(version);\n            return this.tarStore.file(name, url, path);\n        });\n    }\n    meta(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = getTarballUrl(version);\n            return this.tarStore.meta(name, url);\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { fetchWithRetries } from './utils';\nfunction normalize(files, fileObject = {}) {\n    for (let i = 0; i < files.length; i += 1) {\n        const { files: childFiles, type, path } = files[i];\n        if (type === 'file') {\n            const absolutePath = path;\n            fileObject[absolutePath] = true; // eslint-disable-line no-param-reassign\n        }\n        if (childFiles) {\n            normalize(childFiles, fileObject);\n        }\n    }\n    return fileObject;\n}\nexport class UnpkgFetcher {\n    file(name, version, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = `https://unpkg.com/${name}@${version}${path}`;\n            const result = yield fetchWithRetries(url).then(x => x.text());\n            return result;\n        });\n    }\n    meta(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = `https://unpkg.com/${name}@${version}/?meta`;\n            const result = yield fetchWithRetries(url).then(x => x.json());\n            return normalize(result.files, {});\n        });\n    }\n}\n","export function normalizeJSDelivr(files, fileObject = {}) {\n    for (let i = 0; i < files.length; i += 1) {\n        fileObject[files[i].name] = true; // eslint-disable-line no-param-reassign\n    }\n    return fileObject;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { downloadDependency, } from '../../fetch-npm-module';\nimport { fetchWithRetries } from '../utils';\nimport { normalizeJSDelivr } from './utils';\nexport class JSDelivrNPMFetcher {\n    file(name, version, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = `https://cdn.jsdelivr.net/npm/${name}@${version}${path}`;\n            const result = yield fetchWithRetries(url).then(x => x.text());\n            return result;\n        });\n    }\n    meta(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // if it's a tag it won't work, so we fetch latest version otherwise\n            const latestVersion = /^\\d/.test(version)\n                ? version\n                : JSON.parse((yield downloadDependency(name, version, '/package.json')).code).version;\n            const url = `https://data.jsdelivr.com/v1/package/npm/${name}@${latestVersion}/flat`;\n            const result = yield fetchWithRetries(url).then(x => x.json());\n            return normalizeJSDelivr(result.files, {});\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { fetchWithRetries } from '../utils';\nimport { normalizeJSDelivr } from './utils';\n/**\n * Converts urls like \"https://github.com/user/repo.git\" to \"user/repo\".\n */\nconst GH_RE = /^(((https:\\/\\/)|(git(\\+(ssh|https))?:\\/\\/(.*@)?))(www\\.)?github\\.com(\\/|:))?(([^\\s#/]*)\\/([^\\s#/]*))(#(.*))?$/;\nexport function convertGitHubURLToVersion(ghUrl) {\n    const result = ghUrl.match(GH_RE);\n    if (result && result[10]) {\n        const repo = result[10];\n        const version = result[14];\n        const cleanedRepo = repo.replace(/\\.git$/, '');\n        if (version) {\n            return `${cleanedRepo}@${version}`;\n        }\n        return cleanedRepo;\n    }\n    return ghUrl;\n}\nexport function isGithubDependency(ghUrl) {\n    return GH_RE.test(ghUrl);\n}\nexport class JSDelivrGHFetcher {\n    file(name, version, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = `https://cdn.jsdelivr.net/gh/${convertGitHubURLToVersion(version)}${path}`;\n            const result = yield fetchWithRetries(url).then(x => x.text());\n            return result;\n        });\n    }\n    meta(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Split the repo and requested version\n            const [repo, repoVersion] = convertGitHubURLToVersion(version).split('@');\n            // Fetch repo meta from GitHub\n            // If the version is not specified, we use the default_branch from the repo meta\n            let metaBranch = repoVersion;\n            if (!metaBranch) {\n                metaBranch = yield fetch(`https://api.github.com/repos/${repo}`)\n                    .then(x => x.json())\n                    .then(x => x.default_branch);\n            }\n            // We get the sha of the requested version\n            const sha = yield fetch(`https://api.github.com/repos/${repo}/commits/${metaBranch}`)\n                .then(x => x.json())\n                .then(x => x.sha);\n            const url = `https://data.jsdelivr.com/v1/package/gh/${repo}@${sha}/flat`;\n            const result = yield fetchWithRetries(url).then(x => x.json());\n            return normalizeJSDelivr(result.files, {});\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TarStore } from './utils/tar-store';\nexport function isTarDependency(uri) {\n    try {\n        const url = new URL(uri);\n        return url.protocol === 'http:' || url.protocol === 'https:';\n    }\n    catch (err) {\n        // do nothing...\n    }\n    return false;\n}\nexport class TarFetcher {\n    constructor() {\n        this.tarStore = new TarStore();\n    }\n    file(name, version, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.tarStore.file(name, version, path);\n        });\n    }\n    meta(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.tarStore.meta(name, version);\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { fetchWithRetries } from './utils';\nfunction normalize(files) {\n    const normalizedResponse = {};\n    const fileNames = Object.keys(files);\n    for (let i = 0; i < fileNames.length; i += 1) {\n        const fileName = fileNames[i];\n        const absolutePath = '/' + fileName;\n        normalizedResponse[absolutePath] = true; // eslint-disable-line no-param-reassign\n    }\n    return normalizedResponse;\n}\nexport class GistFetcher {\n    constructor() {\n        this.fetchedGists = {};\n    }\n    getAPIURl(version) {\n        const gistId = version.replace(/.*\\//, '');\n        return 'https://api.github.com/gists/' + gistId;\n    }\n    fetchGist(version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.fetchedGists[version]) {\n                return this.fetchedGists[version];\n            }\n            const url = this.getAPIURl(version);\n            const result = yield fetchWithRetries(url).then(x => x.json());\n            this.fetchedGists[version] = result;\n            return result;\n        });\n    }\n    file(name, version, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.fetchGist(version);\n            const file = result.files[path.replace(/^\\//, '')];\n            if (!file) {\n                throw new Error('File not found: ' + path);\n            }\n            if (file.truncated) {\n                return fetchWithRetries(file.raw_url).then(t => t.text());\n            }\n            return file.content;\n        });\n    }\n    meta(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.fetchGist(version);\n            return normalize(result.files);\n        });\n    }\n}\n","import { CSB_PKG_PROTOCOL } from '@codesandbox/common/lib/utils/ci';\nimport { CsbFetcher } from './csb';\nimport { UnpkgFetcher } from './unpkg';\nimport { JSDelivrNPMFetcher } from './jsdelivr/jsdelivr-npm';\nimport { isGithubDependency, JSDelivrGHFetcher } from './jsdelivr/jsdelivr-gh';\nimport { isTarDependency, TarFetcher } from './tar';\nimport { GistFetcher } from './gist';\nlet contributedProtocols = [];\nexport const preloadedProtocols = {\n    jsdelivr: new JSDelivrNPMFetcher(),\n    unpkg: new UnpkgFetcher(),\n};\nconst protocols = [\n    {\n        protocol: new GistFetcher(),\n        condition: (name, version) => version.startsWith('gist:'),\n    },\n    {\n        protocol: new CsbFetcher(),\n        condition: (name, version) => CSB_PKG_PROTOCOL.test(version),\n    },\n    {\n        protocol: new JSDelivrGHFetcher(),\n        condition: (name, version) => isGithubDependency(version),\n    },\n    /**\n     * npmjs.cf has been deprecated, while registry.npmjs.org has CORS supports now:\n     *\n     * - npmjs.cf depreacation notice: https://github.com/npmjs-cf/meta/issues/8\n     * - npm registry CORS support: https://github.com/npm/feedback/discussions/117#discussioncomment-2691120\n     */\n    // {\n    //   protocol: new ProtocolTransformer(new TarFetcher(), (name, version) => [\n    //     name,\n    //     version.replace(\n    //       'https://registry.npmjs.org/',\n    //       'https://registry.npmjs.cf/'\n    //     ),\n    //   ]),\n    //   condition: (name, version) =>\n    //     version.startsWith('https://registry.npmjs.org/'),\n    // },\n    {\n        protocol: new TarFetcher(),\n        condition: (name, version) => isTarDependency(version),\n    },\n    {\n        protocol: preloadedProtocols.unpkg,\n        condition: (_name, _version, useFallback) => useFallback,\n    },\n    { protocol: preloadedProtocols.jsdelivr, condition: () => true },\n];\nexport function setContributedProtocols(newProtocols) {\n    contributedProtocols = newProtocols;\n    return contributedProtocols;\n}\nexport function prependToContributedProtocols(newProtocols) {\n    contributedProtocols.unshift(...newProtocols);\n    return contributedProtocols;\n}\nexport function getFetchProtocol(depName, depVersion, useFallback = false) {\n    var _a;\n    const runCondition = (p) => p.condition(depName, depVersion, useFallback);\n    return (((_a = contributedProtocols.find(runCondition)) === null || _a === void 0 ? void 0 : _a.protocol) ||\n        protocols.find(runCondition).protocol);\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport delay from '@codesandbox/common/lib/utils/delay';\nexport function fetchWithRetries(url, retries = 2, requestInit) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const doFetch = () => window.fetch(url, requestInit).then(x => {\n            if (x.ok) {\n                return x;\n            }\n            const error = new Error(`Could not fetch ${url}`);\n            error.responseObject = x;\n            throw error;\n        });\n        let lastTryTime = 0;\n        for (let i = 0; i < retries; i++) {\n            if (Date.now() - lastTryTime < 3000) {\n                // Ensure that we at least wait 3s before retrying a request to prevent rate limits\n                // eslint-disable-next-line\n                yield delay(3000 - (Date.now() - lastTryTime));\n            }\n            try {\n                lastTryTime = Date.now();\n                // eslint-disable-next-line\n                return yield doFetch();\n            }\n            catch (e) {\n                console.error(e);\n                if (i === retries - 1) {\n                    throw e;\n                }\n            }\n        }\n        throw new Error('Could not fetch');\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport untar from 'isomorphic-untar-gzip';\nimport { fetchWithRetries } from '../utils';\n/**\n * Responsible for fetching, caching and converting tars to a structure that sandpack\n * understands and can use\n */\nexport class TarStore {\n    constructor() {\n        this.fetchedTars = {};\n    }\n    generateKey(name, version) {\n        return name + '||' + version;\n    }\n    normalizeTar(tarContents) {\n        const normalized = {};\n        tarContents.forEach(tar => {\n            normalized[tar.name.replace(/^[^/]+/, '')] = {\n                // TODO(@CompuIves): store buffers rather than strings for binary files\n                content: Buffer.from(tar.buffer).toString(),\n            };\n        });\n        return normalized;\n    }\n    fetchTar(name, version, requestInit) {\n        const tarKey = this.generateKey(name, version);\n        this.fetchedTars[tarKey] = (() => __awaiter(this, void 0, void 0, function* () {\n            const file = yield fetchWithRetries(version, 6, requestInit).then(x => x.arrayBuffer());\n            const untarredFile = yield untar(file);\n            const normalizedTar = this.normalizeTar(untarredFile);\n            return normalizedTar;\n        }))();\n        return this.fetchedTars[tarKey];\n    }\n    file(name, url, path, requestInit) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tarKey = this.generateKey(name, url);\n            const tar = yield (this.fetchedTars[tarKey] ||\n                this.fetchTar(name, url, requestInit));\n            return tar[path].content;\n        });\n    }\n    meta(name, url, requestInit) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tarKey = this.generateKey(name, url);\n            const tar = yield (this.fetchedTars[tarKey] ||\n                this.fetchTar(name, url, requestInit));\n            const meta = {};\n            Object.keys(tar).forEach(path => {\n                meta[path] = true;\n            });\n            return meta;\n        });\n    }\n    massFiles(name, url, requestInit) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tarKey = this.generateKey(name, url);\n            const tar = yield (this.fetchedTars[tarKey] ||\n                this.fetchTar(name, url, requestInit));\n            return Object.keys(tar).map(path => ({\n                path,\n                code: tar[path].content,\n                downloaded: true,\n            }));\n        });\n    }\n}\n","export class ModuleNotFoundError extends Error {\n    constructor(filepath, parent) {\n        super(`Cannot find module '${filepath}' from '${parent}'`);\n        this.code = 'MODULE_NOT_FOUND';\n        this.parent = parent;\n        this.filepath = filepath;\n    }\n}\n","import * as pathUtils from '@codesandbox/common/lib/utils/path';\nexport function normalizeAliasFilePath(specifier, pkgRoot, \n// This can be set to false to fallback to returning the specifier in case it can be a node_module\nisFilePath = true) {\n    if (specifier[0] === '/') {\n        return specifier;\n    }\n    if (specifier[0] === '.' || isFilePath) {\n        return pathUtils.join(pkgRoot, specifier);\n    }\n    return specifier;\n}\n","import { normalizeAliasFilePath } from './alias';\n// exports keys, sorted from high to low priority\nconst EXPORTS_KEYS = ['browser', 'development', 'default', 'require', 'import'];\nexport function normalizePackageExport(filepath, pkgRoot) {\n    return normalizeAliasFilePath(filepath.replace(/\\*/g, '$1'), pkgRoot);\n}\nexport function extractPathFromExport(exportValue, pkgRoot) {\n    if (!exportValue) {\n        return false;\n    }\n    if (typeof exportValue === 'string') {\n        return normalizePackageExport(exportValue, pkgRoot);\n    }\n    if (Array.isArray(exportValue)) {\n        const foundPaths = exportValue\n            .map(v => extractPathFromExport(v, pkgRoot))\n            .filter(Boolean);\n        if (!foundPaths.length) {\n            return false;\n        }\n        return foundPaths[0];\n    }\n    if (typeof exportValue === 'object') {\n        for (const key of EXPORTS_KEYS) {\n            const exportFilename = exportValue[key];\n            if (exportFilename !== undefined) {\n                if (typeof exportFilename === 'string') {\n                    return normalizePackageExport(exportFilename, pkgRoot);\n                }\n                return extractPathFromExport(exportFilename, pkgRoot);\n            }\n        }\n        return false;\n    }\n    throw new Error(`Unsupported export type ${typeof exportValue}`);\n}\n","export const EMPTY_SHIM = '//empty.js';\n","import { normalizeAliasFilePath } from './alias';\nimport { extractPathFromExport } from './exports';\nimport { EMPTY_SHIM } from './constants';\n// alias/exports/main keys, sorted from high to low priority\nconst MAIN_PKG_FIELDS = ['module', 'browser', 'main', 'jsnext:main'];\nconst PKG_ALIAS_FIELDS = ['browser', 'alias'];\n// See https://webpack.js.org/guides/package-exports/ for a good reference on how this should work\n// We aren't completely spec compliant but we're trying to match it as close as possible without nuking performance\nexport function processPackageJSON(content, pkgRoot) {\n    if (!content || typeof content !== 'object') {\n        return { aliases: {}, hasExports: false };\n    }\n    const aliases = {};\n    const hasExports = content.exports && pkgRoot !== '/';\n    // If there are exports it should have a main field configured\n    if (!hasExports) {\n        for (const mainField of MAIN_PKG_FIELDS) {\n            if (typeof content[mainField] === 'string') {\n                aliases[pkgRoot] = normalizeAliasFilePath(content[mainField], pkgRoot);\n                break;\n            }\n        }\n    }\n    // load exports if it's not the root pkg.json\n    if (hasExports) {\n        if (typeof content.exports === 'string') {\n            aliases[pkgRoot] = normalizeAliasFilePath(content.exports, pkgRoot);\n        }\n        else if (typeof content.exports === 'object') {\n            const exportKeys = Object.keys(content.exports);\n            if (!exportKeys[0].startsWith('.')) {\n                const resolvedExport = extractPathFromExport(content.exports, pkgRoot);\n                if (!resolvedExport) {\n                    throw new Error(`Could not find a valid export for ${pkgRoot}`);\n                }\n                aliases[pkgRoot] = resolvedExport;\n            }\n            else {\n                for (const exportKey of exportKeys) {\n                    const exportValue = extractPathFromExport(content.exports[exportKey], pkgRoot);\n                    const normalizedKey = normalizeAliasFilePath(exportKey, pkgRoot);\n                    aliases[normalizedKey] = exportValue || EMPTY_SHIM;\n                }\n            }\n        }\n    }\n    // These aliases should happen as a seperate pass from exports\n    // but let's just give it a higher priority for now, we can refactor it later\n    if (content.browser === false) {\n        aliases[pkgRoot] = EMPTY_SHIM;\n    }\n    for (const aliasFieldKey of PKG_ALIAS_FIELDS) {\n        const aliasField = content[aliasFieldKey];\n        if (typeof aliasField === 'object') {\n            for (const key of Object.keys(aliasField)) {\n                const val = aliasField[key] || EMPTY_SHIM;\n                const normalizedKey = normalizeAliasFilePath(key, pkgRoot, false);\n                const normalizedValue = normalizeAliasFilePath(val, pkgRoot, false);\n                aliases[normalizedKey] = normalizedValue;\n                if (aliasFieldKey !== 'browser') {\n                    aliases[`${normalizedKey}/*`] = `${normalizedValue}/$1`;\n                }\n            }\n        }\n    }\n    return { aliases, hasExports };\n}\n","import { EMPTY_SHIM } from './constants';\nexport function* isFile(filepath, isFileFn) {\n    if (filepath === EMPTY_SHIM) {\n        return true;\n    }\n    return yield* isFileFn(filepath);\n}\nexport function getParentDirectories(filepath, rootDir = '/') {\n    const parts = filepath.split('/');\n    const directories = [];\n    while (parts.length > 0) {\n        const directory = parts.join('/') || '/';\n        // Test /foo vs /foo-something - /foo-something is not in rootDir\n        if (directory.length < rootDir.length || !directory.startsWith(rootDir)) {\n            break;\n        }\n        directories.push(directory);\n        parts.pop();\n    }\n    return directories;\n}\n","import stripJsonComments from 'strip-json-comments';\nimport * as pathUtils from '@codesandbox/common/lib/utils/path';\nexport function processTSConfig(content) {\n    var _a;\n    const parsed = ((_a = JSON.parse(stripJsonComments(content))) === null || _a === void 0 ? void 0 : _a.compilerOptions) || {};\n    if (parsed.baseUrl) {\n        const paths = {};\n        if (parsed.paths) {\n            for (const p of Object.keys(parsed.paths)) {\n                paths[p] = parsed.paths[p].map((val) => {\n                    return pathUtils.join('/', parsed.baseUrl, val).replace(/\\*/g, '');\n                });\n            }\n        }\n        return {\n            baseUrl: pathUtils.join('/', parsed.baseUrl),\n            paths,\n        };\n    }\n    return null;\n}\nexport function getPotentialPathsFromTSConfig(moduleSpecifier, config) {\n    const res = [];\n    for (const p of Object.keys(config.paths)) {\n        if (p.endsWith('*')) {\n            const prefix = p.substring(0, p.length - 1);\n            if (moduleSpecifier.startsWith(prefix)) {\n                const suffix = moduleSpecifier.substr(prefix.length);\n                for (const alias of config.paths[p]) {\n                    res.push(alias + suffix);\n                }\n            }\n        }\n        else if (moduleSpecifier === p) {\n            res.push(...config.paths[p]);\n        }\n    }\n    res.push(pathUtils.join(config.baseUrl, moduleSpecifier));\n    return res;\n}\n","/* eslint-disable no-else-return */\n/* eslint-disable no-continue */\nimport gensync from 'gensync';\nimport micromatch from 'micromatch';\nimport * as pathUtils from '@codesandbox/common/lib/utils/path';\nimport { ModuleNotFoundError } from './errors/ModuleNotFound';\nimport { processPackageJSON } from './utils/pkg-json';\nimport { isFile, getParentDirectories } from './utils/fs';\nimport { processTSConfig, getPotentialPathsFromTSConfig, } from './utils/tsconfig';\nfunction normalizeResolverOptions(opts) {\n    const normalizedModuleDirectories = opts.moduleDirectories\n        ? new Set(opts.moduleDirectories.map(p => (p[0] === '/' ? p.substring(1) : p)))\n        : new Set();\n    normalizedModuleDirectories.add('node_modules');\n    return {\n        filename: opts.filename,\n        extensions: [...new Set(['', ...opts.extensions])],\n        isFile: opts.isFile,\n        readFile: opts.readFile,\n        moduleDirectories: [...normalizedModuleDirectories],\n        resolverCache: opts.resolverCache || new Map(),\n        pkgJson: opts.pkgJson,\n    };\n}\nfunction* loadPackageJSON(directory, opts) {\n    const packageFilePath = pathUtils.join(directory, 'package.json');\n    let packageContent = opts.resolverCache.get(packageFilePath);\n    if (packageContent === undefined) {\n        try {\n            packageContent = processPackageJSON(JSON.parse(yield* opts.readFile(packageFilePath)), pathUtils.dirname(packageFilePath));\n            opts.resolverCache.set(packageFilePath, packageContent);\n        }\n        catch (err) {\n            opts.resolverCache.set(packageFilePath, false);\n        }\n    }\n    if (packageContent) {\n        return {\n            filepath: packageFilePath,\n            content: packageContent,\n        };\n    }\n    return null;\n}\nfunction* loadNearestPackageJSON(filepath, opts, rootDir = '/') {\n    const directories = getParentDirectories(filepath, rootDir);\n    for (const directory of directories) {\n        const foundPackageJSON = yield* loadPackageJSON(directory, opts);\n        if (foundPackageJSON) {\n            return foundPackageJSON;\n        }\n    }\n    return null;\n}\nfunction resolveFile(filepath, dir) {\n    switch (filepath[0]) {\n        case '.':\n            return pathUtils.join(dir, filepath);\n        case '/':\n            return filepath;\n        default:\n            // is a node module\n            return filepath;\n    }\n}\nfunction resolveAlias(pkgJson, filename) {\n    const aliases = pkgJson.content.aliases;\n    let relativeFilepath = filename;\n    let aliasedPath = relativeFilepath;\n    let count = 0;\n    do {\n        relativeFilepath = aliasedPath;\n        // Simply check to ensure we don't infinitely alias files due to a misconfiguration of a package/user\n        if (count > 5) {\n            throw new Error('Could not resolve file due to a cyclic alias');\n        }\n        count++;\n        // Check for direct matches\n        if (aliases[relativeFilepath]) {\n            aliasedPath = aliases[relativeFilepath];\n            continue;\n        }\n        for (const aliasKey of Object.keys(aliases)) {\n            if (!aliasKey.includes('*')) {\n                continue;\n            }\n            const re = micromatch.makeRe(aliasKey, { capture: true });\n            if (re.test(relativeFilepath)) {\n                const val = aliases[aliasKey];\n                aliasedPath = relativeFilepath.replace(re, val);\n                if (aliasedPath.startsWith(relativeFilepath)) {\n                    const newAddition = aliasedPath.substr(relativeFilepath.length);\n                    if (!newAddition.includes('/') &&\n                        relativeFilepath.endsWith(newAddition)) {\n                        aliasedPath = relativeFilepath;\n                    }\n                }\n                break;\n            }\n        }\n        // No new aliased path\n        break;\n    } while (relativeFilepath !== aliasedPath);\n    return aliasedPath || relativeFilepath;\n}\nfunction* resolveModule(moduleSpecifier, opts) {\n    const dirPath = pathUtils.dirname(opts.filename);\n    const filename = resolveFile(moduleSpecifier, dirPath);\n    const isAbsoluteFilename = filename[0] === '/';\n    const pkgJson = opts.pkgJson ||\n        (yield* findPackageJSON(isAbsoluteFilename ? filename : opts.filename, opts));\n    return resolveAlias(pkgJson, filename);\n}\nconst extractPkgSpecifierParts = (specifier) => {\n    const parts = specifier.split('/');\n    const pkgName = parts[0][0] === '@' ? parts.splice(0, 2).join('/') : parts.shift();\n    return {\n        pkgName,\n        filepath: parts.join('/'),\n    };\n};\nfunction* resolveNodeModule(moduleSpecifier, opts) {\n    const pkgSpecifierParts = extractPkgSpecifierParts(moduleSpecifier);\n    const directories = getParentDirectories(opts.filename);\n    for (const modulesPath of opts.moduleDirectories) {\n        for (const directory of directories) {\n            const rootDir = pathUtils.join(directory, modulesPath, pkgSpecifierParts.pkgName);\n            try {\n                const pkgFilePath = pathUtils.join(rootDir, pkgSpecifierParts.filepath);\n                const rootPkgJson = yield* loadPackageJSON(rootDir, opts);\n                const pkgJson = rootPkgJson && rootPkgJson.content.hasExports\n                    ? rootPkgJson\n                    : yield* loadNearestPackageJSON(pkgFilePath, opts, rootDir);\n                if (pkgJson) {\n                    try {\n                        return yield* resolver(pkgFilePath, Object.assign(Object.assign({}, opts), { filename: pkgJson.filepath, pkgJson }));\n                    }\n                    catch (err) {\n                        if (!pkgSpecifierParts.filepath) {\n                            return yield* resolver(pathUtils.join(pkgFilePath, 'index'), Object.assign(Object.assign({}, opts), { filename: pkgJson.filepath }));\n                        }\n                        throw err;\n                    }\n                }\n            }\n            catch (err) {\n                // Handle multiple duplicates of a node_module across the tree\n                if (directory.length > 1) {\n                    return yield* resolveNodeModule(moduleSpecifier, Object.assign(Object.assign({}, opts), { filename: pathUtils.dirname(directory) }));\n                }\n                throw err;\n            }\n        }\n    }\n    throw new ModuleNotFoundError(moduleSpecifier, opts.filename);\n}\nfunction* findPackageJSON(filepath, opts) {\n    let pkg = yield* loadNearestPackageJSON(filepath, opts);\n    if (!pkg) {\n        pkg = yield* loadNearestPackageJSON('/index', opts);\n        if (!pkg) {\n            return {\n                filepath: '/package.json',\n                content: {\n                    aliases: {},\n                    hasExports: false,\n                },\n            };\n        }\n    }\n    return pkg;\n}\nfunction* expandFile(filepath, opts, expandCount = 0) {\n    const pkg = yield* findPackageJSON(filepath, opts);\n    if (expandCount > 5) {\n        throw new Error('Cyclic alias detected');\n    }\n    for (const ext of opts.extensions) {\n        const f = filepath + ext;\n        const aliasedPath = resolveAlias(pkg, f);\n        if (aliasedPath === f) {\n            const exists = yield* isFile(f, opts.isFile);\n            if (exists) {\n                return f;\n            }\n        }\n        else {\n            const expanded = yield* expandFile(aliasedPath, Object.assign(Object.assign({}, opts), { extensions: [''] }), expandCount + 1);\n            if (expanded) {\n                return expanded;\n            }\n        }\n    }\n    return null;\n}\nexport function normalizeModuleSpecifier(specifier) {\n    const normalized = specifier.replace(/(\\/|\\\\)+/g, '/');\n    if (normalized.endsWith('/')) {\n        return normalized.substring(0, normalized.length - 1);\n    }\n    return normalized;\n}\nconst TS_CONFIG_CACHE_KEY = '__root_tsconfig';\nfunction* getTSConfig(opts) {\n    const cachedConfig = opts.resolverCache.get(TS_CONFIG_CACHE_KEY);\n    if (cachedConfig != null) {\n        return cachedConfig;\n    }\n    let config = false;\n    try {\n        const contents = yield* opts.readFile('/tsconfig.json');\n        const processed = processTSConfig(contents);\n        if (processed) {\n            config = processed;\n        }\n    }\n    catch (err) {\n        try {\n            const contents = yield* opts.readFile('/jsconfig.json');\n            const processed = processTSConfig(contents);\n            if (processed) {\n                config = processed;\n            }\n        }\n        catch (_a) {\n            // do nothing\n        }\n    }\n    opts.resolverCache.set(TS_CONFIG_CACHE_KEY, config);\n    return config;\n}\nexport const resolver = gensync(function* resolve(moduleSpecifier, inputOpts, skipIndexExpansion = false) {\n    const normalizedSpecifier = normalizeModuleSpecifier(moduleSpecifier);\n    const opts = normalizeResolverOptions(inputOpts);\n    const modulePath = yield* resolveModule(normalizedSpecifier, opts);\n    if (modulePath[0] !== '/') {\n        // This isn't a node module, we can attempt to resolve using a tsconfig/jsconfig\n        if (!opts.filename.includes('/node_modules')) {\n            const parsedTSConfig = yield* getTSConfig(opts);\n            if (parsedTSConfig) {\n                const potentialPaths = getPotentialPathsFromTSConfig(modulePath, parsedTSConfig);\n                for (const potentialPath of potentialPaths) {\n                    try {\n                        return yield* resolve(potentialPath, opts);\n                    }\n                    catch (_a) {\n                        // do nothing, it's probably a node_module in this case\n                    }\n                }\n            }\n        }\n        try {\n            return yield* resolveNodeModule(modulePath, opts);\n        }\n        catch (e) {\n            throw new ModuleNotFoundError(normalizedSpecifier, opts.filename);\n        }\n    }\n    let foundFile = yield* expandFile(modulePath, opts);\n    if (!foundFile && !skipIndexExpansion) {\n        foundFile = yield* expandFile(pathUtils.join(modulePath, 'index'), opts);\n        // In case alias adds an extension, we retry the entire resolution with an added /index\n        // This is mostly a hack I guess, but it works for now, so many edge-cases\n        if (!foundFile) {\n            try {\n                const parts = moduleSpecifier.split('/');\n                if (!parts.length || !parts[parts.length - 1].startsWith('index')) {\n                    foundFile = yield* resolve(moduleSpecifier + '/index', opts, true);\n                }\n            }\n            catch (err) {\n                // should throw ModuleNotFound for original specifier, not new one\n            }\n        }\n    }\n    if (!foundFile) {\n        throw new ModuleNotFoundError(modulePath, opts.filename);\n    }\n    return foundFile;\n});\nexport const resolveSync = resolver.sync;\nexport const resolveAsync = resolver.async;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst SANDPACK_SECRET_COOKIE_NAME = 'csb_sandpack_secret';\nexport const getSandpackSecret = () => document.cookie.replace(new RegExp(`(?:(?:^|.*;\\\\s*)${SANDPACK_SECRET_COOKIE_NAME}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`), '$1');\nexport const removeSandpackSecret = () => {\n    document.cookie = `${SANDPACK_SECRET_COOKIE_NAME}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;samesite=none;secure;`;\n};\nexport const setSandpackSecret = (secret) => {\n    if (secret === null) {\n        return;\n    }\n    const cookieValue = getSandpackSecret();\n    if ((cookieValue && !secret) ||\n        (secret && !cookieValue) ||\n        cookieValue !== secret) {\n        if (secret) {\n            document.cookie = `${SANDPACK_SECRET_COOKIE_NAME}=${secret};samesite=none;secure;`;\n            setTimeout(() => {\n                location.reload();\n            }, 1000);\n        }\n        else {\n            removeSandpackSecret();\n        }\n    }\n};\nfunction getPopupOffset({ width, height }) {\n    const wLeft = window.screenLeft ? window.screenLeft : window.screenX;\n    const wTop = window.screenTop ? window.screenTop : window.screenY;\n    const left = wLeft + window.innerWidth / 2 - width / 2;\n    const top = wTop + window.innerHeight / 2 - height / 2;\n    return { top, left };\n}\nfunction getPopupSize() {\n    return { width: 1020, height: 618 };\n}\nfunction getPopupDimensions() {\n    const { width, height } = getPopupSize();\n    const { top, left } = getPopupOffset({ width, height });\n    return `width=${width},height=${height},top=${top},left=${left}`;\n}\nexport function getProtocolAndHostWithSSE() {\n    if (document.location.host.startsWith('localhost')) {\n        return 'https://6er17b-3000.csb.app';\n    }\n    if (document.location.host.endsWith('.io')) {\n        return 'https://codesandbox.io';\n    }\n    return 'https://codesandbox.stream';\n}\nexport const requestSandpackSecretFromApp = (teamId, host = getProtocolAndHostWithSSE()) => __awaiter(void 0, void 0, void 0, function* () {\n    const parentDomain = (() => {\n        /**\n         * It gets the all ancestor browsing context of the parent, in reverse order.\n         *\n         * Note: ancestorOrigins is not supported by Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1085214\n         * so it default to `document.referrer`\n         */\n        if (document.location.ancestorOrigins) {\n            return document.location.ancestorOrigins[document.location.ancestorOrigins.length - 1];\n        }\n        return document.referrer;\n    })();\n    return new Promise(resolve => {\n        const popup = window.open(host + '/auth/sandpack/' + teamId, '', `scrollbars=no,toolbar=no,location=no,titlebar=no,directories=no,status=no,menubar=no, ${getPopupDimensions()}`);\n        setInterval(() => {\n            if (popup) {\n                popup.postMessage({ $type: 'request-sandpack-secret', parentDomain }, host);\n            }\n        }, 500);\n        const listener = (e) => {\n            if (e.data && e.data.$type === 'sandpack-secret') {\n                setSandpackSecret(e.data.token);\n                window.removeEventListener('message', listener);\n                if (popup) {\n                    popup.close();\n                }\n                resolve(e.data.token);\n            }\n        };\n        window.addEventListener('message', listener);\n    });\n});\n","export class Transpiler {\n    constructor(name) {\n        this.cacheable = true;\n        this.name = name;\n        this.HMREnabled = true;\n    }\n    initialize() { }\n    dispose() { }\n    cleanModule(loaderContext) { }\n    /* eslint-enable */\n    transpile(code, loaderContext) {\n        return this.doTranspilation(code, loaderContext);\n    }\n    /**\n     * Get custom info of the current transpiler, this is open for implementation\n     * per transpiler\n     */\n    getTranspilerContext(manager) {\n        return Promise.resolve({\n            name: this.name,\n            HMREnabled: this.HMREnabled,\n            cacheable: this.cacheable,\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Transpiler } from '../..';\n/**\n * This is a compatibility loader that acts as bridge between webpack loaders and sandpack\n * transpilers. It's a best effort on making webpack loaders work dynamically in Sandpack.\n */\nexport class WebpackTranspiler extends Transpiler {\n    constructor(webpackLoader, evaluator) {\n        super(webpackLoader);\n        this.webpackLoader = evaluator.evaluate(webpackLoader);\n    }\n    doTranspilation(code, loaderContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const loader = yield this.webpackLoader;\n            const asyncFunc = () => (err, result) => {\n                if (err) {\n                    throw err;\n                }\n                return result;\n            };\n            // Todo; this whole conversion from http strings to buffers should be done on the CodeSandbox\n            // side in a pre-transpiler. Ideally code like this should be unaware of the implementation\n            // details of http strings, and just work with buffers instead.\n            const codeIsHttp = code.startsWith('http');\n            const webpackCode = codeIsHttp\n                ? yield fetch(loaderContext._module.module.code)\n                    .then(x => x.arrayBuffer())\n                    .then(buffer => Buffer.from(buffer))\n                : Buffer.from(code);\n            const webpackLoaderContext = Object.assign(Object.assign({}, loaderContext), { async: asyncFunc });\n            const webpackResult = yield loader.apply(webpackLoaderContext, [\n                loader.raw ? webpackCode : webpackCode.toString('utf-8'),\n            ]);\n            return {\n                transpiledCode: webpackResult,\n            };\n        });\n    }\n}\n","/* eslint-disable */\nconst specialValues = {\n    null: null,\n    true: true,\n    false: false,\n};\nexport default function parseQuery(query) {\n    if (query.substr(0, 1) !== '?') {\n        throw new Error(\"A valid query string passed to parseQuery should begin with '?'\");\n    }\n    query = query.substr(1);\n    if (!query) {\n        return {};\n    }\n    if (query.substr(0, 1) === '{' && query.substr(-1) === '}') {\n        return JSON.parse(query);\n    }\n    const queryArgs = query.split(/[,&]/g);\n    const result = {};\n    queryArgs.forEach(arg => {\n        const idx = arg.indexOf('=');\n        if (idx >= 0) {\n            let name = arg.substr(0, idx);\n            let value = decodeURIComponent(arg.substr(idx + 1));\n            if (specialValues.hasOwnProperty(value)) {\n                // @ts-ignore Reapplying new value with different type is weird for TS\n                value = specialValues[value];\n            }\n            if (name.substr(-2) === '[]') {\n                name = decodeURIComponent(name.substr(0, name.length - 2));\n                if (!Array.isArray(result[name]))\n                    result[name] = [];\n                result[name].push(value);\n            }\n            else {\n                name = decodeURIComponent(name);\n                result[name] = value;\n            }\n        }\n        else {\n            if (arg.substr(0, 1) === '-') {\n                result[decodeURIComponent(arg.substr(1))] = false;\n            }\n            else if (arg.substr(0, 1) === '+') {\n                result[decodeURIComponent(arg.substr(1))] = true;\n            }\n            else {\n                result[decodeURIComponent(arg)] = true;\n            }\n        }\n    });\n    return result;\n}\n","import path from 'path';\nconst matchRelativePath = /^\\.\\.?[/\\\\]/;\nfunction isAbsolutePath(str) {\n    return str.startsWith('/');\n}\nfunction isRelativePath(str) {\n    return matchRelativePath.test(str);\n}\nexport default function stringifyRequest(loaderContext, request) {\n    const splitted = request.split('!');\n    const context = loaderContext.options && loaderContext.options.context;\n    return JSON.stringify(splitted\n        .map(part => {\n        // First, separate singlePath from query, because the query might contain paths again\n        const splittedPart = part.match(/^(.*?)(\\?.*)/);\n        let singlePath = splittedPart ? splittedPart[1] : part;\n        const query = splittedPart ? splittedPart[2] : '';\n        if (isAbsolutePath(singlePath) && context) {\n            singlePath = path.relative(context, singlePath);\n            if (isAbsolutePath(singlePath)) {\n                // If singlePath still matches an absolute path, singlePath was on a different drive than context.\n                // In this case, we leave the path platform-specific without replacing any separators.\n                // @see https://github.com/webpack/loader-utils/pull/14\n                return singlePath + query;\n            }\n            if (isRelativePath(singlePath) === false) {\n                // Ensure that the relative path starts at least with ./ otherwise it would be a request into the modules directory (like node_modules).\n                singlePath = './' + singlePath;\n            }\n        }\n        return singlePath.replace(/\\\\/g, '/') + query;\n    })\n        .join('!'));\n}\n","import parseQuery from './parse-query';\nimport stringifyRequest from './stringify-request';\nimport getRemainingRequest from './get-remaining-request';\nimport getOptions from './get-options';\nexport default {\n    getRemainingRequest,\n    parseQuery,\n    stringifyRequest,\n    getOptions,\n};\n","export default function getRemainingRequest(loaderContext) {\n    return loaderContext.remainingRequests;\n}\n","export default function getOptions(loaderContext) {\n    return loaderContext.options;\n}\n","export default function (delay = 1000) {\n    return new Promise(resolve => {\n        setTimeout(resolve, delay);\n    });\n}\n","export const DEFAULT_EXTENSIONS = ['mjs', 'js', 'jsx', 'json'];\n","export function getDependencyName(path) {\n    const dependencyParts = path.split('/');\n    let dependencyName = dependencyParts.shift();\n    if (path.startsWith('@')) {\n        dependencyName += `/${dependencyParts.shift()}`;\n    }\n    if (dependencyParts[0] && /^\\d+\\.\\d+\\.\\d+.*$/.test(dependencyParts[0])) {\n        // Make sure to include the aliased version if it's part of it\n        dependencyName += `/${dependencyParts.shift()}`;\n    }\n    return dependencyName;\n}\nexport function getAliasVersion(path) {\n    const name = getDependencyName(path);\n    const split = name.split('/');\n    const expectedSplitLength = name.startsWith('@') ? 3 : 2;\n    if (split.length !== expectedSplitLength) {\n        return null;\n    }\n    const version = split.pop();\n    return version;\n}\n","const g = typeof window === 'undefined' ? self : window;\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\ng.cosmiconfig = {};\ng.prettier = {};\ng.jsdom = {\n  JSDOM: {\n    // IE11 support\n    // eslint-disable-next-line object-shorthand\n    fragment: function fragment(htmlString) {\n      // eslint-disable-next-line no-var\n      var div = document.createElement('div');\n      div.innerHTML = htmlString.trim();\n\n      // Change this to div.childNodes to support multiple top-level nodes\n      return div;\n    },\n  },\n};\n","'use strict';\n\nmodule.exports = LRUCache;\n\n// This will be a proper iterable 'Map' in engines that support it,\n// or a fakey-fake PseudoMap in older versions.\nvar Map = require('pseudomap');\nvar util = require('util');\n\n// A linked list to keep track of recently-used-ness\nvar Yallist = require('yallist');\n\n// use symbols if possible, otherwise just _props\nvar hasSymbol = typeof Symbol === 'function';\nvar makeSymbol;\nif (hasSymbol) {\n  makeSymbol = function(key) {\n    return Symbol(key);\n  };\n} else {\n  makeSymbol = function(key) {\n    return '_' + key;\n  };\n}\n\nvar MAX = makeSymbol('max');\nvar LENGTH = makeSymbol('length');\nvar LENGTH_CALCULATOR = makeSymbol('lengthCalculator');\nvar ALLOW_STALE = makeSymbol('allowStale');\nvar MAX_AGE = makeSymbol('maxAge');\nvar DISPOSE = makeSymbol('dispose');\nvar NO_DISPOSE_ON_SET = makeSymbol('noDisposeOnSet');\nvar LRU_LIST = makeSymbol('lruList');\nvar CACHE = makeSymbol('cache');\n\nfunction naiveLength() {\n  return 1;\n}\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nfunction LRUCache(options) {\n  if (!(this instanceof LRUCache)) {\n    return new LRUCache(options);\n  }\n\n  if (typeof options === 'number') {\n    options = { max: options };\n  }\n\n  if (!options) {\n    options = {};\n  }\n\n  var max = (this[MAX] = options.max);\n  // Kind of weird to have a default max of Infinity, but oh well.\n  if (!max || !(typeof max === 'number') || max <= 0) {\n    this[MAX] = Infinity;\n  }\n\n  var lc = options.length || naiveLength;\n  if (typeof lc !== 'function') {\n    lc = naiveLength;\n  }\n  this[LENGTH_CALCULATOR] = lc;\n\n  this[ALLOW_STALE] = options.stale || false;\n  this[MAX_AGE] = options.maxAge || 0;\n  this[DISPOSE] = options.dispose;\n  this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false;\n  this.reset();\n}\n\n// resize the cache when the max changes.\nObject.defineProperty(LRUCache.prototype, 'max', {\n  set: function(mL) {\n    if (!mL || !(typeof mL === 'number') || mL <= 0) {\n      mL = Infinity;\n    }\n    this[MAX] = mL;\n    trim(this);\n  },\n  get: function() {\n    return this[MAX];\n  },\n  enumerable: true,\n});\n\nObject.defineProperty(LRUCache.prototype, 'allowStale', {\n  set: function(allowStale) {\n    this[ALLOW_STALE] = !!allowStale;\n  },\n  get: function() {\n    return this[ALLOW_STALE];\n  },\n  enumerable: true,\n});\n\nObject.defineProperty(LRUCache.prototype, 'maxAge', {\n  set: function(mA) {\n    if (!mA || !(typeof mA === 'number') || mA < 0) {\n      mA = 0;\n    }\n    this[MAX_AGE] = mA;\n    trim(this);\n  },\n  get: function() {\n    return this[MAX_AGE];\n  },\n  enumerable: true,\n});\n\n// resize the cache when the lengthCalculator changes.\nObject.defineProperty(LRUCache.prototype, 'lengthCalculator', {\n  set: function(lC) {\n    if (typeof lC !== 'function') {\n      lC = naiveLength;\n    }\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC;\n      this[LENGTH] = 0;\n      this[LRU_LIST].forEach(function(hit) {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key);\n        this[LENGTH] += hit.length;\n      }, this);\n    }\n    trim(this);\n  },\n  get: function() {\n    return this[LENGTH_CALCULATOR];\n  },\n  enumerable: true,\n});\n\nObject.defineProperty(LRUCache.prototype, 'length', {\n  get: function() {\n    return this[LENGTH];\n  },\n  enumerable: true,\n});\n\nObject.defineProperty(LRUCache.prototype, 'itemCount', {\n  get: function() {\n    return this[LRU_LIST].length;\n  },\n  enumerable: true,\n});\n\nLRUCache.prototype.rforEach = function(fn, thisp) {\n  thisp = thisp || this;\n  for (var walker = this[LRU_LIST].tail; walker !== null; ) {\n    var prev = walker.prev;\n    forEachStep(this, fn, walker, thisp);\n    walker = prev;\n  }\n};\n\nfunction forEachStep(self, fn, node, thisp) {\n  var hit = node.value;\n  if (isStale(self, hit)) {\n    del(self, node);\n    if (!self[ALLOW_STALE]) {\n      hit = undefined;\n    }\n  }\n  if (hit) {\n    fn.call(thisp, hit.value, hit.key, self);\n  }\n}\n\nLRUCache.prototype.forEach = function(fn, thisp) {\n  thisp = thisp || this;\n  for (var walker = this[LRU_LIST].head; walker !== null; ) {\n    var next = walker.next;\n    forEachStep(this, fn, walker, thisp);\n    walker = next;\n  }\n};\n\nLRUCache.prototype.keys = function() {\n  return this[LRU_LIST].toArray().map(function(k) {\n    return k.key;\n  }, this);\n};\n\nLRUCache.prototype.values = function() {\n  return this[LRU_LIST].toArray().map(function(k) {\n    return k.value;\n  }, this);\n};\n\nLRUCache.prototype.reset = function() {\n  if (this[DISPOSE] && this[LRU_LIST] && this[LRU_LIST].length) {\n    this[LRU_LIST].forEach(function(hit) {\n      this[DISPOSE](hit.key, hit.value);\n    }, this);\n  }\n\n  this[CACHE] = new Map(); // hash of items by key\n  this[LRU_LIST] = new Yallist(); // list of items in order of use recency\n  this[LENGTH] = 0; // length of items in the list\n};\n\nLRUCache.prototype.dump = function() {\n  return this[LRU_LIST].map(function(hit) {\n    if (!isStale(this, hit)) {\n      return {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0),\n      };\n    }\n  }, this)\n    .toArray()\n    .filter(function(h) {\n      return h;\n    });\n};\n\nLRUCache.prototype.dumpLru = function() {\n  return this[LRU_LIST];\n};\n\nLRUCache.prototype.inspect = function(n, opts) {\n  var str = 'LRUCache {';\n  var extras = false;\n\n  var as = this[ALLOW_STALE];\n  if (as) {\n    str += '\\n  allowStale: true';\n    extras = true;\n  }\n\n  var max = this[MAX];\n  if (max && max !== Infinity) {\n    if (extras) {\n      str += ',';\n    }\n    str += '\\n  max: ' + util.inspect(max, opts);\n    extras = true;\n  }\n\n  var maxAge = this[MAX_AGE];\n  if (maxAge) {\n    if (extras) {\n      str += ',';\n    }\n    str += '\\n  maxAge: ' + util.inspect(maxAge, opts);\n    extras = true;\n  }\n\n  var lc = this[LENGTH_CALCULATOR];\n  if (lc && lc !== naiveLength) {\n    if (extras) {\n      str += ',';\n    }\n    str += '\\n  length: ' + util.inspect(this[LENGTH], opts);\n    extras = true;\n  }\n\n  var didFirst = false;\n  this[LRU_LIST].forEach(function(item) {\n    if (didFirst) {\n      str += ',\\n  ';\n    } else {\n      if (extras) {\n        str += ',\\n';\n      }\n      didFirst = true;\n      str += '\\n  ';\n    }\n    var key = util\n      .inspect(item.key)\n      .split('\\n')\n      .join('\\n  ');\n    var val = { value: item.value };\n    if (item.maxAge !== maxAge) {\n      val.maxAge = item.maxAge;\n    }\n    if (lc !== naiveLength) {\n      val.length = item.length;\n    }\n    if (isStale(this, item)) {\n      val.stale = true;\n    }\n\n    val = util\n      .inspect(val, opts)\n      .split('\\n')\n      .join('\\n  ');\n    str += key + ' => ' + val;\n  });\n\n  if (didFirst || extras) {\n    str += '\\n';\n  }\n  str += '}';\n\n  return str;\n};\n\nLRUCache.prototype.set = function(key, value, maxAge) {\n  maxAge = maxAge || this[MAX_AGE];\n\n  var now = maxAge ? Date.now() : 0;\n  var len = this[LENGTH_CALCULATOR](value, key);\n\n  if (this[CACHE].has(key)) {\n    if (len > this[MAX]) {\n      del(this, this[CACHE].get(key));\n      return false;\n    }\n\n    var node = this[CACHE].get(key);\n    var item = node.value;\n\n    // dispose of the old one before overwriting\n    // split out into 2 ifs for better coverage tracking\n    if (this[DISPOSE]) {\n      if (!this[NO_DISPOSE_ON_SET]) {\n        this[DISPOSE](key, item.value);\n      }\n    }\n\n    item.now = now;\n    item.maxAge = maxAge;\n    item.value = value;\n    this[LENGTH] += len - item.length;\n    item.length = len;\n    this.get(key);\n    trim(this);\n    return true;\n  }\n\n  var hit = new Entry(key, value, len, now, maxAge);\n\n  // oversized objects fall out of cache automatically.\n  if (hit.length > this[MAX]) {\n    if (this[DISPOSE]) {\n      this[DISPOSE](key, value);\n    }\n    return false;\n  }\n\n  this[LENGTH] += hit.length;\n  this[LRU_LIST].unshift(hit);\n  this[CACHE].set(key, this[LRU_LIST].head);\n  trim(this);\n  return true;\n};\n\nLRUCache.prototype.has = function(key) {\n  if (!this[CACHE].has(key)) return false;\n  var hit = this[CACHE].get(key).value;\n  if (isStale(this, hit)) {\n    return false;\n  }\n  return true;\n};\n\nLRUCache.prototype.get = function(key) {\n  return get(this, key, true);\n};\n\nLRUCache.prototype.peek = function(key) {\n  return get(this, key, false);\n};\n\nLRUCache.prototype.pop = function() {\n  var node = this[LRU_LIST].tail;\n  if (!node) return null;\n  del(this, node);\n  return node.value;\n};\n\nLRUCache.prototype.del = function(key) {\n  del(this, this[CACHE].get(key));\n};\n\nLRUCache.prototype.load = function(arr) {\n  // reset the cache\n  this.reset();\n\n  var now = Date.now();\n  // A previous serialized cache has the most recent items first\n  for (var l = arr.length - 1; l >= 0; l--) {\n    var hit = arr[l];\n    var expiresAt = hit.e || 0;\n    if (expiresAt === 0) {\n      // the item was created without expiration in a non aged cache\n      this.set(hit.k, hit.v);\n    } else {\n      var maxAge = expiresAt - now;\n      // dont add already expired items\n      if (maxAge > 0) {\n        this.set(hit.k, hit.v, maxAge);\n      }\n    }\n  }\n};\n\nLRUCache.prototype.prune = function() {\n  var self = this;\n  this[CACHE].forEach(function(value, key) {\n    get(self, key, false);\n  });\n};\n\nfunction get(self, key, doUse) {\n  var node = self[CACHE].get(key);\n  if (node) {\n    var hit = node.value;\n    if (isStale(self, hit)) {\n      del(self, node);\n      if (!self[ALLOW_STALE]) hit = undefined;\n    } else {\n      if (doUse) {\n        self[LRU_LIST].unshiftNode(node);\n      }\n    }\n    if (hit) hit = hit.value;\n  }\n  return hit;\n}\n\nfunction isStale(self, hit) {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE])) {\n    return false;\n  }\n  var stale = false;\n  var diff = Date.now() - hit.now;\n  if (hit.maxAge) {\n    stale = diff > hit.maxAge;\n  } else {\n    stale = self[MAX_AGE] && diff > self[MAX_AGE];\n  }\n  return stale;\n}\n\nfunction trim(self) {\n  if (self[LENGTH] > self[MAX]) {\n    for (\n      var walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;\n\n    ) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      var prev = walker.prev;\n      del(self, walker);\n      walker = prev;\n    }\n  }\n}\n\nfunction del(self, node) {\n  if (node) {\n    var hit = node.value;\n    if (self[DISPOSE]) {\n      self[DISPOSE](hit.key, hit.value);\n    }\n    self[LENGTH] -= hit.length;\n    self[CACHE].delete(hit.key);\n    self[LRU_LIST].removeNode(node);\n  }\n}\n\n// classy, since V8 prefers predictable objects.\nfunction Entry(key, value, length, now, maxAge) {\n  this.key = key;\n  this.value = value;\n  this.length = length;\n  this.now = now;\n  this.maxAge = maxAge || 0;\n}\n","/**\n * Parse input strings like `package-1/package-2` to an array of packages\n */\nfunction parsePackagePath(input) {\n    return input.match(/(@[^/]+\\/)?([^/]+)/g) || [];\n}\nconst WRONG_PATTERNS = /\\/$|\\/{2,}|\\*+$/;\nconst GLOBAL_NESTED_DEP_PATTERN = '**/';\nfunction isValidPackagePath(input) {\n    return !WRONG_PATTERNS.test(input);\n}\nexport function parsePatternInfo(globPattern, range) {\n    if (!isValidPackagePath(globPattern)) {\n        console.warn('invalidResolutionName');\n        return null;\n    }\n    const directories = parsePackagePath(globPattern);\n    const name = directories.pop();\n    // For legacy support of resolutions, replace `name` with `**/name`\n    if (name === globPattern) {\n        // eslint-disable-next-line\n        globPattern = `${GLOBAL_NESTED_DEP_PATTERN}${name}`;\n    }\n    return {\n        name,\n        range,\n        globPattern,\n        pattern: `${name}@${range}`,\n    };\n}\nexport function parseResolutions(resolutions) {\n    if (!resolutions) {\n        return [];\n    }\n    const keys = Object.keys(resolutions);\n    return keys\n        .map(key => parsePatternInfo(key, resolutions[key]))\n        .filter(Boolean);\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport minimatch from 'minimatch';\nimport * as semver from 'semver';\nimport { downloadAllDependencyFiles, downloadDependency, } from './fetch-npm-module';\nexport function getPackageJSON(dep, version) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const m = yield downloadDependency(dep, version, '/package.json');\n        return m.code;\n    });\n}\nfunction getLatestVersionForSemver(dep, version) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const p = yield getPackageJSON(dep, version);\n        return JSON.parse(p).version;\n    });\n}\nfunction getAbsoluteVersion(originalDep, depName, depVersion, parsedResolutions) {\n    // Try getting it from the resolutions field first, if that doesn't work\n    // we try to get the latest version from the semver.\n    const applicableResolutions = parsedResolutions[depName];\n    if (applicableResolutions) {\n        const modulePath = [originalDep, depName].join('/');\n        const { range } = applicableResolutions.find(({ globPattern }) => minimatch(modulePath, globPattern)) || {};\n        if (range) {\n            if (semver.valid(range)) {\n                return getLatestVersionForSemver(depName, range);\n            }\n            return range;\n        }\n    }\n    return getLatestVersionForSemver(depName, depVersion);\n}\nfunction getDependencyDependencies(dep, version, parsedResolutions, peerDependencyResult = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const packageJSONCode = yield getPackageJSON(dep, version);\n        const packageJSON = JSON.parse(packageJSONCode);\n        yield Promise.all(Object.keys(packageJSON.dependencies || {}).map((depName) => __awaiter(this, void 0, void 0, function* () {\n            const depVersion = packageJSON.dependencies[depName];\n            if (peerDependencyResult[depName]) {\n                if (peerDependencyResult[depName].parents.indexOf(dep) === -1) {\n                    peerDependencyResult[depName].parents.push(dep);\n                }\n                return;\n            }\n            const absoluteVersion = yield getAbsoluteVersion(dep, depName, depVersion, parsedResolutions);\n            // In case inbetween the peer dependency result has been added already\n            if (peerDependencyResult[depName]) {\n                if (peerDependencyResult[depName].parents.indexOf(dep) === -1) {\n                    peerDependencyResult[depName].parents.push(dep);\n                }\n            }\n            else {\n                // eslint-disable-next-line\n                peerDependencyResult[depName] = {\n                    semver: depVersion,\n                    resolved: absoluteVersion,\n                    parents: [dep],\n                    entries: [],\n                };\n                yield getDependencyDependencies(depName, depVersion, parsedResolutions, peerDependencyResult);\n            }\n        })));\n        return peerDependencyResult;\n    });\n}\nexport function resolveDependencyInfo(dep, version, parsedResolutions) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const IS_ALIAS = /^npm:/;\n        const packageJSONCode = yield getPackageJSON(dep, version);\n        const packageJSON = JSON.parse(packageJSONCode);\n        const response = {\n            contents: {},\n            dependency: {\n                name: dep,\n                version,\n            },\n            peerDependencies: {},\n            dependencyDependencies: {},\n            dependencyAliases: {},\n        };\n        const resolutionsByPackage = {};\n        parsedResolutions.forEach(res => {\n            resolutionsByPackage[res.name] = resolutionsByPackage[res.name] || [];\n            resolutionsByPackage[res.name].push(res);\n        });\n        response.peerDependencies = packageJSON.peerDependencies || {};\n        response.dependencyDependencies = yield getDependencyDependencies(dep, version, resolutionsByPackage);\n        response.contents = {\n            [`/node_modules/${dep}/package.json`]: {\n                content: packageJSONCode,\n            },\n        };\n        const allFiles = yield downloadAllDependencyFiles(dep, version);\n        if (allFiles) {\n            allFiles.forEach(file => {\n                response.contents[`/node_modules/${dep}${file.path}`] = {\n                    content: file.code,\n                };\n            });\n        }\n        yield Promise.all(Object.keys(response.dependencyDependencies).map((packageName) => __awaiter(this, void 0, void 0, function* () {\n            let packageVersion = response.dependencyDependencies[packageName].resolved;\n            // If the package is a remote module or is an alias we use the semver as the version for fetching\n            const pkgSemver = response.dependencyDependencies[packageName].semver;\n            if (pkgSemver && (pkgSemver.match(IS_ALIAS) || pkgSemver.includes('/'))) {\n                packageVersion = pkgSemver;\n            }\n            const pkgJson = yield getPackageJSON(packageName, packageVersion);\n            response.contents[`/node_modules/${packageName}/package.json`] = {\n                content: pkgJson,\n            };\n        })));\n        return response;\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport { getAbsoluteDependency } from '@codesandbox/common/lib/utils/dependencies';\nimport delay from '../../utils/delay';\nimport dependenciesToQuery, { normalizeVersion, } from '../dependencies-to-query';\nconst RETRY_COUNT = 60;\nconst MAX_RETRY_DELAY = 10000;\nconst debug = _debug('cs:sandbox:packager');\nconst VERSION = 2;\n// eslint-disable-next-line\nconst DEV_URLS = {\n    packager: 'https://xi5p9f7czk.execute-api.eu-west-1.amazonaws.com/dev/packages',\n    bucket: 'https://dev-packager-packages.codesandbox.io',\n};\n// eslint-disable-next-line\nconst PROD_URLS = {\n    packager: 'https://aiwi8rnkp5.execute-api.eu-west-1.amazonaws.com/prod/packages',\n    bucket: 'https://prod-packager-packages.codesandbox.io',\n};\nconst URLS = PROD_URLS;\nconst BUCKET_URL = URLS.bucket;\nconst PACKAGER_URL = URLS.packager;\nfunction callApi(url, method = 'GET') {\n    return fetch(url, {\n        method,\n    })\n        .then((response) => __awaiter(this, void 0, void 0, function* () {\n        if (!response.ok) {\n            const error = new Error(response.statusText || '' + response.status);\n            try {\n                // @ts-ignore\n                error.response = yield response.text();\n            }\n            catch (err) {\n                console.error(err);\n            }\n            // @ts-ignore\n            error.statusCode = response.status;\n            throw error;\n        }\n        return response;\n    }))\n        .then(response => response.json());\n}\n/**\n * Request the packager, if retries > RETRY_COUNT it will throw if something goes wrong\n * otherwise it will retry again with an incremented retry\n *\n * @param {string} query The dependencies to call\n */\nfunction requestPackager(url, method = 'GET', retries = 0) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // eslint-disable-next-line no-constant-condition\n        debug(`Trying to call packager for ${retries} time`);\n        try {\n            const manifest = yield callApi(url, method);\n            return manifest;\n        }\n        catch (err) {\n            console.error({ err });\n            // If it's a 403 or network error, we retry the fetch\n            if (err.response && err.statusCode !== 403) {\n                throw new Error(err.response.error);\n            }\n            // 403 status code means the bundler is still bundling\n            if (retries < RETRY_COUNT) {\n                const msDelay = Math.min(MAX_RETRY_DELAY, 1000 * retries + Math.round(Math.random() * 1000));\n                console.warn(`Retrying package fetch in ${msDelay}ms`);\n                yield delay(msDelay);\n                return requestPackager(url, method, retries + 1);\n            }\n            throw err;\n        }\n    });\n}\nexport function getDependency(depName, depVersion) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let version = depVersion;\n        try {\n            const { version: absoluteVersion } = yield getAbsoluteDependency(depName, depVersion);\n            version = absoluteVersion;\n        }\n        catch (e) {\n            /* Ignore this, not critical */\n        }\n        const normalizedVersion = normalizeVersion(version);\n        const dependencyUrl = dependenciesToQuery({ [depName]: normalizedVersion });\n        const fullUrl = `${BUCKET_URL}/v${VERSION}/packages/${depName}/${normalizedVersion}.json`;\n        try {\n            const bucketManifest = yield callApi(fullUrl);\n            return bucketManifest;\n        }\n        catch (e) {\n            // The dep has not been generated yet...\n            const packagerRequestUrl = `${PACKAGER_URL}/${dependencyUrl}`;\n            yield requestPackager(packagerRequestUrl, 'POST');\n            return requestPackager(fullUrl);\n        }\n    });\n}\n","import { isAbsoluteVersion } from '@codesandbox/common/lib/utils/dependencies';\nimport uniq from 'lodash-es/uniq';\nimport * as semver from 'semver';\nconst VERSIONED_MODULE_RE = /^.+\\/\\d+\\.\\d+\\.\\d+\\/.+$/;\n/**\n * Compare two sorted string arrays\n *\n * @param {string[]} s1\n * @param {string[]} s2\n * @returns\n */\nfunction isEqual(s1, s2) {\n    if (s1.length !== s2.length) {\n        return false;\n    }\n    for (let i = 0; i < s1.length; i++) {\n        if (s1[i] !== s2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Replaces the start of a key with a new string\n *\n * @param {{ [key: string]: string }} paths\n * @param {string} oldName\n * @param {string} newName\n */\nfunction replacePaths(paths, oldName, newName) {\n    Object.keys(paths).forEach(al => {\n        if (al.startsWith(`${oldName}/`) || al === oldName) {\n            paths[al.replace(oldName, newName)] =\n                typeof paths[al] === 'string'\n                    ? paths[al].replace(oldName, newName)\n                    : paths[al];\n            delete paths[al];\n        }\n    });\n}\nfunction replaceDependencyInfo(res, depDepName, newDepDep) {\n    // Don't change anything if the module is already part of a sub-folder\n    // in this case pkg.json won't contain the requested version...\n    const pkgJSONPath = `/node_modules/${depDepName}/package.json`;\n    if (!res.contents[pkgJSONPath]) {\n        throw new Error(`Dependency ${depDepName} not found`);\n    }\n    const parsedPkgJson = JSON.parse(res.contents[pkgJSONPath].content);\n    if (parsedPkgJson.version !== newDepDep.resolved) {\n        return false;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line\n        console.log('Resolving conflict for ' +\n            depDepName +\n            ' new version: ' +\n            newDepDep.resolved);\n    }\n    // Remap dependency\n    const newPath = `${depDepName}/${newDepDep.resolved}`;\n    replacePaths(res.contents, `/node_modules/${depDepName}`, `/node_modules/${newPath}`);\n    res.dependencyDependencies[newPath] = res.dependencyDependencies[depDepName];\n    delete res.dependencyDependencies[depDepName];\n    // eslint-disable-next-line\n    for (const n of Object.keys(res.dependencyDependencies)) {\n        res.dependencyDependencies[n].parents = res.dependencyDependencies[n].parents.map(p => (p === depDepName ? newPath : p));\n    }\n    res.dependencyAliases = res.dependencyAliases || {};\n    newDepDep.parents.forEach(p => {\n        res.dependencyAliases[p] = res.dependencyAliases[p] || {};\n        res.dependencyAliases[p][depDepName] = newPath;\n    });\n    replacePaths(res.dependencyAliases, depDepName, newPath);\n    return true;\n}\nconst intersects = (v1, v2) => {\n    if (v1 === v2) {\n        return true;\n    }\n    try {\n        // Semver doesn't see ^6.0.0-beta.8 intersecting with 6.0.0-beta.8. So we explicitly check for that case.\n        if (isAbsoluteVersion(v1) !== isAbsoluteVersion(v2)) {\n            const min1 = semver.minVersion(v1);\n            const min2 = semver.minVersion(v2);\n            if (min1 && min2 && min1.raw === min2.raw) {\n                return true;\n            }\n        }\n    }\n    catch (e) {\n        // Do nothing\n    }\n    try {\n        return semver.intersects(v1, v2);\n    }\n    catch (e) {\n        return false;\n    }\n};\nexport function mergeDependencies(responses) {\n    // For consistency between requests\n    const sortedResponses = responses.sort((a, b) => a.dependency.name.localeCompare(b.dependency.name));\n    const response = {\n        contents: {},\n        dependencies: sortedResponses.map(r => r.dependency),\n        dependencyAliases: {},\n        dependencyDependencies: {},\n    };\n    // eslint-disable-next-line\n    for (const r of sortedResponses) {\n        for (let i = 0; i < Object.keys(r.dependencyDependencies).length; i++) {\n            const depDepName = Object.keys(r.dependencyDependencies)[i];\n            const newDepDep = r.dependencyDependencies[depDepName];\n            const rootDependency = response.dependencies.find(d => d.name === depDepName);\n            if (rootDependency) {\n                // packages that require themselves?\n                if (r.dependency.name !== depDepName) {\n                    if (!intersects(rootDependency.version, newDepDep.semver)) {\n                        // If a root dependency is in conflict with a child dependency, we always\n                        // go for the root dependency\n                        if (replaceDependencyInfo(r, depDepName, newDepDep)) {\n                            // Start from the beginning, to make sure everything is correct\n                            i = -1;\n                        }\n                    }\n                    else {\n                        // Remove the contents so we don't overwrite the root version's content\n                        const pathPrefix = `/node_modules/${depDepName}/`;\n                        Object.keys(r.contents).forEach(p => {\n                            if (p.startsWith(pathPrefix) && !VERSIONED_MODULE_RE.test(p)) {\n                                delete r.contents[p];\n                            }\n                        });\n                    }\n                }\n                // TODO: Also remove contents for conflicts in transient dependencies?\n            }\n            else if (response.dependencyDependencies[depDepName]) {\n                const exDepDep = response.dependencyDependencies[depDepName];\n                // Determine which version is newer, needed for some checks later.\n                const [newerVersionDepDep, olderVersionDepDep] = semver.gt(newDepDep.resolved, exDepDep.resolved)\n                    ? [newDepDep, exDepDep]\n                    : [exDepDep, newDepDep];\n                if (exDepDep.resolved === newDepDep.resolved) {\n                    exDepDep.parents = uniq([...exDepDep.parents, ...newDepDep.parents]);\n                    exDepDep.entries = uniq([...exDepDep.entries, ...newDepDep.entries]);\n                }\n                else if (intersects(exDepDep.semver, newDepDep.semver) &&\n                    (isEqual(exDepDep.entries, newDepDep.entries) ||\n                        olderVersionDepDep.entries.length === 0) // Meaning that the existing dependency is not called from other dependencies, so safe to replace with the newer version.\n                ) {\n                    response.dependencyDependencies[depDepName] = newerVersionDepDep;\n                    response.dependencyDependencies[depDepName].parents = uniq([\n                        ...exDepDep.parents,\n                        ...newDepDep.parents,\n                    ]);\n                }\n                else if (replaceDependencyInfo(r, depDepName, newDepDep)) {\n                    // Start from the beginning, to make sure everything is correct\n                    i = -1;\n                }\n            }\n            else {\n                response.dependencyDependencies[depDepName] =\n                    r.dependencyDependencies[depDepName];\n            }\n        }\n        response.dependencyAliases = Object.assign(Object.assign({}, response.dependencyAliases), r.dependencyAliases);\n        response.contents = Object.assign(Object.assign({}, response.contents), r.contents);\n    }\n    return response;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { pickBy } from 'lodash-es';\nimport { dispatch, actions } from 'codesandbox-api';\nimport { preloadedProtocols, getFetchProtocol, } from './dynamic/fetch-protocols';\nimport dependenciesToQuery from './dependencies-to-query';\nimport { parseResolutions } from './dynamic/resolutions';\nimport { resolveDependencyInfo } from './dynamic/resolve-dependency';\nimport { getDependency as getPrebundledDependency } from './preloaded/fetch-dependencies';\nimport { mergeDependencies } from './merge-dependency';\nimport { getSandpackSecret, removeSandpackSecret } from '../sandpack-secret';\nlet loadedDependencyCombination = null;\nlet manifest = null;\nconst PRELOADED_PROTOCOLS = [\n    preloadedProtocols.jsdelivr,\n    preloadedProtocols.unpkg,\n];\n/**\n * Depending on the dependency version we decide whether we can load a prebundled bundle (generated\n * in a lambda) or use a dynamic version of fetching the dependency.\n */\nfunction shouldFetchDynamically(depName, depVersion) {\n    const fetchProtocol = getFetchProtocol(depName, depVersion);\n    return !PRELOADED_PROTOCOLS.includes(fetchProtocol);\n}\n/**\n * Some dependencies have a space in their version for some reason, this is invalid and we\n * ignore them. This is what yarn does as well.\n */\nfunction removeSpacesFromDependencies(dependencies) {\n    const newDeps = {};\n    Object.keys(dependencies).forEach(depName => {\n        const [version] = dependencies[depName].split(' ');\n        newDeps[depName] = version;\n    });\n    return newDeps;\n}\n/**\n * Split the dependencies between whether they should be loaded from dynamically or from an endpoint\n * that has the dependency already prebundled.\n */\nfunction splitDependencies(dependencies, forceFetchDynamically) {\n    if (forceFetchDynamically) {\n        return { dynamicDependencies: dependencies, prebundledDependencies: {} };\n    }\n    const dynamicDependencies = {};\n    const prebundledDependencies = {};\n    Object.keys(dependencies).forEach(depName => {\n        const version = dependencies[depName];\n        if (shouldFetchDynamically(depName, version)) {\n            dynamicDependencies[depName] = version;\n        }\n        else {\n            prebundledDependencies[depName] = version;\n        }\n    });\n    return { dynamicDependencies, prebundledDependencies };\n}\nexport function getDependenciesFromSources(dependencies, resolutions, forceFetchDynamically, updateProgress) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const parsedResolutions = parseResolutions(resolutions);\n            const remainingDependencies = Object.keys(dependencies);\n            const totalDependencies = remainingDependencies.length;\n            const depsWithNodeLibs = removeSpacesFromDependencies(Object.assign({ 'node-libs-browser': '2.2.0' }, dependencies));\n            const { dynamicDependencies, prebundledDependencies } = splitDependencies(depsWithNodeLibs, forceFetchDynamically);\n            const updateLoadScreen = () => {\n                const progress = totalDependencies - remainingDependencies.length;\n                const total = totalDependencies;\n                updateProgress({\n                    done: progress,\n                    total,\n                    remainingDependencies,\n                });\n            };\n            const dynamicPromise = Promise.all(Object.keys(dynamicDependencies).map(depName => resolveDependencyInfo(depName, depsWithNodeLibs[depName], parsedResolutions).finally(() => {\n                remainingDependencies.splice(remainingDependencies.indexOf(depName), 1);\n                updateLoadScreen();\n            })));\n            const prebundledPromise = Promise.all(Object.keys(prebundledDependencies).map(depName => getPrebundledDependency(depName, depsWithNodeLibs[depName])\n                .then(d => {\n                // Unfortunately we've let this through in our system, some dependencies will just be { error: string }.\n                // The bug has been fixed, but dependencies have been cached, we have to filter them out and fetch them\n                // dynamically.\n                // @ts-ignore not possible anymore\n                if (d.error) {\n                    return resolveDependencyInfo(depName, depsWithNodeLibs[depName], parsedResolutions);\n                }\n                return d;\n            })\n                .finally(() => {\n                remainingDependencies.splice(remainingDependencies.indexOf(depName), 1);\n                updateLoadScreen();\n            })));\n            const [dynamicLoadedDependencies, prebundledLoadedDependencies,] = yield Promise.all([dynamicPromise, prebundledPromise]);\n            return mergeDependencies([\n                ...dynamicLoadedDependencies,\n                ...prebundledLoadedDependencies,\n            ]);\n        }\n        catch (err) {\n            if (getSandpackSecret()) {\n                removeSandpackSecret();\n            }\n            err.message = `Could not fetch dependencies, please try again in a couple seconds: ${err.message}`;\n            dispatch(actions.notifications.show(err.message, 'error'));\n            throw err;\n        }\n    });\n}\n/**\n * This fetches the manifest and dependencies from our packager or dynamic sources\n * @param {*} dependencies\n */\nexport function loadDependencies(dependencies, updateProgress, { disableExternalConnection = false, resolutions = undefined, } = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let isNewCombination = false;\n        if (Object.keys(dependencies).length !== 0) {\n            // We filter out all @types, as they are not of any worth to the bundler\n            const dependenciesWithoutTypings = pickBy(dependencies, (val, key) => !(key.includes && key.includes('@types')));\n            const depQuery = dependenciesToQuery(dependenciesWithoutTypings);\n            if (loadedDependencyCombination !== depQuery) {\n                isNewCombination = true;\n                const data = yield getDependenciesFromSources(dependenciesWithoutTypings, resolutions, disableExternalConnection, updateProgress);\n                // Mark that the last requested url is this\n                loadedDependencyCombination = depQuery;\n                manifest = data;\n            }\n        }\n        else {\n            manifest = null;\n        }\n        return { manifest, isNewCombination };\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { satisfies, valid } from 'semver';\nimport { getSandpackSecret } from '../../../sandpack-secret';\nimport { fetchWithRetries } from './utils';\nimport { TarStore } from './utils/tar-store';\nconst NPM_REGISTRY_ACCEPT_HEADER = 'application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*';\nfunction join(a, b) {\n    if (a.endsWith('/')) {\n        return a + b;\n    }\n    return a + '/' + b;\n}\nexport class NpmRegistryFetcher {\n    constructor(registryLocation, config) {\n        this.registryLocation = registryLocation;\n        this.tarStore = new TarStore();\n        this.packageMetadata = new Map();\n        this.proxyEnabled = false;\n        this.condition = (name, version) => {\n            if (this.scopeWhitelist) {\n                return this.scopeWhitelist.some(scope => {\n                    const [scopeName] = name.split('/');\n                    return scopeName === scope;\n                });\n            }\n            return true;\n        };\n        this.proxyUrl = config.proxyUrl;\n        this.scopeWhitelist = config.scopeWhitelist;\n        this.authToken = config.authToken;\n        this.provideTarballUrl = config.provideTarballUrl;\n        this.proxyEnabled = config.proxyEnabled;\n        this.authType = config.authType || 'Bearer';\n    }\n    getProxiedUrl(url) {\n        if (this.proxyUrl) {\n            return this.proxyUrl + '?registryurl=' + url;\n        }\n        return url;\n    }\n    getTarballUrl(name, version, tarballUrl) {\n        if (this.provideTarballUrl) {\n            return this.provideTarballUrl(name, version, tarballUrl);\n        }\n        return this.getProxiedUrl(tarballUrl);\n    }\n    getPackageUrl(name) {\n        const encodedName = name.replace('/', '%2f');\n        return this.getProxiedUrl(join(this.registryLocation, encodedName));\n    }\n    getRequestInit() {\n        const headers = new Headers();\n        headers.append('Accept', NPM_REGISTRY_ACCEPT_HEADER);\n        headers.append('Content-Type', 'application/json');\n        /**\n         * Private packages conditionals:\n         * 1. Explicit token: if `authToken` is provide, add it to the header\n         * 2. Proxy disabled: then it's a custom registry, so do not anything\n         * 3. Proxy is enabled and team-id is provide: it's a private package provided by CSB\n         */\n        if (this.authToken) {\n            // Custom registry url\n            headers.append('Authorization', `${this.authType} ${this.authToken}`);\n        }\n        else if (getSandpackSecret()) {\n            // CSB proxy\n            headers.append('Authorization', `Bearer ${getSandpackSecret()}`);\n        }\n        return {\n            method: 'get',\n            headers,\n            mode: 'cors',\n            credentials: this.proxyEnabled ? 'include' : undefined,\n        };\n    }\n    fetchRegistry(url) {\n        return fetchWithRetries(url, 3, this.getRequestInit())\n            .then(x => x.json())\n            .catch((e) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            let errorMessage = 'Make sure the right auth token and URL are set';\n            if (e.responseObject) {\n                const res = yield e.responseObject.json();\n                if (res.error) {\n                    errorMessage = res.error;\n                }\n                else if ((_a = res.errors) === null || _a === void 0 ? void 0 : _a.detail) {\n                    errorMessage = res.errors.detail[0];\n                }\n            }\n            return Promise.reject(new Error(`Could not fetch from registry. ${errorMessage}.`));\n        }));\n    }\n    getPackageMetadata(name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.packageMetadata.has(name)) {\n                this.packageMetadata.set(name, this.fetchRegistry(this.getPackageUrl(name)));\n            }\n            return this.packageMetadata.get(name);\n        });\n    }\n    getAbsoluteVersion(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (valid(version)) {\n                return version;\n            }\n            const metadata = yield this.getPackageMetadata(name);\n            if (metadata['dist-tags'] && metadata['dist-tags'][version]) {\n                return metadata['dist-tags'][version];\n            }\n            const versions = Object.keys(metadata.versions).reverse();\n            const foundVersion = versions.find(absoluteVersion => satisfies(absoluteVersion, version));\n            if (!foundVersion) {\n                throw new Error(`Can't find version that satisfies ${name}@${version}`);\n            }\n            return foundVersion;\n        });\n    }\n    getVersionInfo(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const absoluteVersion = yield this.getAbsoluteVersion(name, version);\n            const metadata = yield this.getPackageMetadata(name);\n            const versionInfo = metadata.versions[absoluteVersion];\n            if (!versionInfo) {\n                throw new Error(`Version '${version}' is not available on the registry for '${name}'`);\n            }\n            return versionInfo;\n        });\n    }\n    file(name, version, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const versionInfo = yield this.getVersionInfo(name, version);\n            const tarball = this.getTarballUrl(name, versionInfo.version, versionInfo.dist.tarball);\n            return this.tarStore.file(name, tarball, path, this.getRequestInit());\n        });\n    }\n    meta(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const versionInfo = yield this.getVersionInfo(name, version);\n            const tarball = this.getTarballUrl(name, versionInfo.version, versionInfo.dist.tarball);\n            return this.tarStore.meta(name, tarball, this.getRequestInit());\n        });\n    }\n    massFiles(name, version) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const versionInfo = yield this.getVersionInfo(name, version);\n            const tarball = this.getTarballUrl(name, versionInfo.version, versionInfo.dist.tarball);\n            return this.tarStore.massFiles(name, tarball, this.getRequestInit());\n        });\n    }\n}\n","import { getCurrentManager } from '../compile';\n\nlet cachedBoilerplates = [];\n\nexport async function evalBoilerplates(boilerplates) {\n  cachedBoilerplates = await Promise.all(\n    boilerplates.map(async boilerplate => {\n      const fakeModule = {\n        path: `/boilerplate-${boilerplate.condition}${boilerplate.extension}`,\n        code: boilerplate.code,\n      };\n\n      const manager = getCurrentManager();\n      const tModule = manager.getTranspiledModule(fakeModule);\n      const module = await tModule\n        .transpile(manager)\n        .then(() => tModule.evaluate(manager, { force: true }));\n\n      return { ...boilerplate, module };\n    })\n  );\n}\n\nexport function getBoilerplates() {\n  return cachedBoilerplates;\n}\n\nexport function findBoilerplate(module) {\n  const boilerplates = getBoilerplates();\n  const boilerplate = boilerplates.find(b => {\n    const regex = new RegExp(b.condition);\n    return regex.test(module.path);\n  });\n\n  if (boilerplate == null) {\n    throw new Error(\n      `No boilerplate found for ${module.path}, you can create one in the future`\n    );\n  }\n\n  return boilerplate;\n}\n","export const JS = {\n  id: 'js',\n  extension: '.js',\n  condition: '.jsx?$',\n  code: `\nimport React from 'react';\nimport { render } from 'react-dom';\nexport default function(module) {\n  let root = document.getElementById('root');\n\n  if (!root) {\n    root = document.createElement('div');\n    root.id = 'root';\n    document.body.appendChild(root);\n  }\n\n  render(React.createElement(module.default), root);\n}\n`,\n};\n\nexport const HTML = {\n  id: 'html',\n  extension: '.html',\n  condition: '.html$',\n  code: `\nexport default function(module) {\n  document.body.innerHTML = module\n}\n`,\n};\n\nexport const TS = {\n  id: 'ts',\n  extension: '.ts',\n  condition: '.tsx?$',\n  code: `\nimport * as React from 'react';\nimport { render } from 'react-dom';\nexport default function(module) {\n  const node = document.createElement('div');\n  document.body.appendChild(node);\n  render(React.createElement(module.default), node);\n}\n`,\n};\n\nexport default [JS, HTML, TS];\n","import { getParameters } from 'codesandbox-import-utils/lib/api/define';\n\nexport default function createOverlay(modules) {\n  const normalized = Object.keys(modules).reduce(\n    (prev, next) => ({\n      ...prev,\n      [next.replace('/', '')]: {\n        content: modules[next].code,\n        isBinary: false,\n      },\n    }),\n    {}\n  );\n\n  const parameters = getParameters({ files: normalized });\n\n  return new Promise<void>(resolve => {\n    const iframe = document.createElement('iframe');\n\n    iframe.setAttribute(\n      'style',\n      `transition: 0.3s ease background-color; position: fixed; bottom: 8px; right: 8px; height: 40px; width: 196px; background-color: rgba(0, 0, 0, 0.6); border-radius: 4px; border: 0; outline: 0; z-index: 214748366;`\n    );\n    iframe.setAttribute(\n      'onmouseover',\n      \"this.style.backgroundColor='rgba(0, 0, 0, 0.7)';\"\n    );\n    iframe.setAttribute(\n      'onmouseout',\n      \"this.style.backgroundColor='rgba(0, 0, 0, 0.6)';\"\n    );\n\n    iframe.onload = () => {\n      iframe.contentDocument.body.innerHTML = `\n        <form\n          action=\"https://codesandbox.io/api/v1/sandboxes/define\"\n          method=\"POST\"\n          target=\"_blank\"\n          style=\"cursor:pointer;\"\n        >\n        <input\n          type=\"hidden\"\n          name=\"parameters\"\n          value=\"${parameters}\"\n        />\n          <div style=\"display:flex;align-items:center\" onclick=\"javascript:document.forms[0].submit();\">\n            <svg style=\"width:24px;height:24px;margin-right:8px;\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"1024px\"\n              height=\"1024px\" viewBox=\"0 0 1024 1024\" enable-background=\"new 0 0 1024 1024\" xml:space=\"preserve\">\n              <g id=\"Layer_1\">\n                <polyline\n                  fill=\"#FFFFFF\"\n                  points=\"719.001,851 719.001,639.848 902,533.802 902,745.267 719.001,851\"\n                />\n                <polyline\n                  fill=\"#FFFFFF\"\n                  points=\"302.082,643.438 122.167,539.135 122.167,747.741 302.082,852.573 302.082,643.438\"\n                />\n                <polyline\n                  fill=\"#FFFFFF\"\n                  points=\"511.982,275.795 694.939,169.633 512.06,63 328.436,169.987 511.982,275.795\"\n                />\n              </g>\n              <g id=\"Layer_2\">\n                <polyline\n                  fill=\"none\"\n                  stroke=\"#FFFFFF\"\n                  stroke-width=\"80\"\n                  stroke-miterlimit=\"10\"\n                  points=\"899,287.833 509,513 509,963\"\n                />\n                <line\n                  fill=\"none\"\n                  stroke=\"#FFFFFF\"\n                  stroke-width=\"80\"\n                  stroke-miterlimit=\"10\"\n                  x1=\"122.167\"\n                  y1=\"289\"\n                  x2=\"511.5\"\n                  y2=\"513\"\n                />\n                <polygon\n                  fill=\"none\"\n                  stroke=\"#FFFFFF\"\n                  stroke-width=\"80\"\n                  stroke-miterlimit=\"10\"\n                  points=\"121,739.083 510.917,963.042 901,738.333 901,288 511,62 121,289\"\n                />\n              </g>\n          </svg>\n          <div style=\"font-size:.875rem; font-weight: 300; color: white; font-family: sans-serif\">Open in CodeSandbox</div>\n        </div>\n      </form>\n      `;\n\n      resolve();\n    };\n\n    document.body.appendChild(iframe);\n  });\n}\n","const wrapper = (id: string, css: string, webpackHMREnabled = false) => `\nfunction createStyleNode(id, content) {\n  var styleNode =\n    document.getElementById(id) || document.createElement('style');\n\n  styleNode.setAttribute('id', id);\n  styleNode.type = 'text/css';\n  if (styleNode.styleSheet) {\n    styleNode.styleSheet.cssText = content;\n  } else {\n    styleNode.innerHTML = '';\n    styleNode.appendChild(document.createTextNode(content));\n  }\n  document.head.appendChild(styleNode);\n}\n\ncreateStyleNode(\n  ${JSON.stringify(id)},\n  ${JSON.stringify(css)}\n);\n\n${webpackHMREnabled ? 'module.hot.accept()' : ''}\n`;\n\nexport default function (\n  id: string,\n  css?: string,\n  webpackHMREnabled?: boolean\n) {\n  const result = wrapper(id, css || '', webpackHMREnabled);\n  return result;\n}\n","export default function toDefinition(classes: string[]): string {\n  return Object.keys(classes).reduce(\n    (previous, className) => previous + `export const ${className}: string;\\n`,\n    ''\n  );\n}\n","import { LoaderContext } from 'sandpack-core';\n\nlet core = null;\n\nexport default async (code: string, loaderContext: LoaderContext) => {\n  if (!core) {\n    const Core = await import(\n      /* webpackChunkName: 'css-modules-loader-core' */ 'css-modules-loader-core'\n    ).then(x => x.default);\n\n    core = new Core();\n  }\n\n  const depPromises = [];\n  const { injectableSource, exportTokens } = await core.load(\n    code,\n    loaderContext.path,\n    (dependencyPath: string) => {\n      depPromises.push(loaderContext.addDependency(dependencyPath));\n\n      const tModule = loaderContext.resolveTranspiledModule(dependencyPath);\n\n      return tModule.source ? tModule.source.compiledCode : tModule.module.code;\n    }\n  );\n\n  await Promise.all(depPromises);\n\n  return {\n    css: injectableSource,\n    exportTokens,\n  };\n};\n","import { dispatch } from 'codesandbox-api';\nimport { Transpiler, LoaderContext } from 'sandpack-core';\n\nimport insertCss from './utils/insert-css';\nimport toDefinition from './utils/to-definition';\nimport getModules from './get-modules';\n\nconst getStyleId = (id: string) => id + '-css'; // eslint-disable-line\n\nclass StyleTranspiler extends Transpiler {\n  constructor() {\n    super('style-loader');\n    this.cacheable = false;\n  }\n\n  cleanModule(loaderContext: LoaderContext) {\n    const id = getStyleId(loaderContext._module.getId());\n    const element = document.getElementById(id);\n\n    if (element != null && element.parentNode != null) {\n      element.parentNode.removeChild(element);\n    }\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    const id = getStyleId(loaderContext._module.getId());\n    const { path } = loaderContext;\n\n    if (loaderContext.options.module) {\n      return getModules(code, loaderContext).then(({ css, exportTokens }) => {\n        let result = insertCss(id, css, loaderContext.options.hmrEnabled);\n        result += `\\nmodule.exports=${JSON.stringify(exportTokens)};`;\n\n        dispatch({\n          type: 'add-extra-lib',\n          path,\n          code: toDefinition(exportTokens),\n        });\n        return Promise.resolve({ transpiledCode: result });\n      });\n    }\n\n    const result = insertCss(id, code, loaderContext.options.hmrEnabled);\n    return Promise.resolve({ transpiledCode: result });\n  }\n}\n\nconst transpiler = new StyleTranspiler();\n\nexport { StyleTranspiler };\n\nexport default transpiler;\n","export class FileError extends Error {\n}\nexport function buildWorkerError(error) {\n    return {\n        name: error.name,\n        message: error.message,\n        fileName: error.fileName,\n        lineNumber: error.lineNumber,\n        columnNumber: error.columnNumber,\n    };\n}\nexport function parseWorkerError(error) {\n    const reconstructedError = new FileError(error.message);\n    reconstructedError.name = error.name;\n    reconstructedError.columnNumber = error.columnNumber;\n    reconstructedError.fileName = error.fileName;\n    reconstructedError.lineNumber = error.lineNumber;\n    return reconstructedError;\n}\n","import _debug from '@codesandbox/common/lib/utils/debug';\nimport {\n  buildWorkerError,\n  parseWorkerError,\n} from '../../../../../../sandpack-core/lib/transpiler/utils/worker-error-handler';\n\nconst debug = _debug('cs:compiler:worker-manager');\n\nenum WorkerStatus {\n  Initializing,\n  Ready,\n}\n\ntype WorkerFactoryType = () => Worker | Promise<Worker>;\ntype RegisteredFunc = (data: any) => any | Promise<any>;\n\ninterface WorkerCall {\n  method: string;\n  data: any;\n  workerId?: number;\n  resolve: (result: Promise<any> | any) => void;\n  reject: (error: any) => void;\n}\n\ninterface WorkerData {\n  workerId: number;\n  worker: Worker;\n  status: WorkerStatus;\n  activeCalls: number;\n  startedAt: number;\n}\n\nexport interface WorkerManagerOptions {\n  hasFS?: boolean;\n  preload?: boolean;\n  maxConcurrency?: number;\n  maxWorkerCount?: number;\n}\n\nexport class WorkerManager {\n  firstLoadPromise: Promise<void> | null = null;\n  pendingCalls: Array<WorkerCall> = [];\n  activeCalls: Map<number, WorkerCall> = new Map();\n  callId: number = 0;\n  functions: Map<string, RegisteredFunc> = new Map();\n\n  // Options\n  name: string;\n  workerFactory: WorkerFactoryType;\n  maxWorkerCount: number;\n  hasFS: boolean;\n  maxConcurrency: number;\n\n  // Worker farm state\n  workerCount: number = 0;\n  workers: Map<number, WorkerData> = new Map();\n\n  constructor(\n    name: string,\n    workerFactory: WorkerFactoryType,\n    options: WorkerManagerOptions = {}\n  ) {\n    const {\n      hasFS = false,\n      preload = false,\n      maxConcurrency = 25,\n      maxWorkerCount = navigator.hardwareConcurrency,\n    } = options;\n\n    this.name = name;\n    this.maxWorkerCount = maxWorkerCount;\n    this.workerFactory = workerFactory;\n    this.maxConcurrency = maxConcurrency;\n    this.hasFS = hasFS;\n\n    if (preload) {\n      this.initialize();\n    }\n  }\n\n  initialize() {\n    for (let i = this.workerCount; i < this.maxWorkerCount; i++) {\n      const p = this.loadWorker().catch(console.error);\n      if (!this.firstLoadPromise) {\n        this.firstLoadPromise = p;\n      }\n    }\n  }\n\n  dispose() {\n    this.workers.forEach(w => w.worker.terminate());\n    this.workers = new Map();\n    this.workerCount = 0;\n  }\n\n  handleWorkerReady(workerData: WorkerData) {\n    debug(\n      `Loaded '${this.name}' worker in ${Date.now() - workerData.startedAt}ms`\n    );\n    workerData.status = WorkerStatus.Ready;\n    this.executeRemainingTasks();\n  }\n\n  handleMessage(workerData: WorkerData, msg: any): void {\n    switch (msg.type) {\n      case 'ready':\n        this.handleWorkerReady(workerData);\n        break;\n      case 'request':\n        this.handleCallRequest(workerData.worker, msg);\n        break;\n      case 'response':\n        this.handleCallResponse(msg);\n        break;\n    }\n  }\n\n  async loadWorker(): Promise<void> {\n    if (this.workerCount >= this.maxWorkerCount) {\n      return Promise.resolve();\n    }\n\n    if (this.firstLoadPromise) {\n      await this.firstLoadPromise;\n    }\n\n    const workerId = this.workerCount++;\n    const startedAt = Date.now();\n    const worker = await this.workerFactory();\n    return new Promise((resolve, reject) => {\n      try {\n        const workerdata: WorkerData = {\n          workerId,\n          status: WorkerStatus.Initializing,\n          startedAt,\n          activeCalls: 0,\n          worker,\n        };\n        this.workers.set(workerId, workerdata);\n        worker.addEventListener('message', evt => {\n          const data = evt.data;\n          if (typeof data === 'object') {\n            if (data.codesandbox) {\n              if (data.type === 'worker_started') {\n                resolve();\n              } else {\n                this.handleMessage(workerdata, data);\n              }\n            } else if (!data.browserfsMessage)\n              console.warn(\n                `Invalid message from worker ${this.name}#${workerId}`,\n                data\n              );\n          }\n        });\n\n        // TODO: Move this to onReady, not sure why that doesn't work...\n        if (this.hasFS) {\n          // Register file system that syncs with filesystem in manager\n          // @ts-ignore\n          BrowserFS.FileSystem.WorkerFS.attachRemoteListener(workerdata.worker);\n          workerdata.worker.postMessage({\n            type: 'initialize-fs',\n            codesandbox: true,\n          });\n        }\n\n        worker.postMessage({ type: 'ping', codesandbox: true });\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  executeRemainingTasks() {\n    if (!this.pendingCalls.length) {\n      return;\n    }\n\n    this.initialize();\n\n    for (const [workerId, worker] of this.workers) {\n      if (worker.status === WorkerStatus.Ready) {\n        while (worker.activeCalls < this.maxConcurrency) {\n          const pendingCall = this.pendingCalls.shift();\n          if (!pendingCall) {\n            break;\n          }\n\n          const idx = this.callId++;\n          const message = {\n            type: 'request',\n            codesandbox: true,\n            idx,\n            method: pendingCall.method,\n            data: pendingCall.data,\n          };\n\n          this.activeCalls.set(idx, { ...pendingCall, workerId });\n          worker.activeCalls += 1;\n\n          worker.worker.postMessage(message);\n        }\n      }\n    }\n  }\n\n  registerFunction(method: string, fn: RegisteredFunc) {\n    this.functions.set(method, fn);\n  }\n\n  handleCallResponse(msg: any) {\n    const foundCall = this.activeCalls.get(msg.idx);\n    if (foundCall) {\n      if (!msg.isError) {\n        foundCall.resolve(msg.data);\n      } else {\n        foundCall.reject(parseWorkerError(msg.data));\n      }\n\n      if (foundCall.workerId != null) {\n        const foundWorker = this.workers.get(foundCall.workerId);\n        if (!foundWorker) {\n          console.warn('Worker not found for call:', foundCall);\n        } else {\n          foundWorker.activeCalls -= 1;\n        }\n\n        this.executeRemainingTasks();\n      }\n    } else {\n      console.warn('Could not find call for:', msg);\n    }\n  }\n\n  async handleCallRequest(worker: Worker, msg: any) {\n    try {\n      const fn = this.functions.get(msg.method);\n      if (!fn) {\n        throw new Error(\n          `Could not find registered child function for call \"${msg.method}\"`\n        );\n      }\n      const result = await fn(msg.data);\n      worker.postMessage({\n        type: 'response',\n        codesandbox: true,\n        idx: msg.idx,\n        data: result,\n      });\n    } catch (err) {\n      worker.postMessage({\n        type: 'response',\n        codesandbox: true,\n        idx: msg.idx,\n        isError: true,\n        data: buildWorkerError(err),\n      });\n    }\n  }\n\n  callFn({ method, data }: { method: string; data: any }): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.pendingCalls.push({\n        method,\n        data,\n        resolve,\n        reject,\n      });\n\n      this.executeRemainingTasks();\n    });\n  }\n}\n","import { LoaderContext, Transpiler, Manager } from 'sandpack-core';\nimport { dispatch, actions } from 'codesandbox-api';\n\nimport { WorkerManager, WorkerManagerOptions } from './worker-manager';\n\n// A transpiler that uses web workers for concurrent transpilation on multiple threads\nexport abstract class WorkerTranspiler extends Transpiler {\n  public workerManager: WorkerManager;\n\n  loaderContextId: number = 0;\n  loaderContexts: Map<number, LoaderContext> = new Map();\n\n  constructor(\n    name: string,\n    workerFactory: () => Worker,\n    options: WorkerManagerOptions\n  ) {\n    super(name);\n    this.workerManager = new WorkerManager(name, workerFactory, options);\n    this.workerManager.registerFunction('resolve-fs', data => {\n      const loaderContext = this.loaderContexts.get(data.loaderContextId);\n      if (!loaderContext) {\n        console.warn('Could not find loader context for resolve-fs', data);\n        throw new Error('Could not find loader context');\n      }\n\n      const modules = loaderContext.getModules();\n      return { modules };\n    });\n    this.workerManager.registerFunction(\n      'resolve-async-transpiled-module',\n      async data => {\n        const loaderContext = this.loaderContexts.get(data.loaderContextId);\n        if (!loaderContext) {\n          console.warn(\n            'Could not find loader context for resolve-async-transpiled-module',\n            data\n          );\n          throw new Error('Could not find loader context');\n        }\n\n        try {\n          const tModule = await loaderContext.resolveTranspiledModuleAsync(\n            data.path,\n            data.options\n          );\n          return {\n            found: true,\n            path: tModule.module.path,\n            code: tModule.module.code,\n          };\n        } catch (err) {\n          return {\n            found: false,\n          };\n        }\n      }\n    );\n    this.workerManager.registerFunction('add-dependency', async data => {\n      const loaderContext = this.loaderContexts.get(data.loaderContextId);\n      if (!loaderContext) {\n        console.warn('Could not find loader context for add-dependency', data);\n        throw new Error('Could not find loader context');\n      }\n\n      if (data.isGlob) {\n        loaderContext.addDependenciesInDirectory(data.path, {\n          isAbsolute: data.isAbsolute,\n          isEntry: data.isEntry,\n        });\n      } else {\n        await loaderContext.addDependency(data.path, {\n          isAbsolute: data.isAbsolute,\n          isEntry: data.isEntry,\n        });\n      }\n    });\n    this.workerManager.registerFunction(\n      'add-transpilation-dependency',\n      async data => {\n        const loaderContext = this.loaderContexts.get(data.loaderContextId);\n        if (!loaderContext) {\n          console.warn(\n            'Could not find loader context for add-transpilation-dependency',\n            data\n          );\n          throw new Error('Could not find loader context');\n        }\n\n        await loaderContext.addTranspilationDependency(data.path, {\n          isAbsolute: data.isAbsolute,\n          isEntry: data.isEntry,\n        });\n      }\n    );\n    this.workerManager.registerFunction('clear-warnings', data => {\n      dispatch(actions.correction.clear(data.path, data.source));\n    });\n    this.workerManager.registerFunction('warning', data => {\n      const loaderContext = this.loaderContexts.get(data.loaderContextId);\n      if (!loaderContext) {\n        console.warn('Could not find loader context for warning', data);\n        throw new Error('Could not find loader context');\n      }\n      loaderContext.emitWarning(data.warning);\n    });\n  }\n\n  initialize() {\n    this.workerManager.initialize();\n  }\n\n  dispose() {\n    this.workerManager.dispose();\n  }\n\n  registerLoaderContext(loaderContext: LoaderContext): number {\n    const cid = this.loaderContextId++;\n    this.loaderContexts.set(cid, loaderContext);\n    return cid;\n  }\n\n  cleanupLoaderContext(loaderContextId: number): void {\n    this.loaderContexts.delete(loaderContextId);\n  }\n\n  async queueCompileFn(data: any, loaderContext: LoaderContext) {\n    const loaderContextId = this.registerLoaderContext(loaderContext);\n    const result = await this.workerManager.callFn({\n      method: 'compile',\n      data: {\n        ...data,\n        loaderContextId,\n      },\n    });\n    this.cleanupLoaderContext(loaderContextId);\n    return result;\n  }\n\n  async getTranspilerContext(manager: Manager) {\n    return super.getTranspilerContext(manager).then(x => ({\n      ...x,\n      worker: true,\n      // TODO: Actually see where this is used and update where applicable...\n      hasFS: this.workerManager.hasFS,\n      workerCount: this.workerManager.workerCount,\n      initialized: Boolean(this.workerManager.workers.size),\n    }));\n  }\n}\n\nexport default WorkerTranspiler;\n","const DEFAULT_BABEL_CONFIG = {\n  presets: ['env', 'react'],\n  plugins: [],\n};\n\n/**\n * Parses the .babelrc if it exists, if it doesn't it will return a default config\n */\nexport default function getBabelConfig(\n  config: Object | undefined,\n  loaderOptions: { disableCodeSandboxPlugins?: boolean },\n  path: string,\n  isV7: boolean = false\n) {\n  const resolvedConfig = config || DEFAULT_BABEL_CONFIG;\n\n  if (loaderOptions.disableCodeSandboxPlugins) {\n    return resolvedConfig;\n  }\n\n  const finalConfig: Partial<{\n    sourceMaps: string;\n    sourceFileName: string;\n    filename: string;\n    plugins: string[];\n    presets: string[];\n  }> = {\n    ...resolvedConfig,\n    sourceMaps: 'inline',\n    sourceFileName: path,\n    filename: path,\n  };\n\n  const commonjsPluginName = isV7\n    ? 'transform-modules-commonjs'\n    : 'transform-es2015-modules-commonjs';\n\n  if (finalConfig.plugins) {\n    if (finalConfig.plugins.indexOf(commonjsPluginName) === -1) {\n      finalConfig.plugins = [...finalConfig.plugins, commonjsPluginName];\n    }\n  } else {\n    finalConfig.plugins = [commonjsPluginName];\n  }\n\n  return finalConfig;\n}\n","export const Syntax = {\n  ArrayExpression: 'ArrayExpression' as 'ArrayExpression',\n  ArrayPattern: 'ArrayPattern' as 'ArrayPattern',\n  ArrowFunctionExpression: 'ArrowFunctionExpression' as 'ArrowFunctionExpression',\n  AssignmentExpression: 'AssignmentExpression' as 'AssignmentExpression',\n  AssignmentPattern: 'AssignmentPattern' as 'AssignmentPattern',\n  AwaitExpression: 'AwaitExpression' as 'AwaitExpression',\n  BinaryExpression: 'BinaryExpression' as 'BinaryExpression',\n  BlockStatement: 'BlockStatement' as 'BlockStatement',\n  BreakStatement: 'BreakStatement' as 'BreakStatement',\n  CallExpression: 'CallExpression' as 'CallExpression',\n  CatchClause: 'CatchClause' as 'CatchClause',\n  ClassBody: 'ClassBody' as 'ClassBody',\n  ClassDeclaration: 'ClassDeclaration' as 'ClassDeclaration',\n  ClassExpression: 'ClassExpression' as 'ClassExpression',\n  ConditionalExpression: 'ConditionalExpression' as 'ConditionalExpression',\n  ContinueStatement: 'ContinueStatement' as 'ContinueStatement',\n  DebuggerStatement: 'DebuggerStatement' as 'DebuggerStatement',\n  DoWhileStatement: 'DoWhileStatement' as 'DoWhileStatement',\n  EmptyStatement: 'EmptyStatement' as 'EmptyStatement',\n  ExportAllDeclaration: 'ExportAllDeclaration' as 'ExportAllDeclaration',\n  ExportDefaultDeclaration: 'ExportDefaultDeclaration' as 'ExportDefaultDeclaration',\n  ExportNamedDeclaration: 'ExportNamedDeclaration' as 'ExportNamedDeclaration',\n  ExportSpecifier: 'ExportSpecifier' as 'ExportSpecifier',\n  ExpressionStatement: 'ExpressionStatement' as 'ExpressionStatement',\n  ForInStatement: 'ForInStatement' as 'ForInStatement',\n  ForOfStatement: 'ForOfStatement' as 'ForOfStatement',\n  ForStatement: 'ForStatement' as 'ForStatement',\n  FunctionDeclaration: 'FunctionDeclaration' as 'FunctionDeclaration',\n  FunctionExpression: 'FunctionExpression' as 'FunctionExpression',\n  Identifier: 'Identifier' as 'Identifier',\n  IfStatement: 'IfStatement' as 'IfStatement',\n  Import: 'Import' as 'Import',\n  ImportDeclaration: 'ImportDeclaration' as 'ImportDeclaration',\n  ImportDefaultSpecifier: 'ImportDefaultSpecifier' as 'ImportDefaultSpecifier',\n  ImportNamespaceSpecifier: 'ImportNamespaceSpecifier' as 'ImportNamespaceSpecifier',\n  ImportSpecifier: 'ImportSpecifier' as 'ImportSpecifier',\n  ImportExpression: 'ImportExpression' as 'ImportExpression',\n  LabeledStatement: 'LabeledStatement' as 'LabeledStatement',\n  Literal: 'Literal' as 'Literal',\n  LogicalExpression: 'LogicalExpression' as 'LogicalExpression',\n  MemberExpression: 'MemberExpression' as 'MemberExpression',\n  MetaProperty: 'MetaProperty' as 'MetaProperty',\n  MethodDefinition: 'MethodDefinition' as 'MethodDefinition',\n  NewExpression: 'NewExpression' as 'NewExpression',\n  ObjectExpression: 'ObjectExpression' as 'ObjectExpression',\n  ObjectPattern: 'ObjectPattern' as 'ObjectPattern',\n  Program: 'Program' as 'Program',\n  Property: 'Property' as 'Property',\n  RestElement: 'RestElement' as 'RestElement',\n  ReturnStatement: 'ReturnStatement' as 'ReturnStatement',\n  SequenceExpression: 'SequenceExpression' as 'SequenceExpression',\n  SpreadElement: 'SpreadElement' as 'SpreadElement',\n  Super: 'Super' as 'Super',\n  SwitchCase: 'SwitchCase' as 'SwitchCase',\n  SwitchStatement: 'SwitchStatement' as 'SwitchStatement',\n  TaggedTemplateExpression: 'TaggedTemplateExpression' as 'TaggedTemplateExpression',\n  TemplateElement: 'TemplateElement' as 'TemplateElement',\n  TemplateLiteral: 'TemplateLiteral' as 'TemplateLiteral',\n  ThisExpression: 'ThisExpression' as 'ThisExpression',\n  ThrowStatement: 'ThrowStatement' as 'ThrowStatement',\n  TryStatement: 'TryStatement' as 'TryStatement',\n  UnaryExpression: 'UnaryExpression' as 'UnaryExpression',\n  UpdateExpression: 'UpdateExpression' as 'UpdateExpression',\n  VariableDeclaration: 'VariableDeclaration' as 'VariableDeclaration',\n  VariableDeclarator: 'VariableDeclarator' as 'VariableDeclarator',\n  WhileStatement: 'WhileStatement' as 'WhileStatement',\n  WithStatement: 'WithStatement' as 'WithStatement',\n  YieldExpression: 'YieldExpression' as 'YieldExpression',\n  JSXElement: 'JSXElement' as 'JSXElement',\n  ExportNamespaceSpecifier: 'ExportNamespaceSpecifier' as 'ExportNamespaceSpecifier',\n};\n","import { walk } from 'estree-walker';\nimport isESModule from 'sandbox/eval/utils/is-es-module';\nimport { Syntax as n } from './syntax';\nimport { ESTreeAST } from './utils';\n\nconst ESM_TYPES: Set<string> = new Set([\n  n.ImportDeclaration,\n  n.ExportAllDeclaration,\n  n.ExportDefaultDeclaration,\n  n.ExportNamedDeclaration,\n  n.ExportSpecifier,\n]);\n\nexport interface SyntaxInfo {\n  jsx: boolean;\n  esm: boolean;\n  dynamicImports: boolean;\n}\n\nexport function getSyntaxInfoFromAst(ast: ESTreeAST): SyntaxInfo {\n  const syntaxInfo: SyntaxInfo = {\n    jsx: false,\n    esm: false,\n    dynamicImports: false,\n  };\n\n  walk(ast.program, {\n    enter(node) {\n      // TODO: Figure out if we can exit the walk entirely\n      // Just skip everything if we already know it's esm and jsx\n      if (syntaxInfo.jsx && syntaxInfo.esm && syntaxInfo.dynamicImports) {\n        this.skip();\n        return;\n      }\n\n      if (ESM_TYPES.has(node.type)) {\n        syntaxInfo.esm = true;\n        // Imports cannot contain JSX\n        if (node.type === n.ImportDeclaration) {\n          this.skip();\n        }\n        return;\n      }\n\n      if (node.type === n.JSXElement) {\n        syntaxInfo.jsx = true;\n        this.skip();\n      }\n\n      if (node.type === n.ImportExpression) {\n        syntaxInfo.dynamicImports = true;\n        this.skip();\n      }\n    },\n  });\n\n  return syntaxInfo;\n}\n\nconst JSXSyntax = /\\n(.*?)<[A-z](.|\\n)*?\\/?>/;\n\nfunction checkComment(match: string[]) {\n  const startOfLine = match[1];\n\n  // If it's in a comment or string, we're extremely aggressive here because\n  // transpiling is absolutely our last resort.\n  if (\n    startOfLine.indexOf('//') > -1 ||\n    startOfLine.indexOf('*') > -1 ||\n    startOfLine.indexOf(\"'\") > -1 ||\n    startOfLine.indexOf('\"') > -1 ||\n    startOfLine.indexOf('`') > -1\n  ) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function getSyntaxInfoFromCode(code: string, path: string): SyntaxInfo {\n  // Use getters so we can evaluate lazily\n  const syntax: SyntaxInfo = {\n    get jsx() {\n      const jsxMatch = code.match(JSXSyntax);\n\n      return jsxMatch && checkComment(jsxMatch);\n    },\n    get esm() {\n      return isESModule(code);\n    },\n    get dynamicImports() {\n      return code.includes('import(')\n    }\n  };\n\n  if (path.endsWith('.min.js')) {\n    // This needs no transpiling and often fools our JSX check with <a etc...\n    return {\n      jsx: false,\n      esm: false,\n      dynamicImports: false,\n    };\n  }\n\n  return syntax;\n}\n","import { ESTree } from 'meriyah';\nimport { Syntax as n } from './syntax';\n\nexport function generateRequireStatement(varName: string, requirePath: string) {\n  // Generates `var $varName = require('$requirePath');\n  return {\n    type: n.VariableDeclaration,\n    declarations: [\n      {\n        type: n.VariableDeclarator,\n        id: {\n          type: n.Identifier,\n          name: varName,\n        },\n        init: {\n          type: n.CallExpression,\n          callee: {\n            type: n.Identifier,\n            name: 'require',\n          },\n          arguments: [\n            {\n              type: n.Literal,\n              value: requirePath,\n            },\n          ],\n        },\n      },\n    ],\n    kind: 'var' as 'var',\n  };\n}\n\n/**\n * Generates:\n * ```js\n * Object.keys($varName).forEach(function (key) {\n *   if (key === \"default\" || key === \"__esModule\") return;\n *   if (Object.prototype.hasOwnProperty.call(exports, key)) return;\n *   Object.defineProperty(exports, key, {\n *     enumerable: true,\n *     configurable: true,\n *     get: function get() {\n *       return $varName[key];\n *     }\n *   });\n * });\n * ```\n */\nexport function generateAllExportsIterator(varName: string) {\n  return {\n    type: n.ExpressionStatement,\n    expression: {\n      type: n.CallExpression,\n      callee: {\n        type: n.MemberExpression,\n        computed: false,\n        object: {\n          type: n.CallExpression,\n          callee: {\n            type: n.MemberExpression,\n            computed: false,\n            object: {\n              type: n.Identifier,\n              name: 'Object',\n            },\n            property: {\n              type: n.Identifier,\n              name: 'keys',\n            },\n          },\n          arguments: [\n            {\n              type: n.Identifier,\n              name: varName,\n            },\n          ],\n        },\n        property: {\n          type: n.Identifier,\n          name: 'forEach',\n        },\n      },\n      arguments: [\n        {\n          type: n.FunctionExpression,\n          id: null,\n          params: [\n            {\n              type: n.Identifier,\n              name: 'key',\n            },\n          ],\n          body: {\n            type: n.BlockStatement,\n            body: [\n              {\n                type: n.IfStatement,\n                test: {\n                  type: n.LogicalExpression,\n                  operator: '||' as '||',\n                  left: {\n                    type: n.BinaryExpression,\n                    operator: '===' as '===',\n                    left: {\n                      type: n.Identifier,\n                      name: 'key',\n                    },\n                    right: {\n                      type: n.Literal,\n                      value: 'default',\n                      raw: '\"default\"',\n                    },\n                  },\n                  right: {\n                    type: n.BinaryExpression,\n                    operator: '===' as '===',\n                    left: {\n                      type: n.Identifier,\n                      name: 'key',\n                    },\n                    right: {\n                      type: n.Literal,\n                      value: '__esModule',\n                      raw: '\"__esModule\"',\n                    },\n                  },\n                },\n                consequent: {\n                  type: n.ReturnStatement,\n                  argument: null,\n                },\n                alternate: null,\n              },\n              {\n                type: n.IfStatement,\n                test: {\n                  type: n.CallExpression,\n                  callee: {\n                    type: n.MemberExpression,\n                    object: {\n                      type: n.MemberExpression,\n                      object: {\n                        type: n.MemberExpression,\n                        object: {\n                          type: n.Identifier,\n                          name: 'Object',\n                        },\n                        computed: false,\n                        property: {\n                          type: n.Identifier,\n                          name: 'prototype',\n                        },\n                      },\n                      computed: false,\n                      property: {\n                        type: n.Identifier,\n                        name: 'hasOwnProperty',\n                      },\n                    },\n                    computed: false,\n                    property: {\n                      type: n.Identifier,\n                      name: 'call',\n                    },\n                  },\n                  arguments: [\n                    {\n                      type: n.Identifier,\n                      name: 'exports',\n                    },\n                    {\n                      type: n.Identifier,\n                      name: 'key',\n                    },\n                  ],\n                },\n                consequent: {\n                  type: n.ReturnStatement,\n                  argument: null,\n                },\n                alternate: null,\n              },\n              generateExportGetter(\n                { type: n.Identifier, name: 'key' },\n                {\n                  type: n.MemberExpression,\n                  computed: true,\n                  object: {\n                    type: n.Identifier,\n                    name: varName,\n                  },\n                  property: {\n                    type: n.Identifier,\n                    name: 'key',\n                  },\n                }\n              ),\n            ],\n          },\n          generator: false,\n          expression: false,\n          async: false,\n        },\n      ],\n    },\n  };\n}\n\n/**\n * exports.$exportName = $varName.$exportName;\n */\nexport function generateExportStatement(varName: string, exportName: string) {\n  return {\n    type: n.ExpressionStatement,\n    expression: {\n      type: n.AssignmentExpression,\n      operator: '=' as '=',\n      left: {\n        type: n.MemberExpression,\n        computed: false,\n        object: {\n          type: n.Identifier,\n          name: 'exports',\n        },\n        property: {\n          type: n.Identifier,\n          name: exportName,\n        },\n      },\n      right: {\n        type: n.Identifier,\n        name: varName,\n      },\n    },\n  };\n}\n\n/**\n * Object.defineProperty(exports, { __esModule: true })\n */\nexport function generateEsModuleSpecifier() {\n  return {\n    type: n.ExpressionStatement,\n    expression: {\n      type: n.CallExpression,\n      callee: {\n        type: n.MemberExpression,\n        computed: false,\n        object: {\n          type: n.Identifier,\n          name: 'Object',\n        },\n        property: {\n          type: n.Identifier,\n          name: 'defineProperty',\n        },\n      },\n      arguments: [\n        {\n          type: n.Identifier,\n          name: 'exports',\n        },\n        {\n          type: n.Literal,\n          value: '__esModule',\n          raw: '\"__esModule\"',\n        },\n        {\n          type: n.ObjectExpression,\n          properties: [\n            {\n              type: n.Property,\n              key: {\n                type: n.Identifier,\n                name: 'value',\n              },\n              computed: false,\n              value: {\n                type: n.Literal,\n                value: true,\n                raw: 'true',\n              },\n              kind: 'init' as 'init',\n              method: false,\n              shorthand: false,\n            },\n          ],\n        },\n      ],\n    },\n  };\n}\n\n/**\n * Object.defineProperty(exports, $exportName, {\n *   enumerable: true,\n *   configurable: true,\n *   get: function get() {\n *     return $localName;\n *   }\n * })\n */\nexport function generateExportGetter(\n  exportObj:\n    | { type: 'Identifier'; name: string }\n    | { type: 'Literal'; value: string },\n  local: ESTree.Expression\n) {\n  return {\n    type: n.ExpressionStatement,\n    expression: {\n      type: n.CallExpression,\n      callee: {\n        type: n.MemberExpression,\n        computed: false,\n        object: {\n          type: n.Identifier,\n          name: 'Object',\n        },\n        property: {\n          type: n.Identifier,\n          name: 'defineProperty',\n        },\n      },\n      arguments: [\n        {\n          type: n.Identifier,\n          name: 'exports',\n        },\n        exportObj,\n        {\n          type: n.ObjectExpression,\n          properties: [\n            {\n              type: n.Property,\n              key: {\n                type: n.Identifier,\n                name: 'enumerable',\n              },\n              computed: false,\n              value: {\n                type: n.Literal,\n                value: true,\n                raw: 'true',\n              },\n              kind: 'init' as 'init',\n              method: false,\n              shorthand: false,\n            },\n            {\n              type: n.Property,\n              key: {\n                type: n.Identifier,\n                name: 'configurable',\n              },\n              computed: false,\n              value: {\n                type: n.Literal,\n                value: true,\n                raw: 'true',\n              },\n              kind: 'init' as 'init',\n              method: false,\n              shorthand: false,\n            },\n            {\n              type: n.Property,\n              key: {\n                type: n.Identifier,\n                name: 'get',\n              },\n              computed: false,\n              value: {\n                type: n.FunctionExpression,\n                id: {\n                  type: n.Identifier,\n                  name: '$csbGet',\n                },\n                generator: false,\n                async: false,\n                params: [],\n                body: {\n                  type: n.BlockStatement,\n                  body: [\n                    {\n                      type: n.ReturnStatement,\n                      argument: local,\n                    },\n                  ],\n                },\n              },\n              kind: 'init' as 'init',\n              method: false,\n              shorthand: false,\n            },\n          ],\n        },\n      ],\n    },\n  };\n}\n\nexport function generateInteropRequire() {\n  return {\n    type: n.FunctionDeclaration,\n    params: [\n      {\n        type: n.Identifier,\n        name: 'obj' as 'obj',\n      },\n    ],\n    body: {\n      type: n.BlockStatement,\n      body: [\n        {\n          type: n.ReturnStatement,\n          argument: {\n            type: n.ConditionalExpression,\n            test: {\n              type: n.LogicalExpression,\n              left: {\n                type: n.Identifier,\n                name: 'obj',\n              },\n              right: {\n                type: n.MemberExpression,\n                object: {\n                  type: n.Identifier,\n                  name: 'obj',\n                },\n                computed: false,\n                property: {\n                  type: n.Identifier,\n                  name: '__esModule',\n                },\n              },\n              operator: '&&',\n            },\n            consequent: {\n              type: n.Identifier,\n              name: 'obj',\n            },\n            alternate: {\n              type: n.ObjectExpression,\n              properties: [\n                {\n                  type: n.Property,\n                  key: {\n                    type: n.Identifier,\n                    name: 'default',\n                  },\n                  value: {\n                    type: n.Identifier,\n                    name: 'obj',\n                  },\n                  kind: 'init' as 'init',\n                  computed: false,\n                  method: false,\n                  shorthand: false,\n                },\n              ],\n            },\n          },\n        },\n      ],\n    },\n    async: false,\n    generator: false,\n    id: {\n      type: n.Identifier,\n      name: '$_csb__interopRequireDefault',\n    },\n  };\n}\n\nexport function generateInteropRequireExpression(\n  argument: ESTree.Expression,\n  localName: string\n) {\n  return {\n    type: n.VariableDeclaration,\n    kind: 'var' as 'var',\n    declarations: [\n      {\n        type: n.VariableDeclarator,\n        init: {\n          type: n.CallExpression,\n          callee: {\n            type: n.Identifier,\n            name: '$_csb__interopRequireDefault',\n          },\n          arguments: [argument],\n        },\n        id: {\n          type: n.Identifier,\n          name: localName,\n        },\n      },\n    ],\n  };\n}\n","// This code is written to be performant, that's why we opted to ignore these linting issues\n/* eslint-disable no-loop-func, no-continue */\nimport * as meriyah from 'meriyah';\nimport * as escope from 'escope';\nimport { walk } from 'estree-walker';\nimport flatten from 'lodash-es/flatten';\nimport {\n  AssignmentExpression,\n  Identifier,\n  Property,\n  Statement,\n} from 'meriyah/dist/estree';\nimport { Syntax as n } from './syntax';\nimport {\n  generateRequireStatement,\n  generateAllExportsIterator,\n  generateExportStatement,\n  generateEsModuleSpecifier,\n  generateInteropRequire,\n  generateInteropRequireExpression,\n  generateExportGetter,\n} from './ast-node-utils';\nimport { ESTreeAST } from './utils';\n\nexport function generateVariableName(input: string): string {\n  const v = input.replace(/[^A-Za-z0-9]+/g, '_');\n  return v.substr(v.length - 36);\n}\n\n/**\n * Converts esmodule code to commonjs code, built to be as fast as possible\n */\nexport function convertEsModule(ast: ESTreeAST): void {\n  const program = ast.program;\n  ast.isDirty = true;\n\n  const usedVarNames = {};\n  const varsToRename = {};\n  const trackedExports = {};\n  /**\n   * All names we export, used to predefine the exports at the start\n   */\n  const exportNames = new Set<string>();\n\n  const getVarName = (name: string) => {\n    let usedName = name.replace(/(\\s|\\.|-|@|\\?|&|=|{|})/g, '');\n    while (usedVarNames[usedName]) {\n      usedName += '_';\n    }\n    usedVarNames[usedName] = true;\n    return usedName;\n  };\n\n  let i = 0;\n  let importOffset = 0;\n\n  function addNodeInImportSpace(oldPosition: number, node: Statement) {\n    program.body.splice(oldPosition, 1);\n    program.body.splice(importOffset, 0, node);\n    importOffset++;\n  }\n\n  let addedSpecifier = false;\n  function addEsModuleSpecifier() {\n    if (addedSpecifier) {\n      return;\n    }\n    addedSpecifier = true;\n\n    program.body.unshift(generateEsModuleSpecifier());\n\n    // Make sure imports will stay after this\n    importOffset++;\n\n    i++;\n  }\n\n  let addedDefaultInterop = false;\n  function addDefaultInterop() {\n    if (addedDefaultInterop) {\n      return;\n    }\n    addedDefaultInterop = true;\n\n    program.body.push(generateInteropRequire());\n  }\n\n  /**\n   * Adds the export identifiers (exports.a = exports.b = exports.c = void 0)\n   */\n  function addExportVoids() {\n    const exportNamesArray = [...exportNames];\n    while (exportNamesArray.length !== 0) {\n      // We need to chunk the exports by 50, otherwise this line will get too long\n      // and the visitor will create a Maximum call stack size exceeded error\n      const exportNamesToUse = exportNamesArray.splice(0, 50);\n      const totalNode = {\n        type: n.ExpressionStatement,\n        expression: {\n          type: n.AssignmentExpression,\n          operator: '=',\n        },\n      };\n      let currentNode: Partial<AssignmentExpression> = totalNode.expression;\n      while (exportNamesToUse.length > 0) {\n        const exportName = exportNamesToUse.pop();\n        currentNode.left = {\n          type: n.MemberExpression,\n          object: {\n            type: n.Identifier,\n            name: 'exports',\n          },\n          property: {\n            type: n.Identifier,\n            name: exportName,\n          } as Identifier,\n        };\n        if (exportNamesToUse.length) {\n          // @ts-expect-error This will be filled in in the next loop\n          currentNode.right = {\n            type: n.AssignmentExpression,\n            operator: '=',\n          } as Partial<AssignmentExpression>;\n          currentNode = currentNode.right as Partial<AssignmentExpression>;\n        } else {\n          currentNode.right = {\n            type: n.UnaryExpression,\n            operator: 'void',\n            prefix: true,\n            argument: {\n              type: n.Literal,\n              value: 0,\n            },\n          };\n        }\n      }\n\n      // @ts-expect-error TS thinks this is a partial type, but by now it's full\n      program.body.unshift(totalNode);\n    }\n  }\n\n  // If there is a declaration of `exports` (`var exports = []`), we need to rename this\n  // variable as it's a reserved keyword\n  let exportsDefined = false;\n\n  walk(program, {\n    enter(node, parent) {\n      if (node.type === n.VariableDeclaration) {\n        // We don't rename exports vars in functions, only on root level\n        if (parent.type === n.BlockStatement && exportsDefined === false) {\n          this.skip();\n        }\n      } else if (node.type === n.VariableDeclarator) {\n        const declNode = node as meriyah.ESTree.VariableDeclarator;\n        if (\n          declNode.id.type === n.Identifier &&\n          declNode.id.name === 'exports'\n        ) {\n          exportsDefined = true;\n        }\n      } else if (node.type === n.Identifier && exportsDefined) {\n        const idNode = node as meriyah.ESTree.Identifier;\n        if (idNode.name === 'exports') {\n          idNode.name = '__$csb_exports';\n          this.replace(idNode);\n        }\n      } else if (!exportsDefined && parent != null) {\n        // Skip, we don't need to go deeper now\n        this.skip();\n      }\n    },\n  });\n\n  for (; i < program.body.length; i++) {\n    const statement = program.body[i];\n\n    if (statement.type === n.ExportAllDeclaration) {\n      // export * from './test';\n      // TO:\n      // const _csb = require('./test');\n      // Object.keys(_csb).forEach(key => {\n      //   if (key === 'default' || key === '__esModule')\n      //     return;\n      //   exports[key] = _csb[key])\n      // }\n\n      addEsModuleSpecifier();\n      const { source } = statement;\n      if (typeof source.value !== 'string') {\n        continue;\n      }\n      const varName = getVarName(`$csb__${generateVariableName(source.value)}`);\n      addNodeInImportSpace(i, generateRequireStatement(varName, source.value));\n      program.body.push(generateAllExportsIterator(varName));\n    } else if (statement.type === n.ExportNamedDeclaration) {\n      // export { a } from './test';\n      // TO:\n      // const _csb = require('./test');\n      // exports.a = _csb.a;\n\n      addEsModuleSpecifier();\n      if (statement.source) {\n        // export { ... } from ''\n        const { source } = statement;\n        if (typeof source.value !== 'string') {\n          continue;\n        }\n        const varName = getVarName(\n          `$csb__${generateVariableName(source.value)}`\n        );\n\n        if (\n          statement.specifiers.length === 1 &&\n          statement.specifiers[0].type === n.ExportSpecifier &&\n          statement.specifiers[0].local.name === 'default'\n        ) {\n          // In this case there's a default re-export. So we need to wrap it in a interopRequireDefault to make sure\n          // that default is exposed.\n          addDefaultInterop();\n          addNodeInImportSpace(\n            i,\n            generateInteropRequireExpression(\n              {\n                type: n.CallExpression,\n                callee: {\n                  type: n.Identifier,\n                  name: 'require',\n                },\n                arguments: [\n                  {\n                    type: n.Literal,\n                    value: source.value,\n                  },\n                ],\n              },\n              varName\n            )\n          );\n        } else {\n          addNodeInImportSpace(\n            i,\n            generateRequireStatement(varName, source.value)\n          );\n        }\n\n        if (statement.specifiers.length) {\n          statement.specifiers.forEach(specifier => {\n            if (specifier.type === n.ExportSpecifier) {\n              exportNames.add(specifier.exported.name);\n              program.body.splice(\n                importOffset++,\n                0,\n                generateExportGetter(\n                  { type: n.Literal, value: specifier.exported.name },\n                  {\n                    type: n.MemberExpression,\n                    object: {\n                      type: n.Identifier,\n                      name: varName,\n                    },\n                    property: {\n                      type: n.Identifier,\n                      name: specifier.local.name,\n                    },\n                  }\n                )\n              );\n            } else if (specifier.type === n.ExportNamespaceSpecifier) {\n              program.body.splice(\n                importOffset++,\n                0,\n                generateExportGetter(\n                  { type: n.Literal, value: specifier.specifier.name },\n                  { type: n.Identifier, name: varName }\n                )\n              );\n            }\n\n            i++;\n          });\n        }\n      } else if (statement.declaration) {\n        // First remove the export statement\n        program.body[i] = statement.declaration;\n\n        if (\n          statement.declaration.type === n.FunctionDeclaration ||\n          statement.declaration.type === n.ClassDeclaration\n        ) {\n          // export function test() {}\n\n          const varName = statement.declaration.id.name;\n          i++;\n          // Add to start of the file, after the defineModule for __esModule. This way this export is already\n          // defined before requiring other modules. This is only possible for function exports.\n          const positionToInsert =\n            statement.declaration.type === n.FunctionDeclaration ? 1 : i;\n          program.body.splice(\n            positionToInsert,\n            0,\n            generateExportStatement(varName, varName)\n          );\n          exportNames.add(varName);\n        } else {\n          // export const a = {}\n\n          const declaration = statement.declaration as meriyah.ESTree.VariableDeclaration;\n\n          program.body.splice(\n            i,\n            1,\n            declaration,\n            // @ts-ignore\n            ...flatten(\n              declaration.declarations.map(node => {\n                if (node.id.type === n.ObjectPattern) {\n                  // export const { a } = c;\n                  return flatten(\n                    node.id.properties.map(property => {\n                      if (\n                        property.type !== n.Property ||\n                        property.value.type !== n.Identifier\n                      ) {\n                        return false;\n                      }\n\n                      exportNames.add(property.value.name);\n                      trackedExports[property.value.name] = property.value.name;\n                      return generateExportStatement(\n                        property.value.name,\n                        property.value.name\n                      );\n                    })\n                  ).filter(Boolean);\n                }\n                if (node.id.type === n.Identifier) {\n                  trackedExports[node.id.name] = node.id.name;\n\n                  exportNames.add(node.id.name);\n                  return generateExportStatement(node.id.name, node.id.name);\n                }\n                if (node.id.type === n.ArrayPattern) {\n                  // export const [a, b] = c;\n\n                  return flatten(\n                    node.id.elements.map(property => {\n                      if (property.type !== n.Identifier) {\n                        return false;\n                      }\n\n                      exportNames.add(property.name);\n                      trackedExports[property.name] = property.name;\n                      return generateExportStatement(\n                        property.name,\n                        property.name\n                      );\n                    })\n                  ).filter(Boolean);\n                }\n\n                return null;\n              })\n            ).filter(Boolean)\n          );\n        }\n      } else if (statement.specifiers) {\n        program.body.splice(i, 1);\n        i--;\n        statement.specifiers.forEach(specifier => {\n          if (specifier.type === n.ExportSpecifier) {\n            i++;\n\n            exportNames.add(specifier.exported.name);\n            program.body.unshift(\n              generateExportGetter(\n                { type: n.Literal, value: specifier.exported.name },\n                { type: n.Identifier, name: specifier.local.name }\n              )\n            );\n            // Make sure that nothing can get inbetween this\n            importOffset++;\n          }\n        });\n      }\n    } else if (statement.type === n.ExportDefaultDeclaration) {\n      addEsModuleSpecifier();\n      // export default function() {}\n      // export default class A {}\n      const varName = getVarName(`$csb__default`);\n      // First remove the export statement\n      if (statement.declaration) {\n        if (statement.declaration.type === n.FunctionDeclaration) {\n          // @ts-ignore\n          statement.declaration.type = n.FunctionExpression;\n        } else if (statement.declaration.type === n.ClassDeclaration) {\n          // @ts-ignore\n          statement.declaration.type = n.ClassExpression;\n        }\n        const newDeclaration = statement.declaration as meriyah.ESTree.Expression;\n\n        // Create a var with the export\n        if (\n          statement.declaration.type === n.ClassExpression ||\n          statement.declaration.type === n.FunctionExpression\n        ) {\n          if (!statement.declaration.id) {\n            // If the function or class has no name, we give it to it\n            statement.declaration.id = {\n              type: n.Identifier,\n              name: varName,\n            };\n          }\n\n          program.body[\n            i\n          ] = statement.declaration as meriyah.ESTree.DeclarationStatement;\n          i++;\n\n          program.body.splice(\n            i,\n            0,\n            generateExportStatement(statement.declaration.id.name, 'default')\n          );\n        } else {\n          program.body[i] = {\n            type: n.VariableDeclaration,\n            kind: 'var' as 'var',\n\n            declarations: [\n              {\n                type: n.VariableDeclarator,\n                id: {\n                  type: n.Identifier,\n                  name: varName,\n                },\n                init: newDeclaration,\n              },\n            ],\n          };\n          i++;\n\n          program.body.splice(\n            i,\n            0,\n            generateExportStatement(varName, 'default')\n          );\n        }\n\n        if (\n          newDeclaration.type === n.ClassDeclaration ||\n          newDeclaration.type === n.FunctionExpression\n        ) {\n          trackedExports[newDeclaration.id.name] = 'default';\n        }\n      }\n    } else if (statement.type === n.ImportDeclaration) {\n      // @ts-ignore Wrong typing in lib?\n      const source: meriyah.ESTree.Literal = statement.source;\n\n      if (typeof source.value !== 'string') {\n        continue;\n      }\n      const varName = getVarName(`$csb__${generateVariableName(source.value)}`);\n\n      addNodeInImportSpace(i, generateRequireStatement(varName, source.value));\n\n      statement.specifiers.reverse().forEach(specifier => {\n        let localName: string;\n        let importName: string;\n\n        if (specifier.type === n.ImportSpecifier) {\n          // import {Test} from 'test';\n          // const _test = require('test');\n          // var Test = _test.Test;\n\n          // Mark that we need to rename all references to this variable\n          // to the new require statement. This will happen in the second pass.\n          varsToRename[specifier.local.name] = [\n            varName,\n            specifier.imported.name,\n          ];\n\n          return;\n        }\n        i++;\n\n        if (specifier.type === n.ImportDefaultSpecifier) {\n          // import Test from 'test';\n          // const _test = require('test');\n          // var Test = interopRequireDefault(_test).default;\n          localName = specifier.local.name;\n          importName = 'default';\n          addDefaultInterop();\n\n          program.body.splice(\n            // After the require statement\n            importOffset,\n            0,\n            generateInteropRequireExpression(\n              { type: n.Identifier, name: varName },\n              localName\n            )\n          );\n\n          varsToRename[localName] = [localName, 'default'];\n          importOffset++;\n          return;\n        }\n\n        if (specifier.type === n.ImportNamespaceSpecifier) {\n          // import * as Test from 'test';\n          // const _test = require('test');\n          // var Test = _test;\n          localName = specifier.local.name;\n          importName = null;\n        }\n\n        // insert in index 1 instead of 0 to be after the interopRequireDefault\n        program.body.splice(importOffset, 0, {\n          type: n.VariableDeclaration,\n          kind: 'var' as 'var',\n          declarations: [\n            {\n              type: n.VariableDeclarator,\n              id: {\n                type: n.Identifier,\n                name: localName,\n              },\n              init: importName\n                ? {\n                    type: n.MemberExpression,\n                    computed: false,\n                    object: {\n                      type: n.Identifier,\n                      name: varName,\n                    },\n                    property: {\n                      type: n.Identifier,\n                      name: importName,\n                    },\n                  }\n                : {\n                    type: n.Identifier,\n                    name: varName,\n                  },\n            },\n          ],\n        });\n        importOffset++;\n      });\n    }\n  }\n\n  // console.log(exportNames);\n  if (\n    Object.keys(varsToRename).length > 0 ||\n    Object.keys(trackedExports).length > 0\n  ) {\n    // Convert all the object shorthands to not shorthands, needed later when we rename variables so we\n    // don't change to the key literals\n    walk(program, {\n      enter(node, parent, prop, index) {\n        if (node.type === n.Property) {\n          const property = node as Property;\n          if (\n            property.shorthand &&\n            property.value.type !== n.AssignmentPattern // Not a default initializer\n          ) {\n            property.value = {\n              ...property.key,\n            };\n            property.shorthand = false;\n          }\n        }\n      },\n    });\n\n    // A second pass where we rename all references to imports that were marked before.\n    const scopeManager = escope.analyze(program, { ecmaVersion: 6 });\n\n    scopeManager.acquire(program);\n    scopeManager.scopes.forEach(scope => {\n      scope.references.forEach(ref => {\n        // If the variable cannot be resolved, it must be the var that we had\n        // just changed.\n        if (\n          Object.prototype.hasOwnProperty.call(\n            varsToRename,\n            ref.identifier.name\n          ) &&\n          ref.resolved === null &&\n          !ref.writeExpr\n        ) {\n          ref.identifier.name = `(0, ${varsToRename[ref.identifier.name].join(\n            '.'\n          )})`;\n        }\n\n        if (\n          Object.prototype.hasOwnProperty.call(\n            trackedExports,\n            ref.identifier.name\n          ) &&\n          ref.isWrite() &&\n          ref.resolved === null &&\n          !ref.init\n        ) {\n          const name = trackedExports[ref.identifier.name];\n          ref.identifier.name = `exports.${name} = ${ref.identifier.name}`;\n        }\n      });\n    });\n    scopeManager.detach();\n  }\n\n  addExportVoids();\n}\n","/**\n * Derived from https://unpkg.com/browse/astring-jsx@1.0.1/index.js\n */\n\nexport default {\n  // <div></div>\n  JSXElement(node, state) {\n    state.write('<');\n    this[node.openingElement.type](node.openingElement, state);\n    if (node.closingElement) {\n      state.write('>');\n      for (let i = 0; i < node.children.length; i++) {\n        const child = node.children[i];\n        this[child.type](child, state);\n      }\n      state.write('</');\n      this[node.closingElement.type](node.closingElement, state);\n      state.write('>');\n    } else {\n      state.write(' />');\n    }\n  },\n  // <div>\n  JSXOpeningElement: function JSXOpeningElement(node, state) {\n    this[node.name.type](node.name, state);\n    for (let i = 0; i < node.attributes.length; i++) {\n      const attr = node.attributes[i];\n      this[attr.type](attr, state);\n    }\n  },\n  // </div>\n  JSXClosingElement: function JSXOpeningElement(node, state) {\n    this[node.name.type](node.name, state);\n  },\n  // div\n  JSXIdentifier: function JSXOpeningElement(node, state) {\n    state.write(node.name);\n  },\n  // Member.Expression\n  JSXMemberExpression: function JSXMemberExpression(node, state) {\n    this[node.object.type](node.object, state);\n    state.write('.');\n    this[node.property.type](node.property, state);\n  },\n  // attr=\"something\"\n  JSXAttribute: function JSXAttribute(node, state) {\n    state.write(' ');\n    this[node.name.type](node.name, state);\n    state.write('=');\n    this[node.value.type](node.value, state);\n  },\n  // namespaced:attr=\"something\"\n  JSXNamespacedName: function JSXNamespacedName(node, state) {\n    this[node.namespace.type](node.namespace, state);\n    state.write(':');\n    this[node.name.type](node.name, state);\n  },\n  // {expression}\n  JSXExpressionContainer: function JSXExpressionContainer(node, state) {\n    state.write('{');\n    this[node.expression.type](node.expression, state);\n    state.write('}');\n  },\n  JSXText(node, state) {\n    state.write(node.value);\n  },\n};\n","import * as astring from 'astring';\nimport * as meriyah from 'meriyah';\nimport { Identifier } from 'meriyah/dist/estree';\nimport jsxGenerator from './generator-jsx';\n\n// Enables parenthesis regardless of precedence\nconst NEEDS_PARENTHESES = 17;\nconst EXPRESSIONS_PRECEDENCE = {\n  // Definitions\n  ArrayExpression: 20,\n  TaggedTemplateExpression: 20,\n  ThisExpression: 20,\n  Identifier: 20,\n  Literal: 18,\n  TemplateLiteral: 20,\n  Super: 20,\n  SequenceExpression: 20,\n  // Operations\n  MemberExpression: 19,\n  CallExpression: 19,\n  NewExpression: 19,\n  // Other definitions\n  ArrowFunctionExpression: NEEDS_PARENTHESES,\n  ClassExpression: NEEDS_PARENTHESES,\n  FunctionExpression: NEEDS_PARENTHESES,\n  ObjectExpression: NEEDS_PARENTHESES,\n  // Other operations\n  UpdateExpression: 16,\n  UnaryExpression: 15,\n  BinaryExpression: 14,\n  LogicalExpression: 13,\n  ConditionalExpression: 4,\n  AssignmentExpression: 3,\n  AwaitExpression: 2,\n  YieldExpression: 2,\n  RestElement: 1,\n};\n\n/**\n * Add support for next syntax\n */\nexport const customGenerator = {\n  // @ts-ignore baseGenerator is deprecated, and GENERATOR is not in the types?\n  ...astring.GENERATOR,\n  FieldDefinition(\n    node: meriyah.ESTree.FieldDefinition,\n    state: { write(s: string): void }\n  ) {\n    // Support class fields\n\n    if (node.static) {\n      state.write('static ');\n    }\n    state.write((node.key as Identifier).name);\n    state.write(' = ');\n    this[node.value.type](node.value, state);\n  },\n  ImportExpression(\n    node: meriyah.ESTree.ImportExpression,\n    state: { write(s: string): void }\n  ) {\n    // Convert import() to $csbImport()\n\n    state.write('$csbImport(');\n    this[node.source.type](node.source, state);\n    state.write(')');\n  },\n  UnaryExpression(\n    node: meriyah.ESTree.UnaryExpression,\n    state: { write(s: string): void }\n  ) {\n    if (node.prefix) {\n      state.write(node.operator);\n      if (node.operator.length > 1) {\n        state.write(' ');\n      }\n      if (\n        EXPRESSIONS_PRECEDENCE[node.argument.type] <\n        EXPRESSIONS_PRECEDENCE.UnaryExpression\n      ) {\n        state.write('(');\n        this[node.argument.type](node.argument, state);\n        state.write(')');\n      } else {\n        state.write(' ');\n        this[node.argument.type](node.argument, state);\n      }\n    } else {\n      // FIXME: This case never occurs\n      this[node.argument.type](node.argument, state);\n      state.write(node.operator);\n    }\n  },\n  ...jsxGenerator,\n};\n","import * as meriyah from 'meriyah';\nimport * as astring from 'astring';\nimport { customGenerator } from './generator';\n\nexport interface ESTreeAST {\n  isDirty: boolean;\n  program: meriyah.ESTree.Program;\n}\n\nexport function parseModule(code: string): ESTreeAST {\n  return {\n    isDirty: false,\n    program: meriyah.parseModule(code, {\n      next: true,\n      raw: true,\n      jsx: true,\n    }),\n  };\n}\n\nexport function generateCode(ast: ESTreeAST) {\n  const finalCode = astring.generate(ast.program as any, {\n    generator: customGenerator,\n  });\n\n  return `\"use strict\";\\n${finalCode}`;\n}\n","import { walk } from 'estree-walker';\n\nimport { ESTreeAST } from './utils';\nimport { Syntax as n } from './syntax';\n\nexport function collectDependenciesFromAST(ast: ESTreeAST): Array<string> {\n  const deps: Set<string> = new Set();\n  walk(ast.program, {\n    enter(node) {\n      // @ts-ignore\n      if (node.type === n.CallExpression && node.callee.name === 'require') {\n        // @ts-ignore\n        if (node.arguments.length && node.arguments[0].value) {\n          // @ts-ignore\n          deps.add(node.arguments[0].value);\n        }\n\n        this.skip();\n      }\n    },\n  });\n  return Array.from(deps);\n}\n","/* eslint-enable import/default */\nimport { isBabel7 } from '@codesandbox/common/lib/utils/is-babel-7';\nimport { isUrl } from '@codesandbox/common/lib/utils/is-url';\n\n/* eslint-disable import/default */\n// @ts-ignore\nimport BabelWorker from 'worker-loader?publicPath=/&name=babel-transpiler.[hash:8].worker.js!./worker/index';\n\nimport delay from '@codesandbox/common/lib/utils/delay';\nimport { endMeasure, measure } from '@codesandbox/common/lib/utils/metrics';\nimport { LoaderContext, Manager } from 'sandpack-core';\nimport WorkerTranspiler from '../worker-transpiler/transpiler';\nimport getBabelConfig from './babel-parser';\nimport { getSyntaxInfoFromAst } from './ast/syntax-info';\nimport { convertEsModule } from './ast/convert-esmodule';\nimport { ESTreeAST, generateCode, parseModule } from './ast/utils';\nimport { collectDependenciesFromAST } from './ast/collect-dependencies';\nimport { rewriteImportMeta } from './ast/rewrite-meta';\n\nconst MAX_WORKER_ITERS = 100;\n\ninterface TranspilationResult {\n  transpiledCode: string;\n}\n\nconst WORKER_COUNT = process.env.SANDPACK ? 1 : 3;\n\ninterface IDep {\n  path: string;\n  isAbsolute?: boolean;\n  isEntry?: boolean;\n  isGlob?: boolean;\n}\n\nfunction addCollectedDependencies(\n  loaderContext: LoaderContext,\n  deps: Array<IDep>\n): Promise<Array<void>> {\n  return Promise.all(\n    deps.map(async dep => {\n      if (dep.isGlob) {\n        loaderContext.addDependenciesInDirectory(dep.path, {\n          isAbsolute: dep.isAbsolute,\n          isEntry: dep.isEntry,\n        });\n      } else {\n        await loaderContext.addDependency(dep.path, {\n          isAbsolute: dep.isAbsolute,\n          isEntry: dep.isEntry,\n        });\n      }\n    })\n  );\n}\n\n// Right now this is in a worker, but when we're going to allow custom plugins\n// we need to move this out of the worker again, because the config needs\n// to support custom plugins\nclass BabelTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super(\n      'babel-loader',\n      // @ts-ignore\n      async () => {\n        let iteration = 0;\n        while (typeof globalThis.babelworkers === 'undefined') {\n          if (iteration >= MAX_WORKER_ITERS) {\n            throw new Error('Could not load Babel worker');\n          }\n          await delay(50); // eslint-disable-line\n          iteration++;\n        }\n\n        if (globalThis.babelworkers.length === 0) {\n          return BabelWorker();\n        }\n\n        // We set these up in startup.ts.\n        return globalThis.babelworkers.pop();\n      },\n      {\n        maxWorkerCount: WORKER_COUNT,\n        preload: true,\n      }\n    );\n  }\n\n  startupWorkersInitialized = false;\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilationResult> {\n    const { path } = loaderContext;\n    const isNodeModule = path.startsWith('/node_modules') || isUrl(path);\n\n    /**\n     * We should never transpile babel-standalone, because it relies on code that runs\n     * in non-strict mode. Transpiling this code would add a \"use strict;\" piece, which\n     * would then break the code (because it expects `this` to be global). No transpiler\n     * can fix this, and because of this we need to just specifically ignore this file.\n     */\n    if (path === '/node_modules/babel-standalone/babel.js') {\n      return { transpiledCode: code };\n    }\n\n    // Check if we can take a shortcut, we have a custom pipeline for transforming\n    // node_modules to commonjs and collecting deps\n    if (loaderContext.options.simpleRequire || isNodeModule) {\n      try {\n        const ast: ESTreeAST = parseModule(code);\n        const syntaxInfo = getSyntaxInfoFromAst(ast);\n        if (!syntaxInfo.jsx) {\n          // If the code is ESM we transform it to commonjs and return it\n          if (syntaxInfo.esm || syntaxInfo.dynamicImports) {\n            measure(`esconvert-${path}`);\n            if (syntaxInfo.esm) {\n              convertEsModule(ast);\n            }\n            // We collect requires instead of doing this in convertESModule as some modules also use require\n            // Which is actually invalid but we probably don't wanna break anyone's code if it works in other bundlers...\n            const deps = collectDependenciesFromAST(ast);\n            await addCollectedDependencies(\n              loaderContext,\n              deps.map(d => ({\n                path: d,\n              }))\n            );\n            rewriteImportMeta(ast, {\n              url: loaderContext.url,\n            });\n            endMeasure(`esconvert-${path}`, { silent: true });\n            return {\n              transpiledCode: generateCode(ast),\n            };\n          }\n\n          // If the code is commonjs and does not contain any more jsx, we generate and return the code.\n          measure(`dep-collection-${path}`);\n          const deps = collectDependenciesFromAST(ast);\n          await addCollectedDependencies(\n            loaderContext,\n            deps.map(d => ({\n              path: d,\n            }))\n          );\n          endMeasure(`dep-collection-${path}`, { silent: true });\n          return {\n            transpiledCode: code,\n          };\n        }\n      } catch (err) {\n        // do not log this in production, it confuses our users\n        if (process.env.NODE_ENV === 'development') {\n          console.warn(\n            `Error occurred while trying to quickly transform '${path}'`\n          );\n          console.warn(err);\n        }\n      }\n    }\n\n    const configs = loaderContext.options.configurations;\n    const foundConfig = configs.babel && configs.babel.parsed;\n    const loaderOptions = loaderContext.options || {};\n\n    const dependencies =\n      (configs.package &&\n        configs.package.parsed &&\n        configs.package.parsed.dependencies) ||\n      {};\n\n    const devDependencies =\n      (configs.package &&\n        configs.package.parsed &&\n        configs.package.parsed.devDependencies) ||\n      {};\n\n    const isV7 =\n      loaderContext.options.isV7 || isBabel7(dependencies, devDependencies);\n\n    const hasMacros = Object.keys(dependencies).some(\n      d => d.indexOf('macro') > -1 || d.indexOf('codegen') > -1\n    );\n\n    const babelConfig = getBabelConfig(\n      foundConfig || (loaderOptions as any).config,\n      loaderOptions,\n      path,\n      isV7\n    );\n\n    const {\n      code: transpiledCode,\n      dependencies: foundDependencies,\n    } = await this.queueCompileFn(\n      {\n        code,\n        config: babelConfig,\n        path,\n        loaderOptions,\n        babelTranspilerOptions:\n          configs && configs.babelTranspiler && configs.babelTranspiler.parsed,\n        sandboxOptions: configs && configs.sandbox && configs.sandbox.parsed,\n        version: isV7 ? 7 : 6,\n        hasMacros,\n      },\n      loaderContext\n    );\n\n    await addCollectedDependencies(loaderContext, foundDependencies);\n\n    return { transpiledCode };\n  }\n\n  async getTranspilerContext(manager: Manager): Promise<any> {\n    const baseConfig = await super.getTranspilerContext(manager);\n\n    const babelTranspilerOptions =\n      manager.configurations &&\n      manager.configurations.babelTranspiler &&\n      manager.configurations.babelTranspiler.parsed;\n\n    const result = await this.workerManager.callFn({\n      method: 'get-babel-context',\n      data: {\n        transpilerOptions: babelTranspilerOptions,\n      },\n    });\n\n    const { version, availablePlugins, availablePresets } = result;\n    return {\n      ...baseConfig,\n      babelVersion: version,\n      availablePlugins,\n      availablePresets,\n      babelTranspilerOptions,\n    };\n  }\n}\n\nconst transpiler = new BabelTranspiler();\n\nexport { BabelTranspiler };\n\nexport default transpiler;\n","// This code is written to be performant, that's why we opted to ignore these linting issues\n/* eslint-disable no-loop-func, no-continue */\nimport * as meriyah from 'meriyah';\nimport { walk } from 'estree-walker';\n\nimport { Syntax as n } from './syntax';\nimport { ESTreeAST } from './utils';\n\nexport interface IESModuleMeta {\n  url: string;\n}\n\nconst CSB_IMPORT_META_NAME = '$csb__import_meta';\nexport function rewriteImportMeta(ast: ESTreeAST, meta: IESModuleMeta): void {\n  let hasImportMeta = false;\n  walk(ast.program, {\n    enter(node: meriyah.ESTree.MemberExpression) {\n      if (node.type === n.MemberExpression) {\n        if (\n          node.object.type === n.MetaProperty &&\n          node.object.meta.name === 'import'\n        ) {\n          node.object = {\n            type: n.Identifier,\n            name: CSB_IMPORT_META_NAME,\n          };\n\n          hasImportMeta = true;\n\n          this.skip();\n        }\n      }\n    },\n  });\n\n  if (hasImportMeta) {\n    ast.program.body.unshift({\n      type: n.VariableDeclaration,\n      kind: 'var',\n      declarations: [\n        {\n          type: n.VariableDeclarator,\n          id: {\n            type: n.Identifier,\n            name: CSB_IMPORT_META_NAME,\n          },\n          init: {\n            type: n.ObjectExpression,\n            properties: [\n              {\n                type: n.Property,\n                kind: 'init',\n                computed: false,\n                shorthand: false,\n                method: false,\n                key: {\n                  type: n.Identifier,\n                  name: 'url',\n                },\n                value: {\n                  type: n.Literal,\n                  value: meta.url,\n                  raw: JSON.stringify(meta.url),\n                },\n              },\n            ],\n          },\n        },\n      ],\n    });\n  }\n}\n","import { Transpiler } from 'sandpack-core';\n\nclass JSONTranspiler extends Transpiler {\n  doTranspilation(code: string) {\n    const result = `\n      module.exports = JSON.parse(${JSON.stringify(code || '')})\n    `;\n\n    return Promise.resolve({\n      transpiledCode: result,\n    });\n  }\n}\n\nconst transpiler = new JSONTranspiler('json-loader');\n\nexport { JSONTranspiler };\n\nexport default transpiler;\n","// @ts-ignore\nimport SassWorker from 'worker-loader?publicPath=/&name=sass-transpiler.[hash:8].worker.js!./worker';\n\nimport { LoaderContext, TranspilerResult } from 'sandpack-core';\nimport WorkerTranspiler from '../worker-transpiler/transpiler';\n\nclass SassTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('sass-loader', SassWorker, { maxWorkerCount: 1, hasFS: true });\n\n    this.cacheable = false;\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    if (!code) {\n      return { transpiledCode: '' };\n    }\n\n    const indentedSyntax =\n      loaderContext.options.indentedSyntax == null\n        ? loaderContext.path.endsWith('.sass')\n        : true;\n\n    const {\n      transpiledCode,\n      transpilationDependencies,\n    } = await this.queueCompileFn(\n      {\n        code,\n        path: loaderContext.path,\n        indentedSyntax,\n      },\n      loaderContext\n    );\n\n    await Promise.all(\n      transpilationDependencies.map(dep =>\n        loaderContext.addTranspilationDependency(dep.path, dep.options || {})\n      )\n    );\n\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new SassTranspiler();\n\nexport { SassTranspiler };\n\nexport default transpiler;\n","import { LoaderContext, Transpiler } from 'sandpack-core';\n\nconst HELPER_PATH = '/node_modules/csbbust/refresh-helper.js';\n\nconst HELPER_CODE = `\nconst RefreshRuntime = require('react-refresh/runtime');\n\nfunction debounce(fn, delay) {\n  var handle;\n  return () => {\n    clearTimeout(handle);\n    handle = setTimeout(fn, delay);\n  };\n}\n\nconst enqueueUpdate = debounce(() => {\n  try {\n    RefreshRuntime.performReactRefresh();\n  } catch (e) {\n    module.hot.decline();\n    throw e;\n  }\n}, 30);\n\nfunction isReactRefreshBoundary(moduleExports) {\n  if (Object.keys(RefreshRuntime).length === 0) {\n    return false;\n  }\n\n  if (RefreshRuntime.isLikelyComponentType(moduleExports)) {\n    return true;\n  }\n\n  if (moduleExports == null || typeof moduleExports !== 'object') {\n    /** Exit if we can't iterate over exports. */\n    return false;\n  }\n\n  let hasExports = false;\n  let areAllExportsComponents = true;\n  for (const key in moduleExports) {\n    hasExports = true;\n\n    if (key === '__esModule') {\n      continue;\n    }\n\n    const desc = Object.getOwnPropertyDescriptor(moduleExports, key);\n    if (desc && desc.get) {\n      /** Don't invoke getters as they may have side effects. */\n      return false;\n    }\n\n    const exportValue = moduleExports[key];\n    if (!RefreshRuntime.isLikelyComponentType(exportValue)) {\n      areAllExportsComponents = false;\n    }\n  }\n  \n  return hasExports && areAllExportsComponents;\n};\n\n/** When this signature changes, it's unsafe to stop at this refresh boundary. */\nfunction getRefreshBoundarySignature(moduleExports) {\n  const signature = [];\n  signature.push(RefreshRuntime.getFamilyByType(moduleExports));\n  if (moduleExports == null || typeof moduleExports !== 'object') {\n    /** Exit if we can't iterate over exports. */\n    /** (This is important for legacy environments.) */\n    return signature;\n  }\n\n  for (const key in moduleExports) {\n    if (key === '__esModule') {\n      continue;\n    }\n\n    const desc = Object.getOwnPropertyDescriptor(moduleExports, key);\n    if (desc && desc.get) {\n      continue;\n    }\n\n    const exportValue = moduleExports[key];\n    signature.push(key);\n    signature.push(RefreshRuntime.getFamilyByType(exportValue));\n  }\n\n  return signature;\n};\n\nfunction shouldInvalidateReactRefreshBoundary(\n  prevExports,\n  nextExports,\n) {\n  const prevSignature = getRefreshBoundarySignature(prevExports);\n  const nextSignature = getRefreshBoundarySignature(nextExports);\n  if (prevSignature.length !== nextSignature.length) {\n    return true;\n  }\n  \n  for (let i = 0; i < nextSignature.length; i++) {\n    if (prevSignature[i] !== nextSignature[i]) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nvar registerExportsForReactRefresh = (moduleExports, moduleID) => {\n  RefreshRuntime.register(moduleExports, moduleID + ' %exports%');\n  if (moduleExports == null || typeof moduleExports !== 'object') {\n    /** Exit if we can't iterate over exports. */\n    /** (This is important for legacy environments.) */\n    return;\n  }\n  for (const key in moduleExports) {\n    const desc = Object.getOwnPropertyDescriptor(moduleExports, key);\n    if (desc && desc.get) {\n      /** Don't invoke getters as they may have side effects. */\n      continue;\n    }\n    const exportValue = moduleExports[key];\n    const typeID = moduleID + ' %exports% ' + key;\n    RefreshRuntime.register(exportValue, typeID);\n  }\n};\n\nfunction prelude(module) {\n  window.$RefreshReg$ = (type, id) => {\n    /** Note module.id is webpack-specific, this may vary in other bundlers */\n    const fullId = module.id + ' ' + id;\n    RefreshRuntime.register(type, fullId);\n  }\n    \n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\n\nfunction postlude(module) {\n  const isHotUpdate = !!module.hot.data;\n  const prevExports = isHotUpdate ? module.hot.data.prevExports : null;\n  if (isReactRefreshBoundary(module.exports)) {\n    registerExportsForReactRefresh(module.exports, module.id);\n    const currentExports = { ...module.exports };\n\n    module.hot.dispose(function hotDisposeCallback(data) {\n      data.prevExports = currentExports;\n    });\n\n    if (isHotUpdate && shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n      module.hot.invalidate();\n    } else {\n      module.hot.accept();\n    }\n\n    enqueueUpdate();\n  } else if (isHotUpdate && isReactRefreshBoundary(prevExports)) {\n    module.hot.invalidate();\n  }\n}\n\nmodule.exports = {\n  enqueueUpdate,\n  isReactRefreshBoundary,\n  registerExportsForReactRefresh,\n  shouldInvalidateReactRefreshBoundary,\n  prelude,\n  postlude,\n};\n`.trim();\n\nconst prelude = `var _csbRefreshUtils = require(\"${HELPER_PATH}\");\nvar prevRefreshReg = window.$RefreshReg$;\nvar prevRefreshSig = window.$RefreshSig$;\n_csbRefreshUtils.prelude(module);\ntry {`.replace(/[\\n]+/gm, '');\n\nconst postlude = `_csbRefreshUtils.postlude(module);\n} finally {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}`.replace(/[\\n]+/gm, '');\n\n/**\n * This is the compressed version of the code in the comment above. We compress the code\n * to a single line so we don't mess with the source mapping when showing errors.\n */\nconst getWrapperCode = (sourceCode: string) =>\n  prelude + sourceCode + '\\n' + postlude;\n\nclass RefreshTranspiler extends Transpiler {\n  constructor() {\n    super('react-refresh-loader');\n  }\n\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    await loaderContext.addDependency('react-refresh/runtime');\n    loaderContext.emitModule(HELPER_PATH, HELPER_CODE, '/', false, false);\n\n    const newCode = getWrapperCode(code);\n\n    return {\n      transpiledCode: newCode || '',\n    };\n  }\n}\n\nconst transpiler = new RefreshTranspiler();\n\nexport { RefreshTranspiler };\n\nexport default transpiler;\n","/* eslint-disable import/default */\n// @ts-ignore\nimport LessWorker from 'worker-loader?publicPath=/&name=less-transpiler.[hash:8].worker.js!./less-worker';\n/* eslint-enable import/default */\n\nimport { LoaderContext, TranspilerResult } from 'sandpack-core';\nimport WorkerTranspiler from '../worker-transpiler/transpiler';\n\nclass LessTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('less-loader', LessWorker, {\n      maxWorkerCount: 1,\n    });\n\n    this.cacheable = false;\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const modules = loaderContext.getModules();\n    const lessModules = modules.filter(m => /.*\\.(css|less)$/.test(m.path));\n    const files = lessModules.reduce(\n      (interMediateFiles, module) => ({\n        ...interMediateFiles,\n        [module.path]: module.code,\n      }),\n      {}\n    );\n\n    const { path } = loaderContext;\n    files[path] = code;\n\n    const {\n      css: transpiledCode,\n      transpilationDependencies,\n    } = await this.queueCompileFn(\n      {\n        code,\n        files,\n        path,\n      },\n      loaderContext\n    );\n\n    await Promise.all(\n      transpilationDependencies.map(dep =>\n        loaderContext.addTranspilationDependency(dep.path, dep.options || {})\n      )\n    );\n\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new LessTranspiler();\n\nexport { LessTranspiler };\n\nexport default transpiler;\n","import { LoaderContext, Transpiler } from 'sandpack-core';\n\nconst FEATURE_REGEX = /@import|@url/;\n\n/**\n * Mainly responsible for inlining css imports\n */\nclass PostCSSCompiler extends Transpiler {\n  constructor() {\n    super('postcss-compiler');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    if (!FEATURE_REGEX.test(code)) {\n      return Promise.resolve({ transpiledCode: code });\n    }\n    return import(\n      /* webpackChunkName: 'postcss-compiler' */ './loader'\n    ).then(loader => loader.default(code, loaderContext));\n  }\n}\n\nconst transpiler = new PostCSSCompiler();\n\nexport { PostCSSCompiler };\n\nexport default transpiler;\n","import { LoaderContext, Transpiler } from 'sandpack-core';\n\nclass SVGRTranspiler extends Transpiler {\n  constructor() {\n    super('svgr-loader');\n  }\n\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    const { svgrTransform } = await import('./transpiler');\n\n    // We follow CRA behaviour, so the code with the component is not the default\n    // export, this forces that.\n\n    const codeIsHttp = loaderContext._module.module.code.startsWith('http');\n    let downloadedCode = code;\n    if (codeIsHttp) {\n      await fetch(code)\n        .then(res => res.text())\n        .then(r => {\n          downloadedCode = r;\n        });\n    }\n\n    const result = await svgrTransform(loaderContext.path, downloadedCode);\n    return {\n      transpiledCode: result,\n    };\n  }\n}\n\nconst transpiler = new SVGRTranspiler();\n\nexport { SVGRTranspiler };\n\nexport default transpiler;\n","import { LoaderContext, Transpiler } from 'sandpack-core';\n\nclass ReactSVGTranspiler extends Transpiler {\n  constructor() {\n    super('react-svg-loader');\n  }\n\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    const transpiledCode =\n      `import link from ${JSON.stringify(\n        `!base64-loader!${loaderContext.path}`\n      )};` +\n      `export default link;` +\n      `export const Url = link;` +\n      `export { default as ReactComponent } from ${JSON.stringify(\n        `!babel-loader!svgr-loader!${loaderContext.path}`\n      )};`;\n\n    return {\n      transpiledCode,\n    };\n  }\n}\n\nconst transpiler = new ReactSVGTranspiler();\n\nexport { ReactSVGTranspiler };\n\nexport default transpiler;\n","import { Transpiler } from 'sandpack-core';\n\nclass RawTranspiler extends Transpiler {\n  constructor() {\n    super('raw-loader');\n  }\n\n  doTranspilation(code: string) {\n    return Promise.resolve({\n      transpiledCode: `\n      module.exports = ${JSON.stringify(code)};`,\n    });\n  }\n}\n\nconst transpiler = new RawTranspiler();\n\nexport { RawTranspiler };\n\nexport default transpiler;\n","import semver from 'semver';\nimport { getAbsoluteDependencies } from '@codesandbox/common/lib/utils/dependencies';\nimport { Dependencies } from '@codesandbox/common/lib/templates/template';\n\nfunction isMinimalSemverVersion(version: string, minimalVersion: string) {\n  try {\n    return semver.gte(version, minimalVersion);\n  } catch (e) {\n    // Semver couldn't be parsed, we assume that we're on the bleeding edge now, so true.\n    return true;\n  }\n}\n\nexport async function isMinimalReactDomVersion(\n  version: string,\n  minimalVersion: string\n): Promise<boolean> {\n  return isMinimalAbsoluteVersion('react-dom', version, minimalVersion);\n}\n\nexport async function isMinimalReactVersion(\n  version: string,\n  minimalVersion: string\n): Promise<boolean> {\n  return isMinimalAbsoluteVersion('react', version, minimalVersion);\n}\n\nexport async function isMinimalAbsoluteVersion(\n  name: string,\n  version: string,\n  minimalVersion: string\n): Promise<boolean> {\n  if (version) {\n    const absoluteDependencies = await getAbsoluteDependencies({\n      [name]: version,\n    });\n\n    return (\n      absoluteDependencies[name].startsWith('0.0.0') ||\n      isMinimalSemverVersion(absoluteDependencies[name], minimalVersion)\n    );\n  }\n\n  return false;\n}\n\n/**\n * Decide whether React Refresh hot module reloading strategy is supported by React\n */\nexport async function hasRefresh(\n  dependencies: { name: string; version: string }[]\n) {\n  const hasReactRefresh = dependencies.find(n => n.name === 'react-refresh');\n  if (hasReactRefresh) {\n    const reactDom = dependencies.find(dep => dep.name === 'react-dom');\n\n    if (reactDom) {\n      return isMinimalReactDomVersion(reactDom.version, '16.9.0');\n    }\n  }\n\n  return false;\n}\n\nexport async function supportsNewReactTransform(\n  dependencies: Dependencies = {},\n  devDependencies: Dependencies = {}\n): Promise<boolean> {\n  const react = dependencies.react || devDependencies.react;\n  if (react) {\n    return isMinimalReactVersion(react, '17.0.0');\n  }\n  return false;\n}\n\nexport const aliases = {\n  // Directly match react-native to react-native-web.\n  // Attempt to use react-native internals shouldn't work on web.\n  'react-native$': 'react-native-web',\n  // Alias core react-native internals to react-native-web equivalents\n  'react-native/Libraries/EventEmitter/RCTDeviceEventEmitter$':\n    'react-native-web/dist/vendor/react-native/NativeEventEmitter/RCTDeviceEventEmitter',\n  'react-native/Libraries/vendor/emitter/EventEmitter$':\n    'react-native-web/dist/vendor/react-native/emitter/EventEmitter',\n  'react-native/Libraries/vendor/emitter/EventSubscriptionVendor$':\n    'react-native-web/dist/vendor/react-native/emitter/EventSubscriptionVendor',\n  'react-native/Libraries/EventEmitter/NativeEventEmitter$':\n    'react-native-web/dist/vendor/react-native/NativeEventEmitter',\n  // Alias core react-native asset management internals to unimodule equivalents.\n  'react-native/Libraries/Image/AssetSourceResolver$':\n    'expo-asset/build/AssetSourceResolver',\n  'react-native/Libraries/Image/assetPathUtils$':\n    'expo-asset/build/Image/assetPathUtils',\n  'react-native/Libraries/Image/resolveAssetSource$':\n    'expo-asset/build/resolveAssetSource',\n};\n","import { dispatch } from 'codesandbox-api';\n\nexport async function initializeReactDevToolsLegacy() {\n  if (!window.opener) {\n    const { initialize: initializeDevTools, activate } = await import(\n      /* webpackChunkName: 'react-devtools-backend' */ 'react-devtools-inline_legacy/backend'\n    );\n    // The dispatch needs to happen before initializing, so that the backend can already listen\n    dispatch({ type: 'activate-react-devtools' });\n\n    // @ts-ignore\n    if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined') {\n      try {\n        // @ts-ignore We need to make sure that the existing chrome extension doesn't interfere\n        delete window.__REACT_DEVTOOLS_GLOBAL_HOOK__;\n      } catch (e) {\n        /* ignore */\n      }\n    }\n    // Call this before importing React (or any other packages that might import React).\n    initializeDevTools(window);\n    activate(window);\n  }\n}\n","import { dispatch } from 'codesandbox-api';\nimport uuid from 'uuid';\n\nexport async function initializeReactDevToolsLatest() {\n  if (!window.opener) {\n    const uid = uuid.v1();\n\n    const wall = {\n      listen(listener) {\n        window.addEventListener('message', event => {\n          if (event.data.uid === uid) {\n            listener(event.data);\n          }\n        });\n      },\n      send(event, payload) {\n        window.parent.postMessage({ event, payload, uid }, '*');\n      },\n    };\n\n    const {\n      activate: activateBackend,\n      createBridge: createBackendBridge,\n      initialize: initializeBackend,\n    } = await import(\n      /* webpackChunkName: 'react-devtools-backend' */ 'react-devtools-inline/backend'\n    );\n\n    // The dispatch needs to happen before initializing, so that the backend can already listen\n    dispatch({ type: 'activate-react-devtools', uid });\n\n    // @ts-ignore\n    if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined') {\n      try {\n        // @ts-ignore We need to make sure that the existing chrome extension doesn't interfere\n        delete window.__REACT_DEVTOOLS_GLOBAL_HOOK__;\n      } catch (e) {\n        /* ignore */\n      }\n    }\n    // Call this before importing React (or any other packages that might import React).\n    initializeBackend(window);\n    activateBackend(window, {\n      bridge: createBackendBridge(window, wall),\n    });\n  }\n}\n","import { Manager } from 'sandpack-core';\n\n/**\n * When using React Refresh we need to evaluate some code before 'react-dom' is initialized\n * (https://github.com/facebook/react/issues/16604#issuecomment-528663101) this is the code.\n */\nexport async function createRefreshEntry(manager: Manager) {\n  const entryModule = {\n    path: '/node_modules/__csb/react-dom-entrypoint.js',\n    code: `if (typeof window !== 'undefined') {\nconst runtime = require('react-refresh/runtime');\nruntime.injectIntoGlobalHook(window);\nwindow.$RefreshReg$ = () => {};\nwindow.$RefreshSig$ = () => type => type;\n}\n`,\n  };\n  manager.addModule(entryModule);\n\n  const tEntryModule = manager.getTranspiledModule(entryModule);\n  tEntryModule.setIsEntry(true);\n\n  await tEntryModule\n    .transpile(manager)\n    .then(() => tEntryModule.evaluate(manager, { force: true }));\n}\n","import { Transpiler, LoaderContext } from 'sandpack-core';\nimport { extname } from 'path';\nimport { isUrl } from '@codesandbox/common/lib/utils/is-url';\n\n// @ts-ignore\nimport mimeTypes from './mimes.json';\n\nfunction getMimeType(filePath: string): string | null | undefined {\n  const extension = extname(filePath).slice(1);\n  return mimeTypes[extension];\n}\n\nasync function createDataUri(blob: Blob): Promise<string> {\n  return new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.readAsDataURL(blob);\n\n    reader.onloadend = () => {\n      const base64data = reader.result;\n      resolve(base64data.toString());\n    };\n\n    reader.onerror = err => {\n      reject(err);\n    };\n  });\n}\n\nclass Base64Transpiler extends Transpiler {\n  constructor() {\n    super('base64-loader');\n  }\n\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    let uri: string = '#';\n    if (typeof code === 'string' && isUrl(code)) {\n      uri = code;\n    } else {\n      const blob: Blob =\n        typeof code === 'string'\n          ? new Blob([code], { type: getMimeType(loaderContext.path) })\n          : code;\n      uri = await createDataUri(blob);\n    }\n\n    return {\n      transpiledCode: `module.exports = \"${uri}\"`,\n    };\n  }\n}\n\nconst transpiler = new Base64Transpiler();\n\nexport { Base64Transpiler };\n\nexport default transpiler;\n","import { Preset } from 'sandpack-core';\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport { PackageJSON } from '@codesandbox/common/lib/types';\n\nimport stylesTranspiler from '../../transpilers/style';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport sassTranspiler from '../../transpilers/sass';\nimport refreshTranspiler from '../../transpilers/react-refresh/refresh-transpiler';\nimport lessTranspiler from '../../transpilers/less';\nimport postcssTranspiler from '../../transpilers/postcss';\nimport svgrTranspiler from '../../transpilers/svgr';\nimport reactSvgTranspiler from '../../transpilers/react-svg';\nimport rawTranspiler from '../../transpilers/raw';\nimport {\n  hasRefresh,\n  aliases,\n  isMinimalReactDomVersion,\n  supportsNewReactTransform,\n} from './utils';\nimport { initializeReactDevToolsLegacy } from './utils/initLegacyDevTools';\nimport { initializeReactDevToolsLatest } from './utils/initLatestDevTools';\nimport { createRefreshEntry } from './utils/createRefreshEntry';\nimport base64Transpiler from '../../transpilers/base64';\n\nexport const BASE_REACT_BABEL_PLUGINS = [\n  'transform-flow-strip-types',\n  ['proposal-decorators', { legacy: true }],\n  ['proposal-class-properties', { loose: true }],\n  '@babel/plugin-transform-react-jsx-source',\n  'babel-plugin-macros',\n  [\n    'transform-runtime',\n    {\n      corejs: false,\n      helpers: true,\n      regenerator: true,\n    },\n  ],\n  'syntax-dynamic-import',\n];\n\nexport const BASE_REACT_PRESETS_CONFIG = [\n  [\n    'env',\n    {\n      // This is incompatible with the official target\n      // but sandpack does not even run on ie9 so no point in doing more transforms\n      targets: '>1%, not ie 11',\n      // Users cannot override this behavior because this Babel\n      // configuration is highly tuned for ES5 support\n      ignoreBrowserslistConfig: true,\n      // If users import all core-js they're probably not concerned with\n      // bundle size. We shouldn't rely on magic to try and shrink it.\n      useBuiltIns: false,\n      // Do not transform modules to CJS\n      modules: false,\n      // Enable loose transforms, these are enabled for proposal-class-properties\n      loose: true,\n    },\n  ],\n  'typescript',\n];\n\nconst CLASSIC_REACT_BABEL_CONFIG = {\n  plugins: [...BASE_REACT_BABEL_PLUGINS],\n  presets: [\n    ...BASE_REACT_PRESETS_CONFIG,\n    [\n      'react',\n      {\n        runtime: 'classic',\n      },\n    ],\n  ],\n};\n\nconst NEW_REACT_BABEL_CONFIG = {\n  plugins: [...BASE_REACT_BABEL_PLUGINS],\n  presets: [\n    ...BASE_REACT_PRESETS_CONFIG,\n    [\n      'react',\n      {\n        runtime: 'automatic',\n      },\n    ],\n  ],\n};\n\nexport async function reactPreset(pkg: PackageJSON) {\n  const debug = _debug('cs:compiler:cra');\n  let initialized = false;\n  let refreshInitialized = false;\n\n  const newReactTransform = await supportsNewReactTransform(\n    pkg.dependencies,\n    pkg.devDependencies\n  );\n\n  const babelConfig = newReactTransform\n    ? NEW_REACT_BABEL_CONFIG\n    : CLASSIC_REACT_BABEL_CONFIG;\n\n  const preset = new Preset(\n    'create-react-app',\n    [\n      'web.mjs',\n      'mjs',\n      'web.js',\n      'js',\n      'web.ts',\n      'ts',\n      'web.tsx',\n      'tsx',\n      'json',\n      'web.jsx',\n      'jsx',\n      'web.cjs',\n      'cjs',\n    ],\n    aliases,\n    {\n      hasDotEnv: true,\n      processDependencies: async originalDeps => {\n        const deps = { ...originalDeps };\n        if (\n          deps['react-dom'] &&\n          isMinimalReactDomVersion(deps['react-dom'], '16.9.0')\n        ) {\n          deps['react-refresh'] = '0.9.0';\n        }\n\n        if (!deps['@babel/core']) {\n          deps['@babel/core'] = '^7.3.3';\n        }\n\n        if (!deps['@babel/runtime']) {\n          deps['@babel/runtime'] = '^7.3.4';\n        }\n\n        // Don't delete babel-runtime, some dependencies rely on it...\n        // delete deps['babel-runtime'];\n        delete deps['babel-core'];\n\n        return deps;\n      },\n      setup: async manager => {\n        const dependencies = manager.manifest.dependencies;\n        const isRefresh = await hasRefresh(dependencies);\n\n        if (!initialized || refreshInitialized !== isRefresh) {\n          initialized = true;\n          refreshInitialized = isRefresh;\n          preset.resetTranspilers();\n\n          preset.registerTranspiler(\n            module => /^https?:\\/\\/.*/.test(module.path),\n            [{ transpiler: babelTranspiler, options: {} }]\n          );\n\n          if (isRefresh) {\n            debug('Refresh is enabled, registering additional transpiler');\n            // Add react refresh babel plugin for non-node_modules\n\n            preset.registerTranspiler(\n              module =>\n                /^(?!\\/node_modules\\/).*\\.(((m|c)?jsx?)|tsx)$/.test(\n                  module.path\n                ),\n              [\n                {\n                  transpiler: babelTranspiler,\n                  options: {\n                    isV7: true,\n                    config: {\n                      ...babelConfig,\n                      plugins: [\n                        ...babelConfig.plugins,\n                        ['react-refresh/babel', { skipEnvCheck: true }],\n                      ],\n                    },\n                  },\n                },\n                { transpiler: refreshTranspiler },\n              ]\n            );\n          } else {\n            debug('Refresh is disabled');\n          }\n\n          preset.registerTranspiler(\n            module => {\n              return (\n                /\\.(m|c)?(t|j)sx?$/.test(module.path) &&\n                !module.path.endsWith('.d.ts')\n              );\n            },\n            [\n              {\n                transpiler: babelTranspiler,\n                options: {\n                  isV7: true,\n                  compileNodeModulesWithEnv: true,\n                  config: babelConfig,\n                },\n              },\n            ]\n          );\n\n          // svgr is required for the react-svg-transpiler\n          preset.addTranspiler(svgrTranspiler);\n          preset.registerTranspiler(module => /\\.svg$/.test(module.path), [\n            { transpiler: reactSvgTranspiler },\n            { transpiler: babelTranspiler },\n          ]);\n\n          preset.registerTranspiler(module => /\\.less$/.test(module.path), [\n            { transpiler: lessTranspiler },\n            { transpiler: postcssTranspiler },\n            {\n              transpiler: stylesTranspiler,\n              options: { hmrEnabled: true },\n            },\n          ]);\n\n          preset.registerTranspiler(\n            module => /\\.module\\.s[c|a]ss$/.test(module.path),\n            [\n              { transpiler: sassTranspiler },\n              { transpiler: postcssTranspiler },\n              {\n                transpiler: stylesTranspiler,\n                options: { module: true, hmrEnabled: isRefresh },\n              },\n            ]\n          );\n          preset.registerTranspiler(\n            module => /\\.module\\.css$/.test(module.path),\n            [\n              { transpiler: postcssTranspiler },\n              {\n                transpiler: stylesTranspiler,\n                options: { module: true, hmrEnabled: isRefresh },\n              },\n            ]\n          );\n\n          preset.registerTranspiler(module => /\\.css$/.test(module.path), [\n            { transpiler: postcssTranspiler },\n            {\n              transpiler: stylesTranspiler,\n              options: { hmrEnabled: isRefresh },\n            },\n          ]);\n          preset.registerTranspiler(module => /\\.s[c|a]ss$/.test(module.path), [\n            { transpiler: sassTranspiler },\n            { transpiler: postcssTranspiler },\n            {\n              transpiler: stylesTranspiler,\n              options: { hmrEnabled: isRefresh },\n            },\n          ]);\n\n          preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n            { transpiler: jsonTranspiler },\n          ]);\n\n          preset.registerTranspiler(module => /\\.html$/.test(module.path), [\n            { transpiler: rawTranspiler },\n          ]);\n\n          preset.registerTranspiler(() => true, [\n            { transpiler: base64Transpiler },\n          ]);\n\n          // Try to preload jsx-runtime\n          manager\n            .resolveTranspiledModuleAsync('react/jsx-runtime')\n            .then(x => {\n              x.transpile(manager);\n            })\n            .catch(() => {\n              /* Ignore */\n            });\n        }\n      },\n      preEvaluate: async manager => {\n        if (manager.isFirstLoad && manager.reactDevTools) {\n          if (manager.reactDevTools === 'latest') {\n            await initializeReactDevToolsLatest();\n          } else if (manager.reactDevTools === 'legacy') {\n            await initializeReactDevToolsLegacy();\n          }\n        }\n\n        if (await hasRefresh(manager.manifest.dependencies)) {\n          await createRefreshEntry(manager);\n        }\n      },\n    }\n  );\n\n  return preset;\n}\n","/* eslint-disable import/default */\n// @ts-ignore\nimport TypeScriptWorker from 'worker-loader?publicPath=/&name=typescript-transpiler.[hash:8].worker.js!./typescript-worker';\n/* eslint-enable import/default */\nimport { getDependenciesFromConfig } from 'sandbox/eval/utils/get-dependencies';\nimport { LoaderContext, TranspilerResult } from 'sandpack-core';\n\nimport WorkerTranspiler from '../worker-transpiler/transpiler';\n\nclass TypeScriptTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('ts-loader', TypeScriptWorker, { maxWorkerCount: 3 });\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const { path } = loaderContext;\n\n    let foundConfig = null;\n    let typescriptVersion = '3.4.1';\n    if (\n      loaderContext.options.configurations &&\n      loaderContext.options.configurations.typescript &&\n      loaderContext.options.configurations.typescript.parsed\n    ) {\n      foundConfig = loaderContext.options.configurations.typescript.parsed;\n    }\n\n    const dependencies = getDependenciesFromConfig(\n      loaderContext.options.configurations\n    );\n    if (dependencies && dependencies.typescript) {\n      typescriptVersion = dependencies.typescript;\n    }\n\n    const { transpiledCode, foundDependencies } = await this.queueCompileFn(\n      {\n        code,\n        path,\n        config: foundConfig,\n        typescriptVersion,\n      },\n      loaderContext\n    );\n\n    await Promise.all(\n      foundDependencies.map(async dep => {\n        if (dep.isGlob) {\n          loaderContext.addDependenciesInDirectory(dep.path, {\n            isAbsolute: dep.isAbsolute,\n            isEntry: dep.isEntry,\n          });\n        } else {\n          await loaderContext.addDependency(dep.path, {\n            isAbsolute: dep.isAbsolute,\n            isEntry: dep.isEntry,\n          });\n        }\n      })\n    );\n\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new TypeScriptTranspiler();\n\nexport { TypeScriptTranspiler };\n\nexport default transpiler;\n","import { ParsedConfigurationFiles } from '@codesandbox/common/lib/templates/template';\n\nexport function getDependenciesFromConfig(\n  configurations: ParsedConfigurationFiles\n) {\n  if (\n    configurations &&\n    configurations.package &&\n    configurations.package.parsed\n  ) {\n    return {\n      ...configurations.package.parsed.devDependencies,\n      ...configurations.package.parsed.dependencies,\n    };\n  }\n\n  return {};\n}\n","/* eslint-disable import/default */\n/* eslint-disable import/no-named-as-default-member */\n/* eslint-disable import/no-named-as-default */\n// @ts-ignore\nimport StylusWorker from 'worker-loader?publicPath=/&name=stylus-transpiler.[hash:8].worker.js!./stylus-worker';\n/* eslint-enable import/default */\nimport { LoaderContext, TranspilerResult } from 'sandpack-core';\n\nimport WorkerTranspiler from '../worker-transpiler/transpiler';\n\nclass StylusTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('stylus-loader', StylusWorker, { maxWorkerCount: 1 });\n\n    this.cacheable = false;\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const { path } = loaderContext;\n\n    const { transpiledCode } = await this.queueCompileFn(\n      {\n        code,\n        path,\n      },\n      loaderContext\n    );\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new StylusTranspiler();\n\nexport { StylusTranspiler };\n\nexport default transpiler;\n","import { Transpiler } from 'sandpack-core';\n\nclass NoopTranspiler extends Transpiler {\n  constructor() {\n    super('noop-loader');\n  }\n\n  doTranspilation(code: string) {\n    return Promise.resolve({\n      transpiledCode: code || '',\n    });\n  }\n}\n\nconst transpiler = new NoopTranspiler();\n\nexport { NoopTranspiler };\n\nexport default transpiler;\n","import { LoaderContext, Transpiler, TranspilerResult } from 'sandpack-core';\n\n/**\n * Just fetches a file from the interwebs and converts it to a blob\n *\n * @class BinaryTranspiler\n * @extends {Transpiler}\n */\nclass BinaryTranspiler extends Transpiler {\n  constructor() {\n    super('binary-loader');\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    return fetch(code)\n      .then(res => res.blob())\n      .then(blob => ({ transpiledCode: blob }));\n  }\n}\n\nconst transpiler = new BinaryTranspiler();\n\nexport { BinaryTranspiler };\n\nexport default transpiler;\n","import { LoaderContext } from 'sandpack-core/lib/transpiled-module';\nimport { Transpiler } from 'sandpack-core/lib/transpiler';\n\nclass VueTranspiler extends Transpiler {\n  constructor() {\n    super('vue-loader');\n  }\n\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    const loader = await import(\n      /* webpackChunkName: 'vue-loader' */ './loader'\n    );\n    const transpiledCode = await loader.default(code, loaderContext);\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new VueTranspiler();\n\nexport { VueTranspiler };\n\nexport default transpiler;\n","import { LoaderContext, Transpiler } from 'sandpack-core';\n\nclass VueTemplateTranspiler extends Transpiler {\n  constructor() {\n    super('vue-template-compiler');\n  }\n\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    const loader = await import(\n      /* webpackChunkName: 'vue-template-compiler' */ './loader'\n    );\n    const transpiledCode = await loader.default(code, loaderContext);\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new VueTemplateTranspiler();\n\nexport { VueTemplateTranspiler };\n\nexport default transpiler;\n","import { LoaderContext, Transpiler } from 'sandpack-core';\n\nclass VueStyleCompiler extends Transpiler {\n  constructor() {\n    super('vue-style-compiler');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    return import(\n      /* webpackChunkName: 'vue-style-compiler' */ './loader'\n    ).then(loader => loader.default(code, loaderContext));\n  }\n}\n\nconst transpiler = new VueStyleCompiler();\n\nexport { VueStyleCompiler };\n\nexport default transpiler;\n","import { LoaderContext } from 'sandpack-core/lib/transpiled-module';\nimport { Transpiler } from 'sandpack-core/lib/transpiler';\n\nclass VueSelector extends Transpiler {\n  constructor() {\n    super('vue-selector');\n  }\n\n  doTranspilation(content: string, loaderContext: LoaderContext) {\n    return import(\n      /* webpackChunkName: 'vue-selector' */ './loader'\n    ).then(loader => loader.default(content, loaderContext));\n  }\n}\n\nconst transpiler = new VueSelector();\n\nexport { VueSelector };\n\nexport default transpiler;\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\nimport hash from 'hash-sum';\n\nimport loaderUtils from 'sandpack-core/lib/transpiler/utils/loader-utils';\nimport type { LoaderContext } from 'sandpack-core/lib/transpiled-module';\n\n// @ts-ignore\nimport addStylesClientRaw from '!raw-loader!./addStylesClient';\n// @ts-ignore\nimport listToStylesRaw from '!raw-loader!./listToStyles';\n\nconst addStylesClientPath = '/node_modules/vue-style-loader/addStylesClient.js';\nconst listToStylesPath = '/node_modules/vue-style-loader/listToStyles.js';\n\nexport default async function (content: string, loaderContext: LoaderContext) {\n  loaderContext.emitModule(\n    addStylesClientPath,\n    addStylesClientRaw,\n    '/',\n    false,\n    false\n  );\n  loaderContext.emitModule(\n    listToStylesPath,\n    listToStylesRaw,\n    '/',\n    false,\n    false\n  );\n\n  const request = loaderUtils.stringifyRequest(\n    loaderContext,\n    loaderContext._module.query.replace('vue-style-loader!', '') +\n      '!' +\n      loaderContext.path\n  );\n\n  await loaderContext.addDependency(JSON.parse(request));\n\n  const id = JSON.stringify(hash(request));\n  const code = [\n    '// style-loader: Adds some css to the DOM by adding a <style> tag',\n    '',\n    '// load the styles',\n    `var content = require(${request})`,\n    // content list format is [id, css, media, sourceMap]\n    \"if(typeof content === 'string') content = [[module.id, content, '']];\",\n    'if(content.locals) module.exports = content.locals;',\n    '',\n    '// add the styles to the DOM',\n    `var update = require(\"${addStylesClientPath}\")(${id}, content, false);`,\n    '// Hot Module Replacement',\n    'if(module.hot) {',\n    ' // When the styles change, update the <style> tags',\n    ' if(!content.locals) {',\n    `   module.hot.accept(${request}, function() {`,\n    `     var newContent = require(${request});`,\n    \"     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\",\n    '     update(newContent);',\n    '   });',\n    ' }',\n    ' // When the module is disposed, remove the <style> tags',\n    ' module.hot.dispose(function() { update(); });',\n    '}',\n  ].join('\\n');\n\n  return code;\n}\n","import { LoaderContext, Transpiler } from 'sandpack-core';\n\nimport loader from './loader';\n\nclass VueStyleLoader extends Transpiler {\n  constructor() {\n    super('vue-style-loader');\n  }\n\n  async doTranspilation(content: string, loaderContext: LoaderContext) {\n    const transpiledCode = await loader(content, loaderContext);\n\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new VueStyleLoader();\n\nexport { VueStyleLoader };\n\nexport default transpiler;\n","import { LoaderContext } from 'sandpack-core/lib/transpiled-module';\nimport { Transpiler } from 'sandpack-core/lib/transpiler';\n\n// This is the most advanced compiler, I wanted to get it working in sync first,\n// but will eventually move to async.\n\nclass CSSTranspiler extends Transpiler {\n  constructor() {\n    super('css-loader');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    return import(\n      /* webpackChunkName: 'css-loader' */ './loader'\n    ).then(loader => loader.default(code, loaderContext));\n  }\n}\n\nconst transpiler = new CSSTranspiler();\n\nexport { CSSTranspiler };\n\nexport default transpiler;\n","/* eslint-disable import/default */\n// @ts-ignore\nimport PugWorker from 'worker-loader?publicPath=/&name=pug-transpiler.[hash:8].worker.js!./pug-worker';\n/* eslint-enable import/default */\n\nimport { LoaderContext, TranspilerResult } from 'sandpack-core';\nimport WorkerTranspiler from '../worker-transpiler/transpiler';\n\nclass PugTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('pug-loader', PugWorker, {\n      maxWorkerCount: 1,\n    });\n\n    this.cacheable = false;\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const { path } = loaderContext;\n    return this.queueCompileFn(\n      {\n        code,\n        path,\n      },\n      loaderContext\n    );\n  }\n}\n\nconst transpiler = new PugTranspiler();\n\nexport { PugTranspiler };\n\nexport default transpiler;\n","/* eslint-disable import/default */\n// @ts-ignore\nimport CoffeeWorker from 'worker-loader?publicPath=/&name=coffee-transpiler.[hash:8].worker.js!./coffee-worker';\n/* eslint-enable import/default */\n\nimport { LoaderContext, TranspilerResult } from 'sandpack-core';\nimport WorkerTranspiler from '../worker-transpiler/transpiler';\n\nclass CoffeeTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('coffee-loader', CoffeeWorker, {\n      maxWorkerCount: 1,\n    });\n\n    this.cacheable = false;\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const { code: transpiledCode } = await this.queueCompileFn(\n      {\n        code,\n        path: loaderContext.path,\n      },\n      loaderContext\n    );\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new CoffeeTranspiler();\n\nexport { CoffeeTranspiler };\n\nexport default transpiler;\n","import { TranspilerDefinition, Preset } from 'sandpack-core';\nimport babelTranspiler from '../../transpilers/babel';\nimport typescriptTranspiler from '../../transpilers/typescript';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport noopTranspiler from '../../transpilers/noop';\nimport binaryTranspiler from '../../transpilers/binary';\nimport base64Transpiler from '../../transpilers/base64';\nimport pugTranspiler from '../../transpilers/pug';\nimport coffeeTranspiler from '../../transpilers/coffee';\n\nexport default async function initialize(vuePreset: Preset) {\n  const { stylePostLoader, vueLoader, templateLoader } = await import(\n    'vue3-transpiler/lib/transpilers'\n  );\n\n  const sassWithConfig: TranspilerDefinition = {\n    transpiler: sassTranspiler,\n    options: {\n      indentedSyntax: true,\n    },\n  };\n\n  const scssWithConfig: TranspilerDefinition = {\n    transpiler: sassTranspiler,\n    options: {},\n  };\n\n  const lessWithConfig: TranspilerDefinition = {\n    transpiler: lessTranspiler,\n    options: {},\n  };\n\n  const stylusWithConfig: TranspilerDefinition = {\n    transpiler: stylusTranspiler,\n    options: {},\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    const styles = {\n      css: [],\n      scss: [scssWithConfig],\n      sass: [sassWithConfig],\n      less: [lessWithConfig],\n      styl: [stylusWithConfig],\n    };\n\n    return Object.keys(styles).forEach(type => {\n      vuePreset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}$`).test(module.path),\n        [\n          ...styles[type],\n          { transpiler: stylesTranspiler, options: { hmrEnabled: true } },\n        ]\n      );\n    });\n  }\n\n  vuePreset.registerTranspiler(module => /\\.(m|c)?jsx?$/.test(module.path), [\n    { transpiler: babelTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.m?tsx?$/.test(module.path), [\n    { transpiler: typescriptTranspiler },\n    { transpiler: babelTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.vue$/.test(module.path), [\n    { transpiler: vueLoader },\n    { transpiler: babelTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.coffee$/.test(module.path), [\n    { transpiler: coffeeTranspiler },\n    { transpiler: babelTranspiler },\n  ]);\n\n  registerStyleTranspilers();\n\n  vuePreset.registerTranspiler(() => false, [{ transpiler: templateLoader }]);\n  vuePreset.registerTranspiler(() => false, [{ transpiler: stylePostLoader }]);\n\n  vuePreset.registerTranspiler(module => /\\.png$/.test(module.path), [\n    { transpiler: binaryTranspiler },\n    { transpiler: base64Transpiler },\n  ]);\n  vuePreset.registerTranspiler(module => /!noop/.test(module.path), [\n    { transpiler: noopTranspiler },\n  ]);\n  vuePreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n  vuePreset.registerTranspiler(module => /\\.pug$/.test(module.path), [\n    { transpiler: pugTranspiler },\n  ]);\n\n  return vuePreset;\n}\n","import { dispatch, actions } from 'codesandbox-api';\nimport semver from 'semver';\nimport { Manager, Preset } from 'sandpack-core';\n\nimport initializeV2 from './v2';\nimport initializeV3 from './v3';\n\nfunction isMinimalSemverVersion(version: string, minimalVersion: string) {\n  try {\n    return semver.gte(version, minimalVersion);\n  } catch (e) {\n    // Semver couldn't be parsed, we assume that we're on the bleeding edge now, so true.\n    return true;\n  }\n}\n\nconst getFileNameFromVm = vm => {\n  if (vm) {\n    let options = vm || {};\n\n    if (typeof vm === 'function' && vm.cid != null) {\n      options = vm.options;\n    } else if (vm._isVue) {\n      options = vm.$options || vm.constructor.options;\n    }\n\n    return options.__file;\n  }\n  return undefined;\n};\n\nexport default function initialize() {\n  const vuePreset = new Preset(\n    'vue-cli',\n    ['vue', 'json', 'js', 'ts'],\n    {\n      '@': '{{sandboxRoot}}/src',\n    },\n    {\n      setup: async (manager: Manager) => {\n        const dependencies = manager.manifest.dependencies;\n        const vue = dependencies.find(dep => dep.name === 'vue');\n        const isV3 = vue && isMinimalSemverVersion(vue.version, '3.0.0');\n\n        try {\n          const tModule = await manager.resolveTranspiledModule(\n            '@vue/babel-plugin-jsx',\n            '/package.json',\n            []\n          );\n          await tModule.transpile(manager);\n        } catch (e) {\n          console.error(e);\n          // Ignore\n        }\n\n        if (isV3) {\n          await initializeV3(vuePreset);\n        } else {\n          initializeV2(vuePreset);\n        }\n\n        try {\n          const vueModule = await manager.resolveTranspiledModule('vue', '/');\n\n          await vueModule.transpileTree(manager);\n\n          const Vue = vueModule.evaluate(manager);\n\n          if (Vue) {\n            Vue.config.warnHandler = (msg, vm, trace) => {\n              console.error('[Vue warn]: ' + msg + trace);\n\n              const file = getFileNameFromVm(vm);\n\n              dispatch(\n                actions.correction.show(msg, {\n                  line: 1,\n                  column: 1,\n                  path: file,\n                  severity: 'warning',\n                  source: 'Vue',\n                })\n              );\n            };\n          }\n        } catch (e) {\n          /* ignore */\n        }\n      },\n    }\n  );\n\n  return vuePreset;\n}\n","import { Preset } from 'sandpack-core';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport typescriptTranspiler from '../../transpilers/typescript';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport noopTranspiler from '../../transpilers/noop';\nimport binaryTranspiler from '../../transpilers/binary';\nimport vueTranspiler from '../../transpilers/vue/v2';\nimport vueTemplateTranspiler from '../../transpilers/vue/v2/template-compiler';\nimport vueStyleTranspiler from '../../transpilers/vue/v2/style-compiler';\nimport vueSelector from '../../transpilers/vue/v2/selector';\nimport vueStyleLoader from '../../transpilers/vue/v2/style-loader';\nimport cssLoader from '../../transpilers/vue/v2/css-loader';\nimport base64Transpiler from '../../transpilers/base64';\nimport pugTranspiler from '../../transpilers/pug';\nimport coffeeTranspiler from '../../transpilers/coffee';\n\nexport default function initialize(vuePreset: Preset) {\n  vuePreset.setAdditionalAliases({\n    vue$: 'vue/dist/vue.common.js',\n  });\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    config: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    config: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    config: {},\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    const styles = {\n      css: [],\n      scss: [sassWithConfig],\n      sass: [sassWithConfig],\n      less: [lessWithConfig],\n      styl: [stylusWithConfig],\n    };\n\n    return Object.keys(styles).forEach(type => {\n      vuePreset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}$`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  vuePreset.registerTranspiler(module => /\\.(m|c)?jsx?$/.test(module.path), [\n    { transpiler: babelTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.m?tsx?$/.test(module.path), [\n    { transpiler: typescriptTranspiler },\n    { transpiler: babelTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.vue$/.test(module.path), [\n    { transpiler: vueTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.coffee$/.test(module.path), [\n    { transpiler: coffeeTranspiler },\n    { transpiler: babelTranspiler },\n  ]);\n\n  registerStyleTranspilers();\n\n  vuePreset.registerTranspiler(() => false, [\n    { transpiler: vueTemplateTranspiler },\n  ]);\n  vuePreset.registerTranspiler(() => false, [\n    { transpiler: vueStyleTranspiler },\n  ]);\n  vuePreset.registerTranspiler(() => false, [{ transpiler: vueSelector }]);\n  vuePreset.registerTranspiler(() => false, [{ transpiler: vueStyleLoader }]);\n  vuePreset.registerTranspiler(() => false, [{ transpiler: cssLoader }]);\n\n  vuePreset.registerTranspiler(module => /\\.png$/.test(module.path), [\n    { transpiler: binaryTranspiler },\n    { transpiler: base64Transpiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.svg$/.test(module.path), [\n    { transpiler: base64Transpiler },\n  ]);\n  vuePreset.registerTranspiler(module => /!noop/.test(module.path), [\n    { transpiler: noopTranspiler },\n  ]);\n  vuePreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n  vuePreset.registerTranspiler(module => /\\.pug$/.test(module.path), [\n    { transpiler: pugTranspiler },\n  ]);\n\n  return vuePreset;\n}\n","import { NoopTranspiler } from '../../../transpilers/noop';\n\n/**\n * This transpiler actually does nothing but return the code that was given,\n * this happens since our code is already in the browser, we don't need to\n * dynamically load it\n *\n * @class AsyncTranspiler\n * @extends {NoopTranspiler}\n */\nclass AsyncTranspiler extends NoopTranspiler {\n  constructor() {\n    super();\n\n    this.name = 'async';\n  }\n}\n\nconst transpiler = new AsyncTranspiler();\n\nexport { AsyncTranspiler };\n\nexport default transpiler;\n","import { Preset } from 'sandpack-core';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\n\nimport asyncTranspiler from './transpilers/async';\n\nexport default function PreactPresetV8() {\n  const preactPreset = new Preset(\n    'preact-cli',\n    ['js', 'jsx', 'ts', 'tsx', 'json', 'less', 'scss', 'sass', 'styl', 'css'],\n    {\n      preact$: 'preact',\n      // preact-compat aliases for supporting React dependencies:\n      react: 'preact-compat',\n      'react-dom': 'preact-compat',\n      'create-react-class': 'preact-compat/lib/create-react-class',\n      'react-addons-css-transition-group': 'preact-css-transition-group',\n    }\n  );\n\n  preactPreset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        isV7: false,\n        compileNodeModulesWithEnv: true,\n        // config is derived from babelrc at packages/common/src/templates/configuration/babelrc/index.ts\n      },\n    },\n  ]);\n\n  // For these routes we need to enable css modules\n  const cssModulesPaths = [\n    '/src/components',\n    '/components',\n    '/src/routes',\n    '/routes',\n  ];\n\n  const cssModulesRegex = extension =>\n    new RegExp(`^(${cssModulesPaths.join('|')})\\\\/.*\\\\.${extension}$`);\n\n  const cssTypes = {\n    css: [],\n    's[a|c]ss': [{ transpiler: sassTranspiler }],\n    less: [{ transpiler: lessTranspiler }],\n    styl: [{ transpiler: stylusTranspiler }],\n  };\n\n  Object.keys(cssTypes).forEach(cssType => {\n    preactPreset.registerTranspiler(\n      module => cssModulesRegex(cssType).test(module.path),\n      [\n        ...cssTypes[cssType],\n        { transpiler: stylesTranspiler, options: { module: true } },\n      ]\n    );\n\n    preactPreset.registerTranspiler(\n      module => new RegExp(`\\\\.${cssType}$`).test(module.path),\n      [...cssTypes[cssType], { transpiler: stylesTranspiler }]\n    );\n  });\n\n  preactPreset.registerTranspiler(module => /\\.json/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  // Support for !async statements\n  preactPreset.registerTranspiler(\n    () => false /* never load without explicit statement */,\n    [{ transpiler: asyncTranspiler }]\n  );\n\n  preactPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preactPreset;\n}\n","import { Preset } from 'sandpack-core';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\n\nimport asyncTranspiler from './transpilers/async';\n\nexport default function PreactPreset() {\n  const preactPreset = new Preset(\n    'preact-cli',\n    ['js', 'jsx', 'ts', 'tsx', 'json', 'less', 'scss', 'sass', 'styl', 'css'],\n    {\n      preact$: 'preact',\n      // preact-compat aliases for supporting React dependencies:\n      react: 'preact/compat',\n      'react-dom': 'preact/compat',\n      'create-react-class': 'preact/compat/lib/create-react-class',\n      'react-addons-css-transition-group': 'preact-css-transition-group',\n    }\n  );\n\n  preactPreset.registerTranspiler(\n    module => /\\.(m|c)?(t|j)sx?$/.test(module.path),\n    [\n      {\n        transpiler: babelTranspiler,\n        options: {\n          isV7: true,\n          compileNodeModulesWithEnv: true,\n          // config is derived from babelrc at packages/common/src/templates/configuration/babelrc/index.ts\n        },\n      },\n    ]\n  );\n\n  // For these routes we need to enable css modules\n  const cssModulesPaths = [\n    '/src/components',\n    '/components',\n    '/src/routes',\n    '/routes',\n  ];\n\n  const cssModulesRegex = extension =>\n    new RegExp(`^(${cssModulesPaths.join('|')})\\\\/.*\\\\.${extension}$`);\n\n  const cssTypes = {\n    css: [],\n    's[a|c]ss': [{ transpiler: sassTranspiler }],\n    less: [{ transpiler: lessTranspiler }],\n    styl: [{ transpiler: stylusTranspiler }],\n  };\n\n  Object.keys(cssTypes).forEach(cssType => {\n    preactPreset.registerTranspiler(\n      module => cssModulesRegex(cssType).test(module.path),\n      [\n        ...cssTypes[cssType],\n        { transpiler: stylesTranspiler, options: { module: true } },\n      ]\n    );\n\n    preactPreset.registerTranspiler(\n      module => new RegExp(`\\\\.${cssType}$`).test(module.path),\n      [...cssTypes[cssType], { transpiler: stylesTranspiler }]\n    );\n  });\n\n  preactPreset.registerTranspiler(module => /\\.json/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  // Support for !async statements\n  preactPreset.registerTranspiler(\n    () => false /* never load without explicit statement */,\n    [{ transpiler: asyncTranspiler }]\n  );\n\n  preactPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preactPreset;\n}\n","/* eslint-disable import/default */\n// @ts-ignore\nimport SvelteWorker from 'worker-loader?publicPath=/&name=svelte-transpiler.[hash:8].worker.js!./svelte-worker';\n/* eslint-enable import/default */\n\nimport semver from 'semver';\nimport { LoaderContext, TranspilerResult } from 'sandpack-core';\nimport { dispatch, actions } from 'codesandbox-api';\n\nimport WorkerTranspiler from '../worker-transpiler/transpiler';\n\nclass SvelteTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('svelte-loader', SvelteWorker, { maxWorkerCount: 2 });\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const packageJSON = loaderContext.options.configurations.package;\n    const svelte =\n      (packageJSON &&\n        packageJSON.parsed &&\n        packageJSON.parsed.devDependencies &&\n        packageJSON.parsed.devDependencies.svelte &&\n        semver.coerce(packageJSON.parsed.devDependencies.svelte)) ||\n      semver.coerce(packageJSON.parsed.dependencies.svelte);\n\n    const { path } = loaderContext;\n    dispatch(actions.correction.clear(path, 'svelte'));\n    const {\n      transpiledCode,\n      warnings,\n    }: {\n      transpiledCode: string;\n      warnings: Array<any>;\n    } = await this.queueCompileFn(\n      {\n        code,\n        path,\n        version: (svelte || {}).version,\n      },\n      loaderContext\n    );\n    if (warnings?.length) {\n      warnings.forEach(loaderContext.emitWarning);\n    }\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new SvelteTranspiler();\n\nexport { SvelteTranspiler };\n\nexport default transpiler;\n","import { Preset } from 'sandpack-core';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\nimport svelteTranspiler from '../../transpilers/svelte';\nimport sassTranspiler from '../../transpilers/sass';\nimport styleProcessor from '../../transpilers/postcss';\nimport stylesTranspiler from '../../transpilers/style';\n\nconst babelOptions = {\n  isV7: true,\n  config: {\n    presets: [],\n    plugins: [],\n    parserOpts: {\n      plugins: ['dynamicImport', 'objectRestSpread'],\n    },\n  },\n};\n\nexport default function initialize() {\n  const sveltePreset = new Preset(\n    'svelte',\n    ['js', 'cjs', 'mjs', 'jsx', 'svelte'],\n    {}\n  );\n\n  sveltePreset.registerTranspiler(module => /\\.(m|c)?jsx?$/.test(module.path), [\n    { transpiler: babelTranspiler, options: babelOptions },\n  ]);\n\n  sveltePreset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: styleProcessor },\n    {\n      transpiler: stylesTranspiler,\n      options: { hmrEnabled: false },\n    },\n  ]);\n\n  sveltePreset.registerTranspiler(module => /\\.s[c|a]ss$/.test(module.path), [\n    { transpiler: sassTranspiler },\n    { transpiler: styleProcessor },\n    {\n      transpiler: stylesTranspiler,\n      options: { hmrEnabled: false },\n    },\n  ]);\n\n  sveltePreset.registerTranspiler(module => /\\.svelte$/.test(module.path), [\n    { transpiler: svelteTranspiler },\n    { transpiler: babelTranspiler, options: babelOptions },\n  ]);\n\n  sveltePreset.registerTranspiler(module => /\\.html$/.test(module.path), [\n    { transpiler: svelteTranspiler },\n    { transpiler: babelTranspiler, options: babelOptions },\n  ]);\n\n  sveltePreset.registerTranspiler(module => /\\.json/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  sveltePreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return sveltePreset;\n}\n","const importRegex = /(^|\\s)(import)\\s*\\(/g;\nexport function convertDynamicImport(code) {\n    return code.replace(importRegex, ' $csbImport(');\n}\n","import { Transpiler } from '../..';\nimport { convertDynamicImport } from './dynamic-import';\n/**\n * This transpiler is run after all modules, to enable specific CodeSandbox features\n *\n * @class CodeSandbox\n * @extends {Transpiler}\n */\nclass CodeSandboxDynamicImports extends Transpiler {\n    constructor() {\n        super('codesandbox-dynamic-imports-loader');\n    }\n    doTranspilation(code, loaderContext) {\n        const newCode = convertDynamicImport(code);\n        return { transpiledCode: newCode };\n    }\n}\nconst transpiler = new CodeSandboxDynamicImports();\nexport { CodeSandboxDynamicImports };\nexport default transpiler;\n","/* eslint-disable */\nimport { Transpiler, LoaderContext } from 'sandpack-core';\n\n// using: regex, capture groups, and capture group variables.\nconst templateUrlRegex = /templateUrl\\s*:(\\s*['\"`](.*?)['\"`]\\s*([,}]))/gm;\nconst stylesRegex = /styleUrls *:(\\s*\\[[^\\]]*?\\])/g;\nconst stringRegex = /(['`\"])((?:[^\\\\]\\\\\\1|.)*?)\\1/g;\n\nfunction replaceStringsWithRequires(string, extensionConfig, addDependency) {\n  let depPromises = [];\n  let result = string.replace(stringRegex, (match, quote, url) => {\n    if (url.charAt(0) !== '.') {\n      // eslint-disable-next-line\n      url = './' + url;\n    }\n\n    const urlParts = url.split('.');\n    const extension = urlParts[urlParts.length - 1];\n    const transpilers = extensionConfig[extension] || [];\n\n    const finalUrl = `!raw-loader!${transpilers\n      .map(t => t.transpiler.name)\n      .join('!')}!${url}`;\n\n    depPromises.push(addDependency(finalUrl, { isAbsolute: false }));\n\n    return \"require('\" + finalUrl + \"')\";\n  });\n\n  return { result, depPromises };\n}\n\n/**\n * Converts Angular statements to css/html to require statements. Taken from\n * https://github.com/TheLarkInn/angular2-template-loader/blob/master/index.js\n *\n * @class Angular2Transpiler\n * @extends {Transpiler}\n */\nclass Angular2Transpiler extends Transpiler {\n  constructor() {\n    super('binary-loader');\n  }\n\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    const styleProperty = 'styles';\n    const templateProperty = 'template';\n\n    let promises: Array<Promise<any>> = [];\n    const newSource = code\n      .replace(templateUrlRegex, (match, url) => {\n        // replace: templateUrl: './path/to/template.html'\n        // with: template: require('./path/to/template.html')\n        // or: templateUrl: require('./path/to/template.html')\n        // if `keepUrl` query parameter is set to true.\n        let { result, depPromises } = replaceStringsWithRequires(\n          url,\n          loaderContext.options.preTranspilers,\n          loaderContext.addDependency\n        );\n        promises.push(...depPromises);\n        return templateProperty + ':' + result;\n      })\n      .replace(stylesRegex, (match, urls) => {\n        // replace: stylesUrl: ['./foo.css', \"./baz.css\", \"./index.component.css\"]\n        // with: styles: [require('./foo.css'), require(\"./baz.css\"), require(\"./index.component.css\")]\n        // or: styleUrls: [require('./foo.css'), require(\"./baz.css\"), require(\"./index.component.css\")]\n        // if `keepUrl` query parameter is set to true.\n        let { result, depPromises } = replaceStringsWithRequires(\n          urls,\n          loaderContext.options.preTranspilers,\n          loaderContext.addDependency\n        );\n        promises.push(...depPromises);\n        return styleProperty + ':' + result;\n      });\n\n    await Promise.all(promises);\n\n    return {\n      transpiledCode: newSource,\n    };\n  }\n}\n\nconst transpiler = new Angular2Transpiler();\n\nexport { Angular2Transpiler };\n\nexport default transpiler;\n","// @flow\nimport { join, absolute } from '@codesandbox/common/lib/utils/path';\nimport { Manager, TranspiledModule, Preset } from 'sandpack-core';\nimport csbDynamicImportTranspiler from 'sandpack-core/lib/transpiler/transpilers/csb-dynamic-import';\n\nimport angular2Transpiler from '../../transpilers/angular2-template';\nimport typescriptTranspiler from '../../transpilers/typescript';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport postcssTranspiler from '../../transpilers/postcss';\n\nlet polyfillsLoaded = false;\n\nasync function addAngularJSONPolyfills(manager) {\n  const { parsed } = manager.configurations['angular-config'];\n\n  const { defaultProject } = parsed;\n\n  if (!defaultProject || !parsed.projects) {\n    return;\n  }\n\n  const project = parsed.projects[defaultProject];\n\n  if (project && project.architect) {\n    const { build } = project.architect;\n    if (build.options) {\n      if (project.root && build.options.polyfill) {\n        const polyfillLocation = absolute(\n          join(project.root, build.options.polyfill)\n        );\n        const polyfills = await manager.resolveModuleAsync({\n          path: polyfillLocation,\n        });\n\n        await manager.transpileModules(polyfills);\n        manager.evaluateModule(polyfills);\n      }\n    }\n  }\n}\n\nasync function addAngularCLIPolyfills(manager) {\n  const { parsed } = manager.configurations['angular-cli'];\n  if (parsed.apps && parsed.apps[0]) {\n    const app = parsed.apps[0];\n\n    if (app.root && app.polyfills) {\n      const polyfillLocation = absolute(join(app.root, app.polyfills));\n      const polyfills = await manager.resolveModuleAsync({\n        path: polyfillLocation,\n      });\n\n      await manager.transpileModules(polyfills);\n      manager.evaluateModule(polyfills);\n    }\n  }\n}\n\nasync function addAngularJSONResources(manager) {\n  const { parsed } = manager.configurations['angular-config'];\n\n  const { defaultProject } = parsed;\n  if (!defaultProject || !parsed.projects) {\n    return;\n  }\n\n  const project = parsed.projects[defaultProject];\n\n  if (project && project.architect) {\n    const { build } = project.architect;\n    if (build.options) {\n      const { styles = [], scripts = [] } = build.options;\n\n      /* eslint-disable no-await-in-loop */\n      for (let i = 0; i < styles.length; i++) {\n        const p = styles[i];\n\n        const finalPath = absolute(join(project.root, p.input || p));\n\n        const tModule = await manager.resolveTranspiledModuleAsync(\n          finalPath,\n          null\n        );\n\n        await tModule.transpile(manager);\n        tModule.setIsEntry(true);\n        tModule.evaluate(manager);\n      }\n\n      const scriptTModules: TranspiledModule[] = await Promise.all(\n        scripts.map(async p => {\n          const finalPath = absolute(join(project.root, p));\n          const tModule = await manager.resolveTranspiledModuleAsync(\n            finalPath,\n            null\n          );\n          tModule.setIsEntry(true);\n          return tModule.transpile(manager);\n        })\n      );\n\n      scriptTModules.forEach(t => {\n        t.evaluate(manager, { asUMD: true });\n      });\n    }\n  }\n}\n\nconst getPathFromResource = (root, p) => {\n  const nodeModuleRegex = /(^\\.\\/)?node_modules\\//;\n  if (/(^\\.\\/)?node_modules/.test(p)) {\n    // If starts with node_modules or ./node_modules\n    return p.replace(nodeModuleRegex, '');\n  }\n\n  return absolute(join(root || 'src', p));\n};\n\nasync function addAngularCLIResources(manager: Manager) {\n  const { parsed } = manager.configurations['angular-cli'];\n  if (parsed.apps && parsed.apps[0]) {\n    const app = parsed.apps[0];\n\n    const { styles = [], scripts = [] } = app;\n\n    /* eslint-disable no-await-in-loop */\n    for (let i = 0; i < styles.length; i++) {\n      const p = styles[i];\n      const finalPath = getPathFromResource(app.root, p.input || p);\n\n      const tModule = await manager.resolveTranspiledModuleAsync(\n        finalPath,\n        null\n      );\n\n      await tModule.transpile(manager);\n      tModule.setIsEntry(true);\n      tModule.evaluate(manager);\n    }\n    /* eslint-enable no-await-in-loop */\n\n    const scriptTModules: TranspiledModule[] = await Promise.all(\n      scripts.map(async p => {\n        const finalPath = getPathFromResource(app.root, p);\n        const tModule = await manager.resolveTranspiledModuleAsync(\n          finalPath,\n          null\n        );\n        tModule.setIsEntry(true);\n        return tModule.transpile(manager);\n      })\n    );\n\n    scriptTModules.forEach(t => {\n      t.evaluate(manager, { asUMD: true });\n    });\n\n    if (app.environmentSource && app.environments && app.environments.dev) {\n      manager.preset.setAdditionalAliases({\n        [app.environmentSource]: app.environments.dev,\n      });\n    }\n  }\n}\n\nexport default function initialize() {\n  const preset = new Preset(\n    'angular-cli',\n    ['web.ts', 'ts', 'json', 'web.tsx', 'tsx', 'js', 'cjs'],\n    {},\n    {\n      setup: async manager => {\n        if (!polyfillsLoaded) {\n          const zone = await manager.resolveModuleAsync({\n            path: 'zone.js',\n          });\n          await manager.transpileModules(zone);\n          manager.evaluateModule(zone);\n\n          if (!manager.configurations['angular-config'].generated) {\n            await addAngularJSONPolyfills(manager);\n          } else {\n            await addAngularCLIPolyfills(manager);\n          }\n\n          polyfillsLoaded = true;\n        }\n\n        if (!manager.configurations['angular-config'].generated) {\n          await addAngularJSONResources(manager);\n        } else {\n          await addAngularCLIResources(manager);\n        }\n      },\n      processDependencies: deps => {\n        if (!deps['@babel/core']) {\n          deps['@babel/core'] = '^7.3.3';\n        }\n\n        if (!deps['@babel/runtime']) {\n          deps['@babel/runtime'] = '^7.3.4';\n        }\n\n        // Don't delete babel-runtime, some dependencies rely on it...\n        // delete deps['babel-runtime'];\n        delete deps['babel-core'];\n\n        return Promise.resolve(deps);\n      },\n    }\n  );\n\n  const postcssWithConfig = {\n    transpiler: postcssTranspiler,\n    options: {},\n  };\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    options: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    options: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    options: {},\n  };\n\n  const styles = {\n    css: [postcssWithConfig],\n    scss: [sassWithConfig],\n    sass: [sassWithConfig],\n    less: [lessWithConfig],\n    styl: [stylusWithConfig],\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    return Object.keys(styles).forEach(type => {\n      preset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}$`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  registerStyleTranspilers();\n\n  preset.registerTranspiler(module => /\\.tsx?$/.test(module.path), [\n    { transpiler: angular2Transpiler, options: { preTranspilers: styles } },\n    { transpiler: typescriptTranspiler },\n    { transpiler: csbDynamicImportTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.(m|c)?js$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        isV7: true,\n        config: {\n          presets: [\n            [\n              'env',\n              {\n                // These targets rougly match csb itself\n                targets: '>1%, not ie 11',\n                // Users cannot override this behavior because this Babel\n                // configuration is highly tuned for ES5 support\n                ignoreBrowserslistConfig: true,\n                // If users import all core-js they're probably not concerned with\n                // bundle size. We shouldn't rely on magic to try and shrink it.\n                useBuiltIns: false,\n                // Do not transform modules to CJS\n                modules: false,\n              },\n            ],\n          ],\n          plugins: [['proposal-decorators', { legacy: true }]],\n        },\n      },\n    },\n  ]);\n\n  preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  preset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preset;\n}\n","import { LoaderContext, TranspilerResult } from 'sandpack-core';\n\n// @ts-ignore\nimport HTMLWorker from 'worker-loader?publicPath=/&name=parcel-html-transpiler.[hash:8].worker.js!./html-worker';\nimport WorkerTranspiler from '../../../transpilers/worker-transpiler/transpiler';\n\nclass HTMLTranspiler extends WorkerTranspiler {\n  constructor() {\n    super('html-loader', HTMLWorker, { maxWorkerCount: 1 });\n\n    this.HMREnabled = false;\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const { transpiledCode, foundDependencies } = await this.queueCompileFn(\n      {\n        code,\n      },\n      loaderContext\n    );\n\n    await Promise.all(\n      foundDependencies.map(dep =>\n        loaderContext.addDependency(dep.path, {\n          isAbsolute: dep.isAbsolute,\n          isEntry: dep.isEntry,\n        })\n      )\n    );\n\n    return { transpiledCode };\n  }\n}\n\nconst transpiler = new HTMLTranspiler();\n\nexport { HTMLTranspiler };\n\nexport default transpiler;\n","import { Preset } from 'sandpack-core';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport postcssTranspiler from '../../transpilers/postcss';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport tsTranspiler from '../../transpilers/typescript';\nimport vueTranspiler from '../../transpilers/vue/v2';\nimport vueTemplateTranspiler from '../../transpilers/vue/v2/template-compiler';\nimport vueStyleTranspiler from '../../transpilers/vue/v2/style-compiler';\nimport vueSelector from '../../transpilers/vue/v2/selector';\nimport vueStyleLoader from '../../transpilers/vue/v2/style-loader';\nimport cssLoader from '../../transpilers/vue/v2/css-loader';\nimport htmlTranspiler from './transpilers/html-transpiler';\nimport pugTranspiler from '../../transpilers/pug';\nimport coffeeTranspiler from '../../transpilers/coffee';\nimport noopTranspiler from '../../transpilers/noop';\n\nexport default function initialize() {\n  const parcelPreset = new Preset(\n    'parcel',\n    [\n      'js',\n      'mjs',\n      'cjs',\n      'jsx',\n      'ts',\n      'tsx',\n      'json',\n      'less',\n      'scss',\n      'sass',\n      'styl',\n      'css',\n      'vue',\n    ],\n    {},\n    {\n      htmlDisabled: true,\n      setup: manager => {\n        const packageJSON = manager.configurations.package;\n\n        if (packageJSON && packageJSON.parsed && packageJSON.parsed.alias) {\n          manager.preset.setAdditionalAliases(packageJSON.parsed.alias);\n        }\n      },\n    }\n  );\n\n  parcelPreset.registerTranspiler(module => /\\.coffee$/.test(module.path), [\n    { transpiler: coffeeTranspiler },\n    { transpiler: babelTranspiler },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.(m|c)?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        dynamicCSSModules: true,\n      },\n    },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.tsx?$/.test(module.path), [\n    { transpiler: tsTranspiler },\n    {\n      transpiler: babelTranspiler,\n      options: {\n        dynamicCSSModules: true,\n      },\n    },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.pug$/.test(module.path), [\n    { transpiler: pugTranspiler },\n    { transpiler: htmlTranspiler },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.html$/.test(module.path), [\n    { transpiler: htmlTranspiler },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: postcssTranspiler },\n    { transpiler: stylesTranspiler },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.s[c|a]ss$/.test(module.path), [\n    { transpiler: sassTranspiler },\n    { transpiler: postcssTranspiler },\n    {\n      transpiler: stylesTranspiler,\n    },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  // VUE START\n  parcelPreset.registerTranspiler(module => /\\.vue$/.test(module.path), [\n    { transpiler: vueTranspiler },\n  ]);\n  parcelPreset.registerTranspiler(() => false, [\n    { transpiler: vueTemplateTranspiler },\n  ]);\n  parcelPreset.registerTranspiler(() => false, [\n    { transpiler: vueStyleTranspiler },\n  ]);\n  parcelPreset.registerTranspiler(() => false, [{ transpiler: vueSelector }]);\n  parcelPreset.registerTranspiler(() => false, [\n    { transpiler: vueStyleLoader },\n  ]);\n  parcelPreset.registerTranspiler(() => false, [{ transpiler: cssLoader }]);\n  // VUE END\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    options: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    options: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    options: {},\n  };\n  const styles = {\n    css: [],\n    scss: [sassWithConfig],\n    sass: [sassWithConfig],\n    less: [lessWithConfig],\n    styl: [stylusWithConfig],\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    return Object.keys(styles).forEach(type => {\n      parcelPreset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}$`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  registerStyleTranspilers();\n\n  parcelPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  parcelPreset.registerTranspiler(() => false, [\n    { transpiler: noopTranspiler },\n  ]);\n\n  return parcelPreset;\n}\n","import { Preset } from 'sandpack-core';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\n\nexport default function initialize() {\n  const babelPreset = new Preset(\n    'babel-repl',\n    ['js', 'jsx', 'ts', 'tsx', 'json'],\n    {},\n    {}\n  );\n\n  babelPreset.registerTranspiler(module => /\\.jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        disableCodeSandboxPlugins: true,\n      },\n    },\n  ]);\n\n  babelPreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  babelPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return babelPreset;\n}\n","import { Preset } from 'sandpack-core';\nimport csbDynamicImportTranspiler from 'sandpack-core/lib/transpiler/transpilers/csb-dynamic-import';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport tsTranspiler from '../../transpilers/typescript';\n\nexport default function initialize() {\n  const cxjsPreset = new Preset(\n    'cxjs',\n    ['js', 'jsx', 'ts', 'tsx', 'json', 'less', 'scss', 'sass', 'styl', 'css'],\n    {},\n    {}\n  );\n\n  cxjsPreset.registerTranspiler(module => /\\.(c|m)?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        dynamicCSSModules: true,\n        compileNodeModulesWithEnv: true,\n\n        config: {\n          presets: ['es2015', 'react', 'stage-0'],\n          plugins: [\n            'transform-async-to-generator',\n            'transform-object-rest-spread',\n            'transform-decorators-legacy',\n            'transform-class-properties',\n            // Polyfills the runtime needed for async/await and generators\n            [\n              'transform-runtime',\n              {\n                helpers: false,\n                polyfill: false,\n                regenerator: true,\n              },\n            ],\n            [\n              'transform-regenerator',\n              {\n                // Async functions are converted to generators by babel-preset-env\n                async: false,\n              },\n            ],\n          ],\n        },\n      },\n    },\n  ]);\n\n  cxjsPreset.registerTranspiler(module => /\\.tsx?$/.test(module.path), [\n    { transpiler: tsTranspiler },\n    { transpiler: csbDynamicImportTranspiler },\n  ]);\n\n  cxjsPreset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  cxjsPreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    options: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    options: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    options: {},\n  };\n  const styles = {\n    css: [],\n    scss: [sassWithConfig],\n    sass: [sassWithConfig],\n    less: [lessWithConfig],\n    styl: [stylusWithConfig],\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    return Object.keys(styles).forEach(type => {\n      cxjsPreset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}$`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  registerStyleTranspilers();\n\n  cxjsPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return cxjsPreset;\n}\n","import { basename, dirname, join } from 'path';\nimport stripANSI from 'strip-ansi';\n\nimport { LoaderContext, Transpiler } from 'sandpack-core';\nimport { Module } from 'sandpack-core/lib/types/module';\n\ntype ReasonModule = Module & {\n  moduleName: string;\n};\n\nfunction addScript(src) {\n  return new Promise(resolve => {\n    const s = document.createElement('script');\n    s.setAttribute('src', src);\n    document.body.appendChild(s);\n\n    s.onload = () => {\n      resolve(undefined);\n    };\n  });\n}\n\nconst IGNORED_DEPENDENCIES = ['ReactDOMRe', 'ReasonReact'];\n\nfunction getModuleName(path: string) {\n  const moduleParts = basename(path).split('.');\n  moduleParts.pop();\n\n  const unCapitalizedModuleName = moduleParts.join('.');\n  return (\n    unCapitalizedModuleName[0].toUpperCase() + unCapitalizedModuleName.slice(1)\n  );\n}\n\nconst cachedDependencies = new Map();\nconst global = window as any;\n\nfunction getDependencyList(\n  modules: Array<ReasonModule>,\n  list: Set<ReasonModule>,\n  module: ReasonModule\n) {\n  const cache = cachedDependencies.get(module.path);\n\n  const listFunction = module.path.endsWith('.re')\n    ? global.ocaml.reason_list_dependencies\n    : global.ocaml.list_dependencies;\n\n  const deps =\n    cache ||\n    listFunction(module.code)\n      .filter(x => IGNORED_DEPENDENCIES.indexOf(x) === -1)\n      .filter(x => !list.has(x));\n\n  if (!cache) {\n    // Didn't get it from the cache\n    deps.shift(); // Remove the first 0 value\n  }\n\n  if (module.path.startsWith('/node_modules')) {\n    cachedDependencies.set(module.path, deps);\n  }\n\n  deps.forEach(dep => {\n    const foundModule = modules.find(\n      x => x.moduleName === dep && !x.path.endsWith('.rei')\n    );\n\n    if (foundModule) {\n      getDependencyList(modules, list, foundModule);\n    }\n  });\n\n  list.add(module);\n}\n\nclass ReasonTranspiler extends Transpiler {\n  constructor() {\n    super('reason-loader');\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<{ transpiledCode: string }> {\n    if (!global.ocaml) {\n      await addScript(\n        'https://cdn.jsdelivr.net/gh/jaredly/reason-react@more-docs/docs/bucklescript.js'\n      );\n      await addScript('https://reason.surge.sh/bucklescript-deps.js');\n      await addScript('https://unpkg.com/reason@3.3.4/refmt.js');\n    }\n\n    const reasonModules = loaderContext\n      .getModules()\n      .filter(\n        x =>\n          x.path.endsWith('.re') ||\n          x.path.endsWith('.rei') ||\n          x.path.endsWith('.ml')\n      )\n      .map(x => ({\n        ...x,\n        moduleName: getModuleName(x.path),\n      }));\n\n    const mainReasonModule: ReasonModule = reasonModules.find(\n      m => m.path === loaderContext._module.module.path\n    );\n\n    const modulesToAdd: Set<ReasonModule> = new Set();\n    getDependencyList(reasonModules, modulesToAdd, mainReasonModule);\n\n    const modulesToAddArr = Array.from(modulesToAdd);\n\n    await Promise.all(\n      modulesToAddArr.map(async m => {\n        if (m.path !== loaderContext._module.module.path) {\n          await loaderContext.addTranspilationDependency(m.path, {});\n        }\n      })\n    );\n\n    const newCode = modulesToAddArr\n      .map(x => {\n        const usedCode = x.path.endsWith('.re')\n          ? x.code\n          : global.printRE(global.parseML(x.code));\n\n        const { moduleName } = x;\n\n        const typesPath = join(\n          dirname(x.path),\n          basename(x.path, '.re') + '.rei'\n        );\n\n        const typesModule = reasonModules.find(\n          module => module.path === typesPath\n        );\n\n        let reasonCode = `module ${moduleName}`;\n\n        if (typesModule) {\n          reasonCode += `: {\\n${typesModule.code}\\n}`;\n        }\n\n        reasonCode += ` = {\n#1 ${moduleName}\n${usedCode}\n};`;\n\n        return reasonCode;\n      })\n      .join('\\n\\n');\n\n    const {\n      // eslint-disable-next-line camelcase\n      js_code,\n      js_error_msg: errorMessage,\n      row,\n      column,\n      text,\n    } = global.ocaml.reason_compile_super_errors(newCode);\n\n    if (errorMessage) {\n      const error = new Error(stripANSI(text));\n\n      error.name = 'Reason Compile Error';\n      // @ts-ignore\n      error.fileName = loaderContext._module.module.path;\n      // @ts-ignore\n      error.lineNumber = row + 1;\n      // @ts-ignore\n      error.columnNumber = column;\n\n      throw error;\n    }\n\n    return {\n      transpiledCode: js_code,\n    };\n  }\n}\n\nconst transpiler = new ReasonTranspiler();\n\nexport { ReasonTranspiler };\n\nexport default transpiler;\n","export default {\n  'stdlib/reasonReact': '@jaredly/reason-react/lib/js/src/ReasonReact.js',\n  'stdlib/reasonReactOptimizedCreateClass':\n    '@jaredly/reason-react/lib/js/src/ReasonReactOptimizedCreateClass.js',\n  'stdlib/reactEventRe': '@jaredly/reason-react/lib/js/src/ReactEventRe.js',\n  'stdlib/reactDOMServerRe':\n    '@jaredly/reason-react/lib/js/src/ReactDOMServerRe.js',\n  'stdlib/reactDOMRe': '@jaredly/reason-react/lib/js/src/ReactDOMRe.js',\n  'stdlib/belt_MutableSet': '@jaredly/bs-core/lib/js/belt_MutableSet.js',\n  'stdlib/belt_MutableStack': '@jaredly/bs-core/lib/js/belt_MutableStack.js',\n  'stdlib/js_unsafe': '@jaredly/bs-core/lib/js/js_unsafe.js',\n  'stdlib/caml_string': '@jaredly/bs-core/lib/js/caml_string.js',\n  'stdlib/belt_internalMapString':\n    '@jaredly/bs-core/lib/js/belt_internalMapString.js',\n  'stdlib/belt_Id': '@jaredly/bs-core/lib/js/belt_Id.js',\n  'stdlib/caml_module': '@jaredly/bs-core/lib/js/caml_module.js',\n  'stdlib/js_internal': '@jaredly/bs-core/lib/js/js_internal.js',\n  'stdlib/char': '@jaredly/bs-core/lib/js/char.js',\n  'stdlib/js': '@jaredly/bs-core/lib/js/js.js',\n  'stdlib/caml_gc': '@jaredly/bs-core/lib/js/caml_gc.js',\n  'stdlib/js_null': '@jaredly/bs-core/lib/js/js_null.js',\n  'stdlib/belt_HashMapString': '@jaredly/bs-core/lib/js/belt_HashMapString.js',\n  'stdlib/int64': '@jaredly/bs-core/lib/js/int64.js',\n  'stdlib/sort': '@jaredly/bs-core/lib/js/sort.js',\n  'stdlib/belt_SortArrayInt': '@jaredly/bs-core/lib/js/belt_SortArrayInt.js',\n  'stdlib/caml_basic': '@jaredly/bs-core/lib/js/caml_basic.js',\n  'stdlib/js_result': '@jaredly/bs-core/lib/js/js_result.js',\n  'stdlib/caml_utils': '@jaredly/bs-core/lib/js/caml_utils.js',\n  'stdlib/js_promise': '@jaredly/bs-core/lib/js/js_promise.js',\n  'stdlib/js_obj': '@jaredly/bs-core/lib/js/js_obj.js',\n  'stdlib/belt_Map': '@jaredly/bs-core/lib/js/belt_Map.js',\n  'stdlib/js_console': '@jaredly/bs-core/lib/js/js_console.js',\n  'stdlib/caml_backtrace': '@jaredly/bs-core/lib/js/caml_backtrace.js',\n  'stdlib/oo': '@jaredly/bs-core/lib/js/oo.js',\n  'stdlib/caml_hash': '@jaredly/bs-core/lib/js/caml_hash.js',\n  'stdlib/belt_SortArray': '@jaredly/bs-core/lib/js/belt_SortArray.js',\n  'stdlib/random': '@jaredly/bs-core/lib/js/random.js',\n  'stdlib/stream': '@jaredly/bs-core/lib/js/stream.js',\n  'stdlib/belt_SetDict': '@jaredly/bs-core/lib/js/belt_SetDict.js',\n  'stdlib/caml_int32': '@jaredly/bs-core/lib/js/caml_int32.js',\n  'stdlib/format': '@jaredly/bs-core/lib/js/format.js',\n  'stdlib/stringLabels': '@jaredly/bs-core/lib/js/stringLabels.js',\n  'stdlib/belt_MutableSetString':\n    '@jaredly/bs-core/lib/js/belt_MutableSetString.js',\n  'stdlib/stdLabels': '@jaredly/bs-core/lib/js/stdLabels.js',\n  'stdlib/caml_lexer': '@jaredly/bs-core/lib/js/caml_lexer.js',\n  'stdlib/printf': '@jaredly/bs-core/lib/js/printf.js',\n  'stdlib/unixLabels': '@jaredly/bs-core/lib/js/unixLabels.js',\n  'stdlib/bs_obj': '@jaredly/bs-core/lib/js/bs_obj.js',\n  'stdlib/moreLabels': '@jaredly/bs-core/lib/js/moreLabels.js',\n  'stdlib/js_mapperRt': '@jaredly/bs-core/lib/js/js_mapperRt.js',\n  'stdlib/belt_Set': '@jaredly/bs-core/lib/js/belt_Set.js',\n  'stdlib/js_types': '@jaredly/bs-core/lib/js/js_types.js',\n  'stdlib/caml_oo': '@jaredly/bs-core/lib/js/caml_oo.js',\n  'stdlib/belt_internalMapInt':\n    '@jaredly/bs-core/lib/js/belt_internalMapInt.js',\n  'stdlib/pervasives': '@jaredly/bs-core/lib/js/pervasives.js',\n  'stdlib/scanf': '@jaredly/bs-core/lib/js/scanf.js',\n  'stdlib/std_exit': '@jaredly/bs-core/lib/js/std_exit.js',\n  'stdlib/belt': '@jaredly/bs-core/lib/js/belt.js',\n  'stdlib/caml_parser': '@jaredly/bs-core/lib/js/caml_parser.js',\n  'stdlib/js_cast': '@jaredly/bs-core/lib/js/js_cast.js',\n  'stdlib/belt_internalAVLset':\n    '@jaredly/bs-core/lib/js/belt_internalAVLset.js',\n  'stdlib/belt_HashSetInt': '@jaredly/bs-core/lib/js/belt_HashSetInt.js',\n  'stdlib/belt_MutableMapString':\n    '@jaredly/bs-core/lib/js/belt_MutableMapString.js',\n  'stdlib/caml_array': '@jaredly/bs-core/lib/js/caml_array.js',\n  'stdlib/belt_MutableSetInt': '@jaredly/bs-core/lib/js/belt_MutableSetInt.js',\n  'stdlib/digest': '@jaredly/bs-core/lib/js/digest.js',\n  'stdlib/marshal': '@jaredly/bs-core/lib/js/marshal.js',\n  'stdlib/belt_List': '@jaredly/bs-core/lib/js/belt_List.js',\n  'stdlib/caml_weak': '@jaredly/bs-core/lib/js/caml_weak.js',\n  'stdlib/js_string': '@jaredly/bs-core/lib/js/js_string.js',\n  'stdlib/callback': '@jaredly/bs-core/lib/js/callback.js',\n  'stdlib/queue': '@jaredly/bs-core/lib/js/queue.js',\n  'stdlib/camlinternalMod': '@jaredly/bs-core/lib/js/camlinternalMod.js',\n  'stdlib/caml_bytes': '@jaredly/bs-core/lib/js/caml_bytes.js',\n  'stdlib/camlinternalFormatBasics':\n    '@jaredly/bs-core/lib/js/camlinternalFormatBasics.js',\n  'stdlib/belt_MutableMap': '@jaredly/bs-core/lib/js/belt_MutableMap.js',\n  'stdlib/belt_internalSetInt':\n    '@jaredly/bs-core/lib/js/belt_internalSetInt.js',\n  'stdlib/belt_Array': '@jaredly/bs-core/lib/js/belt_Array.js',\n  'stdlib/caml_io': '@jaredly/bs-core/lib/js/caml_io.js',\n  'stdlib/camlinternalLazy': '@jaredly/bs-core/lib/js/camlinternalLazy.js',\n  'stdlib/gc': '@jaredly/bs-core/lib/js/gc.js',\n  'stdlib/belt_HashSetString': '@jaredly/bs-core/lib/js/belt_HashSetString.js',\n  'stdlib/belt_internalBuckets':\n    '@jaredly/bs-core/lib/js/belt_internalBuckets.js',\n  'stdlib/belt_HashMapInt': '@jaredly/bs-core/lib/js/belt_HashMapInt.js',\n  'stdlib/parsing': '@jaredly/bs-core/lib/js/parsing.js',\n  'stdlib/js_list': '@jaredly/bs-core/lib/js/js_list.js',\n  'stdlib/belt_MutableMapInt': '@jaredly/bs-core/lib/js/belt_MutableMapInt.js',\n  'stdlib/bs_string': '@jaredly/bs-core/lib/js/bs_string.js',\n  'stdlib/caml_primitive': '@jaredly/bs-core/lib/js/caml_primitive.js',\n  'stdlib/belt_internalSetString':\n    '@jaredly/bs-core/lib/js/belt_internalSetString.js',\n  'stdlib/js_boolean': '@jaredly/bs-core/lib/js/js_boolean.js',\n  'stdlib/list': '@jaredly/bs-core/lib/js/list.js',\n  'stdlib/js_float': '@jaredly/bs-core/lib/js/js_float.js',\n  'stdlib/js_int': '@jaredly/bs-core/lib/js/js_int.js',\n  'stdlib/unix': '@jaredly/bs-core/lib/js/unix.js',\n  'stdlib/js_int64': '@jaredly/bs-core/lib/js/js_int64.js',\n  'stdlib/set': '@jaredly/bs-core/lib/js/set.js',\n  'stdlib/array': '@jaredly/bs-core/lib/js/array.js',\n  'stdlib/arrayLabels': '@jaredly/bs-core/lib/js/arrayLabels.js',\n  'stdlib/bytes': '@jaredly/bs-core/lib/js/bytes.js',\n  'stdlib/caml_queue': '@jaredly/bs-core/lib/js/caml_queue.js',\n  'stdlib/caml_missing_polyfill':\n    '@jaredly/bs-core/lib/js/caml_missing_polyfill.js',\n  'stdlib/lazy': '@jaredly/bs-core/lib/js/lazy.js',\n  'stdlib/node': '@jaredly/bs-core/lib/js/node.js',\n  'stdlib/string': '@jaredly/bs-core/lib/js/string.js',\n  'stdlib/block': '@jaredly/bs-core/lib/js/block.js',\n  'stdlib/js_math': '@jaredly/bs-core/lib/js/js_math.js',\n  'stdlib/js_dict': '@jaredly/bs-core/lib/js/js_dict.js',\n  'stdlib/arg': '@jaredly/bs-core/lib/js/arg.js',\n  'stdlib/belt_MapInt': '@jaredly/bs-core/lib/js/belt_MapInt.js',\n  'stdlib/belt_internalAVLtree':\n    '@jaredly/bs-core/lib/js/belt_internalAVLtree.js',\n  'stdlib/belt_HashMap': '@jaredly/bs-core/lib/js/belt_HashMap.js',\n  'stdlib/js_global': '@jaredly/bs-core/lib/js/js_global.js',\n  'stdlib/belt_MutableQueue': '@jaredly/bs-core/lib/js/belt_MutableQueue.js',\n  'stdlib/js_null_undefined': '@jaredly/bs-core/lib/js/js_null_undefined.js',\n  'stdlib/js_option': '@jaredly/bs-core/lib/js/js_option.js',\n  'stdlib/caml_format': '@jaredly/bs-core/lib/js/caml_format.js',\n  'stdlib/printexc': '@jaredly/bs-core/lib/js/printexc.js',\n  'stdlib/genlex': '@jaredly/bs-core/lib/js/genlex.js',\n  'stdlib/caml_exceptions': '@jaredly/bs-core/lib/js/caml_exceptions.js',\n  'stdlib/weak': '@jaredly/bs-core/lib/js/weak.js',\n  'stdlib/sys': '@jaredly/bs-core/lib/js/sys.js',\n  'stdlib/filename': '@jaredly/bs-core/lib/js/filename.js',\n  'stdlib/caml_obj': '@jaredly/bs-core/lib/js/caml_obj.js',\n  'stdlib/belt_MapDict': '@jaredly/bs-core/lib/js/belt_MapDict.js',\n  'stdlib/complex': '@jaredly/bs-core/lib/js/complex.js',\n  'stdlib/js_exn': '@jaredly/bs-core/lib/js/js_exn.js',\n  'stdlib/hashtbl': '@jaredly/bs-core/lib/js/hashtbl.js',\n  'stdlib/belt_MapString': '@jaredly/bs-core/lib/js/belt_MapString.js',\n  'stdlib/js_json': '@jaredly/bs-core/lib/js/js_json.js',\n  'stdlib/js_vector': '@jaredly/bs-core/lib/js/js_vector.js',\n  'stdlib/js_date': '@jaredly/bs-core/lib/js/js_date.js',\n  'stdlib/belt_SetInt': '@jaredly/bs-core/lib/js/belt_SetInt.js',\n  'stdlib/caml_sys': '@jaredly/bs-core/lib/js/caml_sys.js',\n  'stdlib/js_nativeint': '@jaredly/bs-core/lib/js/js_nativeint.js',\n  'stdlib/js_undefined': '@jaredly/bs-core/lib/js/js_undefined.js',\n  'stdlib/caml_int64': '@jaredly/bs-core/lib/js/caml_int64.js',\n  'stdlib/caml_md5': '@jaredly/bs-core/lib/js/caml_md5.js',\n  'stdlib/caml_oo_curry': '@jaredly/bs-core/lib/js/caml_oo_curry.js',\n  'stdlib/belt_SetString': '@jaredly/bs-core/lib/js/belt_SetString.js',\n  'stdlib/caml_float': '@jaredly/bs-core/lib/js/caml_float.js',\n  'stdlib/bigarray': '@jaredly/bs-core/lib/js/bigarray.js',\n  'stdlib/caml_builtin_exceptions':\n    '@jaredly/bs-core/lib/js/caml_builtin_exceptions.js',\n  'stdlib/obj': '@jaredly/bs-core/lib/js/obj.js',\n  'stdlib/js_typed_array': '@jaredly/bs-core/lib/js/js_typed_array.js',\n  'stdlib/map': '@jaredly/bs-core/lib/js/map.js',\n  'stdlib/int32': '@jaredly/bs-core/lib/js/int32.js',\n  'stdlib/listLabels': '@jaredly/bs-core/lib/js/listLabels.js',\n  'stdlib/belt_Range': '@jaredly/bs-core/lib/js/belt_Range.js',\n  'stdlib/belt_Option': '@jaredly/bs-core/lib/js/belt_Option.js',\n  'stdlib/js_array': '@jaredly/bs-core/lib/js/js_array.js',\n  'stdlib/camlinternalFormat': '@jaredly/bs-core/lib/js/camlinternalFormat.js',\n  'stdlib/nativeint': '@jaredly/bs-core/lib/js/nativeint.js',\n  'stdlib/lexing': '@jaredly/bs-core/lib/js/lexing.js',\n  'stdlib/js_primitive': '@jaredly/bs-core/lib/js/js_primitive.js',\n  'stdlib/camlinternalOO': '@jaredly/bs-core/lib/js/camlinternalOO.js',\n  'stdlib/belt_SortArrayString':\n    '@jaredly/bs-core/lib/js/belt_SortArrayString.js',\n  'stdlib/buffer': '@jaredly/bs-core/lib/js/buffer.js',\n  'stdlib/bytesLabels': '@jaredly/bs-core/lib/js/bytesLabels.js',\n  'stdlib/belt_internalBucketsType':\n    '@jaredly/bs-core/lib/js/belt_internalBucketsType.js',\n  'stdlib/curry': '@jaredly/bs-core/lib/js/curry.js',\n  'stdlib/belt_internalSetBuckets':\n    '@jaredly/bs-core/lib/js/belt_internalSetBuckets.js',\n  'stdlib/belt_HashSet': '@jaredly/bs-core/lib/js/belt_HashSet.js',\n  'stdlib/stack': '@jaredly/bs-core/lib/js/stack.js',\n  'bs-platform': '@jaredly/bs-core',\n};\n","import { Preset } from 'sandpack-core';\n\nimport stylesTranspiler from '../../transpilers/style';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\nimport reasonTranspiler from '../../transpilers/reason';\n\nimport reasonRemap from './reason-remap';\n\nexport default function initialize() {\n  const preset = new Preset(\n    'reason',\n    ['web.js', 'js', 're', 'json', 'web.jsx', 'jsx'],\n    reasonRemap,\n    { hasDotEnv: true }\n  );\n\n  preset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.(m|c)?jsx?$/.test(module.path), [\n    { transpiler: babelTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.re$/.test(module.path), [\n    { transpiler: reasonTranspiler },\n    { transpiler: babelTranspiler, options: { simpleRequire: true } },\n  ]);\n\n  preset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preset;\n}\n","import { dispatch } from 'codesandbox-api';\nimport { LoaderContext } from 'sandpack-core';\nimport { StyleTranspiler } from '../../../transpilers/style';\nimport insertCss from '../../../transpilers/style/utils/insert-css';\nimport toDefinition from '../../../transpilers/style/utils/to-definition';\nimport getModules from '../../../transpilers/style/get-modules';\n\nconst getStyleId = (id: string) => id + '-css';\n\nclass DojoStyleTranspiler extends StyleTranspiler {\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    const id = getStyleId(loaderContext._module.getId());\n    const { path } = loaderContext;\n    let modules = loaderContext.getModules();\n    let result = modules.find(module => module.path === `${path}.js`);\n\n    if (!result && path.indexOf('/node_modules/') > -1) {\n      try {\n        await loaderContext.resolveTranspiledModuleAsync(`${path}.js`, {\n          ignoredExtensions: [],\n        });\n      } catch {\n        // Do nothing\n      }\n    }\n    modules = loaderContext.getModules();\n    result = modules.find(module => module.path === `${path}.js`);\n    if (result) {\n      return { transpiledCode: `${insertCss(id, code)}\\n${result.code}` };\n    }\n\n    const { code: packageJson } = modules.find(\n      module => module.path === '/package.json'\n    );\n    const { name: packageName } = JSON.parse(packageJson);\n    const [, baseName] = /\\/([^/.]*)[^/]*$/.exec(path);\n    const key = `${packageName}/${baseName}`;\n    const { css, exportTokens } = await getModules(code, loaderContext);\n    let cssResult = insertCss(id, css);\n    cssResult += `\\nmodule.exports=${JSON.stringify({\n      ' _key': key,\n      ...exportTokens,\n    })};`;\n    dispatch({ type: 'add-extra-lib', path, code: toDefinition(exportTokens) });\n    return { transpiledCode: cssResult };\n  }\n}\n\nconst transpiler = new DojoStyleTranspiler();\n\nexport { DojoStyleTranspiler as StyleTranspiler };\n\nexport default transpiler;\n","import { join, absolute } from '@codesandbox/common/lib/utils/path';\nimport { Preset } from 'sandpack-core';\nimport csbDynamicImportTranspiler from 'sandpack-core/lib/transpiler/transpilers/csb-dynamic-import';\n\nimport typescriptTranspiler from '../../transpilers/typescript';\nimport rawTranspiler from '../../transpilers/raw';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport dojoStylesTranspiler from './transpilers/style';\nimport babelTranspiler from '../../transpilers/babel';\n\nexport default function initialize() {\n  const preset = new Preset(\n    '@dojo/cli-create-app',\n    ['ts', 'tsx', 'js', 'json'],\n    {},\n    {\n      setup: async manager => {\n        const stylesPath = absolute(join('src', 'main.css'));\n\n        try {\n          const tModule = await manager.resolveTranspiledModuleAsync(\n            stylesPath,\n            null\n          );\n          await tModule.transpile(manager);\n          tModule.setIsEntry(true);\n          tModule.evaluate(manager);\n        } catch (e) {\n          if (e.type === 'module-not-found') {\n            // Do nothing\n          } else {\n            throw e;\n          }\n        }\n      },\n    }\n  );\n\n  preset.registerTranspiler(module => /\\.tsx?$/.test(module.path), [\n    { transpiler: typescriptTranspiler },\n    { transpiler: csbDynamicImportTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.(c|m)?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        isV7: true,\n        config: {\n          parserOpts: {\n            plugins: ['objectRestSpread'],\n          },\n        },\n      },\n    },\n  ]);\n\n  preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.m\\.css$/.test(module.path), [\n    { transpiler: dojoStylesTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  preset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preset;\n}\n","import { Preset, Manager } from 'sandpack-core';\nimport rawTranspiler from '../../transpilers/raw';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\n\nconst transpilerMap = {\n  'codesandbox:raw': rawTranspiler,\n  'codesandbox:json': jsonTranspiler,\n  'codesandbox:babel': babelTranspiler,\n};\n\nasync function registerTranspilers(\n  manager: Manager,\n  preset: Preset,\n  transpilerConfig: { [expression: string]: string[] }\n) {\n  const savedTranspilers = {};\n  const configModule = await manager.resolveTranspiledModule(\n    '/.codesandbox/template.json',\n    '/',\n    []\n  );\n  configModule.setIsEntry(true);\n\n  const initializers = await Promise.all(\n    Object.keys(transpilerConfig).map(async expression => {\n      const transpilers = transpilerConfig[expression];\n\n      const evaluatedTranspilers = await Promise.all(\n        transpilers.map(async t => {\n          if (savedTranspilers[t]) {\n            return savedTranspilers[t];\n          }\n\n          if (t.startsWith('codesandbox:')) {\n            const transpiler = transpilerMap[t];\n\n            if (!transpiler) {\n              throw new Error(\n                `Could not register custom transpiler: ${t} is unknown to Sandpack.`\n              );\n            }\n\n            return { transpiler };\n          }\n\n          const tModule = await manager.resolveTranspiledModule(\n            t,\n            '/.codesandbox/template.json',\n            []\n          );\n\n          if (tModule.shouldTranspile()) {\n            tModule.initiators.add(configModule);\n            configModule.dependencies.add(tModule);\n\n            await tModule.transpile(manager);\n          }\n\n          const transpiler = tModule.compilation\n            ? tModule.compilation.exports\n            : tModule.evaluate(manager);\n\n          savedTranspilers[t] = transpiler;\n\n          return {\n            transpiler,\n          };\n        })\n      );\n\n      return () => {\n        const regex = new RegExp(expression);\n        preset.registerTranspiler(\n          module => regex.test(module.path),\n          evaluatedTranspilers\n        );\n      };\n    })\n  );\n\n  preset.resetTranspilers();\n\n  initializers.forEach(x => x());\n}\n\nexport default function initialize() {\n  let initialized = false;\n  const customPreset = new Preset('custom', undefined, undefined, {\n    setup: async (manager: Manager) => {\n      // if (updatedModules.some(m => m.module.path.startsWith('/.codesandbox'))) {\n      //   initialized = false;\n      //   manager.clearCompiledCache();\n      //   manager.clearCache();\n      // }\n\n      if (!initialized) {\n        // eslint-disable-next-line no-console\n        console.log('Initializing custom template');\n        customPreset.resetTranspilers();\n        // Our JS/JSON transpiler to transpile the transpilers\n        customPreset.registerTranspiler(m => /\\.jsx?$/.test(m.path), [\n          { transpiler: babelTranspiler },\n        ]);\n\n        customPreset.registerTranspiler(m => /\\.json$/.test(m.path), [\n          { transpiler: jsonTranspiler },\n        ]);\n\n        const customConfig =\n          manager.configurations.customTemplate &&\n          manager.configurations.customTemplate.parsed;\n        if (!customConfig) {\n          throw new Error('No configuration specified for the custom template');\n        }\n\n        const { sandpack } = customConfig;\n\n        if (sandpack) {\n          customPreset.defaultAliases = sandpack.defaultAliases || [];\n\n          if (sandpack.transpilers) {\n            await registerTranspilers(\n              manager,\n              customPreset,\n              sandpack.transpilers\n            );\n          }\n        }\n\n        customPreset.registerTranspiler(() => true, [\n          { transpiler: rawTranspiler },\n        ]);\n        initialized = true;\n      }\n    },\n  });\n\n  return customPreset;\n}\n","import { Preset } from 'sandpack-core';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport postcssTranspiler from '../../transpilers/postcss';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport coffeeTranspiler from '../../transpilers/coffee';\nimport noopTranspiler from '../../transpilers/noop';\n\nexport default function initialize() {\n  const solidPreset = new Preset(\n    'solid',\n    [\n      'js',\n      'mjs',\n      'cjs',\n      'jsx',\n      'ts',\n      'tsx',\n      'json',\n      'less',\n      'scss',\n      'sass',\n      'styl',\n      'css',\n    ],\n    {},\n    {\n      processDependencies: async originalDeps => {\n        const deps = { ...originalDeps };\n\n        if (!deps['solid-refresh']) {\n          deps['solid-refresh'] = '^0.5.2';\n        }\n\n        if (!deps['babel-preset-solid']) {\n          deps['babel-preset-solid'] = '^1.2.0';\n        }\n\n        if (!deps['@babel/core']) {\n          deps['@babel/core'] = '^7.15.8';\n        }\n\n        if (!deps['@babel/plugin-syntax-dynamic-import']) {\n          deps['@babel/plugin-syntax-dynamic-import'] = '^7.8.3';\n        }\n\n        if (!deps['@babel/runtime']) {\n          deps['@babel/runtime'] = '^7.17.9';\n        }\n\n        if (!deps['@babel/preset-typescript']) {\n          deps['@babel/preset-typescript'] = '^7.16.7';\n        }\n\n        // No babel 6 support\n        delete deps['babel-core'];\n\n        return deps;\n      },\n    }\n  );\n\n  solidPreset.registerTranspiler(module => /\\.coffee$/.test(module.path), [\n    { transpiler: coffeeTranspiler },\n    { transpiler: babelTranspiler, options: { isV7: true } },\n  ]);\n\n  solidPreset.registerTranspiler(\n    module => /\\.(m|c)?(t|j)sx?$/.test(module.path),\n    [\n      {\n        transpiler: babelTranspiler,\n        options: {\n          isV7: true,\n          dynamicCSSModules: true,\n        },\n      },\n    ]\n  );\n\n  solidPreset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: postcssTranspiler },\n    { transpiler: stylesTranspiler },\n  ]);\n\n  solidPreset.registerTranspiler(module => /\\.s[c|a]ss$/.test(module.path), [\n    { transpiler: sassTranspiler },\n    { transpiler: postcssTranspiler },\n    {\n      transpiler: stylesTranspiler,\n    },\n  ]);\n\n  solidPreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    options: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    options: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    options: {},\n  };\n  const styles = {\n    css: [],\n    scss: [sassWithConfig],\n    sass: [sassWithConfig],\n    less: [lessWithConfig],\n    styl: [stylusWithConfig],\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    return Object.keys(styles).forEach(type => {\n      solidPreset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}$`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  registerStyleTranspilers();\n\n  solidPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  solidPreset.registerTranspiler(() => false, [{ transpiler: noopTranspiler }]);\n\n  return solidPreset;\n}\n","/* eslint-disable import/no-named-as-default-member, import/default, import/no-named-as-default */\nimport {\n  react,\n  vue,\n  parcel,\n  svelte,\n  preact,\n  reactTs,\n  angular,\n  cxjs,\n  babel,\n  dojo,\n  custom,\n  reason,\n  esmReact,\n  solid,\n} from '@codesandbox/common/lib/templates';\n\nimport { isPreact10 } from '@codesandbox/common/lib/utils/is-preact-10';\nimport { PackageJSON } from '@codesandbox/common/lib/types';\nimport { reactPreset } from './presets/create-react-app';\nimport vuePreset from './presets/vue-cli';\nimport { preactPreset, preactPresetV8 } from './presets/preact-cli';\nimport sveltePreset from './presets/svelte';\nimport angularPreset from './presets/angular-cli';\nimport parcelPreset from './presets/parcel';\nimport babelPreset from './presets/babel-repl';\nimport cxjsPreset from './presets/cxjs';\nimport reasonPreset from './presets/reason';\nimport dojoPreset from './presets/dojo';\nimport customPreset from './presets/custom';\nimport solidPreset from './presets/solid';\n\nexport default async function getPreset(template: string, pkg: PackageJSON) {\n  switch (template) {\n    case esmReact.name:\n    case reactTs.name:\n    case react.name: {\n      const preset = await reactPreset(pkg);\n      if (template === esmReact.name) {\n        preset.experimentalEsmSupport = true;\n      }\n      return preset;\n    }\n    case preact.name:\n      if (isPreact10(pkg.dependencies, pkg.devDependencies)) {\n        return preactPreset();\n      }\n      return preactPresetV8();\n    case reason.name:\n      return reasonPreset();\n    case vue.name:\n      return vuePreset();\n    case svelte.name:\n      return sveltePreset();\n    case angular.name:\n      return angularPreset();\n    case parcel.name:\n      return parcelPreset();\n    case babel.name:\n      return babelPreset();\n    case cxjs.name:\n      return cxjsPreset();\n    case dojo.name:\n      return dojoPreset();\n    case solid.name:\n      return solidPreset();\n    case custom.name:\n      return customPreset();\n    default:\n      return reactPreset(pkg);\n  }\n}\n","function getExternalResourcesConcatenation(resources: Array<string>) {\n  return resources.join('');\n}\n/* eslint-disable no-cond-assign */\nfunction clearExternalResources() {\n  let el: HTMLElement | null = null;\n  // eslint-disable-next-line no-cond-assign\n  while ((el = document.getElementById('external-css'))) {\n    el.remove();\n  }\n\n  // eslint-disable-next-line no-cond-assign\n  while ((el = document.getElementById('external-js'))) {\n    el.remove();\n  }\n}\n/* eslint-enable */\n\nexport function createExternalCSSLink(resource: string): HTMLLinkElement {\n  const link = document.createElement('link');\n\n  link.id = 'external-css';\n  link.rel = 'stylesheet';\n  link.type = 'text/css';\n  link.href = resource;\n  link.media = 'all';\n\n  return link;\n}\n\nfunction addCSS(resource: string) {\n  const head = document.getElementsByTagName('head')[0];\n  const link = createExternalCSSLink(resource);\n\n  head.appendChild(link);\n\n  return link;\n}\n\nexport function createExternalJSLink(resource): HTMLScriptElement {\n  const script = document.createElement('script');\n\n  script.setAttribute('src', resource);\n  script.async = false;\n  script.setAttribute('id', 'external-js');\n\n  return script;\n}\n\nfunction addJS(resource: string) {\n  const script = createExternalJSLink(resource);\n\n  document.head.appendChild(script);\n\n  return script;\n}\n\nexport function resourceIsCss(resource: string): boolean {\n  const match = resource.match(/\\.([^.]*)$/);\n\n  return (match && match[1] === 'css') || resource.includes('fonts.googleapis');\n}\n\nfunction addResource(resource: string) {\n  const el = resourceIsCss(resource) ? addCSS(resource) : addJS(resource);\n\n  return new Promise(r => {\n    el.onload = r;\n    el.onerror = r;\n  });\n}\n\nfunction waitForLoaded() {\n  return new Promise(resolve => {\n    if (document.readyState !== 'complete') {\n      window.addEventListener('load', resolve);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\nlet cachedExternalResources = '';\n\nexport default async function handleExternalResources(externalResources) {\n  const extResString = getExternalResourcesConcatenation(externalResources);\n  if (extResString !== cachedExternalResources) {\n    clearExternalResources();\n    await Promise.all(externalResources.map(addResource));\n    cachedExternalResources = extResString;\n\n    return waitForLoaded();\n  }\n\n  return Promise.resolve();\n}\n","let iframeReference: HTMLIFrameElement = null;\nlet iframeRenderedAt = 0;\n\nexport function resetOverlay() {\n  try {\n    // We add a delay to unmounting the iframe if the iframe has only just\n    // appeared. We want to do this, because we want to prevent a flicker for\n    // the user, which is a bad perceivement.\n    const delay = Date.now() - iframeRenderedAt > 1000 ? 0 : 1000;\n\n    /**\n     * To make sure no iframe rendered between now and the clear we do\n     * after a timeout, we keep track of the last rendered at and compare\n     * it before clearing the iframe\n     */\n    const lastIframeRenderedAt = iframeRenderedAt;\n\n    setTimeout(() => {\n      if (iframeReference && lastIframeRenderedAt === iframeRenderedAt) {\n        iframeReference.style.opacity = '0';\n        setTimeout(() => {\n          if (iframeReference.parentNode) {\n            document.body.removeChild(iframeReference);\n          }\n        }, 500);\n      }\n    }, delay);\n  } catch (e) {\n    /* nothing */\n  }\n}\n\nconst setIframeStyle = (iframe: HTMLIFrameElement, showFullScreen: boolean) => {\n  iframe.setAttribute(\n    'style',\n    showFullScreen\n      ? `position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 214748366;opacity: 1;transition: opacity 0.15s ease-in;`\n      : `position: fixed; top: 10px; left: 10px; height: 45px; width: 45px; border-radius: 2px; border: none; z-index: 214748366; opacity: 0;transition: opacity 0.15s ease-in;`\n  );\n};\n\nfunction createIframe(showFullScreen: boolean): Promise<HTMLIFrameElement> {\n  return new Promise(resolve => {\n    iframeRenderedAt = Date.now();\n    if (iframeReference) {\n      document.body.appendChild(iframeReference);\n      requestAnimationFrame(() => {\n        iframeReference.style.opacity = '1';\n      });\n      setIframeStyle(iframeReference, showFullScreen);\n      resolve(iframeReference);\n      return;\n    }\n\n    const iframe = document.createElement('iframe');\n    setIframeStyle(iframe, showFullScreen);\n\n    iframe.setAttribute('id', 'frame');\n\n    iframeReference = iframe;\n\n    document.body.appendChild(iframe);\n\n    requestAnimationFrame(() => {\n      iframe.style.opacity = '1';\n    });\n\n    if (iframe.contentDocument) {\n      resolve(iframe);\n    } else if (document.getElementById('frame')) {\n      document.getElementById('frame').onload = () => {\n        resolve(iframe);\n      };\n    } else {\n      resolve(iframe);\n    }\n  });\n}\n\nexport async function createOverlay(html: string, showFullScreen: boolean) {\n  const iframe: HTMLIFrameElement = await createIframe(showFullScreen);\n\n  const isMounted = !!document.getElementById('frame');\n  if (!isMounted) {\n    document.body.appendChild(iframe);\n  }\n\n  iframe.contentDocument.body.innerHTML = html;\n\n  return iframe;\n}\n","// @ts-ignore\nimport indicatorHtml from '!raw-loader!./indicator-screen.html';\n// This is the loading screen\n// @ts-ignore\nimport loadingHtml from '!raw-loader!./loading-screen.html';\n\nimport { createOverlay, resetOverlay } from './overlay-manager';\n\ntype LoadingScreen = {\n  type: 'loading';\n  text: string;\n  showFullScreen?: boolean;\n};\n\ntype Screen = LoadingScreen;\n\nlet currentScreen: Screen = null;\nlet loadTimeoutID: number = null;\nlet iframeReference = null;\n\nfunction changeText(text: string) {\n  if (iframeReference) {\n    if (\n      iframeReference.contentDocument &&\n      iframeReference.contentDocument.getElementsByClassName('text') &&\n      iframeReference.contentDocument.getElementsByClassName('text').item(0)\n    ) {\n      iframeReference.contentDocument\n        .getElementsByClassName('text')\n        .item(0).textContent = text;\n    }\n  }\n}\n\nexport function resetScreen() {\n  currentScreen = null;\n  iframeReference = null;\n  resetOverlay();\n\n  clearTimeout(loadTimeoutID);\n  loadTimeoutID = null;\n}\n\nexport default function setScreen(screen: Screen) {\n  const showFullScreen =\n    typeof screen.showFullScreen === 'undefined' ? true : screen.showFullScreen;\n\n  if (!iframeReference) {\n    if (!loadTimeoutID) {\n      // Give the illusion of faster loading by showing the loader screen later\n      loadTimeoutID = window.setTimeout(\n        async () => {\n          if (!iframeReference && currentScreen) {\n            iframeReference = await createOverlay(\n              showFullScreen ? loadingHtml : indicatorHtml,\n              showFullScreen\n            );\n          }\n\n          if (currentScreen) {\n            changeText(currentScreen.text);\n          }\n\n          loadTimeoutID = null;\n        },\n        showFullScreen ? 1000 : 0\n      );\n    }\n  } else if (currentScreen) {\n    changeText(screen.text);\n  }\n\n  currentScreen = screen;\n}\n","/* eslint-disable import/no-cycle */\nimport parseConfigurations from '@codesandbox/common/lib/templates/configuration/parse';\nimport getDefinition, {\n  TemplateType,\n} from '@codesandbox/common/lib/templates/index';\nimport { ParsedConfigurationFiles } from '@codesandbox/common/lib/templates/template';\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport { isBabel7 } from '@codesandbox/common/lib/utils/is-babel-7';\nimport { absolute } from '@codesandbox/common/lib/utils/path';\nimport VERSION from '@codesandbox/common/lib/version';\nimport { clearErrorTransformers, dispatch, reattach } from 'codesandbox-api';\nimport flatten from 'lodash-es/flatten';\nimport initializeErrorTransformers from 'sandbox-hooks/errors/transformers';\nimport { inject, uninject } from 'sandbox-hooks/react-error-overlay/overlay';\nimport {\n  consumeCache,\n  deleteAPICache,\n  saveCache,\n} from 'sandpack-core/lib/cache';\nimport { Module } from 'sandpack-core/lib/types/module';\nimport * as metrics from '@codesandbox/common/lib/utils/metrics';\nimport { NpmRegistry } from '@codesandbox/common/lib/types';\nimport { Manager, TranspiledModule } from 'sandpack-core';\n\nimport { loadDependencies, NPMDependencies } from 'sandpack-core/lib/npm';\nimport {\n  NpmRegistryFetcher,\n  NpmRegistryOpts,\n} from 'sandpack-core/lib/npm/dynamic/fetch-protocols/npm-registry';\nimport {\n  getSandpackSecret,\n  removeSandpackSecret,\n  getProtocolAndHostWithSSE,\n} from 'sandpack-core/lib/sandpack-secret';\nimport {\n  evalBoilerplates,\n  findBoilerplate,\n  getBoilerplates,\n} from './boilerplates';\nimport defaultBoilerplates from './boilerplates/default-boilerplates';\nimport createCodeSandboxOverlay from './codesandbox-overlay';\nimport getPreset from './eval';\nimport handleExternalResources from './external-resources';\nimport setScreen, { resetScreen } from './status-screen';\nimport { showRunOnClick } from './status-screen/run-on-click';\nimport { SCRIPT_VERSION } from '.';\n\nlet manager: Manager | null = null;\nlet actionsEnabled = false;\n\nconst debug = _debug('cs:compiler');\n\nexport function areActionsEnabled() {\n  return actionsEnabled;\n}\n\nexport function getCurrentManager(): Manager | null {\n  return manager;\n}\n\nexport function getHTMLParts(html: string) {\n  if (html.includes('<body>')) {\n    const bodyMatcher = /<body.*>([\\s\\S]*)<\\/body>/m;\n    const headMatcher = /<head>([\\s\\S]*)<\\/head>/m;\n\n    const headMatch = html.match(headMatcher);\n    const bodyMatch = html.match(bodyMatcher);\n    const head = headMatch && headMatch[1] ? headMatch[1] : '';\n    const body = bodyMatch && bodyMatch[1] ? bodyMatch[1] : html;\n\n    return { body, head };\n  }\n\n  return { head: '', body: html };\n}\n\nlet testRunner: import('./eval/tests/jest-lite').default | undefined;\nfunction sendTestCount(modules: { [path: string]: Module }) {\n  const tests = testRunner.findTests(modules);\n\n  dispatch({\n    type: 'test',\n    event: 'test_count',\n    count: tests.length,\n  });\n}\n\nlet firstLoad = true;\nlet hadError = false;\nlet lastHeadHTML = null;\nlet lastBodyHTML = null;\nlet lastHeight = 0;\nlet changedModuleCount = 0;\nlet usedCache = false;\n\n// TODO make devDependencies lazy loaded by the packager\nconst WHITELISTED_DEV_DEPENDENCIES = [\n  'redux-devtools',\n  'redux-devtools-dock-monitor',\n  'redux-devtools-log-monitor',\n  'redux-logger',\n  'enzyme',\n  'react-addons-test-utils',\n  'react-test-renderer',\n  'identity-obj-proxy',\n  'react-refresh',\n];\n\nconst BABEL_DEPENDENCIES = [\n  'babel-preset-env',\n  'babel-preset-latest',\n  'babel-preset-es2015',\n  'babel-preset-es2015-loose',\n  'babel-preset-es2016',\n  'babel-preset-es2017',\n  'babel-preset-react',\n  'babel-preset-stage-0',\n  'babel-preset-stage-1',\n  'babel-preset-stage-2',\n  'babel-preset-stage-3',\n];\n\n// Dependencies that we actually don't need, we will replace this by a dynamic\n// system in the future\nconst PREINSTALLED_DEPENDENCIES = [\n  'web-vitals', // Blocked by ad blockers :(\n  'react-scripts',\n  'react-scripts-ts',\n  'parcel-bundler',\n  'babel-plugin-check-es2015-constants',\n  'babel-plugin-external-helpers',\n  'babel-plugin-inline-replace-variables',\n  'babel-plugin-syntax-async-functions',\n  'babel-plugin-syntax-async-generators',\n  'babel-plugin-syntax-class-constructor-call',\n  'babel-plugin-syntax-class-properties',\n  'babel-plugin-syntax-decorators',\n  'babel-plugin-syntax-do-expressions',\n  'babel-plugin-syntax-exponentiation-operator',\n  'babel-plugin-syntax-export-extensions',\n  'babel-plugin-syntax-flow',\n  'babel-plugin-syntax-function-bind',\n  'babel-plugin-syntax-function-sent',\n  'babel-plugin-syntax-jsx',\n  'babel-plugin-syntax-object-rest-spread',\n  'babel-plugin-syntax-trailing-function-commas',\n  'babel-plugin-transform-async-functions',\n  'babel-plugin-transform-async-to-generator',\n  'babel-plugin-transform-async-to-module-method',\n  'babel-plugin-transform-class-constructor-call',\n  'babel-plugin-transform-class-properties',\n  'babel-plugin-transform-decorators',\n  'babel-plugin-transform-decorators-legacy',\n  'babel-plugin-transform-do-expressions',\n  'babel-plugin-transform-es2015-arrow-functions',\n  'babel-plugin-transform-es2015-block-scoped-functions',\n  'babel-plugin-transform-es2015-block-scoping',\n  'babel-plugin-transform-es2015-classes',\n  'babel-plugin-transform-es2015-computed-properties',\n  'babel-plugin-transform-es2015-destructuring',\n  'babel-plugin-transform-es2015-duplicate-keys',\n  'babel-plugin-transform-es2015-for-of',\n  'babel-plugin-transform-es2015-function-name',\n  'babel-plugin-transform-es2015-instanceof',\n  'babel-plugin-transform-es2015-literals',\n  'babel-plugin-transform-es2015-modules-amd',\n  'babel-plugin-transform-es2015-modules-commonjs',\n  'babel-plugin-transform-es2015-modules-systemjs',\n  'babel-plugin-transform-es2015-modules-umd',\n  'babel-plugin-transform-es2015-object-super',\n  'babel-plugin-transform-es2015-parameters',\n  'babel-plugin-transform-es2015-shorthand-properties',\n  'babel-plugin-transform-es2015-spread',\n  'babel-plugin-transform-es2015-sticky-regex',\n  'babel-plugin-transform-es2015-template-literals',\n  'babel-plugin-transform-es2015-typeof-symbol',\n  'babel-plugin-transform-es2015-unicode-regex',\n  'babel-plugin-transform-es3-member-expression-literals',\n  'babel-plugin-transform-es3-property-literals',\n  'babel-plugin-transform-es5-property-mutators',\n  'babel-plugin-transform-eval',\n  'babel-plugin-transform-exponentiation-operator',\n  'babel-plugin-transform-export-extensions',\n  'babel-plugin-transform-flow-comments',\n  'babel-plugin-transform-flow-strip-types',\n  'babel-plugin-transform-function-bind',\n  'babel-plugin-transform-jscript',\n  'babel-plugin-transform-object-assign',\n  'babel-plugin-transform-object-rest-spread',\n  'babel-plugin-transform-object-set-prototype-of-to-assign',\n  'babel-plugin-transform-proto-to-assign',\n  'babel-plugin-transform-react-constant-elements',\n  'babel-plugin-transform-react-display-name',\n  'babel-plugin-transform-react-inline-elements',\n  'babel-plugin-transform-react-jsx',\n  'babel-plugin-transform-react-jsx-compat',\n  'babel-plugin-transform-react-jsx-self',\n  'babel-plugin-transform-react-jsx-source',\n  'babel-plugin-transform-regenerator',\n  'babel-plugin-transform-runtime',\n  'babel-plugin-transform-strict-mode',\n  'babel-plugin-undeclared-variables-check',\n  'babel-plugin-dynamic-import-node',\n  'babel-plugin-detective',\n  'babel-plugin-transform-prevent-infinite-loops',\n  'babel-plugin-transform-vue-jsx',\n  'flow-bin',\n  ...BABEL_DEPENDENCIES,\n];\n\nfunction getDependencies(\n  parsedPackage,\n  templateDefinition,\n  configurations\n): NPMDependencies {\n  const {\n    dependencies: d = {},\n    peerDependencies = {},\n    devDependencies = {},\n  } = parsedPackage;\n\n  let returnedDependencies = { ...peerDependencies };\n\n  const foundWhitelistedDevDependencies = [...WHITELISTED_DEV_DEPENDENCIES];\n\n  // Add all babel plugins/presets to whitelisted dependencies\n  if (configurations && configurations.babel && configurations.babel.parsed) {\n    flatten(configurations.babel.parsed.presets || [])\n      .filter(p => typeof p === 'string')\n      .forEach((p: string) => {\n        const [first, ...parts] = p.split('/');\n        const prefixedName = p.startsWith('@')\n          ? first + '/babel-preset-' + parts.join('/')\n          : `babel-preset-${p}`;\n\n        foundWhitelistedDevDependencies.push(p);\n        foundWhitelistedDevDependencies.push(prefixedName);\n      });\n\n    flatten(configurations.babel.parsed.plugins || [])\n      .filter(p => typeof p === 'string')\n      .forEach((p: string) => {\n        const [first, ...parts] = p.split('/');\n        const prefixedName = p.startsWith('@')\n          ? first + '/babel-plugin-' + parts.join('/')\n          : `babel-plugin-${p}`;\n\n        foundWhitelistedDevDependencies.push(p);\n        foundWhitelistedDevDependencies.push(prefixedName);\n      });\n  }\n\n  Object.keys(d).forEach(dep => {\n    if (dep === 'reason-react') {\n      return; // is replaced\n    }\n\n    returnedDependencies[dep] = d[dep];\n  });\n\n  Object.keys(devDependencies).forEach(dep => {\n    if (foundWhitelistedDevDependencies.indexOf(dep) > -1) {\n      // Skip @vue/babel-preset-app\n      if (dep === '@vue/babel-preset-app') {\n        return;\n      }\n\n      returnedDependencies[dep] = devDependencies[dep];\n    }\n  });\n\n  if (d.vue) {\n    returnedDependencies['@vue/babel-plugin-jsx'] = '1.0.6';\n  }\n\n  const sandpackConfig =\n    (configurations.customTemplate &&\n      configurations.customTemplate.parsed &&\n      configurations.customTemplate.parsed.sandpack) ||\n    {};\n\n  const preinstalledDependencies =\n    sandpackConfig.preInstalledDependencies == null\n      ? PREINSTALLED_DEPENDENCIES\n      : sandpackConfig.preInstalledDependencies;\n\n  if (templateDefinition.name === 'reason') {\n    returnedDependencies = {\n      ...returnedDependencies,\n      '@jaredly/bs-core': '3.0.0-alpha.2',\n      '@jaredly/reason-react': '0.3.4',\n    };\n  }\n\n  // Always include this, because most sandboxes need this with babel6 and the\n  // packager will only include the package.json for it.\n  if (isBabel7(d, devDependencies)) {\n    // Don't pin this version, because other dependencies installed by the sandbox might need\n    // @babel/runtime as well, multiple versions of @babel/runtime will lead to problems.\n    returnedDependencies['@babel/runtime'] =\n      returnedDependencies['@babel/runtime'] || '^7.3.1';\n  } else {\n    returnedDependencies['babel-runtime'] =\n      returnedDependencies['babel-runtime'] || '6.26.0';\n  }\n\n  returnedDependencies['node-libs-browser'] = '2.2.1';\n\n  preinstalledDependencies.forEach(dep => {\n    if (returnedDependencies[dep]) {\n      delete returnedDependencies[dep];\n    }\n  });\n\n  return returnedDependencies;\n}\n\nasync function initializeManager(\n  sandboxId: string,\n  template: TemplateType,\n  modules: { [path: string]: Module },\n  configurations: ParsedConfigurationFiles,\n  {\n    hasFileResolver = false,\n    customNpmRegistries = [],\n    reactDevTools,\n    teamId,\n  }: {\n    hasFileResolver?: boolean;\n    customNpmRegistries?: NpmRegistry[];\n    reactDevTools?: 'legacy' | 'latest';\n    teamId?: string;\n  } = {}\n) {\n  const newManager = new Manager(\n    sandboxId,\n    await getPreset(template, configurations.package.parsed),\n    modules,\n    {\n      hasFileResolver,\n      versionIdentifier: SCRIPT_VERSION,\n      reactDevTools,\n    }\n  );\n\n  /**\n   * If a team-id is provided, we can mount a registryUrl and proxy\n   * dependencies request through CSB proxy\n   */\n  if (teamId) {\n    const sandpackToken = getSandpackSecret();\n\n    if (!sandpackToken) {\n      dispatch({\n        type: 'action',\n        action: 'show-error',\n        message: 'NPM_REGISTRY_UNAUTHENTICATED_REQUEST',\n      });\n\n      throw new Error('NPM_REGISTRY_UNAUTHENTICATED_REQUEST');\n    }\n\n    const domain = getProtocolAndHostWithSSE();\n\n    const responseRegistry = await fetch(`${domain}/api/v1/sandpack/registry`, {\n      headers: { Authorization: `Bearer ${sandpackToken}` },\n    }).catch(() => {\n      removeSandpackSecret();\n      throw new Error('NPM_REGISTRY_UNAUTHENTICATED_REQUEST');\n    });\n\n    const registry = (await responseRegistry.json()) as {\n      auth_type: string;\n      enabled_scopes: string[];\n      limit_to_scopes: true;\n      proxy_enabled: false;\n      registry_auth_key: string;\n      registry_type: string;\n      registry_url: string;\n    };\n\n    customNpmRegistries.push({\n      enabledScopes: registry.enabled_scopes,\n      limitToScopes: registry.limit_to_scopes,\n      proxyEnabled: registry.proxy_enabled,\n      registryUrl:\n        registry.registry_url || `${domain}/api/v1/sandpack/registry/`,\n      registryAuthToken: registry.registry_auth_key || sandpackToken,\n      registryAuthType: registry.auth_type,\n    });\n  }\n\n  // Add the custom registered npm registries\n  for (const registry of customNpmRegistries) {\n    if (!registry.registryUrl) {\n      throw new Error(\n        'Unable to fetch required dependency: neither a `registryUrl` nor a `codesandboxTeamId` was provided.'\n      );\n    }\n\n    const cleanUrl = registry.registryUrl.replace(/\\/$/, '');\n\n    const options: NpmRegistryOpts = { proxyEnabled: registry.proxyEnabled };\n\n    if (registry.limitToScopes) {\n      options.scopeWhitelist = registry.enabledScopes;\n    }\n\n    // In case the API is not including the field yet\n    if (typeof registry.proxyEnabled === 'undefined') {\n      registry.proxyEnabled = true;\n    }\n    if (registry.proxyEnabled) {\n      // With our custom proxy on the server we want to handle downloading\n      // the tarball. So we proxy it.\n      options.provideTarballUrl = (name: string, version: string) =>\n        `${cleanUrl}/${name.replace('/', '%2f')}/${version}`;\n    }\n\n    if (registry.registryAuthToken) {\n      options.authToken = registry.registryAuthToken;\n    }\n\n    const protocol = new NpmRegistryFetcher(cleanUrl, options);\n\n    newManager.prependNpmProtocolDefinition({\n      protocol,\n      condition: protocol.condition,\n    });\n  }\n\n  return newManager;\n}\n\nasync function updateManager(\n  managerModules: { [path: string]: Module },\n  configurations: ParsedConfigurationFiles\n): Promise<TranspiledModule[]> {\n  manager.updateConfigurations(configurations);\n  await manager.preset.setup(manager);\n  return manager.updateData(managerModules).then(x => {\n    changedModuleCount = x.length;\n    return x;\n  });\n}\n\nfunction getDocumentHeight() {\n  const { body } = document;\n  const html = document.documentElement;\n\n  return Math.max(body.scrollHeight, body.offsetHeight, html.offsetHeight);\n}\n\nfunction sendResize() {\n  const height = getDocumentHeight();\n\n  if (lastHeight !== height) {\n    dispatch({ type: 'resize', height });\n  }\n\n  lastHeight = height;\n}\n\nfunction initializeDOMMutationListener() {\n  if (\n    typeof window === 'undefined' ||\n    typeof window.MutationObserver !== 'function'\n  ) {\n    return;\n  }\n\n  // Listen on document body for any change that could trigger a resize of the content\n  // When a change is found, the sendResize function will determine if a message is dispatched\n  const observer = new MutationObserver(sendResize);\n\n  observer.observe(document, {\n    attributes: true,\n    childList: true,\n    subtree: true,\n  });\n\n  window.addEventListener('unload', () => {\n    observer.disconnect();\n  });\n}\n\nlet resizePollingTimer;\nfunction resizePolling() {\n  clearInterval(resizePollingTimer);\n  resizePollingTimer = setInterval(sendResize, 500);\n\n  window.addEventListener('unload', () => {\n    clearInterval(resizePollingTimer);\n  });\n}\n\nfunction onWindowResize() {\n  window.addEventListener('resize', sendResize);\n\n  window.addEventListener('unload', () => {\n    window.removeEventListener('resize', sendResize);\n  });\n}\n\nfunction overrideDocumentClose() {\n  const oldClose = window.document.close;\n\n  window.document.close = function close(...args) {\n    try {\n      oldClose.call(document, args);\n    } finally {\n      inject();\n      reattach();\n    }\n  };\n}\n\noverrideDocumentClose();\n\ninterface CompileOptions {\n  sandboxId?: string | null;\n  modules: { [path: string]: Module };\n  customNpmRegistries?: NpmRegistry[];\n  externalResources: string[];\n  hasActions?: boolean;\n  isModuleView?: boolean;\n  template: TemplateType;\n  entry: string;\n  showOpenInCodeSandbox?: boolean;\n  showErrorScreen?: boolean;\n  showLoadingScreen?: boolean;\n  skipEval?: boolean;\n  hasFileResolver?: boolean;\n  disableDependencyPreprocessing?: boolean;\n  clearConsoleDisabled?: boolean;\n  reactDevTools?: 'legacy' | 'latest';\n  teamId?: string;\n}\n\nasync function compile(opts: CompileOptions) {\n  const {\n    sandboxId,\n    modules,\n    externalResources,\n    customNpmRegistries = [],\n    hasActions,\n    isModuleView = false,\n    template,\n    entry,\n    showOpenInCodeSandbox,\n    showLoadingScreen = true,\n    showErrorScreen = true,\n    skipEval = false,\n    hasFileResolver = false,\n    disableDependencyPreprocessing = false,\n    clearConsoleDisabled = false,\n    reactDevTools,\n    teamId,\n  } = opts;\n\n  if (firstLoad) {\n    // Clear the console on first load, but don't clear the console on HMR updates\n    if (!clearConsoleDisabled) {\n      // @ts-ignore Chrome behaviour\n      console.clear('__internal__'); // eslint-disable-line no-console\n      dispatch({ type: 'clear-console' });\n    }\n  }\n\n  dispatch({ type: 'start', firstLoad });\n  metrics.measure('compilation');\n\n  const startTime = Date.now();\n  try {\n    uninject(manager && manager.webpackHMR ? true : hadError);\n    inject(showErrorScreen);\n    clearErrorTransformers();\n    initializeErrorTransformers();\n  } catch (e) {\n    console.error(e);\n  }\n\n  hadError = false;\n\n  actionsEnabled = hasActions;\n\n  let managerModuleToTranspile = null;\n  try {\n    const templateDefinition = getDefinition(template);\n    const configurations = parseConfigurations(\n      template,\n      templateDefinition.configurationFiles,\n      path => modules[path]\n    );\n\n    const errors = Object.keys(configurations)\n      .map(c => configurations[c])\n      .filter(x => x.error);\n\n    if (errors.length) {\n      const e = new Error(\n        `We weren't able to parse: '${errors[0].path}': ${errors[0].error.message}`\n      );\n\n      // @ts-ignore\n      e.fileName = errors[0].path;\n\n      throw e;\n    }\n\n    const packageJSON = modules['/package.json'];\n\n    if (!packageJSON) {\n      throw new Error('Could not find package.json');\n    }\n\n    const parsedPackageJSON = configurations.package.parsed;\n\n    dispatch({ type: 'status', status: 'installing-dependencies' });\n\n    manager =\n      manager ||\n      (await initializeManager(sandboxId, template, modules, configurations, {\n        hasFileResolver,\n        customNpmRegistries,\n        reactDevTools,\n        teamId,\n      }));\n\n    let dependencies: NPMDependencies = getDependencies(\n      parsedPackageJSON,\n      templateDefinition,\n      configurations\n    );\n\n    dependencies = await manager.preset.processDependencies(dependencies);\n\n    metrics.measure('dependencies');\n\n    if (firstLoad && showLoadingScreen) {\n      setScreen({\n        type: 'loading',\n        showFullScreen: firstLoad,\n        text: 'Installing Dependencies',\n      });\n    }\n\n    const { manifest, isNewCombination } = await loadDependencies(\n      dependencies,\n      ({ done, total, remainingDependencies }) => {\n        if (!showLoadingScreen) {\n          return;\n        }\n\n        const progress = total - done;\n        if (done === total) {\n          return;\n        }\n\n        if (progress <= 6) {\n          setScreen({\n            type: 'loading',\n            showFullScreen: firstLoad,\n            text: `Installing Dependencies ${progress}/${total} (${remainingDependencies.join(\n              ','\n            )})`,\n          });\n        } else {\n          setScreen({\n            type: 'loading',\n            showFullScreen: firstLoad,\n            text: `Installing Dependencies ${progress}/${total}`,\n          });\n        }\n      },\n      {\n        disableExternalConnection: disableDependencyPreprocessing,\n        resolutions: parsedPackageJSON.resolutions,\n      }\n    );\n    metrics.endMeasure('dependencies', { displayName: 'Dependencies' });\n\n    const shouldReloadManager =\n      (isNewCombination && !firstLoad) || manager.id !== sandboxId;\n\n    if (shouldReloadManager) {\n      // Just reset the whole manager if it's a new combination\n      manager.dispose();\n\n      manager = await initializeManager(\n        sandboxId,\n        template,\n        modules,\n        configurations,\n        { hasFileResolver, reactDevTools }\n      );\n    }\n\n    if (shouldReloadManager || firstLoad) {\n      // Now initialize the data the manager can only use once dependencies are loaded\n\n      manager.setManifest(manifest);\n      // We save the state of transpiled modules, and load it here again. Gives\n      // faster initial loads.\n      usedCache = await consumeCache(manager);\n    }\n\n    metrics.measure('transpilation');\n\n    const updatedModules = (await updateManager(modules, configurations)) || [];\n\n    const possibleEntries = templateDefinition.getEntries(configurations);\n\n    const foundMain = isModuleView\n      ? entry\n      : possibleEntries.find(p => Boolean(modules[p]));\n\n    if (!foundMain) {\n      throw new Error(\n        `Could not find entry file: ${possibleEntries[0]}. You can specify one in package.json by defining a \\`main\\` property.`\n      );\n    }\n\n    const main = absolute(foundMain);\n    managerModuleToTranspile = modules[main];\n\n    if (showLoadingScreen) {\n      setScreen({\n        type: 'loading',\n        text: 'Transpiling Modules...',\n        showFullScreen: firstLoad,\n      });\n    }\n\n    dispatch({ type: 'status', status: 'transpiling' });\n    manager.setStage('transpilation');\n\n    await manager.verifyTreeTranspiled();\n    await manager.transpileModules(managerModuleToTranspile);\n\n    metrics.endMeasure('transpilation', { displayName: 'Transpilation' });\n\n    dispatch({ type: 'status', status: 'evaluating' });\n    manager.setStage('evaluation');\n\n    if (!skipEval) {\n      resetScreen();\n\n      try {\n        // We set it as a time value for people that run two sandboxes on one computer\n        // they execute at the same time and we don't want them to conflict, so we check\n        // if the message was set a second ago\n        if (\n          firstLoad &&\n          localStorage.getItem('running') &&\n          Date.now() - +localStorage.getItem('running') > 8000 &&\n          !process.env.SANDPACK\n        ) {\n          localStorage.removeItem('running');\n          showRunOnClick();\n          return;\n        }\n\n        localStorage.setItem('running', '' + Date.now());\n      } catch (e) {\n        /* no */\n      }\n\n      await manager.preset.preEvaluate(manager, updatedModules);\n\n      if (!manager.webpackHMR) {\n        const htmlEntries = templateDefinition.getHTMLEntries(configurations);\n        const htmlModulePath = htmlEntries.find(p => Boolean(modules[p]));\n        const htmlModule = modules[htmlModulePath];\n        let html =\n          template === 'vue-cli'\n            ? '<div id=\"app\"></div>'\n            : '<div id=\"root\"></div>';\n        if (htmlModule && htmlModule.code) {\n          html = htmlModule.code;\n        }\n        const { head, body } = getHTMLParts(html);\n\n        if (lastHeadHTML && lastHeadHTML !== head) {\n          document.location.reload();\n        }\n        if (manager && lastBodyHTML && lastBodyHTML !== body) {\n          manager.clearCompiledCache();\n        }\n\n        // Whether the server has provided the HTML file. If that isn't the case\n        // we have to fall back to setting `document.body.innerHTML`, which isn't\n        // preferred.\n        const serverProvidedHTML =\n          modules[htmlEntries[0]] || manager.preset.htmlDisabled;\n        // If it has the loading screen element, it definitely didn't server-render\n        const isLoadingScreen = Boolean(\n          document.getElementById('csb-loading-screen')\n        );\n        if (\n          !serverProvidedHTML ||\n          !firstLoad ||\n          isLoadingScreen ||\n          process.env.LOCAL_SERVER ||\n          process.env.SANDPACK\n        ) {\n          // The HTML is loaded from the server as a static file, no need to set the innerHTML of the body\n          // on the first run. However, if there's no server to provide the static file (in the case of a local server\n          // or sandpack), then do it anyways.\n          document.body.innerHTML = body;\n\n          // Add head tags or anything that comes from the template\n          // This way, title and other meta tags will overwrite whatever the bundler <head> tag has.\n          // At this point, the original head was parsed and the files loaded / preloaded.\n\n          // TODO: figure out a way to fix this without overriding head changes done by the bundler\n          // Original issue: https://github.com/codesandbox/sandpack/issues/32\n          // if (document.head && head) {\n          //   document.head.innerHTML = head;\n          // }\n        }\n        lastBodyHTML = body;\n        lastHeadHTML = head;\n      }\n\n      metrics.measure('external-resources');\n      await handleExternalResources(externalResources);\n      metrics.endMeasure('external-resources', {\n        displayName: 'External Resources',\n      });\n\n      const oldHTML = document.body.innerHTML;\n      metrics.measure('evaluation');\n      const evalled = manager.evaluateModule(managerModuleToTranspile, {\n        force: isModuleView,\n      });\n\n      metrics.endMeasure('evaluation', { displayName: 'Evaluation' });\n\n      const domChanged =\n        !manager.preset.htmlDisabled && oldHTML !== document.body.innerHTML;\n\n      if (\n        isModuleView &&\n        !domChanged &&\n        !managerModuleToTranspile.path.endsWith('.html')\n      ) {\n        const isReact =\n          managerModuleToTranspile.code &&\n          managerModuleToTranspile.code.includes('React');\n\n        if (isReact && evalled) {\n          // initiate boilerplates\n          if (getBoilerplates().length === 0) {\n            try {\n              await evalBoilerplates(defaultBoilerplates);\n            } catch (e) {\n              // eslint-disable-next-line no-console\n              console.log(\"Couldn't load all boilerplates: \" + e.message);\n            }\n          }\n\n          const boilerplate = findBoilerplate(managerModuleToTranspile);\n\n          if (boilerplate) {\n            try {\n              boilerplate.module.default(evalled);\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        }\n      }\n    }\n\n    await manager.preset.teardown(manager, updatedModules);\n\n    if (firstLoad && showOpenInCodeSandbox) {\n      createCodeSandboxOverlay(modules);\n    }\n\n    debug(`Total time: ${Date.now() - startTime}ms`);\n\n    metrics.endMeasure('compilation', { displayName: 'Compilation' });\n    metrics.endMeasure('total', { displayName: 'Total', lastTime: 0 });\n    dispatch({\n      type: 'success',\n    });\n\n    saveCache(managerModuleToTranspile, manager, changedModuleCount, firstLoad);\n\n    setTimeout(async () => {\n      try {\n        const jestLiteModule = await import('./eval/tests/jest-lite');\n        const TestRunner = jestLiteModule.default;\n        testRunner = testRunner || new TestRunner(manager);\n\n        sendTestCount(modules);\n      } catch (e) {\n        if (process.env.NODE_ENV === 'development') {\n          console.error('Test error', e);\n        }\n      }\n    }, 600);\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.log('Error in sandbox:');\n    console.error(e);\n\n    if (manager) {\n      manager.clearCache();\n\n      if (firstLoad && changedModuleCount === 0) {\n        await deleteAPICache(manager.id, SCRIPT_VERSION);\n      }\n    }\n\n    const event = new Event('error');\n    // @ts-ignore\n    event.error = e;\n\n    window.dispatchEvent(event);\n\n    hadError = true;\n  } finally {\n    setTimeout(() => {\n      try {\n        // Set a timeout so there's a chance that we also catch runtime errors\n        localStorage.removeItem('running');\n      } catch (e) {\n        /* no */\n      }\n    }, 600);\n\n    if (manager) {\n      const managerState = {\n        ...(await manager.serialize({ optimizeForSize: false })),\n      };\n      delete managerState.cachedPaths;\n      managerState.entry = managerModuleToTranspile\n        ? managerModuleToTranspile.path\n        : null;\n\n      dispatch({\n        type: 'state',\n        state: managerState,\n      });\n\n      manager.isFirstLoad = false;\n    }\n\n    if (firstLoad) {\n      metrics\n        .persistMeasurements({\n          sandboxId,\n          cacheUsed: usedCache,\n          browser: navigator.userAgent,\n          version: VERSION,\n        })\n        .catch(() => {\n          /* Do nothing with the error */\n        });\n    }\n  }\n\n  if (!hadError && firstLoad) {\n    initializeDOMMutationListener();\n  }\n\n  onWindowResize();\n  resizePolling();\n\n  sendResize();\n\n  firstLoad = false;\n\n  dispatch({ type: 'status', status: 'idle' });\n  dispatch({ type: 'done', compilatonError: hadError });\n\n  if (typeof (window as any).__puppeteer__ === 'function') {\n    setTimeout(() => {\n      // Give everything some time to evaluate\n      (window as any).__puppeteer__({\n        type: 'done',\n        compilatonError: hadError,\n      });\n    }, 100);\n  }\n}\n\nconst tasks: CompileOptions[] = [];\nlet runningTask = null;\n\nasync function executeTaskIfAvailable() {\n  if (tasks.length) {\n    runningTask = tasks.pop();\n    await compile(runningTask).catch(console.error);\n    runningTask = null;\n\n    executeTaskIfAvailable();\n  }\n}\n\n/**\n * We want to ensure that no tasks (commands from the editor) are run in parallel,\n * this could result in state inconsistency. That's why we execute tasks after eachother,\n * and if there are 3 tasks we will remove the second task, this one is unnecessary as it is not the\n * latest version.\n */\nexport default function queueTask(data: CompileOptions) {\n  // If same task is running, ignore it.\n  if (runningTask && JSON.stringify(runningTask) === JSON.stringify(data)) {\n    return;\n  }\n\n  tasks[0] = data;\n\n  if (!runningTask) {\n    executeTaskIfAvailable();\n  }\n}\n","import { camelizeKeys } from 'humps';\nimport { isStandalone, listen, dispatch } from 'codesandbox-api';\nimport _debug from '@codesandbox/common/lib/utils/debug';\n\nimport registerServiceWorker from '@codesandbox/common/lib/registerServiceWorker';\nimport requirePolyfills from '@codesandbox/common/lib/load-dynamic-polyfills';\nimport { getModulePath } from '@codesandbox/common/lib/sandbox/modules';\nimport { endMeasure } from '@codesandbox/common/lib/utils/metrics';\nimport { generateFileFromSandbox } from '@codesandbox/common/lib/templates/configuration/package-json';\nimport { getSandboxId } from '@codesandbox/common/lib/utils/url-generator';\nimport { getPreviewSecret } from 'sandbox-hooks/preview-secret';\nimport { show404 } from 'sandbox-hooks/not-found-screen';\n\nimport {\n  requestSandpackSecretFromApp,\n  removeSandpackSecret,\n} from 'sandpack-core/lib/sandpack-secret';\nimport compile, { getCurrentManager } from './compile';\n\nconst host = process.env.CODESANDBOX_HOST;\nconst withServiceWorker = !process.env.SANDPACK;\nconst debug = _debug('cs:sandbox');\n\nexport const SCRIPT_VERSION =\n  // @ts-ignore\n  document.currentScript && document.currentScript.src;\n\ndebug('Booting sandbox v2');\n\nendMeasure('boot', { lastTime: 0, displayName: 'Boot' });\n\nrequirePolyfills().then(() => {\n  if (withServiceWorker) {\n    registerServiceWorker('/sandbox-service-worker.js', {});\n  }\n\n  function sendReady() {\n    dispatch({ type: 'initialized', url: document.location.href });\n  }\n\n  let isInitializationCompile = true;\n  async function handleMessage(data, source) {\n    if (source) {\n      if (data.type === 'compile') {\n        // In sandpack we always broadcast a compile message from every manager whenever 1 frame reconnects.\n        // We do this because the initialized message does comes before the handshake is done, so there's no channel id.\n        // To prevent every mounted frame from recompiling, we explicitly flag that this compilation is meant to be the\n        // first compilation done by the frame. This way we can ensure that only the new frame, that\n        // hasn't compiled yet, will respond to the compile call. This currently is Sandpack specific.\n        if (\n          data.isInitializationCompile !== undefined &&\n          data.isInitializationCompile === true &&\n          !isInitializationCompile\n        ) {\n          return;\n        }\n\n        compile(data);\n        isInitializationCompile = false;\n      } else if (data.type === 'get-transpiler-context') {\n        const manager = getCurrentManager();\n\n        if (manager) {\n          const context = await manager.getTranspilerContext();\n          dispatch({\n            type: 'transpiler-context',\n            data: context,\n          });\n        } else {\n          dispatch({\n            type: 'transpiler-context',\n            data: {},\n          });\n        }\n      } else if (data.type === 'sign-in') {\n        await requestSandpackSecretFromApp(data.teamId);\n\n        window.location.reload();\n      } else if (data.type === 'sign-out') {\n        removeSandpackSecret();\n\n        window.location.reload();\n      }\n    }\n  }\n\n  if (!isStandalone) {\n    listen(handleMessage);\n\n    sendReady();\n  }\n\n  if (process.env.NODE_ENV === 'test' || isStandalone) {\n    // We need to fetch the sandbox ourselves...\n    const id = getSandboxId();\n    window\n      .fetch(host + `/api/v1/sandboxes/${id}`, {\n        headers: {\n          Accept: 'application/json',\n          Authorization: `Basic ${getPreviewSecret()}`,\n        },\n        credentials: 'include',\n        mode: 'cors',\n      })\n      .then(res => {\n        if (res.status === 404) {\n          show404(id);\n        }\n        return res.json();\n      })\n      .then(res => {\n        const camelized: any = camelizeKeys(res);\n        camelized.data.npmDependencies = res.data.npm_dependencies;\n\n        return camelized;\n      })\n      .then(x => {\n        const moduleObject = {};\n\n        // We convert the modules to a format the manager understands\n        x.data.modules.forEach(m => {\n          const path = getModulePath(x.data.modules, x.data.directories, m.id);\n          moduleObject[path] = {\n            path,\n            code: m.code,\n          };\n        });\n\n        if (!moduleObject['/package.json']) {\n          moduleObject['/package.json'] = {\n            code: generateFileFromSandbox(x.data),\n            path: '/package.json',\n          };\n        }\n\n        const data = {\n          sandboxId: id,\n          modules: moduleObject,\n          entry: '/' + x.data.entry,\n          externalResources: x.data.externalResources,\n          dependencies: x.data.npmDependencies,\n          customNpmRegistries: x.data.npmRegistries,\n          hasActions: false,\n          template: x.data.template,\n          version: 3,\n          disableDependencyPreprocessing: document.location.search.includes(\n            'csb-dynamic-download'\n          ),\n        };\n\n        compile(data);\n      });\n  }\n});\n\n/**\n * For tracking purpose\n */\ndocument.addEventListener('click', () => {\n  dispatch({ type: 'document-focus' });\n});\n"],"sourceRoot":""}